[{"content":"","date":"2025-12-27","externalUrl":null,"permalink":"/","section":"cerry2022","summary":"","title":"cerry2022","type":"page"},{"content":"","date":"2025-12-27","externalUrl":null,"permalink":"/tags/hp39gii/","section":"Tags","summary":"","title":"Hp39gii","type":"tags"},{"content":"","date":"2025-12-27","externalUrl":null,"permalink":"/tags/hpcalc/","section":"Tags","summary":"","title":"Hpcalc","type":"tags"},{"content":"æœ€è¿‘å­¦ä¹ ä½¿ç”¨ImHexå¹¶å¯¹hp39giiçš„.hpprgmç¨‹åºè¿›è¡Œäº†ä¸€äº›é€†å‘ç ”ç©¶ï¼Œç›®å‰å·²ç»å–å¾—å¾ˆå¤§çš„è¿›å±•ï¼Œå…ˆæ¥ä»‹ç»ImHexï¼ŒImHexæ˜¯ä¸€ä¸ªåŸºäºImGUIçš„åå…­è¿›åˆ¶ç¼–è¾‘å™¨ï¼Œé›†æˆäº†å¾ˆå¼ºå¤§çš„ Pattern Language(æ¨¡å¼è¯­è¨€) ï¼Œåˆ©ç”¨è¿™ä¸ªæ¨¡å¼è¯­è¨€ï¼Œå¯ä»¥ä¼˜é›…åœ°ç¼–å†™ç¨‹åºé€†å‘åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶ç»“æ„ã€‚\nè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªHPPPLè¯­è¨€çš„.hppramæ–‡ä»¶æ ¼å¼å§ï¼ é¦–å…ˆä»¥ä¸€ä¸ªç¨‹åºä½œä¸ºç¤ºä¾‹ï¼ŒHP39GIIç¨‹åº-å›¾åƒå¤„ç†åº“ BLibï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¦ç®€å•å‹ç¼©ç®—æ³•çš„å›¾åƒä¿å­˜å’ŒåŠ è½½åº“ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—å™¨ä¸Šç¼–è¾‘å¥½åï¼ŒæŒ‰ä¸‹SHIFT+1ã€Prgmã€‘ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å¤§å°10KBï¼Œè€Œå®é™…ä¸Šæºç æœ¬èº«åªæœ‰3KBï¼Œé‚£ä¹ˆå¤šå‡ºæ¥çš„é‚£äº›æ•°æ®æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ UTF16-LEæ‰“å¼€ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯ä¸€äº›ä¹±ç ï¼Œä½†æ˜¯ä¾ç¨€èƒ½çœ‹è§å‡ ä¸ªå­—æ¯ï¼Œæ¯”å¦‚1BLOAD\u00001BSAVE BREAK ï¼Œè€ƒè™‘åˆ°HPPPLè¯­è¨€å¦‚æ­¤é«˜çš„æ‰§è¡Œæ•ˆç‡ï¼Œæ˜¯å¦ä½¿ç”¨äº†æŸç§ç±»ä¼¼ç¼–è¯‘çš„æœºåˆ¶å‘¢ï¼Œä¸ºäº†æ·±å…¥åˆ†æï¼Œæˆ‘ä»¬ä½¿ç”¨ImHexæ¥æŸ¥çœ‹ï¼š ä¸éš¾å‘ç°ï¼Œ0x10ä»¥åŠ0x20è¿™ä¸¤ä¸ªä½ç½®éƒ½æœ‰ä¸€ä¸²UTF-16ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œ\u0026quot;BLOAD\u0026quot; å’Œ \u0026quot;BSAVE\u0026quot;ï¼Œä¸¤è€…æ­£å¥½å¯¹åº”ç¨‹åºå¯¹åº”çš„ä¸¤ä¸ªå¯¼å‡ºå…¨å±€å‡½æ•°ã€‚ç»“åˆÂ HeaderÂ ç»“æ„ä½“åˆ†æï¼Œ0x08çš„02 å³ä¸ºå¯¼å‡ºå‡½æ•°çš„æ•°é‡ï¼Œåœ¨æ¯ä¸ªå¯¼å‡ºå‡½æ•°åç§°å‰ï¼Œå­˜åœ¨å›ºå®šçš„æ ‡è¯†ç¬¦Â 0x31ï¼Œå¯ä»¥æ¨æ–­ï¼Œè¿™ä»£è¡¨è¯¥æ¡ç›®ä¸ºâ€œå¯¼å‡ºå‡½æ•°â€ç±»å‹ã€‚ç”±äºè¿™éƒ¨åˆ†æ•°æ®å‘ˆç°çº¿æ€§æ’åˆ—ï¼Œæˆ‘ä»¬å°†å…¶å®šä¹‰ä¸ºå¯¼å‡ºè¡¨ã€‚\næ¥ä¸‹æ¥çš„åˆ†æå¯èƒ½æ¯”è¾ƒéš¾ï¼Œé€šè¿‡å¯¹å¤šä¸ªæ–‡ä»¶é€†å‘å¯¹æ¯”åˆ†æå‘ç°ï¼Œç´§è·Ÿç€å¯¼å‡ºå‡½æ•°åˆ—è¡¨åçš„4å­—èŠ‚å†…å®¹å…¶å®æ˜¯å¯¼å‡ºåˆ—è¡¨åˆ°æºä»£ç åŒºåŸŸçš„å­—èŠ‚è·¨åº¦ï¼Œæˆ‘ç§°è¿™ä¸€æ ¸å¿ƒåŒºåŸŸä¸ºBytecodeBlockã€‚\nå®é™…ä¸Šï¼Œè¯¥åŒºåŸŸæ˜¯ç”±æºä»£ç ç¼–è¯‘è€Œæˆçš„RPNï¼ˆé€†æ³¢å…°è¡¨ç¤ºæ³•ï¼‰å †æ ˆå­—èŠ‚ç åºåˆ—ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒHP Prime ç¼–ç¨‹è¯­è¨€ï¼ˆHPPPLï¼‰åœ¨åº•å±‚æ‰§è¡Œæœºåˆ¶ä¸Šï¼Œå…¶å®æ˜¯åŸºäºæ ˆå¼è™šæ‹Ÿæœºæ¶æ„çš„ã€‚\nè¿™é‡Œæˆ‘ç›´æ¥ç»™å‡ºæœ€åçš„ç»“æœï¼Œæ–‡ä»¶çš„æ•´ä½“ç»“æ„å¦‚ä¸‹\nstruct FileStructure { Header header; // æ–‡ä»¶å¤´ ExportEntry export_table[header.export_fun_count + header.export_var_count]; // å¯¼å‡ºå‡½æ•°åˆ—è¡¨ ExportVar export_vars[header.export_var_count]; // å¯¼å‡ºå˜é‡åˆ—è¡¨ BytecodeBlock bytecode; // æ ¸å¿ƒå­—èŠ‚ç åŒº SourceCodeBlock source_code; // æºç åŒºåŸŸ }; FileStructure file_data @ 0x00; // æ–‡ä»¶è§£æå™¨å¼€å§‹ä½ç½®ï¼ŒæŒ‡å‘0x00 è¿™æ˜¯æ–‡ä»¶å¤´çš„ç»“æ„ï¼š\nstruct Header { le u32 header_end [[type(\u0026#34;hex\u0026#34;), color(\u0026#34;FF0000\u0026#34;)]]; le u32 export_var_count; le u32 export_fun_count; le u32 reserved; }; å¯¼å‡ºå‡½æ•°å’Œå˜é‡çš„ç»“æ„ï¼š\n// å¯¼å‡ºå‡½æ•°åæ˜¯utf16ç¼–ç ï¼Œå‰16bitä¸ºtypeç±»å‹ï¼Œæœ€åæœ‰ä¸¤å­—èŠ‚çš„ç©ºä½™ struct ExportEntry { le u16 type; String16 name [[color(\u0026#34;FFA500\u0026#34;)]]; padding[2]; }; // å¯¼å‡ºå˜é‡è¾ƒä¸ºå¤æ‚ï¼Œæ˜¯ä½¿ç”¨äº†`RPNå †æ ˆå­—èŠ‚ç åºåˆ—`çš„ struct ExportVar { le u32 var_size; u64 block_end_addr = $ + var_size; u64 limit_addr = block_end_addr; BytecodeStreamElement stream[while($ \u0026lt; limit_addr)] [[inline]]; if ($ \u0026lt; limit_addr) { padding[limit_addr - $] [[color(\u0026#34;909090\u0026#34;)]]; } }; é¢å‘å¯¹è±¡çš„æ ˆå¼è™šæ‹Ÿæœº # æœ€å…³é”®çš„åŒºåŸŸæ¥äº†ï¼ŒBytecodeBlockå®é™…ä¸Šéƒ½æ˜¯ä¸€ç³»åˆ—çš„ OpcodeHeader + Bytecode åœ¨å¸¸è§„è¯­è¨€ï¼ˆå¦‚ C æˆ– Javaï¼‰çš„å­—èŠ‚ç ä¸­ï¼ŒæŒ‡ä»¤ï¼ˆOpcodeï¼‰å’Œæ•°æ®ï¼ˆData/Constant Poolï¼‰é€šå¸¸æ˜¯åˆ†ç¦»çš„ã€‚ä½†åœ¨ HPPPL çš„Â BytecodeBlockÂ é‡Œï¼Œä½ ä¼šå‘ç°ä¸€ä¸ªæå…¶æ·±åˆ»çš„ç‰¹ç‚¹ï¼šæŒ‡ä»¤æœ¬èº«å°±æ˜¯å¯¹è±¡çš„æ„é€ å™¨ï¼Œè€Œæ•°æ®æœ¬èº«å°±æ˜¯å¯æ‰§è¡Œçš„æŒ‡ä»¤ã€‚\nè®©æˆ‘ä»¬é¡ºç€è¿™ä¸ªæ€è·¯å¾€åº•å±‚æŒ–ï¼š\nä¸éš¾å‘ç°ï¼Œåœ¨Â BytecodeStreamElementÂ çš„Â matchÂ é€»è¾‘é‡Œï¼Œ0x010104Â æŒ‡å‘çš„æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œ0x01030BÂ æŒ‡å‘çš„æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚æœ€å…³é”®çš„æ¥äº†ï¼šåœ¨è™šæ‹Ÿæœºçœ¼é‡Œï¼Œå®ƒä»¬å¹¶æ²¡æœ‰æœ¬è´¨åŒºåˆ«ã€‚\nåœ¨æ ‡å‡†æ¶æ„ä¸­ï¼šä½ ä¼šçœ‹åˆ°ä¸€æ¡æŒ‡ä»¤å«Â PUSH_MATRIX [index]ã€‚ åœ¨ HPPPL ä¸­ï¼šæ²¡æœ‰Â PUSHÂ æŒ‡ä»¤ã€‚å½“Â BytecodeMatrixÂ ç»“æ„å‡ºç°åœ¨æµä¸­æ—¶ï¼Œå®ƒæœ¬èº«å°±è§¦å‘äº†â€œå°†è‡ªå·±å®ä¾‹åŒ–å¹¶å‹æ ˆâ€çš„åŠ¨ä½œã€‚ å®é™…ä¸Šï¼Œæ¯ä¸€ä¸ªÂ OpcodeHeaderÂ å¹¶ä¸æ˜¯åœ¨æè¿°â€œæ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªä»€ä¹ˆæ•°æ®â€ï¼Œè€Œæ˜¯åœ¨å®šä¹‰ä¸€ä¸ª â€œè‡ªæè¿°å¯¹è±¡â€ã€‚ç”±äºå®ƒæ˜¯ RPNï¼ˆé€†æ³¢å…°ï¼‰æ¶æ„ï¼Œè¿™ç§â€œä¸‡ç‰©å³å¯¹è±¡â€çš„è®¾è®¡æ„å‘³ç€ï¼šæµé‡Œçš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å¯¹è±¡å®ä¾‹ï¼Œå®ƒä»¬è¢«è¯»å–çš„é‚£ä¸€åˆ»ï¼Œå°±å®Œæˆäº†ä»äºŒè¿›åˆ¶æ•°æ®åˆ°è¿è¡Œæ—¶å¯¹è±¡çš„è½¬æ¢ã€‚\n// ===================================================================== // è¿­ä»£å™¨æ ¸å¿ƒï¼šå•æ¡æŒ‡ä»¤è§£æå™¨ // ===================================================================== struct BytecodeStreamElement { u64 limit = parent.limit_addr; u32 peek_val = std::mem::read_unsigned($, 4); u32 peek_opcode = peek_val \u0026amp; 0x00FFFFFF; match (peek_opcode) { // --- æ•°å­—å­—é¢é‡ (å®æ•°) --- (0x000000 | 0x000100 | 0x010100 | 0x020100 | 0x030100): { BytecodeNone bytecode_header; u64 number [[color(\u0026#34;FF0000\u0026#34;), comment(\u0026#34;å®æ•° (Double)\u0026#34;)]]; } // --- å­—ç¬¦ä¸²å­—é¢é‡ --- (0x010102 | 0x020102): { u32 byte_code [[color(\u0026#34;FF00FF\u0026#34;)]]; u16 str_len; String16 str_val [[color(\u0026#34;00FFFF\u0026#34;)]]; } // --- å¤æ•°/è™šéƒ¨å­—é¢é‡ --- // å’Œ0x000100ä¸€èµ·å‡ºç° (0x010503): { BytecodeNone bytecode_header; u64 imag_number [[color(\u0026#34;FF8000\u0026#34;), comment(\u0026#34;è™šéƒ¨/å¤æ•°æ•°å€¼\u0026#34;)]]; } // --- çŸ©é˜µ --- (0x010104): { BytecodeMatrix bitcode_matrix; } // --- åˆ—è¡¨ / å‘é‡ --- (0x010106): { BytecodeDirectory bytecode_dir; } // --- å˜é‡ --- (0x010107 | 0x020107 | 0x030107 | 0x360107 | 0x370107 | 0x400107 | 0x540107 | 0xE90107 | 0x990107): { BytecodeNone bytecode_header; String16 str_val [[color(\u0026#34;00FFFF\u0026#34;)]]; } // --- å¤æ‚è°ƒç”¨ç»“æ„ --- (0x010108 | 0x010308): { BytecodeNone bytecode_header; } // --- å•ä½ --- (0x010109): { u32 byte_code [[color(\u0026#34;FF00FF\u0026#34;)]]; u32 addr0; u16 magic0; String16 str_val [[color(\u0026#34;00FFFF\u0026#34;)]]; u24 magic1; } // --- ç›®å½• --- (0x01010A): { BytecodeDirectory bytecode_dir; } // --- å‡½æ•°å®šä¹‰ --- (0x01030B | 0x01010B): { BytecodeFunction function_def; } // --- é»˜è®¤/æœªçŸ¥æŒ‡ä»¤å¤„ç† --- (_): { if ($ + 2 \u0026lt;= limit) { le u16 unknown_instruction [[type(\u0026#34;hex\u0026#34;), color(\u0026#34;C0C0C0\u0026#34;)]]; } else { u8 raw_byte [[color(\u0026#34;505050\u0026#34;)]]; } } } }; åŠ¨æ€è°ƒè¯•-æ·±å…¥åˆ†æ # éšç€å¯¹Â BytecodeBlockÂ çš„è§£ææ—¥ç›Šæ¸…æ™°ï¼Œä¸€ä¸ªæ›´æ·±å±‚æ¬¡çš„é—®é¢˜æµ®å‡ºæ°´é¢ï¼šè¿™äº›â€œå¯¹è±¡â€åœ¨å†…å­˜ä¸­æ˜¯å¦‚ä½•è¢«ç®¡ç†çš„ï¼Ÿæ—¢ç„¶æ˜¯æ ˆå¼è™šæ‹Ÿæœºï¼Œé‚£ä¹ˆæ ˆåœ¨å“ªé‡Œï¼Ÿç³»ç»Ÿå‡½æ•°ï¼ˆå¦‚Â SIN,Â PRINTï¼‰åˆæ˜¯å¦‚ä½•è¢«ç´¢å¼•çš„ï¼Ÿ\né€šè¿‡å¯¹æ¨¡æ‹Ÿå™¨å†…å­˜çš„åŠ¨æ€è°ƒè¯•ï¼ˆä½¿ç”¨ IDA Pro é…åˆ ImHexï¼‰ï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªç»Ÿç®¡å…¨å±€çš„ç»“æ„ä½“ï¼Œè¯¥æŒ‡é’ˆé€šå¸¸ä½äºå…¨å±€åœ°å€Â dword_DECA00ã€‚æˆ‘å°†å…¶å‘½åä¸ºÂ â€œä¸Šå¸å¯¹è±¡â€ (God Object)Â æˆ–Â VM Contextã€‚\nå®é™…ä¸Šï¼ŒHPPPL è™šæ‹Ÿæœºçš„è¿è¡ŒçŠ¶æ€å¹¶éç¦»æ•£çš„å˜é‡ï¼Œè€Œæ˜¯å°è£…åœ¨è¿™ä¸ªå·¨å¤§çš„ä¸Šä¸‹æ–‡ç»“æ„ä¸­ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿è¡Œæ—¶çš„å†…å­˜æ¨¡å‹å¤§è‡´è¿˜åŸå¦‚ä¸‹ï¼š\n// è¿è¡Œæ—¶æ ¸å¿ƒç»“æ„ï¼šä¸Šå¸å¯¹è±¡ struct VM_Context { u32 state_flags; // +0x00: è™šæ‹ŸæœºçŠ¶æ€æ ‡å¿— padding[0x14]; u32 user_env_ptr; // +0x18: ç”¨æˆ·ç¯å¢ƒæŒ‡é’ˆï¼ˆæŒ‡å‘ç”¨æˆ·å®šä¹‰çš„å…¨å±€å˜é‡ã€å¯¼å‡ºå‡½æ•°ï¼‰ u32 sys_env_ptr; // +0x1C: ç³»ç»Ÿç¯å¢ƒæŒ‡é’ˆï¼ˆè¿™æ˜¯æœ€å…³é”®çš„å­—å…¸ï¼‰ padding[0x354]; u32 sys_func_count; // +0x374: å†…ç½®ç³»ç»Ÿå‡½æ•°æ•°é‡ // ... æ ˆé¡¶æŒ‡é’ˆã€å †å†…å­˜æ± ç­‰ }; // ç³»ç»Ÿç¯å¢ƒæŒ‡é’ˆæŒ‡å‘çš„â€œç¬¦å·è¡¨â€æ¡ç›® struct SystemSymbolEntry { u32 attributes; // å‚æ•°ä¸ªæ•°ã€è¿”å›ç±»å‹ char* name_ptr; // æŒ‡å‘ \u0026#34;SIN\u0026#34;, \u0026#34;PRINT\u0026#34; ç­‰å­—ç¬¦ä¸² void* native_func_ptr; // æŒ‡å‘åº•å±‚ C++ å®ç°ä»£ç  (.textæ®µ) }; è¿™å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨Â BytecodeStreamElementÂ ä¸­ï¼Œ0x08Â (Complex Call) ç±»å‹çš„å¯¹è±¡åªéœ€è¦å­˜å‚¨ä¸€ä¸ªå­—ç¬¦ä¸²åç§°ï¼ˆå¦‚Â \u0026ldquo;SIN\u0026rdquo;ï¼‰ã€‚\næ‰§è¡Œæµç¨‹çš„çœŸç›¸ï¼šæŒ‰åç»‘å®šï¼ˆLate Bindingï¼‰\nå½“è™šæ‹Ÿæœºè§£æåˆ°Â 0x08Â ç±»å‹çš„å¯¹è±¡æ—¶ï¼Œå®ƒå¹¶ä¸æ˜¯ç›´æ¥è·³è½¬ï¼Œè€Œæ˜¯æ‰§è¡Œäº†ä¸€æ¬¡åŠ¨æ€æŸ¥æ‰¾ï¼š\nå‹æ ˆï¼šå°†å‡½æ•°æè¿°ç¬¦å…¥æ ˆã€‚ æŸ¥è¡¨ï¼šæ‹¿ç€å¯¹è±¡ä¸­çš„å­—ç¬¦ä¸²Â nameï¼Œå»Â sys_env_ptrÂ æŒ‡å‘çš„ç³»ç»Ÿç¬¦å·è¡¨ä¸­éå†ã€‚ è°ƒç”¨ï¼šæ‰¾åˆ°å¯¹åº”çš„Â native_func_ptrï¼Œç„¶åæ‰§è¡Œåº•å±‚çš„ C++ ä»£ç ã€‚ ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤ºè¿™ç§â€œä¸‡ç‰©å³å¯¹è±¡â€ä¸â€œRPNæ ˆæœºâ€çš„ç»“åˆï¼Œæˆ‘ä»¬æ¥è¿˜åŸä¸€ä¸ªç»å…¸åœºæ™¯ï¼šPRINT(SIN(1))ã€‚ åœ¨æˆ‘ä»¬çš„Â BytecodeBlockÂ ä¸­ï¼Œè¿™æ®µä»£ç ä¼šè¢«åºåˆ—åŒ–ä¸ºä»¥ä¸‹å¯¹è±¡æµï¼š\nå®æ•°å¯¹è±¡ (Type 00):Â 00 01 00 00 \u0026hellip; åŠ¨ä½œï¼šç›´æ¥å…¥æ ˆã€‚æ­¤æ—¶æ ˆé¡¶ï¼š[1.0]ã€‚ å‡½æ•°è°ƒç”¨å¯¹è±¡ (Type 08):Â 08 01 00 03 \u0026ldquo;SIN\u0026rdquo; åŠ¨ä½œï¼šæŸ¥è¡¨æ‰¾åˆ°Â math_sinã€‚ æ‰§è¡Œï¼šå¼¹å‡ºÂ 1.0ï¼Œè®¡ç®—æ­£å¼¦å€¼ï¼Œç»“æœÂ 0.841Â å°è£…æˆæ–°å¯¹è±¡å‹æ ˆã€‚æ­¤æ—¶æ ˆé¡¶ï¼š[0.841]ã€‚ å‡½æ•°è°ƒç”¨å¯¹è±¡ (Type 08):Â 08 01 00 05 \u0026ldquo;PRINT\u0026rdquo; åŠ¨ä½œï¼šæŸ¥è¡¨æ‰¾åˆ°Â io_printã€‚ æ‰§è¡Œï¼šå¼¹å‡ºÂ 0.841ï¼Œè°ƒç”¨å›¾å½¢æ¥å£ç»˜åˆ¶å±å¹•ã€‚ æ“ä½œç¬¦å¯¹è±¡ (Type 05):Â 05 00 00 0AÂ (Statement End) åŠ¨ä½œï¼šè¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„â€œæ— è´Ÿè½½â€å¯¹è±¡ï¼ŒIDÂ 0AÂ å‘Šè¯‰è™šæ‹Ÿæœºè¯­å¥ç»“æŸï¼Œæ¸…ç†å½“å‰æ ˆå¸§ã€‚ ç»“è®º\nè‡³æ­¤ï¼ŒHPPPL çš„å…¨è²Œå·²ç„¶æ¸…æ™°ï¼š\nå®ƒæ˜¯ä»¥å¯¹è±¡ä¸ºåŸºæœ¬å›¾å…ƒï¼Œä»¥ RPN ä¸ºæ‰§è¡Œé€»è¾‘ï¼Œä»¥åŠ¨æ€ç¬¦å·è¡¨ä¸ºé“¾æ¥æ¡¥æ¢çš„æ ˆå¼è™šæ‹Ÿæœºã€‚\næˆ‘ä»¬åœ¨æ–‡ä»¶ä¸­çœ‹åˆ°çš„æ¯ä¸€ä¸ªÂ OpcodeHeaderï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªå†»ç»“çš„å¯¹è±¡ã€‚è€Œè™šæ‹Ÿæœºçš„ä»»åŠ¡ï¼Œå°±æ˜¯å°†è¿™äº›å†»ç»“çš„å¯¹è±¡è§£å†»ï¼Œæ‰”è¿›Â VM_ContextÂ ç»´æŠ¤çš„é‚£ä¸ªå·¨å¤§çš„æ ˆä¸­ï¼Œè®©å®ƒä»¬ç›¸äº’ä½œç”¨ï¼Œæœ€ç»ˆæ¶Œç°å‡ºå¤æ‚çš„è®¡ç®—é€»è¾‘ã€‚\nè¿™ä¹Ÿå°è¯äº†æˆ‘æœ€åˆçš„çŒœæƒ³ï¼šHPPPL å¹¶ä¸æ˜¯åœ¨â€œè¿è¡Œä»£ç â€ï¼Œè€Œæ˜¯åœ¨â€œæ¼”åŒ–å¯¹è±¡â€ã€‚\n","date":"2025-12-27","externalUrl":null,"permalink":"/posts/hpppl%E5%9F%BA%E6%9C%AC%E7%A0%94%E7%A9%B6/","section":"Posts","summary":"åˆ©ç”¨ImHexåŠIDAProå¯¹Hp39GIIçš„HPPPLè¿›è¡Œé€†å‘åˆ†æ","title":"hppplåŸºæœ¬ç ”ç©¶","type":"posts"},{"content":"","date":"2025-12-27","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"2025-12-27","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"},{"content":" C++ å¸¸ç”¨æ•´å‹æ•°æ®ç±»å‹æ¦‚è§ˆ # C++ æä¾›äº†å¤šç§æ•´å‹ï¼Œç”¨äºå­˜å‚¨æ•´æ•°å€¼ã€‚å®ƒä»¬çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š\næ‰€å å­—èŠ‚æ•°ï¼ˆå†³å®šäº†èƒ½è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´ï¼‰ æ˜¯å¦å¸¦ç¬¦å·ï¼ˆèƒ½å¦è¡¨ç¤ºè´Ÿæ•°ï¼‰ 1. åŸºæœ¬æ•´å‹ (Native Types) # è¿™äº›ç±»å‹çš„å¤§å°å¯èƒ½å› ç¼–è¯‘å™¨å’Œå¹³å°è€Œå¼‚ï¼Œä½†éµå¾ªä¸€å®šçš„ä¿è¯ï¼š sizeof(char) \u0026lt;= sizeof(short) \u0026lt;= sizeof(int) \u0026lt;= sizeof(long) \u0026lt;= sizeof(long long)\nç±»å‹ å¸¸è§å¤§å° (å­—èŠ‚) èŒƒå›´ (ç¤ºä¾‹, 32ä½ç³»ç»Ÿ) æ˜¯å¦å¸¦ç¬¦å· ç”¨é€” char 1 [-128, 127] æˆ– [0, 255] ä¾èµ–å®ç° å­—ç¬¦å­˜å‚¨ï¼Œæœ€å°æ•´æ•° signed char 1 [-128, 127] å¸¦ç¬¦å· åŒä¸Šï¼Œæ˜ç¡®å¸¦ç¬¦å· unsigned char 1 [0, 255] æ— ç¬¦å· åŒä¸Šï¼Œæ˜ç¡®æ— ç¬¦å· short 2 [-32,768, 32,767] å¸¦ç¬¦å· å°èŒƒå›´æ•´æ•° unsigned short 2 [0, 65,535] æ— ç¬¦å· å°èŒƒå›´éè´Ÿæ•´æ•° int 4 [-2*10^9, 2*10^9] (çº¦) å¸¦ç¬¦å· æœ€å¸¸ç”¨ï¼Œé€šç”¨æ•´æ•° unsigned int 4 [0, 4*10^9] (çº¦) æ— ç¬¦å· é€šç”¨éè´Ÿæ•´æ•° long 4 æˆ– 8 [-2*10^9, 2*10^9] (32ä½) æˆ– [-9*10^18, 9*10^18] (64ä½) å¸¦ç¬¦å· æ¯” int å¯èƒ½æ›´å¤§èŒƒå›´çš„æ•´æ•° unsigned long 4 æˆ– 8 å¯¹åº” long çš„æ— ç¬¦å·èŒƒå›´ æ— ç¬¦å· å¯¹åº” long çš„éè´Ÿæ•´æ•° long long 8 [-9*10^18, 9*10^18] (çº¦) å¸¦ç¬¦å· æœ€å¤§èŒƒå›´ï¼ŒC++11å¼•å…¥ unsigned long long 8 [0, 1.8*10^19] (çº¦) æ— ç¬¦å· æœ€å¤§èŒƒå›´éè´Ÿæ•´æ•°ï¼ŒC++11å¼•å…¥ æ³¨ï¼š\né»˜è®¤å¸¦ç¬¦å·ï¼š é™¤ char å¤–ï¼Œä¸åŠ  signed å…³é”®å­—çš„æ•´å‹ï¼ˆå¦‚ intï¼‰é»˜è®¤æ˜¯å¸¦ç¬¦å·çš„ã€‚ æ— ç¬¦å·ï¼š åœ¨ç±»å‹å‰åŠ  unsigned å…³é”®å­—ï¼ˆå¦‚ unsigned intï¼‰ã€‚ 2. å›ºå®šå®½åº¦æ•´å‹ (C++11 \u0026lt;cstdint\u0026gt;) # ä¸ºç¡®ä¿è·¨å¹³å°çš„ä¸€è‡´æ€§ï¼ŒC++11 å¼•å…¥äº†å›ºå®šä½å®½çš„æ•´å‹ã€‚æ¨èç”¨äºéœ€è¦ç²¾ç¡®æ§åˆ¶æ•°æ®å¤§å°çš„åœºæ™¯ï¼ˆå¦‚æ–‡ä»¶æ ¼å¼ã€ç½‘ç»œåè®®ï¼‰ã€‚\nç±»å‹ å®½åº¦ (ä½) æ˜¯å¦å¸¦ç¬¦å· å…¸å‹ç”¨é€” int8_t 8 å¸¦ç¬¦å· å°æ•´æ•°ï¼Œå­—èŠ‚æ•°æ® int16_t 16 å¸¦ç¬¦å· çŸ­æ•´æ•° int32_t 32 å¸¦ç¬¦å· å¸¸ç”¨æ•´æ•°ï¼Œæ›¿ä»£ int ä»¥ç¡®ä¿ä½å®½ int64_t 64 å¸¦ç¬¦å· å¤§æ•´æ•°ï¼Œæ›¿ä»£ long long ä»¥ç¡®ä¿ä½å®½ uint8_t 8 æ— ç¬¦å· å­—èŠ‚æ•°æ®ï¼Œé¢œè‰²åˆ†é‡ï¼ˆ0-255ï¼‰ uint16_t 16 æ— ç¬¦å· ç«¯å£å·ï¼Œå›¾åƒåƒç´ å€¼ uint32_t 32 æ— ç¬¦å· å“ˆå¸Œå€¼ï¼Œè®¡æ•°å™¨ï¼Œæ›¿ä»£ unsigned int ä»¥ç¡®ä¿ä½å®½ uint64_t 64 æ— ç¬¦å· å¤§å“ˆå¸Œå€¼ï¼Œæ—¶é—´æˆ³ï¼Œæ›¿ä»£ unsigned long long ä»¥ç¡®ä¿ä½å®½ 3. æœ€ä½³å®è·µ # é»˜è®¤ä½¿ç”¨ intï¼š é™¤éæœ‰ç‰¹å®šéœ€æ±‚ï¼Œint æ˜¯æœ€å¸¸è§çš„é€‰æ‹©ã€‚ éœ€è¦å¤§èŒƒå›´æ—¶ï¼š ä¼˜å…ˆè€ƒè™‘ long longã€‚ éœ€è¦æ˜ç¡®ä½å®½æ—¶ï¼š ä½¿ç”¨ \u0026lt;cstdint\u0026gt; ä¸­çš„å›ºå®šå®½åº¦ç±»å‹ï¼ˆå¦‚ int32_t, uint64_tï¼‰ï¼Œè¿™èƒ½å¤§å¤§æé«˜ä»£ç çš„å¯ç§»æ¤æ€§å’Œå¥å£®æ€§ã€‚ éè´Ÿæ•°ä¸”èŒƒå›´è¦æ±‚ï¼š ä½¿ç”¨ unsigned ç‰ˆæœ¬æˆ–å¯¹åº”çš„ uintN_tã€‚ å†…å­˜ä¼˜åŒ–ï¼ˆä¸å¸¸è§ï¼‰ï¼š ä»…åœ¨å†…å­˜æå…¶å—é™çš„åµŒå…¥å¼ç³»ç»Ÿç­‰åœºæ™¯ä¸‹ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ short æˆ– char ä½œä¸ºæ•°å€¼ç±»å‹ã€‚ ","date":"2025-12-12","externalUrl":null,"permalink":"/posts/learn-c/c-cpp-%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%A6%82%E8%A7%88/","section":"Posts","summary":"","title":"c-cpp-åŸºæœ¬æ•°æ®ç±»å‹æ¦‚è§ˆ","type":"posts"},{"content":"æœ¬èŠ‚ä¸ºc/c++çš„ä¸€äº›æ–‡ç« ã€‚\n","date":"2025-12-12","externalUrl":null,"permalink":"/posts/learn-c/","section":"Posts","summary":"","title":"learn-c/cpp","type":"posts"},{"content":"A-Z : 65-90 a-z : 97-122\näºŒè¿›åˆ¶ å…«è¿›åˆ¶ åè¿›åˆ¶ åå…­è¿›åˆ¶ å­—ç¬¦/ç¼©å†™ è§£é‡Š 00000000 000 0 00 NUL (NULL) ç©ºå­—ç¬¦ 00000001 001 1 01 SOH (Start Of Headling) æ ‡é¢˜å¼€å§‹ 00000010 002 2 02 STX (Start Of Text) æ­£æ–‡å¼€å§‹ 00000011 003 3 03 ETX (End Of Text) æ­£æ–‡ç»“æŸ 00000100 004 4 04 EOT (End Of Transmission) ä¼ è¾“ç»“æŸ 00000101 005 5 05 ENQ (Enquiry) è¯·æ±‚ 00000110 006 6 06 ACK (Acknowledge) å›åº”/å“åº”/æ”¶åˆ°é€šçŸ¥ 00000111 007 7 07 BEL (Bell) å“é“ƒ 00001000 010 8 08 BS (Backspace) é€€æ ¼ 00001001 011 9 09 HT (Horizontal Tab) æ°´å¹³åˆ¶è¡¨ç¬¦ 00001010 012 10 0A LF/NL(Line Feed/New Line) æ¢è¡Œé”® 00001011 013 11 0B VT (Vertical Tab) å‚ç›´åˆ¶è¡¨ç¬¦ 00001100 014 12 0C FF/NP (Form Feed/New Page) æ¢é¡µé”® 00001101 015 13 0D CR (Carriage Return) å›è½¦é”® 00001110 016 14 0E SO (Shift Out) ä¸ç”¨åˆ‡æ¢ 00001111 017 15 0F SI (Shift In) å¯ç”¨åˆ‡æ¢ 00010000 020 16 10 DLE (Data Link Escape) æ•°æ®é“¾è·¯è½¬ä¹‰ 00010001 021 17 11 DC1/XON (Device Control 1/Transmission On) è®¾å¤‡æ§åˆ¶1/ä¼ è¾“å¼€å§‹ 00010010 022 18 12 DC2 (Device Control 2) è®¾å¤‡æ§åˆ¶2 00010011 023 19 13 DC3/XOFF (Device Control 3/Transmission Off) è®¾å¤‡æ§åˆ¶3/ä¼ è¾“ä¸­æ–­ 00010100 024 20 14 DC4 (Device Control 4) è®¾å¤‡æ§åˆ¶4 00010101 025 21 15 NAK (Negative Acknowledge) æ— å“åº”/éæ­£å¸¸å“åº”/æ‹’ç»æ¥æ”¶ 00010110 026 22 16 SYN (Synchronous Idle) åŒæ­¥ç©ºé—² 00010111 027 23 17 ETB (End of Transmission Block) ä¼ è¾“å—ç»“æŸ/å—ä¼ è¾“ç»ˆæ­¢ 00011000 030 24 18 CAN (Cancel) å–æ¶ˆ 00011001 031 25 19 EM (End of Medium) å·²åˆ°ä»‹è´¨æœ«ç«¯/ä»‹è´¨å­˜å‚¨å·²æ»¡/ä»‹è´¨ä¸­æ–­ 00011010 032 26 1A SUB (Substitute) æ›¿è¡¥/æ›¿æ¢ 00011011 033 27 1B ESC (Escape) é€ƒç¦»/å–æ¶ˆ 00011100 034 28 1C FS (File Separator) æ–‡ä»¶åˆ†å‰²ç¬¦ 00011101 035 29 1D GS (Group Separator) ç»„åˆ†éš”ç¬¦/åˆ†ç»„ç¬¦ 00011110 036 30 1E RS (Record Separator) è®°å½•åˆ†ç¦»ç¬¦ 00011111 037 31 1F US (Unit Separator) å•å…ƒåˆ†éš”ç¬¦ 00100000 040 32 20 (Space) ç©ºæ ¼ 00100001 041 33 21 ! 00100010 042 34 22 \u0026quot; 00100011 043 35 23 # 00100100 044 36 24 $ 00100101 045 37 25 % 00100110 046 38 26 \u0026amp; 00100111 047 39 27 ' 00101000 050 40 28 ( 00101001 051 41 29 ) 00101010 052 42 2A * 00101011 053 43 2B + 00101100 054 44 2C , 00101101 055 45 2D - 00101110 056 46 2E . 00101111 057 47 2F / 00110000 060 48 30 0 00110001 061 49 31 1 00110010 062 50 32 2 00110011 063 51 33 3 00110100 064 52 34 4 00110101 065 53 35 5 00110110 066 54 36 6 00110111 067 55 37 7 00111000 070 56 38 8 00111001 071 57 39 9 00111010 072 58 3A : 00111011 073 59 3B ; 00111100 074 60 3C \u0026lt; 00111101 075 61 3D = 00111110 076 62 3E \u0026gt; 00111111 077 63 3F ? 01000000 100 64 40 @ 01000001 101 65 41 A 01000010 102 66 42 B 01000011 103 67 43 C 01000100 104 68 44 D 01000101 105 69 45 E 01000110 106 70 46 F 01000111 107 71 47 G 01001000 110 72 48 H 01001001 111 73 49 I 01001010 112 74 4A J 01001011 113 75 4B K 01001100 114 76 4C L 01001101 115 77 4D M 01001110 116 78 4E N 01001111 117 79 4F O 01010000 120 80 50 P 01010001 121 81 51 Q 01010010 122 82 52 R 01010011 123 83 53 S 01010100 124 84 54 T 01010101 125 85 55 U 01010110 126 86 56 V 01010111 127 87 57 W 01011000 130 88 58 X 01011001 131 89 59 Y 01011010 132 90 5A Z 01011011 133 91 5B [ 01011100 134 92 5C | 01011101 135 93 5D ] 01011110 136 94 5E ^ 01011111 137 95 5F _ 01100000 140 96 60 ` 01100001 141 97 61 a 01100010 142 98 62 b 01100011 143 99 63 c 01100100 144 100 64 d 01100101 145 101 65 e 01100110 146 102 66 f 01100111 147 103 67 g 01101000 150 104 68 h 01101001 151 105 69 i 01101010 152 106 6A j 01101011 153 107 6B k 01101100 154 108 6C l 01101101 155 109 6D m 01101110 156 110 6E n 01101111 157 111 6F o 01110000 160 112 70 p 01110001 161 113 71 q 01110010 162 114 72 r 01110011 163 115 73 s 01110100 164 116 74 t 01110101 165 117 75 u 01110110 166 118 76 v 01110111 167 119 77 w 01111000 170 120 78 x 01111001 171 121 79 y 01111010 172 122 7A z 01111011 173 123 7B { 01111100 174 124 7C | 01111101 175 125 7D } 01111110 176 126 7E ~ 01111111 177 127 7F DEL (Delete) åˆ é™¤ ","date":"2025-12-12","externalUrl":null,"permalink":"/posts/learn-c/asciil%E7%A0%81%E8%A1%A8/","section":"Posts","summary":"","title":"asciilç è¡¨","type":"posts"},{"content":" ğŸš€ ç›®æ ‡ # åœ¨ Linux ä¸‹ï¼Œä½¿ç”¨ Conda è™šæ‹Ÿç¯å¢ƒéš”ç¦» ESP-IDF ä¾èµ–ï¼Œå¹¶é…ç½® VS Code IDF æ’ä»¶ã€‚\nI. Conda ç¯å¢ƒå‡†å¤‡ # # 1. **åˆ›å»ºå¹¶æ¿€æ´» Conda ç¯å¢ƒï¼š** conda create -n esp-idf-env python=3.11 conda activate esp-idf-env # 2.ä¸‹è½½ ESP-IDF æºç  mkdir -p ~/esp cd ~/esp git clone --recursive https://github.com/espressif/esp-idf.git -b v5.4.2 cd esp-idf # 3. å®‰è£…å·¥å…·é“¾å’Œä¾èµ– # åœ¨æ¿€æ´»çš„ Conda ç¯å¢ƒä¸­è¿è¡Œ ./install.sh II. Fish Shell ç¯å¢ƒæ¿€æ´» # ç”±äº Fish Shell ä¸å…¼å®¹ Bash è¯­æ³•ï¼Œä¸èƒ½ç›´æ¥è¿è¡Œ ./export.shã€‚ éœ€è¦ä¸è¿è¡ŒFishçš„å…¼å®¹è„šæœ¬export.fish\n# 1. è¿è¡Œ Fish å…¼å®¹è„šæœ¬ source ./export.fish # 2. éªŒè¯ç¯å¢ƒï¼š idf.py --version # *(å¦‚æœè¾“å‡ºç‰ˆæœ¬å·ï¼Œåˆ™ç»ˆç«¯ç¯å¢ƒé…ç½®æˆåŠŸã€‚)* å¦‚ä¸‹ï¼š\ncerry@ROG-Flow-X13 ~/P/e/esp-idf ((v5.4.2))\u0026gt; idf.py --version (esp-idf-env) ESP-IDF v5.4.2 cerry@ROG-Flow-X13 ~/P/e/esp-idf ((v5.4.2))\u0026gt; (esp-idf-env) è®°å½• Conda ç¯å¢ƒçš„ Python è§£é‡Šå™¨å®Œæ•´è·¯å¾„ï¼Œç”¨äº VS Code é…ç½®ï¼š\nwhich python # è¾“å‡ºå¦‚ä¸‹ # cerry@ROG-Flow-X13 ~/P/e/esp-idf ((v5.4.2))\u0026gt; which python (esp-idf-env) # /home/cerry/.espressif/python_env/idf5.4_py3.11_env/bin/python miniconda3çš„è™šæ‹Ÿç¯å¢ƒä¸esp-idf å®‰è£…åå‘ç°é™¤äº†è‡ªå·±ä½¿ç”¨miniconda3åˆ›å»ºçš„esp-idf-envç¯å¢ƒå¤–ï¼Œesp-idfè¿˜å†…éƒ¨ç®¡ç†äº†ä¸€ä¸ªpythonï¼Œå…¶è·¯å¾„ä¸ºåˆšæ‰çš„è¾“å‡ºï¼ˆ/home/cerry/.espressif/python_env/idf5.4_py3.11_env/bin/pythonï¼‰ ä¸ºä»€ä¹ˆæˆ‘ åœ¨è‡ªå·±åˆ›å»ºesp-idf-envçš„ç¯å¢ƒä¸‹æ‰§è¡Œ which python æ˜¾ç¤ºçš„æ˜¯esp-idfçš„å†…éƒ¨ç¯å¢ƒï¼Ÿ - å› ä¸ºè¿è¡Œ conda activate esp-idf-env æ—¶ï¼Œä¼šæŠŠConda ç¯å¢ƒçš„ bin ç›®å½•æ·»åŠ åˆ° $PATH çš„æœ€å‰è¾¹ï¼Œè€Œè¿è¡Œ source ./export.fish æ—¶ï¼Œä¼šå§IDF å†…éƒ¨è™šæ‹Ÿç¯å¢ƒçš„ bin ç›®å½• æ’å…¥åˆ°** $PATH **çš„æœ€å‰ç«¯ã€‚ - å…³é”®ï¼š$PATHéµå¾ªä¼˜å…ˆçº§ä»å·¦åˆ°å³çš„é¡ºåº å¯ä»¥å°è¯•æŠŠcondaåˆ›å»ºçš„ esp-idf-env çš„ç¯å¢ƒåˆ é™¤ III. VS Code IDF æ’ä»¶é…ç½® # å®‰è£…ESP-IDF çš„ VSCODEæ’ä»¶ï¼Œå¯å‚è€ƒä¹é‘«æ–‡æ¡£ å®‰è£… ESP-IDF å’Œç›¸å…³å·¥å…·\næ‰“å¼€ VS Code è®¾ç½® (Settings)ï¼Œæœç´¢ esp-idf å¹¶é…ç½®ä»¥ä¸‹ ä¸¤ä¸ªå…³é”®è·¯å¾„ï¼š\nè®¾ç½®é¡¹ (Settings Key) è·¯å¾„å€¼ æè¿° idf.toolsPath /home/cerry/PATH/esp/esp-idf IDF æºç çš„æ ¹ç›®å½• (IDF_PATH)ã€‚ idf.pythonBinPath /home/cerry/miniconda3/envs/esp-idf-env/bin/python Conda è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python è§£é‡Šå™¨ è·¯å¾„ã€‚ å¦‚ä¸‹ï¼š DF_TOOLS_PATH å’Œ IDF_PATH IDF_TOOLS_PATH æ˜¯æœ€æ ¸å¿ƒçš„äº¤å‰ç¼–è¯‘å™¨ æ¯”å¦‚ xtensa-esp32-elf-gcc ï¼Œå·¥å…·å¦‚ esptool.pyã€ninjaã€openocd IDF_PATH åŒ…å« IDF æ¡†æ¶ç»„ä»¶ï¼Œå¦‚ Wi-Fi åº“ã€FreeRTOS å†…æ ¸ã€é©±åŠ¨ç¨‹åºç­‰ï¼Œæ‰€æœ‰çš„ ESP-IDF é¡¹ç›®çš„ CMakeLists.txt æ–‡ä»¶éƒ½ä¼šä¾èµ–äº IDF_PATH æ¥åŒ…å« IDF æ¡†æ¶ã€‚ é…ç½®å®Œæˆåï¼š æ‰“å¼€ IDF é¡¹ç›®ï¼Œæ’ä»¶ä¼šè‡ªåŠ¨è¯†åˆ«å¹¶åŠ è½½ Conda ç¯å¢ƒå’Œå·¥å…·é“¾ã€‚å°è¯•è¿è¡Œ IDF: Build å‘½ä»¤è¿›è¡ŒéªŒè¯ã€‚ ","date":"2025-12-01","externalUrl":null,"permalink":"/posts/%E8%AE%B0ubuntu24.04%E4%B8%8B%E9%85%8D%E7%BD%AEesp-idf/","section":"Posts","summary":"","title":"è®°ï¼šUbuntu24.04ä¸‹é…ç½®esp-idf","type":"posts"},{"content":"","date":"2025-12-01","externalUrl":null,"permalink":"/tags/-4/","section":"Tags","summary":"","title":"-4","type":"tags"},{"content":"","date":"2025-12-01","externalUrl":null,"permalink":"/tags/rtos/","section":"Tags","summary":"","title":"RTOS","type":"tags"},{"content":" ä¿¡æ¯ ä»¥ä¸‹å†…å®¹æ¥è‡ª æˆå¤§è³‡å·¥WIKI FreeRTOS åŸæ–‡ä¸ºç¹ä½“ï¼Œå·²è½¬ä¸ºç®€ä½“ï¼Œä¾¿äºå¤§å®¶å­¦ä¹ \nåä½œè€… # 2015 å¹´æ˜¥å­£ è§å¥•å‡¯, å¼ ç®è±ª, ä½™å¿—ä¼Ÿ, ç‹çš“æ˜±, æ´ªç‚œå‡¯ 2014 å¹´æ˜¥å­£ æ¢é¢–ç¿, æå¥‡éœ–, æ–¹å¨è¿ª, é™ˆç›ˆä¼¸ å…±ç¬” # 2015 å¹´æ˜¥å­£ Hackpad GitHub 2014 å¹´æ˜¥å­£ Hackpad GitHub ç›®å½• # [FreeRTOS æ¶æ„](#FreeRTOS æ¶æ„) åŸå§‹ç  å‘½åè§„åˆ™ [Run FreeRTOS on STM32F4-Discovery](#Run FreeRTOS on STM32F4-Discovery) ä»»åŠ¡ [Ready list çš„èµ„æ–™å½¢æ€](#Ready list çš„èµ„æ–™å½¢æ€) é€šè®¯ æ’ç¨‹ ä¸­æ–­å¤„ç† ç¡¬ä½“é©±åŠ¨ æ•ˆèƒ½è¯„ä¼° æµ‹è¯•ç¯å¢ƒæ¶è®¾ é—®é¢˜è®¨è®ºä¸€ é—®é¢˜è®¨è®ºäºŒ å‚è€ƒèµ„æ–™ FreeRTOS æ¶æ„ # å®˜æ–¹ç½‘ç«™ï¼šhttps://www.freertos.org/\nFreeRTOS æ˜¯ä¸€ä¸ªç›¸å¯¹å…¶ä»–ä½œä¸šç³»ç»Ÿè€Œè¨€è¾ƒå°çš„ä½œä¸šç³»ç»Ÿã€‚æœ€å°åŒ–çš„ FreeRTOS æ ¸å¿ƒä»…åŒ…æ‹¬ 3 ä¸ª .c æ–‡ä»¶(tasks.cã€queue.cã€list.c)å’Œå°‘æ•°æ ‡å¤´æ¡£ï¼Œæ€»å…±ä¸åˆ° 9000 è¡Œç¨‹å¼ç ï¼Œè¿˜åŒ…æ‹¬äº†æ³¨è§£å’Œç©ºè¡Œã€‚ä¸€ä¸ªå…¸å‹çš„ç¼–è¯‘å binaryï¼ˆäºŒè¿›ä½ç ï¼‰å°äº 10 KBã€‚\nFreeRTOS çš„ç¨‹å¼ç å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªä¸»è¦åŒºå—ï¼šä»»åŠ¡ã€é€šè®¯å’Œç¡¬ä½“ç•Œé¢ã€‚\nä»»åŠ¡ (Task): FreeRTOS çš„æ ¸å¿ƒç¨‹å¼ç çº¦æœ‰ä¸€åŠæ˜¯ç”¨æ¥å¤„ç†å¤šæ•°ä½œä¸šç³»ç»Ÿé¦–è¦å…³æ³¨çš„é—®é¢˜ï¼šä»»åŠ¡ï¼Œä»»åŠ¡æ˜¯æ‹¥æœ‰ä¼˜å…ˆæƒçš„ç”¨æˆ·æ‰€å®šä¹‰çš„ C å‡½æ•°ã€‚task.c å’Œ task.h è´Ÿè´£æ‰€æœ‰å…³äºå»ºç«‹ã€æ’ç¨‹å’Œç»´æŠ¤ä»»åŠ¡çš„ç¹é‡å·¥ä½œã€‚\né€šè®¯ (Communication): ä»»åŠ¡å¾ˆé‡è¦ï¼Œä¸è¿‡ä»»åŠ¡é—´å¯ä»¥äº’ç›¸é€šè®¯åˆ™æ›´ä¸ºé‡è¦ï¼å®ƒå¸¦å‡ºäº† FreeRTOS çš„ç¬¬äºŒé¡¹è®®é¢˜ï¼šé€šè®¯ã€‚FreeRTOS æ ¸å¿ƒç¨‹å¼ç å¤§çº¦æœ‰ 40% æ˜¯ç”¨æ¥å¤„ç†é€šè®¯çš„ã€‚queue.c å’Œ queue.h è´Ÿè´£å¤„ç† FreeRTOS çš„é€šè®¯ï¼Œä»»åŠ¡å’Œä¸­æ–­(interrupt)ä½¿ç”¨ä¼«åˆ—(ä¼«åˆ—ï¼Œqueue)äº’ç›¸å‘é€æ•°æ®ï¼Œå¹¶ä¸”ä½¿ç”¨ semaphore å’Œ mutex æ¥æ´¾å‘ critical section çš„ä½¿ç”¨ä¿¡å·ã€‚\nç¡¬ä½“ç•Œé¢ï¼šæœ‰è¿‘ 9000 è¡Œçš„ç¨‹å¼ç ç»„æˆåŸºæœ¬çš„ FreeRTOSï¼Œè¿™éƒ¨ä»½æ˜¯ä¸ç¡¬ä½“æ— å…³çš„(hardware-independent)ï¼ŒåŒä¸€ä»½ç¨‹å¼ç åœ¨ä¸åŒç¡¬ä½“å¹³å°ä¸Šçš„ FreeRTOS éƒ½å¯ä»¥è¿è¡Œã€‚å¤§çº¦æœ‰ 6% çš„ FreeRTOS æ ¸å¿ƒä»£ç ï¼Œåœ¨ä¸ç¡¬ä½“æ— å…³çš„ FreeRTOS æ ¸å¿ƒå’Œä¸ç¡¬ä½“ç›¸å…³çš„ç¨‹å¼ç é—´æ‰®æ¼”è‘—å«ç‰‡(shim)çš„è§’è‰²ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸ªéƒ¨åˆ†è®¨è®ºä¸ç¡¬ä½“ç›¸å…³çš„ç¨‹å¼ç ã€‚[#]_\nç”¨ cloc ç»Ÿè®¡ FreeRTOS 8.0.0 çš„ include/ *.c portable/GCC/ARM_CM4F/ ç­‰ç›®å½•ï¼Œå¯å¾—ä¸å«æ³¨è§£ã€ç©ºç™½è¡Œçš„è¡Œæ•°ä¸º 6566ï¼Œè€Œç»Ÿè®¡ä¸å¹³å°æœ‰å…³çš„éƒ¨ä»½ (portable/GCC/ARM_CM4F/ ç›®å½•)ï¼Œåˆ™æ˜¯ 435 è¡Œã€‚è®¡ç®—å¯å¾—: 435 / 6566 = 0.06625 = 6%ï¼Œä¸æè¿°ç›¸ç¬¦ï¼Œä½†åŸæœ¬çš„ 9000 è¡Œæ˜¯æŒ‡å«æ³¨è§£çš„è¯´æ³• (å®é™…ä¸º 8759 è¡Œ)\nåŸå§‹ç  # å®˜æ–¹ä¸‹è½½ï¼šhttps://freertos.org/a00104.html\næœ€æ–°ç‰ˆæœ¬ï¼šv11.0.0\næ ¸å¿ƒç¨‹å¼ç ï¼š(Source)\ntasks.cï¼šä¸»è¦æŒç®¡ task çš„æ¡£æ¡ˆ\nqueue.cï¼šç®¡ç† task é—´ communication (message queue çš„æ¦‚å¿µ)\nlist.cï¼šæä¾›ç³»ç»Ÿä¸åº”ç”¨å®ä½œä¼šç”¨åˆ°çš„ list èµ„æ–™ç»“æ„\n- é€‰æ‹©æ€§æ¡£æ¡ˆï¼štimer.cã€croutine.c (co-routine)ã€event_groups.c ä¸ç¡¬ä½“ç›¸å…³çš„æ¡£æ¡ˆï¼šä»¥ ARM Cortext-M3 ä¸ºä¾‹ï¼Œå¯åœ¨ Source/portable/GCC/ARM_CM3 ä¸­æ‰¾åˆ°\nportmacro.hï¼šå®šä¹‰äº†ä¸ç¡¬ä½“ç›¸å…³çš„å˜æ•°ï¼Œå¦‚èµ„æ–™å‹æ€å®šä¹‰ï¼Œä»¥åŠä¸ç¡¬ä½“ç›¸å…³çš„å‡½å¼å‘¼å«åç§°å®šä¹‰(ä»¥ portXXXXX å‘½å)ç­‰ï¼Œç»Ÿä¸€å„å¹³å°çš„å‡½å¼å‘¼å« port.cï¼šå®šä¹‰äº†åŒ…å«ä¸ç¡¬ä½“ç›¸å…³çš„ç¨‹å¼ç å®ä½œ FreeRTOSConfig.hï¼šåŒ…å« clock speed, heap size, mutexes ç­‰ç­‰éƒ½åœ¨æ­¤å®šä¹‰(éœ€è‡ªè¡Œå»ºç«‹) å›ç›®å½•\nèµ„æ–™å‹æ€åŠå‘½åè§„åˆ™ # åœ¨ä¸åŒç¡¬ä½“è£…ç½®ä¸Šï¼Œé€šè®¯åŸ è®¾å®šä¸Šä¹Ÿä¸åŒï¼Œå®šä¹‰åœ¨portmacro.hæ ‡å¤´æ¡£å†…ï¼Œæœ‰ä¸¤ç§ç‰¹æ®Šèµ„æ–™å‹æ€portTickTypeä»¥åŠportBASE_TYPEã€‚\nèµ„æ–™å‹æ€ portTickType : ç”¨ä»¥å‚¨å­˜tickçš„è®¡æ•°å€¼ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­blockæ¬¡æ•° portBASE_TYPE : å®šä¹‰ä¸ºæ¶æ„åŸºç¡€çš„å˜æ•°ï¼Œéšå„ä¸åŒç¡¬ä½“æ¥åº”ç”¨ï¼Œå¦‚åœ¨32-bitæ¶æ„ä¸Šï¼Œå…¶ä¸º32-bitå‹æ€ï¼Œæœ€å¸¸ç”¨ä»¥å‚¨å­˜æé™å€¼æˆ–å¸ƒæ—æ•°ã€‚ FreeRTOSæ˜ç¡®çš„å®šä¹‰å˜æ•°åç§°ä»¥åŠèµ„æ–™å‹æ€ï¼Œä¸ä¼šæœ‰unsignedä»¥åŠsignedææ··ä½¿ç”¨çš„æƒ…å½¢å‘ç”Ÿã€‚\nå˜æ•°\nchar ç±»å‹ï¼šä»¥ c ä¸ºå­—é¦– short ç±»å‹ï¼šä»¥ s ä¸ºå­—é¦– long ç±»å‹ï¼šä»¥ l ä¸ºå­—é¦– float ç±»å‹ï¼šä»¥ f ä¸ºå­—é¦– double ç±»å‹ï¼šä»¥ d ä¸ºå­—é¦– Enum å˜æ•°ï¼šä»¥ e ä¸ºå­—é¦– portBASE_TYPE æˆ–å…¶ä»–ï¼ˆå¦‚ structï¼‰ï¼šä»¥ x ä¸ºå­—é¦– pointer æœ‰ä¸€ä¸ªé¢å¤–çš„å­—é¦– p , ä¾‹å¦‚ short ç±»å‹çš„ pointer å­—é¦–ä¸º ps unsigned ç±»å‹çš„å˜æ•°æœ‰ä¸€ä¸ªé¢å¤–çš„å­—é¦– u , ä¾‹å¦‚ unsigned short ç±»å‹çš„å˜æ•°å­—é¦–ä¸º us å‡½å¼ï¼šä»¥å›ä¼ å€¼å‹æ€ä¸æ‰€åœ¨æ¡£æ¡ˆåç§°ä¸ºå¼€å¤´(prefix)\nvTaskPriority() æ˜¯ task.c ä¸­å›ä¼ å€¼å‹æ€ä¸º void çš„å‡½å¼ xQueueReceive() æ˜¯ queue.c ä¸­å›ä¼ å€¼å‹æ€ä¸º portBASE_TYPE çš„å‡½å¼ åªèƒ½åœ¨è¯¥æ¡£æ¡ˆä¸­ä½¿ç”¨çš„ (scope is limited in file) å‡½å¼ï¼Œä»¥ prv ä¸ºå¼€å¤´ (private) å·¨é›†åç§°ï¼šå·¨é›†åœ¨FreeRTOSé‡Œçš†ä¸ºå¤§å†™å­—æ¯å®šä¹‰ï¼Œåç§°å‰å°å†™å­—æ¯ä¸ºå·¨é›†å®šä¹‰çš„åœ°æ–¹\nportMAX_DELAY : portable.h configUSE_PREEMPTION\t: FreeRTOSConfig.h ä¸€èˆ¬å·¨é›†å›ä¼ å€¼å®šä¹‰pdTRUE åŠ pdPASSä¸º1 , pdFALSE åŠ pdFAIL ä¸º0ã€‚\nRun FreeRTOS on STM32F4-Discovery # å›ç›®å½•\nä»»åŠ¡ # ä»»åŠ¡ (task) æ˜¯åœ¨ FreeRTOS ä¸­æ‰§è¡Œçš„åŸºæœ¬å•ä½ï¼Œæ¯ä¸ª task éƒ½æ˜¯ç”±ä¸€ä¸ª C å‡½æ•°æ‰€ç»„æˆï¼Œæ„æ€æ˜¯ä½ éœ€è¦å…ˆå®šä¹‰ä¸€ä¸ª C çš„å‡½æ•°ï¼Œç„¶åå†ç”¨ xTaskCreate() è¿™ä¸ª API æ¥å»ºç«‹ä¸€ä¸ª taskï¼Œè¿™ä¸ª C å‡½æ•°æœ‰å‡ ä¸ªç‰¹ç‚¹ï¼Œå®ƒçš„è¿”å›å€¼å¿…é¡»æ˜¯ voidï¼Œå…¶ä¸­é€šå¸¸ä¼šæœ‰ä¸€ä¸ªæ— é™å›åœˆï¼Œæ‰€æœ‰å…³äºè¿™ä¸ª task çš„å·¥ä½œéƒ½ä¼šåœ¨å›åœˆä¸­è¿›è¡Œï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°ä¸ä¼šæœ‰ returnï¼ŒFreeRTOS ä¸å…è®¸ task è‡ªè¡Œç»“æŸ(ä½¿ç”¨ return æˆ–æ‰§è¡Œåˆ°å‡½æ•°çš„æœ€åä¸€è¡Œ)\nTask è¢«å»ºç«‹å‡ºæ¥åï¼Œå®ƒä¼šé…ç½®æœ‰è‡ªå·±çš„å †å ç©ºé—´å’Œ stack variable(å°±æ˜¯ function ä¸­å®šä¹‰çš„å˜æ•°)\nä¸€ä¸ªå…¸å‹çš„ task function å¦‚ä¸‹ï¼š\nvoid ATaskFunction(void *pvParameters) { int i = 0; // æ¯ä¸ªç”¨è¿™ä¸ªå‡½æ•°å»ºç«‹çš„ task éƒ½æœ‰è‡ªå·±çš„ä¸€ä»½ i å˜æ•° while(1) { /* do something here */ } /* * å¦‚æœä½ çš„ task å°±æ˜¯éœ€è¦ç¦»å¼€ loop å¹¶ç»“æŸ * éœ€è¦ç”¨ vTaskDelete æ¥åˆ é™¤è‡ªå·±è€Œéä½¿ç”¨ return æˆ–è‡ªç„¶ç»“æŸ(æ‰§è¡Œåˆ°æœ€åä¸€è¡Œ) * è¿™ä¸ªå‚æ•°çš„ NULL å€¼æ˜¯è¡¨ç¤ºè‡ªå·± */ vTaskDelete(NULL); } Task çš„çŠ¶æ€ Readyï¼šå‡†å¤‡å¥½è¦æ‰§è¡Œçš„çŠ¶æ€ Runningï¼šæ­£åœ¨ç”± CPU æ‰§è¡Œçš„çŠ¶æ€ Blockedï¼šç­‰å¾…ä¸­çš„çŠ¶æ€(é€šå¸¸æ˜¯åœ¨ç­‰å¾…æŸä¸ªäº‹ä»¶) Suspendedï¼šç­‰å¾…ä¸­çš„çŠ¶æ€(é€è¿‡ API æ¥è¦æ±‚é€€å‡ºæ’ç¨‹) Blocked vs Suspended\nblocked æ˜¯è¯´å¦‚æœæœ‰ä¸ª task å°†è¦ç­‰å¾…æŸä¸ªç›®å‰æ— æ³•å–å¾—çš„èµ„æº(è¢«å…¶ä»– task å ç”¨ä¸­)ï¼Œåˆ™ä¼šè¢«è®¾ä¸º blocked çŠ¶æ€ï¼Œè¿™æ˜¯è¢«åŠ¨çš„ï¼ŒOS ä¼šå‘¼å« blocking API æ¥è®¾å®š task è¿›å…¥ blocked queue\nsuspended ä¸ blocked çš„å·®å¼‚åœ¨äºï¼Œsuspended æ˜¯ task ä¸»åŠ¨å‘¼å« API æ¥è¦æ±‚è®©è‡ªå·±è¿›å…¥æš‚åœçŠ¶æ€çš„\næ¯ä¸€ç§çŠ¶æ€ FreeRTOS éƒ½ä¼šç»™äºˆä¸€ä¸ª list å‚¨å­˜ï¼ˆé™¤äº† running)\nå»ºç«‹ task çš„å‡½æ•° portBASE_TYPE xTaskCreate( pdTASK_CODE pvTaskCode, const signed portCHAR * const pcName, unsigned portSHORT usStackDepth, void *pvParameters, unsigned portBASE_TYPE uxPriority, xTaskHandle *pxCreatedTask ); pvTaskCodeï¼šå°±æ˜¯æˆ‘ä»¬å®šä¹‰å¥½ç”¨æ¥å»ºç«‹ task çš„ C å‡½æ•°\npcNameï¼šä»»æ„ç»™å®šçš„ task nameï¼Œè¿™ä¸ªåç§°åªè¢«ç”¨æ¥ä½œè¯†åˆ«ï¼Œä¸ä¼šåœ¨ task ç®¡ç†ä¸­è¢«é‡‡ç”¨\nusStackDepthï¼šå †å çš„å¤§å°\npvParametersï¼šè¦ä¼ ç»™ task çš„å‚æ•°é˜µåˆ—ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ C å‡½æ•°å®£å‘Šçš„å‚æ•°\nuxPriorityï¼šå®šä¹‰è¿™ä¸ªä»»åŠ¡çš„ä¼˜å…ˆæƒï¼Œåœ¨ FreeRTOS ä¸­ï¼Œ0 æœ€ä½ï¼Œ(configMAX_PRIORITIES â€“ 1) æœ€é«˜\npxCreatedTaskï¼šhandleï¼Œæ˜¯ä¸€ä¸ªè¢«å»ºç«‹å‡ºæ¥çš„ task å¯ä»¥ç”¨åˆ°çš„è¯†åˆ«ç¬¦å·\nåˆ é™¤ task çš„å‡½æ•°\nvoid vTaskDelete( xTaskHandle pxTaskToDelete ); pxTaskToDelete: åˆ©ç”¨handleå»è¯†åˆ«å‡ºå“ªä¸€ä¸ªtaskã€‚ è¿™ç§å¯èƒ½æ€§å­˜åœ¨äºå¦‚æœåœ¨ loop ä¸­å‘ç”Ÿæ‰§è¡Œé”™è¯¯ (fail)ï¼Œåˆ™éœ€è¦è·³å‡ºå›åœˆå¹¶ç»ˆæ­¢(è‡ªå·±)æ‰§è¡Œï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ vTaskDelete æ¥åˆ é™¤è‡ªå·±ï¼Œå‘ç”Ÿé”™è¯¯çš„ä¾‹å­ï¼š å‡å¦‚ä»Šå¤©ä¸€ä¸ª task æ˜¯è¦å­˜å–èµ„æ–™åº“ï¼Œä½†æ˜¯èµ„æ–™åº“æˆ–èµ„æ–™è¡¨ä¸å­˜åœ¨ï¼Œåˆ™åº”è¯¥ç»“æŸ task å‡å¦‚ä»Šå¤©ä¸€ä¸ª client task æ˜¯è¦è·Ÿ server åšè¿çº¿( listening å°±æ˜¯ loop)ï¼Œå´å‘ç° client ç«¯æ²¡æœ‰ç½‘è·¯è¿çº¿ï¼Œåˆ™åº”ç»“æŸ task Ready list çš„èµ„æ–™å½¢æ€ # FreeRTOS ä½¿ç”¨ ready list å»ç®¡ç†å‡†å¤‡å¥½è¦æ‰§è¡Œçš„ tasksï¼Œè€Œ ready list çš„èµ„æ–™å‚¨å­˜æ–¹å¼å¦‚ä¸‹å›¾\nOS ä¼šåœ¨è¿›è¡Œ context switch æ—¶é€‰å‡ºä¸‹ä¸€ä¸ªæ¬²æ‰§è¡Œçš„ task\nä¸‹é¢æ˜¯åœ¨ ready list ä¸­ä¾ç…§ä¼˜å…ˆæƒé€‰å–æ‰§è¡Œç›®æ ‡çš„ç¨‹å¼éƒ¨åˆ†ï¼ŒFreeRTOS çš„ä¼˜å…ˆæƒæœ€å°ä¸º 0ï¼Œæ•°å­—è¶Šå¤§åˆ™ä¼˜å…ˆæƒè¶Šé«˜\ntask.c\n#define taskSELECT_HIGHEST_PRIORITY_TASK()\t{ /* é€‰å‡ºå«æœ‰ ready task çš„æœ€é«˜ä¼˜å…ˆæƒ queue */\twhile( listLIST_IS_EMPTY( \u0026amp;( pxReadyTasksLists[ uxTopReadyPriority ] ) ) )\t{\tconfigASSERT( uxTopReadyPriority );\t//å¦‚æœæ‰¾ä¸åˆ°åˆ™ assert exception\t--uxTopReadyPriority;\t}\t/* listGET_OWNER_OF_NEXT_ENTRY indexes through the list, so the tasks of\tthe same priority get an equal share of the processor time. */\tlistGET_OWNER_OF_NEXT_ENTRY( pxCurrentTCB, \u0026amp;( pxReadyTasksLists[ uxTopReadyPriority ] ) );\t} ä»å‰é¢çš„å›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ä¸€ä¸ª ready task list ä¸­çš„æ¯ä¸ªç´¢å¼•å„è‡ªæŒ‡å‘äº†ä¸€ä¸² task listï¼Œæ‰€ä»¥ listGET_OWNER_OF_NEXT_ENTRY å°±æ˜¯åœ¨æŸä¸ª ready task list ç´¢å¼•ä¸­å»å–å¾—å…¶ä¸­ task list é‡ŒæŸä¸ª task çš„ TCB\ninclude/list.h\n#define listGET_OWNER_OF_NEXT_ENTRY( pxTCB, pxList ) { List_t * const pxConstList = ( pxList ); /* Increment the index to the next item and return the item, ensuring */ /* we don\u0026#39;t return the marker used at the end of the list. */ ( pxConstList )-\u0026gt;pxIndex = ( pxConstList )-\u0026gt;pxIndex-\u0026gt;pxNext; if( ( void * ) ( pxConstList )-\u0026gt;pxIndex == ( void * ) \u0026amp;( ( pxConstList )-\u0026gt;xListEnd ) ) \\ { ( pxConstList )-\u0026gt;pxIndex = ( pxConstList )-\u0026gt;pxIndex-\u0026gt;pxNext; } ( pxTCB ) = ( pxConstList )-\u0026gt;pxIndex-\u0026gt;pvOwner; } Task Control Block (TCB)çš„èµ„æ–™ç»“æ„(tasks.c) /* In file: tasks.c */ typedef struct tskTaskControlBlock { volatile portSTACK_TYPE *pxTopOfStack; /* æŒ‡å‘ task è®°å¿†ä½“å †å æœ€åä¸€ä¸ªé¡¹ç›®çš„ä½å€ï¼Œè¿™å¿…é¡»æ˜¯ struct ä¸­çš„ç¬¬ä¸€ä¸ªé¡¹ç›® (æœ‰å…³ offset) */ xListItem xGenericListItem; /* ç”¨æ¥è®°å½• task çš„ TCB åœ¨ FreeRTOS ready å’Œ blocked queue çš„ä½ç½® */ xListItem xEventListItem; /* ç”¨æ¥è®°å½• task çš„ TCB åœ¨ FreeRTOS event queue çš„ä½ç½® */ unsigned portBASE_TYPE uxPriority; /* task çš„ä¼˜å…ˆæƒ */ portSTACK_TYPE *pxStack; /* æŒ‡å‘ task è®°å¿†ä½“å †å çš„èµ·å§‹ä½å€ */ signed char pcTaskName[ configMAX_TASK_NAME_LEN ]; /* task è¢«å»ºç«‹æ—¶è¢«èµ‹äºˆçš„æœ‰æ„ä¹‰åç§°(ä¸ºäº† debug ç”¨)*/ #if ( portSTACK_GROWTH \u0026gt; 0 ) portSTACK_TYPE *pxEndOfStack; /* stack overflow æ—¶ä½œæ£€æŸ¥ç”¨çš„ */ #endif #if ( configUSE_MUTEXES == 1 ) unsigned portBASE_TYPE uxBasePriority; /* æ­¤ task æœ€æ–°çš„ä¼˜å…ˆæƒ */ #endif } tskTCB; pxTopOfStack , pxEndOfStackï¼šè®°å½• stack çš„å¤§å° uxPriority , uxBasePriorityï¼šå‰è€…è®°å½•ç›®å‰çš„ä¼˜å…ˆæƒ ,åè€…è®°å½•åŸæœ¬çš„ä¼˜å…ˆæƒï¼ˆå¯èƒ½å‘ç”Ÿåœ¨ Mutex) xGenericListItem , xEventListItemï¼šå½“ä¸€ä¸ªä»»åŠ¡è¢«æ”¾å…¥ FreeRTOS çš„ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼ŒFreeRTOS åœ¨ TCB ä¸­æ’å…¥æŒ‡å‘è¿™ä¸ªä»»åŠ¡çš„ pointer çš„åœ°æ–¹ xTaskCreate() å‡½æ•°è¢«å‘¼å«çš„æ—¶å€™ï¼Œä¸€ä¸ªä»»åŠ¡ä¼šè¢«å»ºç«‹ã€‚FreeRTOS ä¼šä¸ºæ¯ä¸€ä¸ªä»»åŠ¡åˆ†é…ä¸€ä¸ªæ–°çš„ TCB targetï¼Œç”¨æ¥è®°å½•å®ƒçš„åç§°ã€ä¼˜å…ˆæƒå’Œå…¶ä»–ç»†èŠ‚ï¼Œæ¥è‘—é…ç½®ç”¨æˆ·æ‰€è¯·æ±‚çš„ HeapStack ç©ºé—´ï¼ˆå‡è®¾æœ‰è¶³å¤Ÿä½¿ç”¨çš„è®°å¿†ä½“ï¼‰ï¼Œå¹¶åœ¨ TCB çš„ pxStack æˆå‘˜ä¸­è®°å½• Stack çš„è®°å¿†ä½“èµ·å§‹ä½å€ã€‚\né…ç½®TCBåŠstackçš„å‡½å¼ - prvAllocateTCBAndStack()(tasks.c) /* stack è®°å¿†ä½“ç”±é«˜åˆ°ä½ */ #if( portSTACK_GROWTH \u0026gt; 0 ) { /* pvPortMalloc å°±æ˜¯åšè®°å¿†ä½“é…ç½®*/ pxNewTCB = ( TCB_t * ) pvPortMalloc( sizeof( TCB_t ) ); /* å¦‚æœpxNewTCBä¸ºç©º*/ if( pxNewTCB != NULL ) { /* åšè®°å¿†ä½“å¯¹é½åŠ¨ä½œ */ pxNewTCB-\u0026gt;pxStack = ( StackType_t * ) pvPortMallocAligned( ( ( ( size_t ) usStackDepth ) * sizeof( StackType_t ) ), puxStackBuffer ); /* Stack ä»ä¸ºNULLçš„è¯ï¼Œåˆ™åˆ é™¤TCBï¼Œå¹¶ä¸”æŒ‡å‘NULL */ if( pxNewTCB-\u0026gt;pxStack == NULL ) { vPortFree( pxNewTCB ); pxNewTCB = NULL; } } } åœ¨è¿›è¡ŒpvPortMallocæ—¶å€™ï¼Œä¼šå…ˆè¿›è¡ŒvTaskSuspendAll(); ï¼Œå€Ÿç”±ä¸å‘ç”Ÿcontext swiitchçš„swap outåŠ¨ä½œï¼Œé…ç½®è®°å¿†ä½“ç©ºé—´ï¼Œç­‰åˆ°é…ç½®å®Œæˆå†å‘¼å«xTaskResumeAll();\npvPortMallocåœ¨port.cé‡Œé¢å®šä¹‰ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯åšè®°å¿†ä½“é…ç½®ï¼Œæ ¹æ®å„ä¸åŒportå»å®ä½œpvPortMallocã€‚\npvPortMallocAlignedåœ¨åœ¨FreeRTOS.hé‡Œé¢å¯ä»¥çœ‹åˆ°defineä¸ºå¦‚æœåˆ¤æ–­æœªé…ç½®ç©ºé—´ï¼Œåˆ™è¿›è¡ŒpvPortMallocï¼Œå¦‚æœæœ‰åˆ™ç›´æ¥ä½¿ç”¨puxStackBufferã€‚\nç¡¬ä½“å±‚æ¬¡çš„è®¾å®š\nä¸ºäº†ä¾¿äºæ’ç¨‹ï¼Œåˆ›é€ æ–° task æ—¶ï¼Œstack ä¸­é™¤äº†è¯¥æœ‰çš„èµ„æ–™å¤–ï¼Œè¿˜è¦åŠ ä¸Šã€ç©ºçš„ã€ register èµ„æ–™(ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ç†è®ºä¸Š register ä¸ä¼šæœ‰èµ„æ–™)ï¼Œè®©æ–° task å°±åƒæ˜¯è¢« context switch æ—¶é€‰çš„ task ä¸€æ ·ï¼Œä¾ç…§å‰è¿°å˜æ•°çš„å‘½åè§„åˆ™ï¼Œä¸‹é¢æ˜¯å®ä½œæ–¹å¼\nportable/GCC/ARM_CM4F/port.c\n/* In file: port.c */ StackType_t *pxPortInitialiseStack( StackType_t *pxTopOfStack, TaskFunction_t pxCode, void *pvParameters ) { /* Simulate the stack frame as it would be created by a context switch interrupt. */ /* Offset added to account for the way the MCU uses the stack on entry/exit of interrupts, and to ensure alignment. */ pxTopOfStack--; *pxTopOfStack = portINITIAL_XPSR;\t/* xPSR */ pxTopOfStack--; *pxTopOfStack = ( StackType_t ) pxCode;\t/* PC */ pxTopOfStack--; *pxTopOfStack = ( StackType_t ) portTASK_RETURN_ADDRESS;\t/* LR */ /* Save code space by skipping register initialisation. */ pxTopOfStack -= 5;\t/* R12, R3, R2 and R1. */ *pxTopOfStack = ( StackType_t ) pvParameters;\t/* R0 */ /* A save method is being used that requires each task to maintain its own exec return value. */ pxTopOfStack--; *pxTopOfStack = portINITIAL_EXEC_RETURN; pxTopOfStack -= 8;\t/* R11, R10, R9, R8, R7, R6, R5 and R4. */ return pxTopOfStack; } åœ¨ TCB å®Œæˆåˆå§‹åŒ–åï¼Œè¦æŠŠè¯¥ TCB æ¥ä¸Šå…¶ä»–ç›¸å…³çš„ listï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­å¿…é¡»æš‚æ—¶åœæ­¢ interrupt åŠŸèƒ½ï¼Œä»¥å…åœ¨ list è¿˜æ²¡è®¾å®šå¥½å‰å°±è¢«ä¸­æ–­è®¾å®š(ä¾‹å¦‚ systick)\nè€Œ ARM Cortex-M4 å¤„ç†å™¨åœ¨ task é‡åˆ°ä¸­æ–­æ—¶ï¼Œä¼šå°† register çš„å†…å®¹ push è¿›è¯¥ task çš„ stack çš„é¡¶ç«¯ï¼Œå¾…ä¸‹æ¬¡æ‰§è¡Œæ—¶å† pop å‡ºå»ï¼Œä»¥ä¸‹æ˜¯åœ¨ port.c é‡Œçš„å®ä½œ\nportable/GCC/ARM_CM4F/port.c\n/* In file: port.c */ void xPortPendSVHandler( void ) { /* This is a naked function. */ __asm volatile ( \u0026#34;\tmrs r0, psp\t\\n\u0026#34; // psp: Process Stack Pointer \u0026#34;\tisb\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; \u0026#34;\tldr\tr3, pxCurrentTCBConst\t\\n\u0026#34; /* Get the location of the current TCB. */ \u0026#34;\tldr\tr2, [r3]\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; // tst used \u0026#34;and\u0026#34; to test. \u0026#34;\ttst r14, #0x10\t\\n\u0026#34; /* Is the task using the FPU context? If so, push high vfp registers. */ \u0026#34;\tit eq\t\\n\u0026#34; \u0026#34;\tvstmdbeq r0!, {s16-s31}\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; // stmdb: db means \u0026#34;decrease before\u0026#34; \u0026#34;\tstmdb r0!, {r4-r11, r14}\t\\n\u0026#34; /* Save the core registers. */ \u0026#34;\t\\n\u0026#34; \u0026#34;\tstr r0, [r2]\t\\n\u0026#34; /* Save the new top of stack into the first member of the TCB. */ \u0026#34;\t\\n\u0026#34; \u0026#34;\tstmdb sp!, {r3}\t\\n\u0026#34; \u0026#34;\tmov r0, %0 \\n\u0026#34; \u0026#34;\tmsr basepri, r0\t\\n\u0026#34; \u0026#34;\tbl vTaskSwitchContext\t\\n\u0026#34; \u0026#34;\tmov r0, #0\t\\n\u0026#34; \u0026#34;\tmsr basepri, r0\t\\n\u0026#34; \u0026#34;\tldmia sp!, {r3}\t\\n\u0026#34; // r3 now is switched to the higher priority task \u0026#34;\t\\n\u0026#34; \u0026#34;\tldr r1, [r3]\t\\n\u0026#34; /* The first item in pxCurrentTCB is the task top of stack. */ \u0026#34;\tldr r0, [r1]\t\\n\u0026#34; // this r0 is \u0026#34;pxTopOfStack\u0026#34; \u0026#34;\t\\n\u0026#34; \u0026#34;\tldmia r0!, {r4-r11, r14}\t\\n\u0026#34; /* Pop the core registers. */ \u0026#34;\t\\n\u0026#34; \u0026#34;\ttst r14, #0x10\t\\n\u0026#34; /* Is the task using the FPU context? If so, pop the high vfp registers too. */ \u0026#34;\tit eq\t\\n\u0026#34; \u0026#34;\tvldmiaeq r0!, {s16-s31}\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; \u0026#34;\tmsr psp, r0\t\\n\u0026#34; \u0026#34;\tisb\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; #ifdef WORKAROUND_PMU_CM001 /* XMC4000 specific errata workaround. */ #if WORKAROUND_PMU_CM001 == 1 \u0026#34;\tpush { r14 }\t\\n\u0026#34; \u0026#34;\tpop { pc }\t\\n\u0026#34; #endif #endif \u0026#34;\t\\n\u0026#34; \u0026#34;\tbx r14\t\\n\u0026#34; \u0026#34;\t\\n\u0026#34; //number X must be a power of 2. That is 2, 4, 8, 16, and so on... \u0026#34;\t.align 2\t\\n\u0026#34; //on a memory address that is a multiple of the value X \u0026#34;pxCurrentTCBConst: .word pxCurrentTCB\t\\n\u0026#34; ::\u0026#34;i\u0026#34;(configMAX_SYSCALL_INTERRUPT_PRIORITY) ); } ``` Interrupt çš„å®ä½œï¼Œæ˜¯å°† CPU ä¸­æ§åˆ¶ interrupt æƒé™çš„æš‚å­˜å™¨(basepri)å†…å®¹è®¾ä¸ºæœ€é«˜ï¼Œæ­¤æ—¶å°†æ²¡æœ‰ä»»ä½• interrupt å¯ä»¥è¢«å‘¼å«ï¼Œè¯¥å‘¼å«çš„å‡½æ•°åç§°ä¸º ulPortSetInterruptMask() [portable/GCC/ARM_CM4F/port.c](https://github.com/TheKK/myFreeRTOS/blob/master/portable/GCC/ARM_CM4F/port.c#L419) ``` c __attribute__(( naked )) uint32_t ulPortSetInterruptMask( void ) { __asm volatile ( \u0026#34; mrs r0, basepri \\n\u0026#34; \u0026#34; mov r1, %0 \\n\u0026#34; \u0026#34; msr basepri, r1 \\n\u0026#34; \u0026#34; bx lr \\n\u0026#34; :: \u0026#34;i\u0026#34; ( configMAX_SYSCALL_INTERRUPT_PRIORITY ) : \u0026#34;r0\u0026#34;, \u0026#34;r1\u0026#34; ); /* This return will not be reached but is necessary to prevent compiler warnings. */ return 0; å€Ÿæ­¤ mask é®ç½©æ‰æ‰€æœ‰çš„ interrupt (æ‰€æœ‰ä¼˜å…ˆæƒä½äº configMAX_SYSCALL_INTERRUPT_PRIORITY çš„ task å°†æ— æ³•è¢«æ‰§è¡Œ)\nå‚ç…§ï¼šhttp://www.freertos.org/RTOS-Cortex-M3-M4.html\nå½“ä½¿ç”¨ vTaskCreate() å°† task è¢«å»ºç«‹å‡ºæ¥ä»¥åï¼Œéœ€è¦ä½¿ç”¨ vTaskStartScheduler() æ¥å¯åŠ¨æ’ç¨‹å™¨å†³å®šè®©å“ªä¸ª task å¼€å§‹æ‰§è¡Œï¼Œå½“ vTaskStartScheduler() è¢«å‘¼å«æ—¶ï¼Œä¼šå…ˆå»ºç«‹ä¸€ä¸ª idle taskï¼Œè¿™ä¸ª task æ˜¯ä¸ºäº†ç¡®ä¿ CPU åœ¨ä»»ä¸€æ—¶é—´è‡³å°‘æœ‰ä¸€ä¸ª task å¯ä»¥æ‰§è¡Œ (å–ä»£ç›´æ¥åˆ‡æ¢å› kernel task) è€Œåœ¨ vTaskStartScheduler() è¢«å‘¼å«æ—¶è‡ªåŠ¨å»ºç«‹çš„ user taskï¼Œidle task çš„ priority ä¸º 0 (lowest)ï¼Œç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿å½“æœ‰å…¶ä»– user task è¿›å…¥ ready list æ—¶å¯ä»¥é©¬ä¸Šè¢«æ‰§è¡Œ\nvTaskStartScheduler (tasks.c)\n/* Add the idle task at the lowest priority. */ #if ( INCLUDE_xTaskGetIdleTaskHandle == 1 ) { /* Create the idle task, storing its handle in xIdleTaskHandle so it can be returned by the xTaskGetIdleTaskHandle() function. */ xReturn = xTaskCreate( prvIdleTask, \u0026#34;IDLE\u0026#34;, tskIDLE_STACK_SIZE, ( void * ) NULL, ( tskIDLE_PRIORITY | portPRIVILEGE_BIT ), \u0026amp;xIdleTaskHandle ); /*lint !e961 MISRA exception, justified as it is not a redundant explicit cast to all supported compilers. */ } #else { /* Create the idle task without storing its handle. */ xReturn = xTaskCreate( prvIdleTask, \u0026#34;IDLE\u0026#34;, tskIDLE_STACK_SIZE, ( void * ) NULL, ( tskIDLE_PRIORITY | portPRIVILEGE_BIT ), NULL ); /*lint !e961 MISRA exception, justified as it is not a redundant explicit cast to all supported compilers. */ } #endif /* INCLUDE_xTaskGetIdleTaskHandle */ æ¥è‘—æ‰å‘¼å« xPortStartScheduler() å»æ‰§è¡Œ task\nBlocked Task çš„ blocked çŠ¶æ€é€šå¸¸æ˜¯ task è¿›å…¥äº†ä¸€ä¸ªéœ€è¦ç­‰å¾…æŸäº‹ä»¶å‘ç”Ÿçš„çŠ¶æ€ï¼Œè¿™ä¸ªäº‹ä»¶é€šå¸¸æ˜¯æ‰§è¡Œæ—¶é—´åˆ°äº†(ä¾‹å¦‚ systick interrupt)æˆ–æ˜¯åŒæ­¥å¤„ç†çš„å›åº”ï¼Œå¦‚æœåƒä¸€å¼€å§‹çš„ ATaskFunciton() ä¸­ä½¿ç”¨ while(1){} è¿™æ ·çš„æ— é™å›åœˆæ¥ä½œç­‰å¾…äº‹ä»¶ï¼Œä¼šå ç”¨ CPU è¿ç®—èµ„æºï¼Œä¹Ÿå°±æ˜¯ task å®é™…ä¸Šæ˜¯åœ¨ runningï¼Œä½†åˆæ²¡åšä»»ä½•äº‹æƒ…ï¼Œå ç”¨è‘—èµ„æºåªä¸ºäº†ç­‰å¾… eventï¼Œæ‰€ä»¥æ¯”è¾ƒå¥½çš„ä½œæ³•æ˜¯æ”¹ç”¨ vTaskDelay()ï¼Œå½“ task å‘¼å«äº† vTaskDelay()ï¼Œtask ä¼šè¿›å…¥ blocked çŠ¶æ€ï¼Œå°±å¯ä»¥è®©å‡º CPU èµ„æºäº†\nä½¿ç”¨ infinite loop çš„æ‰§è¡Œæ—¶åºå›¾\nä½¿ç”¨ vTaskDelay() çš„æ‰§è¡Œæ—¶åºå›¾\nvTaskDelay()ï¼šè¿™ä¸ªå‡½å¼çš„å‚æ•°å¦‚æœç›´æ¥ç»™æ•°å€¼ï¼Œæ˜¯ ticksï¼Œä¾‹å¦‚ vTaskDelay(250) æ˜¯æš‚åœ 250 ä¸ª ticks çš„æ„æ€ï¼Œç”±äºæ¯ä¸ª CPU çš„ä¸€ä¸ª tick æ—¶é—´é•¿åº¦ä¸åŒï¼ŒFreeRTOS æä¾›äº† portTICK_RATE_MS è¿™ä¸ªå·¨é›†å¸¸æ•°ï¼Œå¯ä»¥å¸®æˆ‘ä»¬è½¬æ¢ ticks æ•°ä¸ºæ¯«ç§’ (ms)ï¼Œä¹Ÿå°±æ˜¯è¯´ vTaskDelay( 250/portTICK_RATE_MS ) è¿™ä¸ªå†™æ³•ï¼Œå°±æ˜¯è®© task æš‚åœ 250 æ¯«ç§’(ms)çš„æ„æ€ (v8.2.1 æ”¹åä¸º portTICK_PERIOD_MS)\nSuspended\nå¦‚æœä¸€ä¸ª task ä¼šæœ‰ä¸€æ®µæ—¶é—´ä¸ä¼šæ‰§è¡Œï¼Œé‚£å°±å¯ä»¥è¿›å…¥ suspend çŠ¶æ€ã€‚\nä¾‹å¦‚æœ‰ä¸ª task å«åš taskPrintï¼Œåªåš print èµ„æ–™ï¼Œè€Œæœ‰å¥½å‡ ä¸ª operation è´Ÿè´£åšè¿ç®—ï¼Œè‹¥è¿ç®—è¦å¾ˆä¹…ï¼Œåˆ™å¯ä»¥æŠŠ taskPrint å…ˆä¸¢å…¥ suspend çŠ¶æ€ä¸­ï¼Œç›´åˆ°æ‰€æœ‰è¿ç®—çš†å®Œæˆåï¼Œå†å”¤é†’ taskPrint è¿›å…¥ ready çŠ¶æ€ï¼Œæœ€åå°†èµ„æ–™ print å‡ºæ¥\nvTaskSuspend ä½¿ç”¨èŒƒä¾‹ï¼š\nvoid vAFunction( void ) { TaskHandle_t xHandle; // Create a task, storing the handle. xTaskCreate( vTaskCode, \u0026#34;NAME\u0026#34;, STACK_SIZE, NULL, tskIDLE_PRIORITY, \u0026amp;xHandle ); // ... // If xHandle will wait for a long time. // Use the handle to suspend the created task. vTaskSuspend( xHandle ); // ... // The created task will not run during this period, unless // another task calls vTaskResume( xHandle ). //... // Suspend ourselves. vTaskSuspend( NULL ); // We cannot get here unless another task calls vTaskResume // with our handle as the parameter. } å›ç›®å½•\né€šè®¯ # åœ¨ FreeRTOS ä¸­ï¼Œtask ä¹‹é—´çš„æ²Ÿé€šæ˜¯é€è¿‡æŠŠèµ„æ–™ä¼ é€åˆ° queue å’Œè¯»å– queue ä¸­èµ„æ–™å®ç°çš„\nQueue FreeRTOS çš„ task é¢„è®¾æ˜¯é‡‡ç”¨ deep copy çš„æ–¹å¼æ¥å°†èµ„æ–™é€åˆ° queue ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¼šæŠŠèµ„æ–™æŒ‰ç…§å­—å…ƒä¸€ä¸ªä¸€ä¸ªå¤åˆ¶ä¸€ä»½åˆ° queue ä¸­ï¼Œå½“è¦ä¼ é€’çš„èµ„æ–™å¾ˆå¤§æ—¶ï¼Œå»ºè®®ä¸è¦è¿™æ ·ä¼ é€’ï¼Œæ”¹é‡‡ç”¨ä¼ é€’èµ„æ–™æŒ‡æ ‡çš„æ–¹å¼ï¼Œå¦‚ shallow copyã€‚å¥½å¤„æ˜¯å¯ä»¥ç›´æ¥åšå¤§èµ„æ–™å¤åˆ¶ï¼Œç¼ºç‚¹å°±æ˜¯ä¼šå½±å“åˆ°è®°å¿†ä½“å†…å®¹ã€‚ä¸ç®¡ä½ é€‰æ‹©å“ªä¸€ä¸ªæ–¹å¼æ”¾å…¥ queue ä¸­ï¼ŒFreeRTOS åªå…³å¿ƒ data çš„å¤§å°ï¼Œä¸å…³å¿ƒæ˜¯å“ªä¸€ç§ data copy çš„æ–¹å¼ã€‚\nShallow Copy Deep Copy Queue çš„ç»“æ„ queue.c\n/* In file: queue.c */ typedef struct QueueDefinition{ signed char *pcHead; /* Points to the beginning of the queue storage area. */ signed char *pcTail; /* Points to the byte at the end of the queue storage area. One more byte is allocated than necessary to store the queue items; this is used as a marker. */ signed char *pcWriteTo; /* Points to the free next place in the storage area. */ signed char *pcReadFrom; /* Points to the last place that a queued item was read from. */ xList xTasksWaitingToSend; /* List of tasks that are blocked waiting to post onto this queue. Stored in priority order. */ xList xTasksWaitingToReceive; /* List of tasks that are blocked waiting to read from this queue. Stored in priority order. */ volatile unsigned portBASE_TYPE uxMessagesWaiting;/* The number of items currently in the queue. */ unsigned portBASE_TYPE uxLength; /* The length of the queue defined as the number of items it will hold, not the number of bytes. */ unsigned portBASE_TYPE uxItemSize; /* The size of each items that the queue will hold. */ } xQUEUE; ç”±äºä¸€ä¸ª queue å¯ä»¥è¢«å¤šä¸ª task å†™å…¥ï¼ˆå³ send dataï¼‰ï¼Œæ‰€ä»¥æœ‰ xTasksWaitingToSend è¿™ä¸ª list æ¥è¿½è¸ªè¢« block ä½çš„ taskï¼ˆç­‰å¾…å†™å…¥èµ„æ–™åˆ° queue é‡Œçš„ taskï¼‰ï¼Œæ¯å½“æœ‰ä¸€ä¸ª item ä» queue ä¸­è¢«ç§»é™¤ï¼Œç³»ç»Ÿå°±ä¼šæ£€æŸ¥ xTasksWaitingToSendï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ç­‰å¾…ä¸­çš„ task åœ¨ list é‡Œï¼Œå¹¶åœ¨è¿™äº› task ä¸­é€‰å‡ºä¸€ä¸ª priority æœ€é«˜çš„ï¼Œè®©å®ƒæ¢å¤æ‰§è¡Œæ¥è¿›è¡Œå†™å…¥èµ„æ–™çš„åŠ¨ä½œï¼Œè‹¥è¿™äº› task çš„ priority éƒ½ä¸€æ ·ï¼Œé‚£ä¼šæŒ‘ç­‰å¾…æœ€ä¹…çš„ taskã€‚\næœ‰è®¸å¤š task è¦ä» queue ä¸­è¯»å–èµ„æ–™æ—¶ä¹Ÿæ˜¯ä¸€æ ·ï¼ˆå³receive dataï¼‰ï¼Œè‹¥ queue ä¸­æ²¡æœ‰ä»»ä½• itemï¼Œè€ŒåŒæ—¶è¿˜æœ‰å¥½å‡ ä¸ª task æƒ³è¦è¯»å–èµ„æ–™ï¼Œåˆ™è¿™äº› task ä¼šè¢«åŠ å…¥ xTasksWaitingToReceive é‡Œï¼Œæ¯å½“æœ‰ä¸€ä¸ª item è¢«æ”¾å…¥ queue ä¸­ï¼Œç³»ç»Ÿä¸€æ ·å»æ£€æŸ¥ xTasksWaitingToReceiveï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ç­‰å¾…ä¸­çš„ task åœ¨ list é‡Œï¼Œå¹¶åœ¨è¿™äº› task ä¸­é€‰å‡ºä¸€ä¸ª priority æœ€é«˜çš„ï¼Œè®©å®ƒæ¢å¤æ‰§è¡Œæ¥è¿›è¡Œè¯»å–èµ„æ–™çš„åŠ¨ä½œï¼Œè‹¥è¿™äº› task çš„ priority éƒ½ä¸€æ ·ï¼Œé‚£ä¼šæŒ‘ç­‰å¾…æœ€ä¹…çš„ taskã€‚\nQueue çš„ç”¨æ³• /CORTEX_M4F_STM32_DISCOVERY/main.c\n/*file: ./CORTEX_M4F_STM32F407ZG-SK/main.c*/ /*line:47*/ xQueueHandle MsgQueue; /*line:214*/ void QTask1( void* pvParameters ) { uint32_t snd = 100; while( 1 ){ xQueueSend( MsgQueue, ( uint32_t* )\u0026amp;snd, 0 ); vTaskDelay(1000); } } void QTask2( void* pvParameters ) { uint32_t rcv = 0; while( 1 ){ if( xQueueReceive( MsgQueue, \u0026amp;rcv, 100/portTICK_RATE_MS ) == pdPASS \u0026amp;\u0026amp; rcv == 100) { STM_EVAL_LEDToggle( LED3 ); } } } å…³äº queue çš„æ“ä½œå‡½å¼å®šä¹‰åœ¨ Source/queue.c\nFreeRTOS ä¸­ä¹Ÿå¯ä½¿ç”¨ queue æ¥å®ä½œ semaphore å’Œ mutexï¼š\n* Semaphores - ç”¨æ¥è®©ä¸€ä¸ª task å”¤é†’å”¤é†’(wake)å¦ä¸€ä¸ª taskï¼Œä¾‹å¦‚: producer å’Œ consumer * Mutexes - ç”¨æ¥å¯¹å…±äº«èµ„æº(critical section)åšäº’æ–¥å­˜å– mutex å’Œ semaphore çš„å·®å¼‚ï¼Œè¯·å‚è§è¿™ç¯‡çŸ­æ–‡: http://embeddedgurus.com/barr-code/2008/01/rtos-myth-1-mutexes-and-semaphores-are-interchangeable/\nå®ä½œ semaphore N-element semaphoreï¼Œåªéœ€åŒæ­¥ uxMessagesWaitingï¼Œä¸”åªéœ€å…³å¿ƒæœ‰å¤šå°‘ queue entries è¢«å ç”¨ï¼Œå…¶ä¸­ uxItemSize ä¸º 0ï¼Œitem å’Œ data copying æ˜¯ä¸éœ€è¦çš„ã€‚\néœ€è¦ç”¨åˆ° ARM Cortex-M4F ç‰¹æœ‰çš„æœºåˆ¶ï¼Œæ‰èƒ½å®åš semaphoreï¼Œè¿™ä¸ªæœºåˆ¶ä¸ºã€åœ¨å­˜å– uxMessagesWaiting æ—¶å¿…é¡»ç¡®ä¿åŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ª task åœ¨åšæ›´æ”¹ï¼ˆè¿›å‡ºå…¥ critical sectionï¼‰ã€ï¼Œè¦é˜²æ­¢ä¸€æ¬¡ä¸¤ä¸ª task è¿›å…¥ä¿®æ”¹çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nportable/GCC/ARM_CM4F/port.c\n/* In file: port.c */ void vPortEnterCritical( void ) { portDISABLE_INTERRUPTS(); uxCriticalNesting++; __asm volatile( \u0026#34;dsb\u0026#34; ); __asm volatile( \u0026#34;isb\u0026#34; ); } /*-----------------------------------------------------------*/ void vPortExitCritical( void ) { configASSERT( uxCriticalNesting ); uxCriticalNesting--; if( uxCriticalNesting == 0 ) { portENABLE_INTERRUPTS(); } } å®ä½œ mutex å› ä¸º pcHead å’Œ pcTail ä¸éœ€è¦ï¼Œæ‰€ä»¥ç”¨ overloadind æ¥è¾¾åˆ°è¾ƒå¥½çš„ä½¿ç”¨ç‡ï¼š\nqueue.c\n/* Effectively make a union out of the xQUEUE structure. */ #define uxQueueType pcHead #define pxMutexHolder pcTail - uxQueueType è‹¥ä¸º 0ï¼Œè¡¨ç¤ºè¿™ä¸ª queue å·²ç»è¢«ç”¨æ¥å½“ä½œ mutex - pxMutexHolder ç”¨æ¥å®ä½œ priority inheritance è¡¥å……: http://embeddedgurus.com/barr-code/2008/03/rtos-myth-3-mutexes-are-needed-at-the-task-level/\nç”Ÿäº§è€…ä¸æ¶ˆè´¹è€… ä½¿ç”¨ FreeRTOS çš„ semaphore å’Œ mutex æ¥å®ä½œç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…é—®é¢˜ï¼š\nSemaphoreHandle_t xMutex = NULL; SemaphoreHandle_t empty = NULL; SemaphoreHandle_t full = NULL; xQueueHandle buffer = NULL; long sendItem = 1; long getItem = -1; void Producer1(void* pvParameters){ while(1){ // initial is 10, so producer can push 10 item if( xSemaphoreTake(empty, portMAX_DELAY) == pdTRUE ){ if( xSemaphoreTake(xMutex, portMAX_DELAY) == pdTRUE ){ /******************** enter critical section ********************/ xQueueSend( buffer, \u0026amp;sendItem, 0 ); USART1_puts(\u0026#34;add item, buffer = \u0026#34;); itoa( (long)uxQueueSpacesAvailable(buffer), 10); sendItem++; /******************** exit critical section ********************/ xSemaphoreGive(xMutex); } // give \u0026#34;full\u0026#34; semaphore xSemaphoreGive(full); } vTaskDelay(90000); } } void Consumer1(void* pvParameters){ while(1){ // initial is 0 so consumer can\u0026#39;t get any item if( xSemaphoreTake(full, portMAX_DELAY) == pdTRUE ){ if( xSemaphoreTake(xMutex, portMAX_DELAY) == pdTRUE ){ /******************** enter critical section ********************/ xQueueReceive( buffer, \u0026amp;getItem, 0 ); USART1_puts(\u0026#34;get: \u0026#34;); itoa(getItem, 10); /******************** exit critical section ********************/ xSemaphoreGive(xMutex); } // give \u0026#34;empty\u0026#34; semaphore xSemaphoreGive(empty); } vTaskDelay(80000); } } ``` [å›ç›®å½•](#ç›®å½•) æ’ç¨‹ ---------------- * åŸºæœ¬æ¦‚å¿µ ![](https://wiki.csie.ncku.edu.tw/suspending.gif) FreeRTOS ä¸­é™¤äº†ç”± kernel è¦æ±‚ task äº¤å‡º CPU æ§åˆ¶æƒå¤–ï¼Œtask ä¹Ÿèƒ½å¤Ÿå¯ä»¥è‡ªè¡Œäº¤å‡º CPU æ§åˆ¶æƒ Delay(sleep): æš‚åœæ‰§è¡Œä¸€æ®µæ—¶é—´ [/CORTEX_M4F_STM32_DISCOVERY/main.c](https://github.com/TheKK/myFreeRTOS/blob/exti/CORTEX_M4F_STM32_DISCOVERY/main.c#L177) ``` c void Task2( void* pvParameters ) { while( 1 ){ vTaskDelay( 1000 ); itoa(iii, 10); iii = 0; } } ä½¿ç”¨ vTaskDelay(ticks) ä¼šå°†ç›®å‰ task çš„ ListItem ä» ReadyList ä¸­ç§»é™¤å¹¶æ”¾å…¥ DelayList æˆ–æ˜¯ OverflowDelayList ä¸­(ç”±ç°åœ¨çš„ systick åŠ ä¸Šæ¬²ç­‰å¾…çš„ systick æœ‰æ—  overflow å†³å®š)ï¼Œä½† task ä¸æ˜¯åœ¨å‘¼å«äº† vTaskDelay() åé©¬ä¸Šäº¤å‡º CPU æ§åˆ¶æƒï¼Œè€Œæ˜¯åœ¨ä¸‹ä¸€æ¬¡çš„ systick interrupt æ‰é‡Šå‡º\nwait(block): ç­‰å¾…å–å¾—èµ„æºæˆ–äº‹ä»¶å‘ç”Ÿ\nvoid QTask2( void* pvParameters ) { uint32_t rcv = 0; while( 1 ){ if( xQueueReceive( MsgQueue, \u0026amp;rcv, 100/portTICK_RATE_MS ) == pdPASS \u0026amp;\u0026amp; rcv == 100) { STM_EVAL_LEDToggle( LED3 ); } } } ä½¿ç”¨ xQueueReceive(xQueue, *pvBuffer, xTicksToWait)ï¼Œç­‰å¾…æ—¶é—´è¿˜æ²¡åˆ° portMAX_DELAY(FreeRTOS æœ€é•¿çš„ç­‰å¾…æ—¶é—´)æ—¶ï¼Œtask ä¼šè¢«æ”¾å…¥ EventList ä¸­ç­‰å¾…å–å¾—èµ„æºæˆ–äº‹ä»¶å‘ç”Ÿã€‚è‹¥ç­‰å¾…æ—¶é—´åˆ°äº† portMAX_DELAYï¼Œåˆ™ä¼šè¢«ç§»åˆ° SuspendList ä¸­ç»§ç»­ç­‰å¾…\nRTOS tick\nportable/GCC/ARM_CM4F/port.c\nå®ä½œç»†èŠ‚\nvoid xPortSysTickHandler( void ) { /* The SysTick runs at the lowest interrupt priority, so when this interrupt executes all interrupts must be unmasked. There is therefore no need to save and then restore the interrupt mask value as its value is already known. */ ( void ) portSET_INTERRUPT_MASK_FROM_ISR(); { /* Increment the RTOS tick. */ if( xTaskIncrementTick() != pdFALSE ) { /* A context switch is required. Context switching is performed in the PendSV interrupt. Pend the PendSV interrupt. */ portNVIC_INT_CTRL_REG = portNVIC_PENDSVSET_BIT; } } portCLEAR_INTERRUPT_MASK_FROM_ISR( 0 ); } BaseType_t xTaskIncrementTick( void ) { TCB_t * pxTCB; TickType_t xItemValue; BaseType_t xSwitchRequired = pdFALSE; traceTASK_INCREMENT_TICK( xTickCount ); if( uxSchedulerSuspended == ( UBaseType_t ) pdFALSE ) { ++xTickCount; { const TickType_t xConstTickCount = xTickCount; if( xConstTickCount == ( TickType_t ) 0U ) { taskSWITCH_DELAYED_LISTS(); } else { mtCOVERAGE_TEST_MARKER(); } if( xConstTickCount \u0026gt;= xNextTaskUnblockTime ) { for( ;; ) { if( listLIST_IS_EMPTY( pxDelayedTaskList ) != pdFALSE ) { xNextTaskUnblockTime = portMAX_DELAY; break; } else { pxTCB = ( TCB_t * ) listGET_OWNER_OF_HEAD_ENTRY( pxDelayedTaskList ); xItemValue = listGET_LIST_ITEM_VALUE( \u0026amp;( pxTCB-\u0026gt;xGenericListItem ) ); if( xConstTickCount \u0026lt; xItemValue ) { xNextTaskUnblockTime = xItemValue; break; } else { mtCOVERAGE_TEST_MARKER(); } ( void ) uxListRemove( \u0026amp;( pxTCB-\u0026gt;xGenericListItem ) ); if( listLIST_ITEM_CONTAINER( \u0026amp;( pxTCB-\u0026gt;xEventListItem ) ) != NULL ) { ( void ) uxListRemove( \u0026amp;( pxTCB-\u0026gt;xEventListItem ) ); } else { mtCOVERAGE_TEST_MARKER(); } prvAddTaskToReadyList( pxTCB ); #if ( configUSE_PREEMPTION == 1 ) { { xSwitchRequired = pdTRUE; } else { mtCOVERAGE_TEST_MARKER(); } } #endif /* configUSE_PREEMPTION */ } } } } #if ( ( configUSE_PREEMPTION == 1 ) \u0026amp;\u0026amp; ( configUSE_TIME_SLICING == 1 ) ) { if( listCURRENT_LIST_LENGTH( \u0026amp;( pxReadyTasksLists[ pxCurrentTCB-\u0026gt;uxPriority ] ) ) \u0026gt; ( UBaseType_t ) 1 ) { xSwitchRequired = pdTRUE; } else { mtCOVERAGE_TEST_MARKER(); } } #endif /* ( ( configUSE_PREEMPTION == 1 ) \u0026amp;\u0026amp; ( configUSE_TIME_SLICING == 1 ) ) */ } else { ++uxPendedTicks; } #if ( configUSE_PREEMPTION == 1 ) { if( xYieldPending != pdFALSE ) { xSwitchRequired = pdTRUE; } else { mtCOVERAGE_TEST_MARKER(); } } return xSwitchRequired; } Starvation è‹¥ priority é«˜çš„ task éœ¸å  CPUï¼Œå¯¹äº priority è¾ƒä½çš„ task åˆ™æ— æ³•æ‰§è¡Œï¼Œä¾¿ä¼šå‘ç”Ÿ starvation(ä½ä¼˜å…ˆæƒå¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½æ— æ³•è·å¾—CPUæ‰§è¡Œ) (FreeRTOS æ’ç¨‹é‡‡ç”¨çš„æ˜¯ multi-level queue, so?)\nå›ç›®å½•\nä¸­æ–­å¤„ç† # è¿™é‡Œä¸»è¦è®¨è®ºçš„æ˜¯ ARM Cortext-M3 çš„ä¸­æ–­(Exception)ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š\nResetï¼šæŒ‰ä¸‹ reset åä¼šä»å‘é‡è¡¨ä¸­æŒ‡å®šçš„ä½å€ï¼Œç”¨ privileged thread modeå¼€å§‹æ‰§è¡Œ NMIï¼šç®€å•è¯´å°±æ˜¯é™¤äº† reset å¤–æœ€å¼ºçš„ exception Hard Faultï¼šåš exception handler å‘ç”Ÿä¸å¯é¢„æœŸçš„æ‚²å‰§æ—¶ä¼šè§¦å‘è¿™ä¸ªä¾‹å¤– Memory management faultï¼šmemory protection å¤±è´¥æ—¶ï¼Œè¿™ä¸ªä¾‹å¤–æ˜¯ MPU è§¦å‘çš„ï¼Œç”¨æ¥ç¦æ­¢è£…ç½®è¿›å…¥ç»å¯¹ä¸å¯è¿›å…¥çš„è®°å¿†ä½“åŒºåŸŸ Bus Faultï¼šæ‰§è¡ŒæŒ‡ä»¤æˆ–æ˜¯ data transaction æ—¶å‘ç”Ÿè®°å¿†ä½“ç›¸å…³çš„é”™è¯¯ï¼Œå¯èƒ½æ˜¯ bus çš„é—®é¢˜ Usage faultï¼šæ‰§è¡Œæœªå®šä¹‰çš„æŒ‡ä»¤ã€ä¸åˆæ³•çš„æœªå¯¹é½å­˜å–ã€æŒ‡ä»¤æ‰§è¡Œæ—¶å‡ºç°æ— æ•ˆçš„çŠ¶æ€ã€exception return æ—¶å‡ºé”™ã€é™¤ä»¥ 0 (éœ€è¦è‡ªè¡Œè®¾å®š) SVCallï¼šSVC instruction æ‰§è¡Œçš„ supervisor callï¼ˆåœ¨OSçš„ç¯å¢ƒä¸‹ï¼‰ PendSVï¼šåœ¨ OS çš„ç¯å¢ƒä¸‹ï¼Œé€šå¸¸æ˜¯ç”¨äº context switch SysTickï¼šå½“ timer å€’æ•°åˆ° 0 æ—¶è§¦å‘ï¼Œä¹Ÿå¯ä»¥ç”¨è½¯ä½“ä¸­æ–­ï¼ŒOS ä¼šæŠŠè¿™ä¸ª exception å½“æˆ system tickã€‚ Interrupt(IRQ)ï¼šå‘¨è¾¹è£…ç½®è§¦å‘çš„ exceptionï¼Œæˆ–æ˜¯è½¯ä½“äº§ç”Ÿçš„ request ä»¥ä¸‹ä¸»è¦è®¨è®º interrupt è¦åšåˆ°å¤„ç†ä¸­æ–­ï¼Œä¸€ä¸ªä½œæ³•æ˜¯æŠŠ task ä¸­ç”¨æ¥ç­‰å¾… interrupt å‘ç”Ÿçš„ç‰‡æ®µç”¨ semaphore æ¡†ä½ï¼Œä¸€ä¸ª ISR(interrupt service routine)è¢«ç”¨æ¥ç»™(task) semaphoreï¼Œä»¥åŠé‡Šæ”¾ä¸€ä¸ªç”¨æ¥å¤„ç† handler task æ¥å¤„ç† ISRï¼Œè¿™ä½¿å¾— ISR çš„ä½¿ç”¨ä¸Šæ›´ä¸ºç®€åŒ–\nåœ¨å¤„ç†ä¸­æ–­ä¸Šè½¯ç¡¬ä½“çš„ä»‹æ¥å…³ç³»å›¾å¦‚ä¸‹ï¼š\nNested Vectored Interrupt Controller(NVIC) NVIC æ˜¯ Cortex-M3 çš„ä¸€éƒ¨åˆ†ï¼Œä»–æ˜¯ä¸€ç»„ç”¨æ¥ç®¡ç†å„ç§ç¡¬ä½“å‘¨è¾¹å‘ç”Ÿä¸­æ–­è®¯å·çš„æš‚å­˜å™¨ï¼ŒEXIT åˆ™æ˜¯ STM32 æ¿å­ä¸Šç®¡ç†å„ç§ç¡¬ä½“å‘ç”Ÿä¸­æ–­çš„æ§åˆ¶å™¨ï¼ŒEXIT ä¼šé€šè¿‡ GPIO æŠŠä¸­æ–­è®¯å·é€ç»™ Cortext-M3 ä¸Šçš„ NVIC æš‚å­˜å™¨ï¼Œ FreeRTOS åœ¨é€è¿‡æ“ä½œ NVIC ä¸å‘¼å« interrupt service routine æ¥å¤„ç†ç¡¬ä½“ä¸­æ–­ã€‚\n* èƒ½å¤Ÿå®šä¹‰ 1~240 ç§ interrupt (FreeRTOS on ARM Cortex-M3 ä¸ Cortex-M4 åŸå§‹å®šä¹‰äº† 107 ä¸ª interrupt) * Cortex-M4 æä¾› 240 ä¸ª Interrupt Priority Registers(IPR) å»è®°å½• * å¯è‡ªå®šä¹‰çš„ interrput ä¼˜å…ˆæƒï¼Œä» 0~255(0vä¸ºæœ€å¤§ä¼˜å…ˆæƒï¼Œæœ€å°ä¸º 255) * PreemptionPriority: 4 bits * SubPriority: 4 bits * å¤„ç†å™¨(ç¡¬ä½“å®ä½œ)åœ¨ interrupt å‘ç”Ÿæ—¶ä¼šã€è‡ªåŠ¨ã€å°†å½“å‰çŠ¶æ€ stack èµ·æ¥ï¼Œinterrupt ç»“æŸåå† unstack å›æ¥ï¼Œå€Ÿæ­¤å‡å°‘ interrupt latency * åªéœ€è¦å°†èµ„æ–™æ”¾å…¥ Software Trigger Interrupt Register(STIR)ï¼Œå°±èƒ½å¤Ÿè§¦å‘ interrupt åœ¨ Lab40 ä¸­ï¼Œvisualizer/main.c ä¸­å°±æœ‰å®šä¹‰äº† interrupt çš„ priority å’Œå–å¾— interrupt çš„ç§ç±»ï¼š\n#define NVIC_INTERRUPTx_PRIORITY ( ( volatile unsigned char *) 0xE000E400 ) ... int get_interrupt_priority(int interrupt) { if (interrupt \u0026lt; 240) // ARM æœ‰ 240 ç§ external interrupt(0~239) /* æ ¹æ® interrupt è®¾å®š priorityï¼Œè¿™ä¸ªå¸¸æ•°å®£å‘Šä¸º char*ï¼Œæ•…ç­‰åŒ array */ return NVIC_INTERRUPTx_PRIORITY[interrupt]; return -1; } External Interrupt(EXTI) å„ interrupt handler çš„æ’åºå’Œåç§°å®šä¹‰(å¹¶éå®ä½œå†…å®¹)æ”¾ç½®åœ¨ startup_stm32f429_439xx.s ä¸­ï¼Œå®ä½œåˆ™æ”¾åœ¨å…¶ä»–åœ°æ–¹ï¼ŒFreeRTOS ä½¿ç”¨è€…å¯ä»¥å®šä¹‰çš„å¤–éƒ¨ä¸­æ–­é€šé“ä¸ºEXTI_Line0 åˆ° EXTI_Line15ï¼Œä¸è¿‡ EXTI_Line1015 å’Œ EXTI_Line59 è¢«è®¾å®šä¸ºåŒä¸€å¤–éƒ¨ä¸­æ–­é€šé“ï¼Œè¿™è¡¨ç¤º Line10 å’Œ Line15 ä¼šå‘¼å«åŒä¸€ä¸ª handlerï¼Œå¦‚æœ Line10 å’Œ Line15 éœ€è¦æœ‰ä¸åŒçš„ä»»åŠ¡ï¼Œåˆ™è¦åœ¨ EXTI_Line10_15 çš„ handler å†…åšè§¦å‘æ¥æºçš„åˆ¤æ–­\nfile:startup_stm32f429_439xx.s line:158\nCORTEX_M4F_STM32_DISCOVERY/startup/startup_stm32f4xx.s\n.word EXTI0_IRQHandler /* EXTI Line0 */ .word EXTI1_IRQHandler /* EXTI Line1 */ .word EXTI2_IRQHandler /* EXTI Line2 */ .word EXTI3_IRQHandler /* EXTI Line3 */ .word EXTI4_IRQHandler /* EXTI Line4 */ .word EXTI9_5_IRQHandler /* External Line[9:5]s */ .word EXTI15_10_IRQHandler /* External Line[15:10]s */ EXTI ä½¿ç”¨å‰å¿…é¡»ï¼š\n1. å’Œ GPIO è¿æ¥ï¼Œä½œä¸ºè§¦å‘æ¥æº (æœ‰å…³ GPIO çš„ä»‹ç»è¯·å‚ç…§ä¸‹ä¸€èŠ‚) 2. è®¾å®š EXTI * è®¾å®šå“ªæ¡ Line * æ¨¡å¼(Interrupt, Event) * è¢«è§¦å‘çš„æ¡ä»¶(Rising, Falling, Rising\u0026amp;falling) * LineCmd(ENABLE è¡¨ç¤ºè®¾å®šè¯¥é€šé“ï¼ŒDISABLE è¡¨ç¤ºå…³é—­è¯¥é€šé“) 3. è®¾å®š NVIC * IRQ_Channel * PreemptionPriorityï¼ŒSubPriority * ChannelCmd( åŒ LineCmd çš„ç”¨é€” ) åœ¨ FreeRTOS ä¸­æ“ä½œ EXTI çš„å®ä½œå¦‚ä¸‹ï¼š\nCORTEX_M4F_STM32_DISCOVERY/main.c\n/* Configure PA0 pin as input floating */ GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN; GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL; GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0; GPIO_Init(GPIOA, \u0026amp;GPIO_InitStructure); /* Connect EXTI Line0 to PA0 pin */ SYSCFG_EXTILineConfig(EXTI_PortSourceGPIOA, EXTI_PinSource0); /* Configure EXTI Line0 */ EXTI_InitStructure.EXTI_Line = EXTI_Line0; EXTI_InitStructure.EXTI_Mode = EXTI_Mode_Interrupt; EXTI_InitStructure.EXTI_Trigger = EXTI_Trigger_Rising; EXTI_InitStructure.EXTI_LineCmd = ENABLE; EXTI_Init(\u0026amp;EXTI_InitStructure); /* Enable and set EXTI Line0 Interrupt to the lowest priority */ NVIC_InitStructure.NVIC_IRQChannel = EXTI0_IRQn; NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0x0F; NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0x0F; NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE; NVIC_Init(\u0026amp;NVIC_InitStructure); å›ç›®å½•\nç¡¬ä½“é©±åŠ¨ # è¿™é‡Œæ˜¯è¦é€è¿‡ LED çš„ä¾‹å­ä»‹ç»ç”¨ GPIO è®©ç¡¬ä½“é©±åŠ¨çš„æ–¹æ³•\nGPIO ç®€ä»‹ GPIO æ˜¯è®©å¼€å‘è€…å¯å€Ÿç”±æ”¹å˜æš‚å­˜å™¨ç‰¹å®šä½ç½®çš„èµ„æ–™å†…å®¹ï¼Œæ¥æ§åˆ¶å„ç§å‘¨è¾¹çš„ç¡¬ä½“ï¼Œæˆ–è€…å€Ÿç”±å¤–éƒ¨çš„è¾“å…¥ï¼Œæ¥æ”¹å˜æš‚å­˜å™¨å†…å®¹ï¼Œè®©ç¡¬ä½“å¾—çŸ¥å…¶å˜åŒ–ååšååº”\nåœ¨ STM32 çš„å¼€å‘æ¿ä¸Šå¯ä»¥çœ‹åˆ°è®¸å¤šé’ˆè„šï¼Œä¸€èˆ¬ STM32F429 çš„æ¿å­æœ‰ 7 GPIO portsï¼Œåˆ†åˆ«æ˜¯ Port A, B, C, D, E, F å’Œ Gï¼Œæ¯ä¸ª port æœ‰è‡ªå·±çš„æš‚å­˜å™¨åºåˆ—å¦‚ä¸‹ï¼Œå„æœ‰ 32 pins(å¯¹åº” 32 bits)ï¼š\n* GPIO port mode register (GPIOx_MODER) * GPIO port output type register (GPIOx_OTYPER) * GPIO port output speed register (GPIOx_OSPEEDR) * GPIO port pull-up/pull-down register (GPIOx_PUPDR) * GPIO port input data register (GPIOx _IDR) * GPIO port outp ut data register (GPIOx_ODR) * GPIO port bit set/reset register (GPIOx _BSRR) * GPIO port bit reset register (GPIOx_BRR) * GPIO port configuration lock register (GPIOx_LCKR) * GPIO alternate function low register (GPIOx_AFRL) * GPIO alternate function high register (GPIOx_AFRH) ä¾‹å¦‚å½“ GPIOx çš„ x æ˜¯ A æ—¶ï¼Œè¡¨ç¤ºæˆ‘ä»¬ç°åœ¨å­˜å–çš„æ˜¯ GPIO Port A\nä½¿ç”¨ GPIO å‰ï¼Œå¿…é¡»é¢„å…ˆè®¾å®šè¡Œä¸ºå’Œç»†èŠ‚ï¼Œä»¥ stm32f429i_discovery.c å†…çš„ LED åˆå§‹ä½œä¸šæ¥çœ‹\nUtilities/STM32F429I-Discovery/stm32f429i_discovery.c\n/* In file: stm32f429i_discovery.c */ void STM_EVAL_LEDInit(Led_TypeDef Led) { GPIO_InitTypeDef GPIO_InitStructure; /* Enable the GPIO_LED Clock */ RCC_AHB1PeriphClockCmd(GPIO_CLK[Led], ENABLE); /* Configure the GPIO_LED pin */ GPIO_InitStructure.GPIO_Pin = GPIO_PIN[Led]; GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT; GPIO_InitStructure.GPIO_OType = GPIO_OType_PP; GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP; GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz; GPIO_Init(GPIO_PORT[Led], \u0026amp;GPIO_InitStructure); } ä½¿ç”¨è€…å¼€å¯ä½¿ç”¨åˆ°çš„ GPIO ä¹‹ bus çš„ clockï¼Œç„¶åä½¿ç”¨ GPIO_InitStructure(struct èµ„æ–™å‹æ€)æ¥å‚¨å­˜ç›¸å…³è®¾å®šï¼Œå¹¶äº¤ç»™ GPIO_Init() å»åšè®°å¿†ä½“çš„è®¾å®š\nåº•å±‚å®ä½œ ç»§ç»­ä¸Šé¢ LED åˆå§‹çš„è¿‡ç¨‹ä¸ºä¾‹ï¼Œå…¶ä¸­æœ‰æ¶‰åŠç¡¬ä½“è®¾å®šçš„ function ä¸º RCC_AHB1PeriphClockCmd() å’Œ GPIO_Init()\nå…ˆè®¨è®º RCC_AHB1PeriphClockCmd()ï¼š\n/* In file: stm32f4xx.h */ typedef struct { ... __IO uint32_t AHB1ENR; /*!\u0026lt; RCC AHB1 peripheral clock register, Address offset: 0x30 */ ... } RCC_TypeDef; #define RCC ((RCC_TypeDef *) RCC_BASE) #define RCC_BASE (AHB1PERIPH_BASE + 0x3800) #define AHB1PERIPH_BASE (PERIPH_BASE + 0x00020000) #define PERIPH_BASE ((uint32_t)0x40000000) /*!\u0026lt; Peripheral base address in the alias region /* In file: stm32f4xx_rcc.h */ #define RCC_AHB1Periph_GPIOA ((uint32_t)0x00000001) /* In file: stm32f4xx_rcc.c */ void RCC_AHB1PeriphClockCmd(uint32_t RCC_AHB1Periph, FunctionalState NewState) { /* Check the parameters */ assert_param(IS_RCC_AHB1_CLOCK_PERIPH(RCC_AHB1Periph)); assert_param(IS_FUNCTIONAL_STATE(NewState)); if (NewState != DISABLE) { RCC-\u0026gt;AHB1ENR |= RCC_AHB1Periph; } else { RCC-\u0026gt;AHB1ENR \u0026amp;= ~RCC_AHB1Periph; } } ä¸éš¾å‘ç°ï¼ŒGPIO å‘¨è¾¹çš„è®¾å®šåœ¨å®ä½œä¸Šç›¸å½“å•çº¯ï¼Œå³åœ¨é¢„å…ˆå®šä¹‰å¥½çš„è®°å¿†ä½“åŒºæ®µä¸Šï¼ŒæŒ‰ç…§è®¾è®¡è€…å®šä¹‰ä¹‹è®¾å®šå°†å‚æ•°å†™åœ¨è¯¥å¤„\nå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒGPIO çš„åˆå§‹åŒ–å’Œè®¾å®šçš†æ˜¯åœ¨æ‰§è¡Œæ—¶æœŸè¿›è¡Œï¼Œå³ä½¿åœ¨ç¨‹å¼è¿ä½œä¸­ä¾ç„¶èƒ½å¤Ÿé‡æ–°å®šä¹‰ç”šè‡³å…³é—­å‘¨è¾¹ï¼Œè¿™è®© MCU çš„ä½¿ç”¨æ›´ä¸ºå¼¹æ€§\nGPIO_Init() çš„æ‰§è¡Œä¹Ÿè„±ç¦»ä¸äº†å†™å…¥èµ„æ–™è‡³è®°å¿†ä½“ä¸€äº‹ï¼Œä½†è®¾å®šé¡¹ç›®è¾ƒå¤šï¼Œè®¾å®šè¿‡ç¨‹ä¹Ÿè¾ƒä¸ºå¤æ‚\nGPIO_Init()ï¼š\nCORTEX_M4F_STM32_DISCOVERY/Libraries/STM32F4xx_StdPeriph_Driver/src/stm32f4xx_gpio.c\n/* In file: stm32f4xx_gpio.c */ void GPIO_Init(GPIO_TypeDef* GPIOx, GPIO_InitTypeDef* GPIO_InitStruct) { uint32_t pinpos = 0x00, pos = 0x00 , currentpin = 0x00; /* Check the parameters */ assert_param(IS_GPIO_ALL_PERIPH(GPIOx)); assert_param(IS_GPIO_PIN(GPIO_InitStruct-\u0026gt;GPIO_Pin)); assert_param(IS_GPIO_MODE(GPIO_InitStruct-\u0026gt;GPIO_Mode)); assert_param(IS_GPIO_PUPD(GPIO_InitStruct-\u0026gt;GPIO_PuPd)); /* ------------------------- Configure the port pins ---------------- */ /*-- GPIO Mode Configuration --*/ for (pinpos = 0x00; pinpos \u0026lt; 0x10; pinpos++) { pos = ((uint32_t)0x01) \u0026lt;\u0026lt; pinpos; /* Get the port pins position */ currentpin = (GPIO_InitStruct-\u0026gt;GPIO_Pin) \u0026amp; pos; if (currentpin == pos) { GPIOx-\u0026gt;MODER \u0026amp;= ~(GPIO_MODER_MODER0 \u0026lt;\u0026lt; (pinpos * 2)); GPIOx-\u0026gt;MODER |= (((uint32_t)GPIO_InitStruct-\u0026gt;GPIO_Mode) \u0026lt;\u0026lt; (pinpos * 2)); if ((GPIO_InitStruct-\u0026gt;GPIO_Mode == GPIO_Mode_OUT) || (GPIO_InitStruct-\u0026gt;GPIO_Mode == GPIO_Mode_AF)) { /* Check Speed mode parameters */ assert_param(IS_GPIO_SPEED(GPIO_InitStruct-\u0026gt;GPIO_Speed)); /* Speed mode configuration */ GPIOx-\u0026gt;OSPEEDR \u0026amp;= ~(GPIO_OSPEEDER_OSPEEDR0 \u0026lt;\u0026lt; (pinpos * 2)); GPIOx-\u0026gt;OSPEEDR |= ((uint32_t)(GPIO_InitStruct-\u0026gt;GPIO_Speed) \u0026lt;\u0026lt; (pinpos * 2)); /* Check Output mode parameters */ assert_param(IS_GPIO_OTYPE(GPIO_InitStruct-\u0026gt;GPIO_OType)); /* Output mode configuration*/ GPIOx-\u0026gt;OTYPER \u0026amp;= ~((GPIO_OTYPER_OT_0) \u0026lt;\u0026lt; ((uint16_t)pinpos)) ; GPIOx-\u0026gt;OTYPER |= (uint16_t)(((uint16_t)GPIO_InitStruct-\u0026gt;GPIO_OType) \u0026lt;\u0026lt; ((uint16_t)pinpos)); } /* Pull-up Pull down resistor configuration*/ GPIOx-\u0026gt;PUPDR \u0026amp;= ~(GPIO_PUPDR_PUPDR0 \u0026lt;\u0026lt; ((uint16_t)pinpos * 2)); GPIOx-\u0026gt;PUPDR |= (((uint32_t)GPIO_InitStruct-\u0026gt;GPIO_PuPd) \u0026lt;\u0026lt; (pinpos * 2)); } } } å‚è€ƒ STM32Cube_FW_F4_V1.1.0/Projects/STM32F429I-Discovery/Examples/GPIO/GPIO_EXTI/readme.txt å›ç›®å½•\næ•ˆèƒ½è¯„ä¼° # Context switch Context switch æ˜¯æŒ‡ task A è¦äº¤å‡º CPU ä½¿ç”¨æƒç»™ task B æ—¶ï¼ŒOS ä¼šå°† task A å½“å‰çš„çŠ¶æ€å’Œæš‚å­˜å™¨å†…çš„èµ„æ–™å­˜æ”¾åˆ°è®°å¿†ä½“ï¼Œå†å°†å…ˆå‰ task B çš„çŠ¶æ€ä»è®°å¿†ä½“è¯»å–è‡³æš‚å­˜å™¨çš„è¿‡ç¨‹\næƒ³å¾—çŸ¥ FreeRTOS ä¸­ context switch æ—¶é—´ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªæµ‹è¯•æ–¹æ³•ï¼š CORTEX_M4F_STM32_DISCOVERY/main.c\nuint32_t iii = 0; void Task1( void* pvParameters ) { while( 1 ){ iii++; while( STM_EVAL_PBGetState( BUTTON_USER ) ){ iii++; STM_EVAL_LEDOn(LED4); } } } void Task2( void* pvParameters ) { while( 1 ){ vTaskDelay( 1000 ); itoa(iii, 10); iii = 0; } } void Task3( void* pvParameters ) { vTaskDelay( 300000 ); while(1){ itoa(iii, 10); while(1){} } } int main( void ) { ... xTaskCreate( Task1, (signed char*)\u0026#34;Task1\u0026#34;, 128, NULL, tskIDLE_PRIORITY+1, NULL ); xTaskCreate( Task2, (signed char*)\u0026#34;Task2\u0026#34;, 128, NULL, tskIDLE_PRIORITY+2, NULL ); xTaskCreate( Task3, (signed char*)\u0026#34;Task3\u0026#34;, 128, NULL, tskIDLE_PRIORITY+3, NULL ); ... } é¦–å…ˆå»ºç«‹ task1 å’Œ task2ï¼Œå…¶ä¸­ task2 çš„ä¼˜å…ˆæƒå¤§äº task1 çš„ä¼˜å…ˆæƒã€‚task2 å…ˆæ‰§è¡Œï¼Œå¹¶ä¸”(task2)é©¬ä¸Šå°±å‘¼å« vTaskDelay ä½¿ task2 ç§»è‡³ block çŠ¶æ€ 1 ç§’ï¼Œæ­¤æ—¶å°±ä¼šå‘ç”Ÿ context switchï¼Œåˆ‡æ¢æˆ task1 æ‰§è¡Œï¼Œè¿™ 1 ç§’çš„æ—¶é—´å†…ï¼Œtask1 ä¸æ–­çš„å°†å…¨åŸŸå˜æ•° iii åš ++ï¼Œç›´åˆ° 1 ç§’ç»“æŸåï¼Œå›åˆ° task2 æ‰§è¡Œï¼Œå†ç”± task2 å°å‡º iii çš„å€¼ï¼Œå¹¶æŠŠ iii é‡æ–°è®¾ä¸º 0ï¼Œæ­¤ä¸ºä¸€ä¸ªå‘¨æœŸã€‚æ­¤åŠ¨ä½œå¯å¾—åˆ° iii åœ¨ 1 ç§’å†…å¯è·‘åˆ°å¤šå°‘ï¼Œè®¾ 1 ç§’å¯è·‘è‡³ k å€¼ã€‚\nå»ºç«‹ task3 å¹¶è®¾å®šå…¶ä¼˜å…ˆæƒé«˜äº task2ï¼Œtask3 ä¼šæ‰§è¡Œ vTaskDelay 300 ç§’ï¼Œå½“ 300 ç§’ç»“æŸåï¼Œä¼šä¸­æ–­ task1 æ‰€æ‰§è¡Œçš„ iii++ï¼Œå†ç”± task3 å°å‡º iii å€¼ï¼Œè®¾å…¶ä¸º final_iï¼Œk å€¼ä¸ final_i å€¼çš„å·®é¢ï¼Œå³ä¸º context switch çš„æ€»æ—¶é—´ã€‚\nä¸‹å›¾ä¸ºéšæœºæŒ‘å‡º 45 ä¸ª iii å€¼åšæˆå›¾è¡¨ï¼Œå…¶ä¸­å¹³å‡ iii å€¼ä¸ºï¼š4280015\næ¥è‘—æˆ‘ä»¬æµ‹å‡ºçš„ final_i å€¼ï¼Œå¹³å‡ä¸ºï¼š3913853ï¼Œæ•…å¯å¾—åˆ° (4280015 - 3913853)/ 4280015 = 0.0855 (ç§’)\n0.0855 ç§’ä»£è¡¨åœ¨ 300 ç§’çš„æµ‹è¯•å†…çš„æ‰€æœ‰ context switch æ—¶é—´ä¹‹æ€»å’Œ\nè€Œå› ä¸ºä¸€ä¸ªå‘¨æœŸï¼ˆç¬¬ä¸€ä¸ªæ­¥éª¤ï¼‰ä¼šç»è¿‡ 2 ä¸ª context switchï¼ˆä¸Šå›¾ï¼‰ï¼Œæˆ‘ä»¬æµ‹ 300 å†…å…±æœ‰ 600 ä¸ª context switchï¼Œæ•…æˆ‘ä»¬æµ‹å‡ºæ¯ä¸ª context switch çº¦ä¸ºï¼š0.0855 / 600 = 142.5ï¼ˆusï¼‰ interrupt latency æˆ‘ä»¬æµ‹é‡çš„æ¶æ„ä¸ºæ˜¯æ‰‹åŠ¨è®¾å®šä¸€ä¸ª external interruptï¼Œå‘ç”Ÿåœ¨ BUTTON_USER æŒ‰ä¸‹æ—¶ï¼Œä¸‹é¢ç¨‹å¼æ˜¯æˆ‘ä»¬çš„å®ä½œï¼š\nCORTEX_M4F_STM32_DISCOVERY/main.c\ni = 0; while( STM_EVAL_PBGetState( BUTTON_USER ) ){ i++; } å½“ BUTTON_USER æŒ‰ä¸‹åï¼Œä¼šå…ˆæ‰§è¡Œ i++ ç›´åˆ° interruptHandler å¤„ç† interruptï¼Œè¯» i å€¼å³å¯å¾—çŸ¥ interrupt latencyï¼Œè€Œå®ä½œç»“æœå‘ç° i ä¾æ—§ä¸º 0ã€‚ IPCï¼ˆInter-Process Communicationï¼‰ throughput æµ‹è¯•ç¨‹å¼ï¼Œåœ¨ç¬¬ 167 è¡Œå¯ä»¥æ”¹è¦æ‰§è¡Œçš„æ—¶é—´\nSysTick æœ€å°åªèƒ½è®¾åˆ° 1 / 100000 ï¼ˆåä¸‡åˆ†ä¹‹ä¸€ï¼‰ç§’\nè‹¥è®¾åˆ° 1 / 1000000 ï¼ˆç™¾ä¸‡åˆ†ä¹‹ä¸€ï¼‰ç§’ï¼Œåˆ™ä¼šè¿å°† data copy è‡³ queue é‡Œéƒ½æ¥ä¸åŠæ‰§è¡Œ\nç¯å¢ƒè®¾ç½®ï¼š\nSysTick ä¸º 1 / 100000 ï¼ˆåä¸‡åˆ†ä¹‹ä¸€ï¼‰ç§’\nQueueçš„lengthä¸º10000ä¸ª\nQueueçš„ItemSizeä¸ºuint32_t\næµ‹è¯•å•å‘ï¼ˆsendï¼‰ è‹¥ä½¿ç”¨ä¸€ä¸ªtaskåªæ‰§è¡Œsend dataçš„è¯ï¼Œåœ¨100 SysTicksæ—¶é—´å†…å¯ä»¥ä¸¢å…¥çº¦740ä¸ªï¼Œåœ¨1000 SysTicksæ—¶é—´å†…å¯ä»¥ä¸¢å…¥çº¦7500ä¸ªï¼Œ\nåˆ™1 SysTickå†…å¹³å‡send 7.5ä¸ªï¼Œæ•…throughputçº¦ä¸ºï¼š7.5 * 100000 * 4 = 3 ï¼ˆMbytes/sï¼‰\næµ‹è¯•åŒå‘ï¼ˆsendä¸receiveï¼‰ è‹¥åŠ å…¥ä¸€ä¸ªtaskæ¥receive dataï¼Œä¸”priorityå’Œsend dataçš„priorityç›¸åŒ\n1000 SysTicksä¸‹å¯ä»¥æ¥æ”¶åˆ°2962ä¸ªï¼Œ\nåˆ™1 SysTickå¹³å‡æ¥æ”¶2.962ä¸ªï¼Œæ•…throughputçº¦ä¸ºï¼š2.962 * 100000 * 4 = 1.185ï¼ˆMbytes/sï¼‰\næµ‹è¯•æŠŠæ¯ä¸ªItemSizeåšå˜åŠ¨ è‹¥æ¯ä¸ªItemSizeä¸ºuint16_tï¼Œåˆ™throughputçº¦ä¸ºï¼š2.893 * 100000 * 2 = 0.579ï¼ˆMbytes/sï¼‰\nè‹¥æ¯ä¸ªItemSizeä¸ºuint64_tï¼Œåˆ™throughputçº¦ä¸ºï¼š2.823 * 100000 * 8 = 2.258ï¼ˆMbytes/sï¼‰\nä»¥ä¸Šä¸‰è€…æ¯”è¾ƒï¼Œåœ¨uint64_tæ—¶æœ‰æœ€å¥½çš„throughputï¼Œä¸”sndå’Œrcvç›¸å·®æœ€å°ã€‚\nrealtime capability å›ç›®å½•\næµ‹è¯•ç¯å¢ƒæ¶è®¾ # å®‰è£…\n1. è¯·å…ˆå®‰è£… st-link ä»¥åŠ openOCDï¼Œå¯å‚è€ƒ[æ­¤é¡µ](https://stm32f429.hackpad.com/NOTE-WbiooOfkaoR) 2. git clone https://github.com/Justinsanity/freertos-basic.git 3. cd freertos-basic \u0026amp; git checkout porting 4. make 5. å°† stm32 f4 - discovery æ¥ä¸Šç”µè„‘ 6. make flash # çƒ§è¿›æ¿å­ä¸Šå¹¶æ‰§è¡Œ 7. done Porting è§£è¯´\nå·¥å…·ï¼š\nstlinkï¼šç”¨æ¥çƒ§å½•æˆ– GDB server çš„å·¥å…· openocdï¼šç”¨æ¥æ‰§è¡Œ GDB server ä¸å¯ç”¨ semihosting OS X ä¸Šå®‰è£… gcc-arm-none-eabiã€stlinkã€openocd\nstlink: brew install stlink (http://macappstore.org/stlink/)\nOpenOCD: brew install open-ocd (http://brewformulas.org/OpenOcd)\ngcc-arm-none-eabi:\næ–¹æ³•ä¸€\n1. brew tap PX4/homebrew-px4 2. brew update 3. sudo brew install gcc-arm-none-eabi\t(might not the latest version) æ–¹æ³•äºŒ 1. Download \u0026#34;Mac installation tarball\u0026#34; 2. Decompress tar 3. set PATH FreeRTOS version: 8.2.1\nBoard: STM32F429 Discovery\nPorting FreeRTOS åˆ° STM32F429-Discovery ä¸»è¦æ˜¯æœ‰å‡ ä¸ªé‡ç‚¹\nUtility: æ¥è‡ª STM32F429I-Discovery_FW_V1.0.1(å®˜æ–¹ driver)ï¼Œç”¨é€”æ˜¯æä¾›ä¸€äº›æ“ä½œç¡¬ä½“å‘¨è¾¹çš„å‡½å¼åº“(API)ï¼Œä¾‹å¦‚ LCD FreeRTOSï¼šFreeRTOS çš„ source codeï¼Œåœ¨ä¸‹è½½å›æ¥çš„åŒ…ä¸­ FreeRTOSV8.2.1/FreeRTOS/Source CORTEX_M4F_SK: åœ¨ä¸‹è½½å›æ¥çš„åŒ…ä¸­ FreeRTOSV8.2.1/FreeRTOS/Demoï¼Œç”¨é€”æ˜¯æä¾›å¹³å° CORTEX_M4F_SK ä¸Šçš„é©±åŠ¨å‡½å¼åº“ï¼Œæ˜¯å±äº FreeRTOS è½¯ä½“æ–¹å¼€å‘çš„æ¥å£ åº”ç”¨ç¨‹å¼çš„å¼€å‘\nä»¥ Lab39 çš„ freertos-basic ä¸­ FreeRTOS åº”ç”¨ç¨‹å¼åŸå§‹ç  src/ ä¸ include/ ä¸ºä¾‹ï¼Œæˆ‘ä»¬æ•´åˆæˆ app/ï¼Œå¹¶æŠŠ src/ ä¸­çš„ main.c å•ç‹¬æ‹‰å‡ºæ¥ï¼Œå»¶ç»­ myFreeRTOS (branch: game) çš„æ¡£æ¡ˆæ¶æ„ä¸‹ï¼Œåº”ç”¨ç¨‹å¼ game/ å’Œ main.c æ˜¯æ”¾åœ¨è¿™é‡Œ CORTEX_M4F_SK ä¸­ï¼Œæ‰€ä»¥ä¸“æ¡ˆç»“æ„å¦‚ä¸‹ï¼š\n. |___CORTEX_M4F_SK | |__ app/ | |__ main.c | |__ others C files |___ FreeRTOS |___ Utility Hintï¼šmain.c æœ‰æ ·æ¿ï¼Œåœ¨ STM32F429I-Discovery_FW_V1.0.1/Projects/Template\nå‚è€ƒæ‰‹å†Œï¼šhttp://www.st.com/web/en/resource/technical/document/reference_manual/DM00031020.pdf\nAPIï¼šUtilities/STM32F429I-Discovery\nå›ç›®å½•\né—®é¢˜è®¨è®ºä¸€ # Q2:Suspendç›¸å…³ç¨‹å¼ç \nFreeRTOSæä¾›vTaskSuspend()å’ŒvTaskResume()è¿™ä¸¤ä¸ªAPIæ¥æä¾›æˆ‘ä»¬å¯ä»¥è®©taskè¿›å…¥suspendçŠ¶æ€ã€‚FreeRTOSè¿˜æœ‰å¦ä¸€ä¸ªAPIä¸ºvTaskSuspendAll()è€Œä¸»è¦ç”¨é€”ä¸ºå½“æŸä¸€ä¸ªtaskåœ¨æ‰§è¡Œæ—¶ï¼ŒæŸæœŸé—´å†…å¯ä»¥è®©schedulerè¢«suspendï¼Œé˜²æ­¢context switchå‘ç”Ÿï¼Œå®ä½œæ–¹æ³•ä¸ºæ§åˆ¶uxSchedulerSuspendedçš„å˜æ•°ï¼ŒvTaskSuspendAll()è®©uxSchedulerSuspendedï¼‹1 è¿›å…¥suspendallçš„çŠ¶æ€ å½“ç¨‹å¼ç é‚£æ®µæ‰§è¡Œå®Œæ—¶å†ç”¨vTaskresumeallè®©uxSchedulerSuspended-1è¿™ç”¨æ³•å†å¾ˆå¤štaské‡Œä¼šç”¨åˆ°\nä¾‹å¦‚ï¼švTaskDelayï¼ŒvTaskDelayUntilä¸ºäº†è®©Tasksèƒ½é¡ºåˆ©æ¥ä¸ŠDelayedListè€Œä¸è¢«ä¸­æ–­ï¼Œå½“schedulerè¢«suspendæ—¶ï¼Œcontext switchä¼šè¢«pendingï¼Œè€Œåœ¨schedulerè¢«suspendçš„æƒ…å†µä¸‹ï¼Œinterruptä¸å¯æ›´æ”¹TCBçš„xStateListItemã€‚è€ŒPendingReadyListçš„ç”¨æ³•ä¹Ÿæ˜¯å½“schedulerè¢«suspendæ—¶è‹¥è¿™ç§æ—¶å€™interruptè¦è§£é™¤ä¸€ä¸ªtaskçš„blockçŠ¶æ€çš„è¯ï¼Œåˆ™interruptéœ€å°†æ­¤taskçš„event list itemæ”¾è‡³xPendingReadyListä¸­ï¼Œå¥½è®©schedulerè§£é™¤suspendæ—¶ï¼Œå¯å°†xPendingReadyListå†…çš„task æ”¾å…¥ready listé‡Œã€‚\nQ3:PriorityèŒƒå›´ä¸”å®šä¹‰åœ¨å“ªé‡Œ\nåœ¨./CORTEX_M4F_STM32F407ZG-SK/FreeRTOSconfig.hé‡Œ\n#define configMAX_PRIORITIES ( 5 ) Q4:ä¸ºä»€ä¹ˆè¦ç”¨doubly linked list\nå› ä¸ºdoubly linked liståœ¨æ’å…¥æ–°ITEMæ—¶æ‹¥æœ‰å¸¸æ•°çš„æ—¶é—´å¤æ‚åº¦O(1)ï¼Œè€ŒSingly linked liståˆ™æ˜¯O(n)\nQ5ï¼šä¸ºä»€ä¹ˆFREERTOSåœ¨FORKä¹‹åæ˜¯å›ä¼ ä¸€ä¸ªSTRUCT è€Œä¸æ˜¯PID\nè¿½æœ”äº†xTaskCreateçš„ç¨‹å¼ç ï¼Œå‘ç°ä»–æ˜¯æ‰§è¡Œ xTaskGenericCreateè¿™ä¸ªfunctionï¼Œè€ŒxTaskGenericCreateæ˜¯åœ¨functioné‡Œmallocå®ŒæˆTCBä¹‹åï¼Œè¿”å›å€¼æœ‰ä¸¤ä¸ªï¼š\npdPASS errCOULD_NOT_ALLOCATE_REQUIRED_MEMORY èµ„æ–™å‹æ€ä¸ºBaseType_tï¼Œå®£å‘Šåœ¨portmacro.hé‡Œï¼š\ntypedef long BaseType_t; æ‰€ä»¥ä»–çš„å›ä¼ å€¼ç”¨é€”ï¼šå›ä¼ å‘ŠçŸ¥åœ¨malloc memoryæ—¶æ˜¯å¦æˆåŠŸã€‚\nè€Œlinuxä½¿ç”¨å›ä¼ PIDçš„åŸå› åœ¨äºparentä½¿ç”¨wait()æ¥ç­‰å¾…childï¼Œå½“childæ‰§è¡Œç»“æŸåä¼šå‘¼å«exit()ï¼Œparentå³å¯ä»¥clean up child processã€‚è‹¥parentæ²¡æœ‰ä½¿ç”¨wait()çš„è¯ï¼Œä¼šé€ æˆparentå¯èƒ½å·²ç»å…ˆç»“æŸäº†ï¼Œè¿™æ ·é€ æˆchildå˜æˆzombieã€‚\nFreeRTOSçš„task createï¼š\nxTaskCreate( vTaskCode, \u0026#34;NAME\u0026#34;, STACK_SIZE, \u0026amp;ucParameterToPass, tskIDLE_PRIORITY, \u0026amp;xHandle ); å…¶ä¸­Handleå­˜çš„æ˜¯æ–°åˆ›çš„TCBè¿™ä¸ªstructureçš„ä½å€ï¼Œå°†æ¥è¦åˆ é™¤æ­¤taskçš„è¯å¯ä»¥ç”¨å¦‚ä¸‹æ–¹æ³•ï¼š\n/* Use the handle to delete the task. */ if( xHandle != NULL { vTaskDelete( xHandle ); } è€ŒLinuxçš„parentå’Œchildä¸ºç›¸åŒçš„ä½å€ç©ºé—´ï¼Œè‹¥å›ä¼ ä¸ºchildçš„ä½å€ï¼Œå°†æ¥parentè¦æŠŠchildåˆ é™¤æ—¶ï¼Œä¾¿ä¹ŸæŠŠè‡ªå·±ç»™åˆ é™¤äº†\u0026hellip;æ‰€ä»¥linuxä½¿ç”¨çš„æ˜¯PIDè€Œä¸æ˜¯structureçš„ä½å€ã€‚\nQ6ï¼šSTACKä½ç½®çš„æ’åˆ—ï¼Œå¦‚ä½•å­˜æ”¾\nå­˜æ”¾é¡ºåºï¼š\nxPSR\nPC : Program counter å†…å®¹å­˜æ”¾å¤„ç†å™¨è¦å­˜å–çš„ä¸‹ä¸€é“æŒ‡ä»¤ä½å€ LR : link rigisiter ï¼šä¿å­˜å‰¯ç¨‹å¼çš„è¿”å›ä½å€ R12 : Intra-Procedure-call scratch register R3 : parameters R2 : parameters R1 : parameters R0 : parameters\nportINITIAL_EXEC_RETURN : æ¯ä¸ªtaskè¦è‡ªå·±ç»´æŠ¤è‡ªå·±çš„è¿”å›å€¼\nR11 R10 R9 R8 R7 R6 R5 R4 æ³¨ï¼šxPSRï¼šComposite of the 3 PSRsï¼Œ\nAPSR-Application Program Status Registerâ€“condition flags ï¼ˆå­˜negativeã€zeroã€carryã€overflowç­‰ï¼‰ IPSR-Interrupt Program Status Registerâ€“Interrupt/Exception No. ï¼ˆå­˜ç›®å‰å‘ç”ŸExceptionçš„ISR Number ï¼‰ EPSR-Execution Program Status Register ï¼ˆå­˜Thumb state bit å’Œ execution state bits(If-Then (IT) instructionå’ŒInterruptible-Continuable Instruction (ICI) field)ï¼‰ Q7ï¼šLR(Link Rigisiter) çš„ç”¨å¤„\nå½“ä¸€ä¸ªtask A æ‰§è¡Œè¢«ä¸­æ–­æ—¶ï¼ˆå¯èƒ½system tick æˆ–æ˜¯é«˜ä¼˜å…ˆæƒçš„Taskå‡ºç°ï¼‰ç”¨æ¥çºªå½•Task Aæ‰§è¡Œåˆ°å“ªé‡Œçš„ä½ç½®ï¼Œå½“å…¶ä»–ç¨‹å¼æ‰§è¡Œå®Œæ—¶ï¼Œèƒ½è¿”å›ç»§ç»­æˆè¡ŒTask A\nQ8ï¼šä¸ºä»€ä¹ˆæ˜¯R12 R3 R2 R1 è¦é¢„ç•™èµ·æ¥ï¼Ÿ\nR0~R3ç”¨æ¥æš‚å­˜Argument çš„ scratch rigister ï¼ˆ4ä¸ªregisterçš„åŸå› æ˜¯ä¸ºäº†handle values larger than 32 bitsï¼‰\nR0 R1 äº¦å¯æš‚å­˜ subroutine çš„resultå€¼\nR12 : ä½œä¸ºThe Intra-Procedure-call scratch register.\nè€Œä¸ºä»€ä¹ˆæ˜¯è¿™å‡ ä¸ªï¼Œå› ä¸ºå«æ–¹ä¾¿ä½¿ç”¨\nR12ï¼ˆIPï¼‰ç”¨æ³•ï¼š\nmov ip, lr bl lowlevel_init mov lr, ip å…ˆå°†lræš‚å­˜å­˜å…¥ip blè·³è‡³å…¶ä»–branchçš„åœ°æ–¹ branchç»“æŸåä½¿ç”¨lrè·³å›ç¬¬ä¸‰è¡Œï¼Œå°†ipå­˜å›lr P.S. å…³äºveneerï¼š ARM èƒ½æ”¯æ´ 32-bit å’Œ 16-bit æŒ‡ä»¤äº’ç›¸åˆ‡æ¢ï¼ˆTHUMB æ˜¯ ARM çš„ 16-bit æŒ‡ä»¤é›†ï¼‰ï¼Œå…¶ä¸­åˆ‡æ¢çš„ç¨‹å¼æ®µå« veneer\nå›ç›®å½•\nQ9ï¼šè°æŠŠNew Task æ¥åˆ° Ready List\nGDB Trace result Breakpoint 1, xTaskGenericCreate (pxTaskCode=0x80003b1 \u0026lt;GameTask\u0026gt;, pcName=0x800ea84 \u0026#34;GameTask\u0026#34;, usStackDepth=128, pvParameters=0x0, uxPriority=1, pxCreatedTask=0x0, puxStackBuffer=0x0, xRegions=0x0) at /home/kk/myPrograms/embedded/myFreeRTOS/tasks.c:516 516 { (gdb) next 520 configASSERT( pxTaskCode ); (gdb) 516 { (gdb) 520 configASSERT( pxTaskCode ); (gdb) 521 configASSERT( ( ( uxPriority \u0026amp; ( ~portPRIVILEGE_BIT ) ) \u0026lt; configMAX_PRIORITIES ) ); (gdb) 525 pxNewTCB = prvAllocateTCBAndStack( usStackDepth, puxStackBuffer ); (gdb) 572 prvInitialiseTCBVariables( pxNewTCB, pcName, uxPriority, xRegions, usStackDepth ); (gdb) 551 pxTopOfStack = pxNewTCB-\u0026gt;pxStack + ( usStackDepth - ( uint16_t ) 1 ); (gdb) 572 prvInitialiseTCBVariables( pxNewTCB, pcName, uxPriority, xRegions, usStackDepth ); (gdb) 551 pxTopOfStack = pxNewTCB-\u0026gt;pxStack + ( usStackDepth - ( uint16_t ) 1 ); (gdb) 572 prvInitialiseTCBVariables( pxNewTCB, pcName, uxPriority, xRegions, usStackDepth ); (gdb) 551 pxTopOfStack = pxNewTCB-\u0026gt;pxStack + ( usStackDepth - ( uint16_t ) 1 ); (gdb) 552 pxTopOfStack = ( StackType_t * ) ( ( ( portPOINTER_SIZE_TYPE ) pxTopOfStack ) \u0026amp; ( ( portPOINTER_SIZE_TYPE ) ~portBYTE_ALIGNMENT_MASK ) ); /*lint !e923 MISRA exception. Avoiding casts between pointers and integers is not practical. Size differences accounted for using portPOINTER_SIZE_TYPE type. */ (gdb) 572 prvInitialiseTCBVariables( pxNewTCB, pcName, uxPriority, xRegions, usStackDepth ); (gdb) 584 pxNewTCB-\u0026gt;pxTopOfStack = pxPortInitialiseStack( pxTopOfStack, pxTaskCode, pvParameters ); (gdb) 588 if( ( void * ) pxCreatedTask != NULL ) (gdb) 602 taskENTER_CRITICAL(); (gdb) 604 uxCurrentNumberOfTasks++; (gdb) 605 if( pxCurrentTCB == NULL ) (gdb) 604 uxCurrentNumberOfTasks++; (gdb) 605 if( pxCurrentTCB == NULL ) (gdb) 604 uxCurrentNumberOfTasks++; (gdb) 605 if( pxCurrentTCB == NULL ) (gdb) 609 pxCurrentTCB = pxNewTCB; (gdb) 611 if( uxCurrentNumberOfTasks == ( UBaseType_t ) 1 ) (gdb) (gdb) 616 prvInitialiseTaskLists(); (gdb) 645 uxTaskNumber++; (gdb) 655 prvAddTaskToReadyList( pxNewTCB ); (gdb) 645 uxTaskNumber++; (gdb) 655 prvAddTaskToReadyList( pxNewTCB ); (gdb) 645 uxTaskNumber++; (gdb) 655 prvAddTaskToReadyList( pxNewTCB ); (gdb) 645 uxTaskNumber++; (gdb) 655 prvAddTaskToReadyList( pxNewTCB ); (gdb) 645 uxTaskNumber++; (gdb) 650 pxNewTCB-\u0026gt;uxTCBNumber = uxTaskNumber; (gdb) 655 prvAddTaskToReadyList( pxNewTCB ); (gdb) 660 taskEXIT_CRITICAL(); (gdb) 670 if( xSchedulerRunning != pdFALSE ) (gdb) 657 xReturn = pdPASS; (gdb) 690 prvInitialiseTaskLists(void) åªæœ‰åœ¨listæœªè¢«åˆå§‹åŒ–æ—¶ï¼Œæ‰ä¼šè¢«æ‰§è¡Œã€‚é¢„è®¾ä¼šå»ºç«‹pxReadyTasksListsï¼ŒxDelayedTaskList1ï¼ŒxDelaye traceMOVED_TASK_TO_READY_STATEdTaskList2ï¼ŒxPendingReadyListï¼Œä¾ç…§ä½¿ç”¨è€…è®¾å®šå¯ä»¥é€‰æ‹©æ˜¯å¦å»ºç«‹xTasksWaitingTerminationå’ŒxSuspendedTaskList\nprvAddTaskToReadyList( pxNewTCB ) å°†pxNewTCBæ¥ä¸ŠpxReadyTasksListsï¼ŒprvAddTaskToReadyList()ç¨‹å¼ç å¦‚ä¸‹\n#define prvAddTaskToReadyList( pxTCB ) \\ traceMOVED_TASK_TO_READY_STATE( pxTCB ) \\ taskRECORD_READY_PRIORITY( ( pxTCB )-\u0026gt;uxPriority ); \\ vListInsertEnd( \u0026amp;( pxReadyTasksLists[ ( pxTCB )-\u0026gt;uxPriority ] ), \u0026amp;( ( pxTCB )-\u0026gt;xGenericListItem ) ) traceMOVED_TASK_TO_READY_STATE #ifndef traceMOVED_TASK_TO_READY_STATE #define traceMOVED_TASK_TO_READY_STATE( pxTCB ) #endif è‡ªå®šä¹‰å‡½å¼ï¼Œæ— é¢„è®¾å®šä¹‰ã€‚Debugç”¨\ntaskRECORD_READY_PRIORITY #define taskRECORD_READY_PRIORITY( uxPriority ) \\ { \\ if( ( uxPriority ) \u0026gt; uxTopReadyPriority ) \\ { \\ uxTopReadyPriority = ( uxPriority ); \\ } \\ } /* taskRECORD_READY_PRIORITY */ æ£€æŸ¥ç›®å‰taskçš„priorityæ˜¯å¦é«˜äºâ€œå½“å‰æœ€é«˜ä¼˜å…ˆæƒâ€ã€‚å¦‚æœæ˜¯ï¼Œå°†æ›´æ–°å½“å‰æœ€é«˜ä¼˜å…ˆæƒã€‚\nvListInsertEnd void vListInsertEnd( List_t * const pxList, ListItem_t * const pxNewListItem ) { ListItem_t * const pxIndex = pxList-\u0026gt;pxIndex; /* Insert a new list item into pxList, but rather than sort the list, makes the new list item the last item to be removed by a call to listGET_OWNER_OF_NEXT_ENTRY(). */ pxNewListItem-\u0026gt;pxNext = pxIndex; pxNewListItem-\u0026gt;pxPrevious = pxIndex-\u0026gt;pxPrevious; pxIndex-\u0026gt;pxPrevious-\u0026gt;pxNext = pxNewListItem; pxIndex-\u0026gt;pxPrevious = pxNewListItem; /* Remember which list the item is in. */ pxNewListItem-\u0026gt;pvContainer = ( void * ) pxList; ( pxList-\u0026gt;uxNumberOfItems )++; } å°†pxNewListItemæ’å…¥è‡³pxListçš„æœ€åé¢\nå›ç›®å½•\nQ10:arm conditional code?\nconditional codeç”¨æ³•ä¸ºé™„åŠ åœ¨æŸäº›æ¡ä»¶æŒ‡ä»¤ä¹‹åï¼Œç”¨æ¥å®šä¹‰æŒ‡ä»¤æ‰§è¡Œçš„ä»£ç \nQ11:Thumb state bit? execution state bit?\nEPSR-Execution Program Status Registerå†…æœ‰å­˜Thumb state bit å’Œ execution state bitsï¼Œ å…¶ä¸­execution state bitsåŒ…å«ä¸¤ä¸ªé‡å çš„åŒºåŸŸï¼š**\nIf-Then (IT) instruction\nInterruptible-Continuable Instruction (ICI) field)\nabout IT ITï¼ˆIf - Thenï¼‰æŒ‡ä»¤ç”±ç´§è¿ITçš„1ï½4æ¡åç»­æŒ‡ä»¤æ‰€ç»„æˆï¼ˆIT blockï¼‰ã€‚ http://web.eecs.umich.edu/~prabal/teaching/eecs373-f10/readings/ARMv7-M_ARM.pdf p.148~p.149 IT instruction exampleï¼š\nif (R4 == R5) { R7 = R8 + R9; R7 /= 2; } else { R7 = R10 + R11; R7 *= 2; } converts to http://wiki.csie.ncku.edu.tw/embedded/freertos\nCMP R4, R5 ITTEE EQ ADDEQ R7, R8, R9 ; if R4 = R5, R7 = R8 + R9 ASREQ R7, R7, #1 ; if R4 = R5, R7 /= 2 ADDNE R7, R10, R11 ; if R4 != R5, R7 = R10 + R11 LSLNE R7, R7, #1 ; if R4 != R5, R7 *=2 about ICI å¤šæš‚å­˜å™¨(multy register)è¯»å–ï¼ˆLDMï¼‰å’Œå†™å…¥ï¼ˆSTMï¼‰æ˜¯å¯ä»¥ä¸­æ–­çš„ï¼ŒICIç”¨æ¥ä¿å­˜è¯¥æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸‹ä¸€ä¸ªæš‚å­˜å™¨çš„ç¼–å·ã€‚\nQ12:R0~R3 , R12 , LR è¿™äº›å¯¹åº”åˆ°function callæ˜¯å“ªé‡Œ?\nQ13:R4~R11ç”¨åœ¨ç”šä¹ˆæ—¶å€™?\nQ14:æ¥ç»­Q5,é—®FreeRTOSè®¾è®¡æ¦‚å¿µ,å›å»çœ‹OSçš„forkéƒ¨åˆ†\næ‘˜è‡ªä¸”ç¿»è¯‘æé¾™ä¹¦å…«ç‰ˆP110ï½112ï¼š\nçˆ¶ç¨‹åºï¼ˆparent processï¼‰äº§ç”Ÿå­ç¨‹åºï¼ˆchild processï¼‰ï¼Œè¿™äº›æ–°çš„ç¨‹åºè¢«äº§ç”Ÿï¼ˆfork()ï¼‰åï¼Œä¼šå½¢æˆç¨‹åºæ ‘ï¼ˆtree of processesï¼‰ã€‚ ä¸€èˆ¬è€Œè¨€ï¼Œä¸€ä¸ªç¨‹åºä¼šéœ€è¦ä¸€äº›èµ„æºï¼ˆresourceï¼‰ï¼Œå­ç¨‹åºå¯ä»¥ç›´æ¥è·å¾—èµ„æºæˆ–æ˜¯å­ç¨‹åºè¢«é™åˆ¶åœ¨çˆ¶ç¨‹åºçš„èµ„æºé‡Œã€‚ã€Œé™åˆ¶å­ç¨‹åºåœ¨çˆ¶ç¨‹åºèµ„æºé‡Œã€å¯ä»¥é˜²æ­¢å› ä¸ºäº§ç”Ÿå¤ªå¤šå­ç¨‹åºè€Œå‘ç”Ÿè¶…è½½ï¼ˆoverloadingï¼‰ã€‚\nå…¸å‹çš„æ–¹æ³•æ˜¯ï¼Œåœ¨å‘¼å«fork()ä¹‹åï¼Œçˆ¶ç¨‹åºå’Œå­ç¨‹åºå…¶ä¸­ä¸€ä¸ªå¯ä»¥ä½¿ç”¨exec()æ¥å‘¼å«ä¸€ä¸ªæ–°çš„ç¨‹å¼ï¼Œå–ä»£è‡ªå·±çš„è®°å¿†ä½“ç©ºé—´ï¼Œè¿™ä¸ªæ–¹æ³•çš„å¥½å¤„æ˜¯ï¼Œçˆ¶ã€å­ç¨‹åºå¯ä»¥è·‘ä¸åŒçš„ç¨‹å¼å¹¶ä¸”è¿˜å¯ä»¥åšæ²Ÿé€šï¼ˆcommunicateï¼‰ã€‚\nQ15:VFPæœ‰å‡ ä¸ªæš‚å­˜å™¨\nARM æµ®ç‚¹æ•°æ¶æ„ ï¼ˆVFPï¼Œå…¨åVector Floating-Pointï¼‰ä¸ºå¯¹æµ®ç‚¹è¿ç®—çš„æ“ä½œæä¾›çš„ç¡¬ä½“æ”¯æ´ã€‚\nhttp://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0439b/Chdhfiah.html\nä¸Šé¢è¡¨æ ¼å¼VFPä¼šç”¨åˆ°çš„REG\nå¦å¤–FPUæ‹¥æœ‰ç‹¬ç«‹çš„æš‚å­˜å™¨æœ‰32ä¸ªï¼ˆ32bit)ï¼ˆS0~S31)\næ‰€ä»¥åœ¨PORT.C void xPortPendSVHandler( void )\n\u0026#34; tst r14, #0x10 \\n\u0026#34; /* Is the task using the FPU context? If so, push high vfp registers. */ \u0026#34; it eq \\n\u0026#34; \u0026#34; vstmdbeq r0!, {s16-s31} \\n\u0026#34; å°±ä¼šæŠŠHIGHçš„éƒ¨ä»½å †èµ·æ¥ï¼ˆå€Ÿç”±STMDBè¾¾æˆï¼‰\nQ16:!æ˜¯ä»€ä¹ˆ(ç»„è¯­)\nNote that the exclamation mark in ARM assembly code means that the index operation is performed before applying the real instruction.\nFor example, str r2, [r3, #-4]! means: store r2 value to the ptr {r3-4} and r3 = r3 -4.\næŒ‡ä»¤é›†æ¶æ„ï¼š\nADD R0, R0, #1 ; R0â†R0ï¼‹1 STR R0, [R1] ; R0â†’[R1] //å°†R0çš„å€¼ä¼ é€åˆ°ä»¥R1çš„å€¼ä¸ºä½å€çš„è®°å¿†ä½“ä¸­ ADD R0, R1, R2 LSL #3 ; R0â†R1 + R2*8 //R2ä¸­çš„è¿ç®—å…ƒå·¦ç§»3ä½å…ƒ LDMIA R0, {R1, R2, R3} ; [R0]â†’R1 ; [R0+4]â†’R2 ; [R0+8]â†’R3 æ¯”è¾ƒä¸‰ç§ï¼š LDR R0, [R1, #8] ; R0â†[R1+8] LDR R0, [R1], #8 ; R0â†[R1] ; R1â†R1+8 LDR R0, [R1, #8]! ; R0â†[R1+8] ; R1â†R1+8 å…³äºSTMxxå’ŒLDMxxæŒ‡ä»¤ Q17:attribute(( naked )) nakedæ˜¯å¹²å˜›?\nfunctionç»è¿‡compiler compileåéƒ½ä¼šåœ¨function entryå’ŒexitåŠ å…¥ä¸€äº›codeï¼Œå¦‚save used registersï¼Œadd return code.\nä½†æ˜¯å¦‚æœä¸æƒ³è¦compileråŠ ä¸Šè¿™äº›codeï¼Œå°±å¯ä»¥åœ¨functionå®£å‘Šæ—¶åŠ ä¸Šattribut : naked\nvoid funA(void) __attribute__ ( (naked)) { ... asm(\u0026#34;ret\u0026#34;); } Q18: vPortEnterCritical ç¨‹å¼ç ä¸ºä½•èƒ½ç¡®ä¿ä¸€æ¬¡åªæœ‰ä¸€ä¸ªtaskè¿›å…¥critical section uxCriticalNesting++ ?\nfuncA(){ vPortEnterCritical(); ... funcB(); ... vPortExitCritical(); } funcB(){ vPortEnterCritical(); ... vPortExitCritical(); } Q19 :schedule é‚£è¾¹[ åœ¨ä¸€èˆ¬éå³æ—¶ä½œä¸šç³»ç»Ÿä¸Šï¼Œé€šå¸¸æ¯ä¸ªtaskéƒ½ä¼šåˆ†åˆ°ç›¸åŒçš„CPUä½¿ç”¨æ—¶é—´ï¼ŒRTOSåˆ™ä¸å°½ç„¶ï¼Œåç»­å°†æåˆ°ç›¸å…³èµ„è®¯ é™¤äº†ç”±kernelè¦æ±‚taskäº¤å‡ºCPUæ§åˆ¶æƒå¤–ï¼Œå„taskä¹Ÿèƒ½å¤Ÿé€‰æ‹©è‡ªè¡Œäº¤å‡ºCPUæ§åˆ¶æƒï¼Œä¸¾å‡¡]ä½œæ›´æ­£\næ›´æ–°åœ¨ä¸Šé¢å†…å®¹\nQ20:å…³äº xTaskIncrementTick() ç¨‹å¼ç \næ›´æ–°åœ¨ä¸Šé¢å†…å®¹\nQ21: queueå®ä½œæ˜¯ä¸æ˜¯cycleï¼Ÿ\næ˜¯ï¼Œå‚è€ƒ\npxQueue-\u0026gt;pcWriteTo += pxQueue-\u0026gt;uxItemSize; if( pxQueue-\u0026gt;pcWriteTo \u0026gt;= pxQueue-\u0026gt;pcTail ) /*lint !e946 MISRA exception justified as comparison of pointers is the cleanest solution. */ { pxQueue-\u0026gt;pcWriteTo = pxQueue-\u0026gt;pcHead; } else { mtCOVERAGE_TEST_MARKER(); } å›ç›®å½•\né—®é¢˜è®¨è®ºäºŒ # (åˆ†ä¸¤éƒ¨åˆ†çº¯ç²¹æ˜¯ä¸ºäº†ç›®å½•è¿ç»“æ–¹ä¾¿)\nQ22: Lab40 çš„ visualizer/main.c çš„ get_time() é‡Œ scale ä¸ºä»€ä¹ˆæ˜¯ microsecond ï¼Ÿ\né—®é¢˜æ˜¯è¿™æ ·çš„ï¼Œä¸ºäº†è®¡ç®— context switch çš„æ—¶é—´ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå–çš„ç³»ç»Ÿçš„æ—¶é—´(ç³»ç»Ÿå¯åŠ¨è‡³ä»Šå†ç»çš„æ—¶é—´)ï¼Œä¹‹å‰åœ¨ Lab40 æœ‰ä½¿ç”¨è¿‡ tick count æ¥å–å¾—ç³»ç»Ÿæ—¶é—´ï¼Œåœ¨ visualizer/main.c ä¸­çš„ get_time() æœ€å return çš„ xTaskGetTick() + ( reload - current / reload) æ˜¯ç›®å‰ç³»ç»Ÿå·²ç»æ‰§è¡Œçš„ ticks åŠ ä¸Šç›®å‰ç³»ç»Ÿå†ç»çš„ count downs æ•° ( 1 / x tickï¼Œè¯»ä½œã€x åˆ†ä¹‹ä¸€ tickã€)ï¼Œè¿™æ®µå°±æ˜¯ç”¨ tick æ¥è¡¨ç¤ºç›®å‰ç»å†çš„æ—¶é—´ï¼Œè¦æŠŠè¿™ä¸ª ticks è½¬æˆ human readable timeï¼Œä¹Ÿå°±æ˜¯è¦è®© ticks è½¬æ¢æˆ secondï¼Œä¸€ä¸ªä½œæ³•å°±æ˜¯ä¹˜ä¸Šã€å•ä½é‡çº§(scale)ã€ï¼Œè¿™ä¸ª scale å®šä¹‰åœ¨ return ä¹‹å‰ï¼Œè¯·å‚è€ƒä»¥ä¸‹ç‰‡æ®µï¼š\nvisualizer/main.c\næˆ‘ä»¬åœ¨æ„çš„æ˜¯ä¸ºä»€ä¹ˆ scale å•ä½æ˜¯ microsecond å‘¢?\nå…ˆå¾€ä¸Šè¿½ configTICK_RATE_HZ çš„å®šä¹‰ï¼š\nvisualizer/FreeRTOSConfig.h\næ‰€ä»¥ scale = 1000000/100 (tick/sec) = 10000 ä½†æ˜¯è¿™æ ·æˆ‘ä»¬è¿˜æ˜¯ä¸çŸ¥é“è¯¥ç»™ scale ä¸‹ä»€ä¹ˆå•ä½ï¼Œå› ä¸º configTICK_RATE_HZ åªæ˜¯é¢‘ç‡ï¼Œä¹Ÿå°±æ˜¯ã€æ¯å•ä½æ—¶é—´å†…æœ‰å‡ æ¬¡tickã€ï¼Œå®˜æ–¹å¹¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªå•ä½æ—¶é—´æ˜¯ä»€ä¹ˆã€‚\nä½†æ˜¯æˆ‘ä»¬æ³¨æ„åˆ°ä½¿ç”¨æ‰‹å†Œä¸­æåˆ°ï¼ŒFreeRTOS åœ¨ç®¡ç† task çš„æ—¶å€™ï¼Œæœ‰ä¸€ä¸ª API â€“ vTaskDelay() å¯ä»¥ç”¨æ¥è®© Task æš‚åœä¸€æ®µæ—¶é—´ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š FreeRTOS å®˜ç½‘\nè¿™æ®µç¨‹å¼ç ä¸­ä½¿ç”¨äº† vTaskDelay() æ¥æš‚åœ taskï¼Œæ–‡ä»¶è¯´æ˜è¿™ä¸ªå‡½æ•°çš„å‚æ•°å¦‚æœæ˜¯æ•´æ•°å¸¸æ•°ï¼Œå•ä½æ˜¯ ticksï¼Œä¹Ÿå°±æ˜¯è¯´ä¼ å…¥æ•´æ•°å¦‚ï¼švTaskDelay(500)ï¼Œä¼šæš‚åœ 500 ticksï¼Œè€Œä¸Šè¿°ç¨‹å¼ç æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°æ˜¯ 500/portTICK_RATE_MSï¼Œæ³¨è§£è¯´è¿™æ ·å°±å¯ä»¥è®© task æš‚åœ 500 ms(10^-3 second)ï¼Œæ‰€ä»¥ n / portTICK_RATE_MS æ˜¯ msï¼Œç„¶è€Œæ­¤æ—¶çš„ n åº”è¯¥ä¸æ˜¯ ticks äº†(the result of our discussion)\næ¥è‘—æˆ‘ä»¬å»è¿½portTICK_RATE_MS çš„å®šä¹‰ï¼š freertos-basic/freertos/libraries/FreeRTOS/portable/GCC/ARM_CM3/portmacro.h\n(in v8.2.1, portTICK_RATE_MS was renamed to portTICK_PERIOD_MS)\nè‡³æ­¤ï¼Œæˆ‘ä»¬æ¨å€’å¦‚ä¸‹ï¼š\nvTaskDelay() çš„ parameter æ˜¯ä»¥ tick ä¸ºå•ä½ vTaskDelay ( 500 / portTICK_RATE_MS ) = vTaskDelay ( 500 / 1000 / configTICK_RATE_HZ ) = vTaskDelay (50) å³ delay 50 ticks å›  500 / portTICK_RATE_MS = 500 ms = 50 ticks å¦ 500 ms = 500 / portTICK_RATE_MS æ„æ€æ˜¯ 500/portTICK_RATE_MS å¯ä»¥è§†ä¸º 500 ms åˆ 500 / portTICK_RATE_MS = 50 ticks =\u0026gt; 500 (ms) = 50(tick) * portTICK_RATE_MS å¾— x ticks * portTICK_RATE = 10 * x ms åˆ scale = 1000000 / configTICK_RATE_MS = 1000 * (1000 / configTICK_RATE_MS) = 1000 * portTICK_RATE_MS æ‰€ä»¥ ticks * scale = 1000 * ticks * portTICK_RATE å¯ä»¥å¾—åˆ° us çš„å€¼ # å…¶å®å°±æ˜¯è¯´ï¼Œticks æ˜¯ç”µè„‘å†ç»çš„æ—¶é—´ï¼Œæˆ‘ä»¬è¯´ ã€x ticks ç­‰äº y msã€ æ‰€ä»¥ get_time å°±æ˜¯è¦æŠŠ x tick è½¬æˆ y msï¼Œåšæ³•æ˜¯æŠŠ x ticks ä¹˜ä¸Š 1000/config ç°åœ¨å·²ç»å¾—åˆ° y ms è¿›ä¸€æ­¥è¦æŠŠ x tick çš„è½¬æˆ us å›  1 ms = 1000 us =\u0026gt; x ticks = y ms = 1000*y*(1/1000) ms æ‰€æ‰è¦å†ä¹˜ä¸Š 1000 åŸæ¥çš„ç›²ç‚¹æ˜¯ï¼Œä»¥ä¸ºæŠŠã€é‡çº§ã€ä¹˜ 1000ï¼Œè¿™æ ·ä¼šä½¿ 1ms å˜æˆ 1000msï¼Œå®é™…ä¸Šæ˜¯æŠŠã€æ•°å€¼ã€ä¹˜ 1000ï¼Œå½“ 1 æ—¶æ˜¯å¯¹åº” ms çš„å€¼ï¼Œ1000 åˆ™æ˜¯å¯¹åº” us çš„å€¼\nsubproblem: return çš„ å¼å­ ä¸ç²¾å‡†ï¼Œå› ä¸º ( reload - current ) / reload always 0 ï¼Œ( å› ä¸º int / int )ï¼Œè€Œè¿™éƒ¨åˆ†æœ‰è¯•è‘—å»æ”¹å–„ï¼Œä½†æ˜¯ä¸èƒ½ return float/double (WHY ?)\njservï¼šè¿›è¡Œé™¤æ³•è¿ç®—ï¼ŒFPU å¯èƒ½è¿˜æ²¡å¯ç”¨\nå›ç›®å½•\nQ23. FreeRTOS å¦‚ä½•è¿½åˆ°è‡ªå·±?\nä¸ºä½•çŸ¥é“ vTaskDelete(NULL) çš„ NULL æ˜¯è¡¨ç¤º task æœ¬èº«?** åœ¨ task.c (line 400) ä¹‹ä¸­ï¼Œæˆ‘ä»¬æ‰¾å‡ºäº† vTaskDelete(NULL) çš„å®ä½œæ˜¯ macro:\nvoid vTaskDelete( TaskHandle_t xTaskToDelete ) { TCB_t *pxTCB; taskENTER_CRITICAL(); { /* If null is passed in here then it is the calling task that is being deleted. */ pxTCB = prvGetTCBFromHandle( xTaskToDelete ); åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œåˆ° vTaskDelete(NULL) å‘¢? é‡æ— ç©·å›åœˆæ—¶ä¼šæ‰§è¡Œæ­¤codeå—? å› ä¸º FreeRTOS ä¸å‡† task function æœ‰ returnï¼Œä¹Ÿä¸å‡†æ‰§è¡Œåˆ°æœ€åä¸€è¡Œï¼Œå› æ­¤å¦‚æœä¸éœ€è¦æ­¤ taskï¼Œåˆ™åº”è¯¥åˆ é™¤æ­¤task (å‚è€ƒ : http://redmilk525study.blogspot.tw/2014/09/freertos-task-management.html)\næœ‰ä¸€ä¸ªå¯èƒ½æ€§æ˜¯ï¼Œå¦‚æœåœ¨ loop ä¸­å‘ç”Ÿæ‰§è¡Œé”™è¯¯ (fail)ï¼Œåˆ™éœ€è¦è·³å‡ºå›åœˆå¹¶ç»ˆæ­¢(è‡ªå·±)æ‰§è¡Œï¼Œæ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ vTaskDelete æ¥åˆ é™¤è‡ªå·±ï¼Œå‘ç”Ÿé”™è¯¯çš„ä¾‹å­ï¼š\n1. å‡å¦‚ä»Šå¤©ä¸€ä¸ª task æ˜¯è¦å­˜å–èµ„æ–™åº“ï¼Œä½†æ˜¯èµ„æ–™åº“æˆ–èµ„æ–™è¡¨ä¸å­˜åœ¨ï¼Œåˆ™åº”è¯¥ç»“æŸ task 2. å‡å¦‚ä»Šå¤©ä¸€ä¸ª client task æ˜¯è¦è·Ÿ server åšè¿çº¿( listening å°±æ˜¯ loop)ï¼Œå´å‘ç° client ç«¯æ²¡æœ‰ç½‘è·¯è¿çº¿ï¼Œåˆ™åº”ç»“æŸ task Q24. è¿™ä¸ª usStackDepth å¦‚ä½•å»è®¡ç®—ä»–å ç”¨ç©ºé—´?\nåœ¨ FreeRTOS é‡Œé¢ï¼ŒusStackDepth è®¾å®š 100ï¼Œå‡è®¾æ¯ä¸ª stack ä¸º 16 bits å®½ï¼Œåˆ™ä»–æ‰€å ç”¨çš„è®°å¿†ä½“ç©ºé—´ä¸º 200 bytesï¼Œè¿™ä¸ªå€¼æŒ‡å®šçš„æ˜¯ stack çš„å †å ç©ºé—´ (stack size)å¯ä»¥ä¿ç•™å¤šå°‘ word(4 bytes)ï¼Œå¦‚æœè®¾å®šä¸º 100ï¼Œåˆ™ç³»ç»Ÿå°†ä¼šåˆ†é… 400 bytes ç»™ taskï¼Œæ²¡æœ‰ç®€å•çš„æ–¹æ³•å¯ä»¥è®¡ç®—ä¸€ä¸ªä»»åŠ¡åˆ°åº•éœ€è¦å¤šå°‘ç©ºé—´ï¼Œå¤§å¤šæ•°åšæ³•éƒ½æ˜¯å…ˆç®€å•åœ°ç»™äºˆä¸€ä¸ªåˆä¼°çš„å€¼ï¼Œç„¶åå†éšè‘—ä»»åŠ¡è¿ä½œçš„è®¯æ¯æ¥è°ƒæ•´ã€‚\nQ25. ä¸ºä½• configMAX_PRIORITIES è¦ -1 ?\nè¿™ä¸ªé—®é¢˜æ˜¯åœ¨æƒ³ï¼šå¦‚æœ configMAX_PRIORITIES è®¾å®šä¸º 10ï¼Œä¸ºä»€ä¹ˆä¸å¯ä»¥åˆ†é… 10 ç»™ä¸€ä¸ª task?\nä» pxReadyTasksLists[ uxTopReadyPriority ] çœ‹èµ·æ¥\nready list åº”è¯¥æ˜¯æ¯ä¸ª index è¡¨ç¤ºä¸åŒçš„ priority (æ¢å¥è¯è¯´ï¼ŒåŒä¸€ä¸ª index çš„ ready list ä¸­çš„ tasks åº”è¯¥æ˜¯å…·æœ‰ç›¸åŒ priority çš„)\næ‰€ä»¥ï¼Œä¸ºäº†é…ç½® ready list çš„é•¿åº¦ï¼Œåªèƒ½ä» 0 ~ priority - 1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ è‹¥è¦è®© ready list é•¿åº¦æ˜¯ 10 (åˆ†åˆ«ä»£è¡¨è‘— priority 0 - 9)ï¼Œåˆ™ä½ è™½ç„¶è¦æŠŠ configMAX_PRIORITY è®¾å®šä¸º 10ï¼Œåˆ†é…æƒé™æ—¶æœ€é«˜å´åªèƒ½åˆ° configMAX_PRIORITYï¼Œå…¶å®æˆ‘åªæ˜¯ç®€å•çš„ç†è§£ä¸Šæ˜¯array å¦‚æœè¦æœ‰110ä¸ªä¼˜å…ˆæƒå®šä¹‰ï¼Œäº‹å®ä¸Šå†™ç¨‹å¼æ—¶æ˜¯å®šä¹‰09 è€Œå·²ï¼Œçš„ç¡®æ˜¯ç”±0å¼€å§‹æ•°æ²¡é”™ã€‚\nå›ç›®å½•\nQ26.çœŸæ­£æ”¾è‡³ ready list çš„æ˜¯ä»€ä¹ˆ? æ˜¯æ”¾å…¥ handle?\n\u0026lt;freertos/libraries/FreeRTOS/include/task.h#L345\u0026gt;\n#define xTaskCreate( pvTaskCode, pcName, usStackDepth, pvParameters, uxPriority, pxCreatedTask ) xTaskGenericCreate( ( pvTaskCode ), ( pcName ), ( usStackDepth ), ( pvParameters ), ( uxPriority ), ( pxCreatedTask ), ( NULL ), ( NULL ) ) (è¿™ä¸‰è¡Œæ˜¯åŒä¸€è¡Œï¼Œæœªæ–¹ä¾¿é˜…è¯»è€Œæ–­è¡Œ)\nåœ¨è¿™é‡ŒæŠŠ xTaskGenericCreate() åŒ…è£…æˆ xTaskCreate()ï¼Œæ‰€ä»¥ main ä¸­å‘¼å« vTaskCrate() å®é™…ä¸Šæ˜¯å‘¼å« xTaskGenericCreate()\nç„¶åæ˜¯å‘¼å« \u0026lt;freertos/libraries/FreeRTOS/tasks.c#L551\u0026gt; çš„ xTaskGenericCreateï¼Œåœ¨ xTaskGenericCreate ä¸­æˆ‘ä»¬æ‰¾åˆ°æŠŠ task åŠ å…¥ readyList çš„åœ°æ–¹(#704)ï¼š\nprvAddTaskToReadyList( pxNewTCB ); æ‰€ä»¥å®é™…ä¸Šæ˜¯æŠŠè¯¥ task çš„ TCB åŠ å…¥ readyList\né‚£è¦æ€ä¹ˆè¾¨è¯† task å‘¢ï¼Ÿ ((configASSERT( pxTaskCode ); å¹¶ä¸æ˜¯æ³¨å†Œ taskCodeï¼ŒconfigASSERT() åªæ˜¯ç”¨æ¥æµ‹è¯•çš„)) åœ¨ line 621 (xTaskGenericCreate)ï¼š\n/* Setup the newly allocated TCB with the initial state of the task. */ prvInitialiseTCBVariables( pxNewTCB, pcName, uxPriority, xRegions, usStackDepth ); è¿™é‡Œçœ‹åˆ°å¸¦æœ‰ pcName å´æ²¡æœ‰ taskCodeï¼Œæˆ‘ä»¬å·²çŸ¥ pcName åªç”¨åšå¼€å‘è¯†åˆ«ï¼Œä¸ç”¨åšç³»ç»Ÿç®¡ç†ï¼Œæ‰€ä»¥è¿½åˆ°ä¸‹é¢\n#if( portUSING_MPU_WRAPPERS == 1 ) { pxNewTCB-\u0026gt;pxTopOfStack = pxPortInitialiseStack( pxTopOfStack, pxTaskCode, pvParameters, xRunPrivileged ); } #else /* portUSING_MPU_WRAPPERS */ { pxNewTCB-\u0026gt;pxTopOfStack = pxPortInitialiseStack( pxTopOfStack, pxTaskCode, pvParameters ); } åº”è¯¥æ˜¯å› ä¸ºåœ¨ TCB ä¸­è®°å½•äº† stack çš„èµ·å§‹ä½å€ï¼Œè¿™é‡Œæœ‰ pxTaskCodeï¼Œä¸æ˜¯ç”¨ handleï¼(ä¸è¿‡ handle æ˜¯å¦ä¹Ÿæ˜¯æŒ‡å‘ pxTopOfStack???)\nhandle: (å°ï¼šæ§åˆ¶ä»£ç ã€ä¸­ï¼šå¥æŸ„)å®é™…çš„æ„ä¹‰æ˜¯ä¸€ä¸ªç”¨æ¥å­˜å–è¯¥ task çš„ã€æŒ‡æ ‡ã€ï¼Œä»–æ˜¯æä¾›å¤–éƒ¨ç³»ç»Ÿæˆ–ç¨‹å¼æ¥å‚ç…§ç›®å‰ task ç”¨çš„ ä¸¾ä¸ªä¾‹å­ï¼šåˆ é™¤ task\nvTaskCreate(..., taskA, ...) å½“æˆ‘ä»¬è¦å‘¼å« vTaskDelete æ¥åˆ é™¤ taskA æ—¶ï¼Œä¸ºäº†è®© vTaskDelete å­˜å–åˆ° taskA çš„è®°å¿†ä½“ä½å€ï¼Œæˆ‘ä»¬è¦ä¼ å…¥ä¸€ä¸ªæŒ‡å‘ taskA çš„æŒ‡æ ‡åˆ° vTaskDelete ä¸­ï¼Œè¿™ä¸ªæŒ‡æ ‡å°±æ˜¯ handle\nå»ºç«‹ handle çš„æ–¹æ³•å¦‚ä¸‹ï¼š\nxTaskHandle handleTaskA; // å»ºç«‹ä¸€ä¸ªç”¨æ¥æŒ‡å‘ taskA çš„ handle æŒ‡æ ‡å˜æ•° vTaskCreate(.., taskA, ..., handleTaskA); // ä¼ å…¥è¿™ä¸ªæŒ‡æ ‡å˜æ•°ï¼Œè®© vTaskCreate å¯ä»¥è®°å½•ä»– /* å› ä¸ºæ˜¯ pass by addressï¼ŒhandleTaskA å¤§æ¦‚åœ¨ vTaskCreate() ä¸­åªæ˜¯è¢«ä¿®æ”¹å€¼ï¼Œæ‰€ä»¥ç¦»å¼€ vTaskCreate åå°±å¯ä»¥ç›´æ¥å­˜å–åˆ° handleTaskA çš„å†…å®¹ */ vTaskDelete(handleTaskA); // ä¼ å…¥ handle ä»¥ä¾› vTaskDelete å‚è€ƒ Q27. FreeRTOS åœ¨å“ªé‡Œå»æ›´æ–° pcCurrentTCB è¿™ä¸ª pointer ? æŒ‡å‘æœ€æ–°æ­£åœ¨è¿è¡Œçš„ task?\nè¿™ä¸ªé—®é¢˜æ˜¯è¦æ¢è®¨å¦‚ä½•ç”¨ schedulerï¼Œstill working\u0026hellip;to be continue.\nQ28. ä¸ºä½•ä¸ä½¿ç”¨ linked-list å»çºªå½• priority value?\nå› ä¸º linked-list è¦å»æ’åºçš„è¯ï¼Œæœ‰ N ä¸ªï¼Œæœ‰å¯èƒ½ä¼šæœ‰ n^2 æˆ–è€…æ˜¯ nlogn çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¸” array å¯ä»¥åš random accessï¼Œè¿™å¯¹ä»¥ priority ä½œä¸º index çš„ ready list æ¥è¯´ï¼Œä¼šæ¯” linked-list æ›´ç›´æ¥çš„å­˜å–åˆ°æŒ‡å®šçš„ priority\nä½¿ç”¨ uxTopReadyPrioirty æ˜¯å› ä¸ºç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæœå¯»ä¼šåªæœ‰å¸¸æ•°æ—¶é—´å¤æ‚åº¦\n**Q29. xListEndåœ¨å“ª? **\nxLIST ä¸­çš„ xListEnd æ˜¯ xLISTï¼ˆlinked-listï¼Ÿï¼‰çš„å°¾å·´\nQ30. FreeRTOS çš„event å®šä¹‰æ˜¯ä»€ä¹ˆ? æ˜¯åŒæ­¥æœºåˆ¶è¿˜æ˜¯éåŒæ­¥?\n-Event bits are used to indicate if an event has occurred or not. Event bits are often referred to as event flags. -æ¥æºï¼š[http://www.freertos.org/FreeRTOS-Event-Groups.html](http://www.freertos.org/FreeRTOS-Event-Groups.html) group ä¸­æœ‰å¾ˆå¤š bitï¼Œåˆ†åˆ«ä»£è¡¨ task æ­£åœ¨ç­‰å¾…çš„ä¸€ä¸ª eventï¼Œå¹¶ä¸ä¸€å®šæ‰€æœ‰çš„ bit éƒ½ä¼šç”¨åˆ°ï¼Œçœ‹ task éœ€è¦ç­‰å¾…å¤šå°‘ task event ä¾‹å¦‚ï¼š\nA message has been received and is ready for processing The application has queued a message that is ready to be sent to a network It is time to send a heartbeat message onto a network TCB ç»“æ„ä¸­è¿˜æœ‰ä¸¤ä¸ª xListItemï¼šxGenericListItem å’Œ xEventListItem\nxListItem xGenericListItem; /* ç”¨æ¥è®°å½• task çš„ TCB åœ¨ FreeRTOS ready å’Œ blocked queue çš„ä½ç½® */ xListItem xEventListItem; /* ç”¨æ¥è®°å½• task çš„ TCB åœ¨ FreeRTOS event queue çš„ä½ç½® */ ä¸è®º xGenericListItem æˆ– xEventListItemï¼Œéƒ½æ˜¯ xListItem_t å‹æ€ï¼Œè¿™ä¸ªç»“æ„å®šä¹‰åœ¨ list.hï¼š\nstruct xLIST_ITEM { listFIRST_LIST_ITEM_INTEGRITY_CHECK_VALUE configLIST_VOLATILE TickType_t xItemValue; struct xLIST_ITEM * configLIST_VOLATILE pxNext; struct xLIST_ITEM * configLIST_VOLATILE pxPrevious; void * pvOwner; void * configLIST_VOLATILE pvContainer; listSECOND_LIST_ITEM_INTEGRITY_CHECK_VALUE }; typedef struct xLIST_ITEM ListItem_t; å›ç›®å½•\nQ31. å¦‚ä½•çŸ¥é“ taskç°åœ¨å¤„äºå“ªä¸ªçŠ¶æ€? å¯¹åº”çŠ¶æ€å›¾çš„ç¨‹å¼ç åœ¨å“ªé‡Œ?\nTask æœ‰å››ç§çŠ¶æ€ blocked (\u0026lsquo;B\u0026rsquo;), ready (\u0026lsquo;R\u0026rsquo;), deleted (\u0026lsquo;D\u0026rsquo;) or suspended (\u0026lsquo;S\u0026rsquo;)\nvTaskList(buf) å°†taskçš„æ‰€æœ‰èµ„è®¯å†™è¿›bufå†…ï¼Œä¹‹åå†æŠŠbufçš„å†…å®¹printå‡ºæ¥\nfio_printf(1, \u0026#34;\\n\\rName State Priority Stack Num\\n\\r\u0026#34;); fio_printf(1, \u0026#34;*******************************************\\n\\r\u0026#34;); fio_printf(1, \u0026#34;%s\\r\\n\u0026#34;, buf + 2); å°±å¯ä»¥çŸ¥é“taskå¤„äºå“ªä¸ªçŠ¶æ€\nvTaskList() calls uxTaskGetSystemState(), then formats the raw data generated by uxTaskGetSystemState() into a human readable (ASCII) table that shows the state of each task, including the task\u0026#39;s stack high water mark (the smaller the high water mark number the closer the task has come to overflowing its stack). Click here to see an example of the output generated. In the ASCII table the following letters are used to denote the state of a taskï¼š \u0026#39;B\u0026#39; - Blocked \u0026#39;R\u0026#39; - Ready \u0026#39;D\u0026#39; - Deleted (waiting clean up) \u0026#39;S\u0026#39; - Suspended, or Blocked without a timeout vTaskList() is a utility function provided for convenience only. It is not considered part of the kernel. SeevTaskGetRunTimeStats() for a utility function that generates a similar table of run time task utilisation information. Parameters: pcWriteBuffer A buffer into which the above mentioned details will be written, in ASCII form. This buffer is assumed to be large enough to contain the generated report. Approximately 40 bytes per task should be sufficient.\tQ32. ç”»ä¸€ä¸‹ pxStack ä»¥åŠ pxTopOfStack çš„è®°å¿†ä½“ä½ç½®å›¾(ç”¨gdbå»trace)\n2015 æ˜¥å­£ç­ v8.2.1 ç‰ˆæœ¬\n\u0026lt;freertos/libraries/FreeRTOS/portable/GCC/ARM_CM3/port.c\u0026gt;\n/* * See header file for description. */ StackType_t *pxPortInitialiseStack( StackType_t *pxTopOfStack, TaskFunction_t pxCode, void *pvParameters ) { /* Simulate the stack frame as it would be created by a context switch interrupt. */ pxTopOfStack--; /* Offset added to account for the way the MCU uses the stack on entry/exit of interrupts. */ *pxTopOfStack = portINITIAL_XPSR; /* xPSR */ pxTopOfStack--; *pxTopOfStack = ( StackType_t ) pxCode; /* PC */ pxTopOfStack--; *pxTopOfStack = ( StackType_t ) portTASK_RETURN_ADDRESS; /* LR */ pxTopOfStack -= 5; /* R12, R3, R2 and R1. */ *pxTopOfStack = ( StackType_t ) pvParameters; /* R0 */ pxTopOfStack -= 8; /* R11, R10, R9, R8, R7, R6, R5 and R4. */ return pxTopOfStack; } å‚è€ƒäº† Lab33ä½¿ç”¨ \u0026ldquo;(gdb) target: remote\u0026rdquo; + \u0026ldquo;info registers\u0026rdquo; æ¥è§‚å¯Ÿæš‚å­˜å™¨å†…å®¹ï¼Œè€Œåœ¨ freertos-basic/tool/gdbscript ä¸­å°±å·²ç»æœ‰ target: remote 3333 äº†ï¼Œfreertos/mk/qemu.mk å‘¼å« qemu å¹¶ä¸”ç›´æ¥è¿›å…¥ gdbï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ info registers æ¥è§‚å¯Ÿï¼Œä¸‹å›¾æ˜¯ pxPortStackInitialise() æ‰§è¡Œå®Œæ¯•ä»¥åçš„æš‚å­˜å™¨çŠ¶æ€å›¾\nQ33. åœ¨ FreeRTOS é‡Œé¢ï¼Œå…¶ pid åœ¨å“ªé‡Œ? å¦‚ä½•çŸ¥é“ task çš„ id èµ„è®¯?\nFreeRTOS å»ºç«‹æ–° task çš„æ–¹å¼ä¸ Linux ä¸åŒï¼Œå‰è€…æ˜¯ç”¨ vTaskCreate()ï¼Œå¦‚æœæœ‰å›ä¼ ï¼Œåªä¼šå›ä¼  pdPass æˆ– error æ¥è¡¨ç¤º task å»ºç«‹æˆåŠŸä¸å¦ï¼Œå¦‚æœè¦è®©ç¨‹å¼è¾¨è¯†è¿™ä¸ª taskï¼Œåœ¨ create æ—¶å°±è¦ç»™äºˆ vTaskCreate ä¸€ä¸ªç”¨æ¥è®°å½•è¯¥ task TCB èµ·å§‹ä½å€çš„ handle æŒ‡æ ‡ï¼Œå› æ­¤ FreeRTOS æ²¡æœ‰ PID\nFreeRTOS é€è¿‡ä¸€ä¸ª pxCurrentTCB çš„æŒ‡æ ‡æ¥å­˜å–ç›®å‰æŒ‡å‘çš„ task åŸºæœ¬èµ„è®¯ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœè¦çŸ¥é“ task çš„èµ„è®¯ï¼Œéƒ½æ˜¯å»å­˜å– TCBï¼Œ2007 å¹´çš„èµ„æ–™æ˜¾ç¤ºï¼Œå¥½åƒå¯ä»¥é€è¿‡å­˜å– pxCurrentTCB-\u0026gt;uxTCBNumber æ¥å–å¾— task çš„ç¼–å·ï¼Œä½†æ˜¯ç›®å‰çš„ TCB å·²ç»æ²¡æœ‰è¿™ä¸ªé¡¹ç›®äº†\nè‡³äºè€ƒè™‘ä½¿ç”¨ handle æ¥å–å¾— task id ä¹Ÿæ˜¯ä¸å¯¹çš„ï¼Œå› ä¸º handle æŒ‡å‘çš„æ˜¯ TCB çš„ä½å€ï¼Œå› æ­¤ä»–ä¹Ÿæ˜¯å­˜å– TCB\nå›ç›®å½•\nå‚è€ƒèµ„æ–™ # The Architecture of Open Source Applications: FreeRTOS\nç®€ä½“ä¸­æ–‡ç¿»è¯‘ Study of an operating system: FreeRTOS\nFreeRTOS å³æ—¶æ ¸å¿ƒå®ç”¨æŒ‡å—\nFreeRTOS STM32F429 Driver API\n","date":"2025-12-01","externalUrl":null,"permalink":"/posts/%E6%88%90%E5%A4%A7%E8%B3%87%E5%B7%A5wiki-freertos/","section":"Posts","summary":"","title":"æˆå¤§è³‡å·¥WIKI-FreeRTOS","type":"posts"},{"content":" 1.æœåŠ¡å™¨é…ç½® # è§„æ ¼: é€šç”¨å…¥é—¨ t6.small.1ï¼Œ1U1Gï¼Œ10GSSD\n2.å®‰è£…å®å¡” # å¤åˆ¶ecsçš„æœåŠ¡å™¨ip ä½¿ç”¨sshç™»å½•rootè´¦æˆ·ï¼Œè¾“å…¥è´­ä¹°æœåŠ¡å™¨æ—¶è®¾ç½®çš„ç™»å½•å‡­è¯\ncerry@ROG-Flow-X13 ~\u0026gt; ssh root@101.44.24.107 å‚è€ƒåä¸ºäº‘æ–‡æ¡£ æ‰‹å·¥éƒ¨ç½²å®å¡”é¢æ¿\nyum install -y wget \u0026amp;\u0026amp; wget -O install.sh https://download.bt.cn/install/install_6.0.sh \u0026amp;\u0026amp; sh install.sh å½“å‡ºç°ä»¥ä¸‹æç¤ºä¿¡æ¯æ—¶ï¼Œè¾“å…¥â€œyâ€ï¼š\n... Do you want to install Bt-Panel to the /www directory now?(y/n): y ... ç›´åˆ°å®‰è£…æˆåŠŸæ˜¾ç¤ºè´¦å·åŠå¯†ç  å‰å¾€å®‰å…¨ç»„é…ç½® 14484ç«¯å£å¼€æ”¾\n3.é…ç½®å®å¡” # é¢æ¿ä¸­å®‰è£…docker, æœç´¢New-APIå¹¶å®‰è£… å®‰è£…æˆåŠŸåä½¿ç”¨httpæ‰“å¼€ http://101.44.24.107:3000/ é…ç½®åˆå§‹åŒ–\n4.å¼€å§‹ä½¿ç”¨ï¼ï¼ï¼ # ","date":"2025-09-28","externalUrl":null,"permalink":"/posts/%E8%AE%B0%E5%8D%8E%E4%B8%BA%E4%BA%91ecs%E9%85%8D%E7%BD%AE%E5%92%8C%E5%AE%89%E8%A3%85%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF/","section":"Posts","summary":"","title":"è®°ï¼šåä¸ºäº‘ECSé…ç½®å’Œå®‰è£…å®å¡”é¢æ¿","type":"posts"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/category/","section":"Category","summary":"","title":"Category","type":"category"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/category/linux/","section":"Category","summary":"","title":"Linux","type":"category"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/tags/yolov8/","section":"Tags","summary":"","title":"YoloV8","type":"tags"},{"content":" 1. Downloading 25000 images # cerry@ASUS-C:~/p/l/yoloâ–ºpython ./prepare_yolov8_dataset_3.py (yolov5) 7.107s 00:16 --- Starting Data Preparation for 42 Food Classes --- Target classes: [\u0026#39;Apple\u0026#39;, \u0026#39;Orange\u0026#39;, \u0026#39;Strawberry\u0026#39;, \u0026#39;Grape\u0026#39;, \u0026#39;Banana\u0026#39;, \u0026#39;Pear\u0026#39;, \u0026#39;Peach\u0026#39;, \u0026#39;Lemon\u0026#39;, \u0026#39;Watermelon\u0026#39;, \u0026#39;Cantaloupe\u0026#39;, \u0026#39;Pomegranate\u0026#39;, \u0026#39;Tomato\u0026#39;, \u0026#39;Cucumber\u0026#39;, \u0026#39;Carrot\u0026#39;, \u0026#39;Broccoli\u0026#39;, \u0026#39;Bell pepper\u0026#39;, \u0026#39;Mushroom\u0026#39;, \u0026#39;Potato\u0026#39;, \u0026#39;Cabbage\u0026#39;, \u0026#39;Pumpkin\u0026#39;, \u0026#39;Radish\u0026#39;, \u0026#39;Garden Asparagus\u0026#39;, \u0026#39;Zucchini\u0026#39;, \u0026#39;Winter melon\u0026#39;, \u0026#39;Chicken\u0026#39;, \u0026#39;Shrimp\u0026#39;, \u0026#39;Crab\u0026#39;, \u0026#39;Fish\u0026#39;, \u0026#39;Egg (Food)\u0026#39;, \u0026#39;Seafood\u0026#39;, \u0026#39;Milk\u0026#39;, \u0026#39;Cheese\u0026#39;, \u0026#39;Dairy Product\u0026#39;, \u0026#39;Bread\u0026#39;, \u0026#39;Baked goods\u0026#39;, \u0026#39;Pasta\u0026#39;, \u0026#39;Cookie\u0026#39;, \u0026#39;Pastry\u0026#39;, \u0026#39;Coffee\u0026#39;, \u0026#39;Tea\u0026#39;, \u0026#39;Juice\u0026#39;, \u0026#39;Drink\u0026#39;] Samples per class: 150-250 Initial download pool size: 20000 -------------------------------------------------- Step 1/3: Loading (or downloading) an initial dataset pool. Dataset \u0026#39;open-images-v7-selected-42-food-classes\u0026#39; already exists, loading it from local FiftyOne database. Initial dataset pool loaded with 11243 samples. -------------------------------------------------- --- DEBUG INFO: Dataset Schema --- Dataset fields: id: fiftyone.core.fields.ObjectIdField filepath: fiftyone.core.fields.StringField tags: fiftyone.core.fields.ListField(fiftyone.core.fields.StringField) metadata: fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.metadata.ImageMetadata) created_at: fiftyone.core.fields.DateTimeField last_modified_at: fiftyone.core.fields.DateTimeField ground_truth: fiftyone.core.fields.EmbeddedDocumentField(fiftyone.core.labels.Detections) Dataset first sample details (if available): \u0026lt;Sample: { \u0026#39;id\u0026#39;: \u0026#39;68bc5b84edc3e8838faf3234\u0026#39;, \u0026#39;media_type\u0026#39;: \u0026#39;image\u0026#39;, \u0026#39;filepath\u0026#39;: \u0026#39;/home/cerry/fiftyone/open-images-v7/train/data/015af843d0b60389.jpg\u0026#39;, \u0026#39;tags\u0026#39;: [\u0026#39;train\u0026#39;], \u0026#39;metadata\u0026#39;: None, \u0026#39;created_at\u0026#39;: datetime.datetime(2025, 9, 6, 16, 4, 20, 301000), \u0026#39;last_modified_at\u0026#39;: datetime.datetime(2025, 9, 6, 16, 4, 20, 301000), \u0026#39;ground_truth\u0026#39;: \u0026lt;Detections: { \u0026#39;detections\u0026#39;: [ \u0026lt;Detection: { \u0026#39;id\u0026#39;: \u0026#39;68bc5b84edc3e8838faf3233\u0026#39;, \u0026#39;attributes\u0026#39;: {}, \u0026#39;tags\u0026#39;: [], \u0026#39;label\u0026#39;: \u0026#39;Shrimp\u0026#39;, \u0026#39;bounding_box\u0026#39;: [0.1025, 0.32389, 0.8687499999999999, 0.46270100000000003], \u0026#39;mask\u0026#39;: None, \u0026#39;mask_path\u0026#39;: None, \u0026#39;confidence\u0026#39;: None, \u0026#39;index\u0026#39;: None, \u0026#39;IsOccluded\u0026#39;: False, \u0026#39;IsTruncated\u0026#39;: False, \u0026#39;IsGroupOf\u0026#39;: False, \u0026#39;IsDepiction\u0026#39;: False, \u0026#39;IsInside\u0026#39;: False, }\u0026gt;, ], }\u0026gt;, }\u0026gt; \u0026#39;ground_truth\u0026#39; field type on first sample: \u0026lt;class \u0026#39;fiftyone.core.labels.Detections\u0026#39;\u0026gt; Number of detections on first sample: 1 First detection label: Shrimp ---------------------------------- Step 2/3: Filtering samples per class to meet target counts. Processing class: \u0026#39;Apple\u0026#39;... Processing class: \u0026#39;Orange\u0026#39;... Processing class: \u0026#39;Strawberry\u0026#39;... Processing class: \u0026#39;Grape\u0026#39;... Processing class: \u0026#39;Banana\u0026#39;... Processing class: \u0026#39;Pear\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Pear\u0026#39;. Found 44, need 150. Processing class: \u0026#39;Peach\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Peach\u0026#39;. Found 36, need 150. Processing class: \u0026#39;Lemon\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Lemon\u0026#39;. Found 106, need 150. Processing class: \u0026#39;Watermelon\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Watermelon\u0026#39;. Found 98, need 150. Processing class: \u0026#39;Cantaloupe\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Cantaloupe\u0026#39;. Found 11, need 150. Processing class: \u0026#39;Pomegranate\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Pomegranate\u0026#39;. Found 46, need 150. Processing class: \u0026#39;Tomato\u0026#39;... Processing class: \u0026#39;Cucumber\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Cucumber\u0026#39;. Found 94, need 150. Processing class: \u0026#39;Carrot\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Carrot\u0026#39;. Found 138, need 150. Processing class: \u0026#39;Broccoli\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Broccoli\u0026#39;. Found 94, need 150. Processing class: \u0026#39;Bell pepper\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Bell pepper\u0026#39;. Found 79, need 150. Processing class: \u0026#39;Mushroom\u0026#39;... Processing class: \u0026#39;Potato\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Potato\u0026#39;. Found 88, need 150. Processing class: \u0026#39;Cabbage\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Cabbage\u0026#39;. Found 81, need 150. Processing class: \u0026#39;Pumpkin\u0026#39;... Processing class: \u0026#39;Radish\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Radish\u0026#39;. Found 48, need 150. Processing class: \u0026#39;Garden Asparagus\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Garden Asparagus\u0026#39;. Found 74, need 150. Processing class: \u0026#39;Zucchini\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Zucchini\u0026#39;. Found 15, need 150. Processing class: \u0026#39;Winter melon\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Winter melon\u0026#39;. Found 14, need 150. Processing class: \u0026#39;Chicken\u0026#39;... Processing class: \u0026#39;Shrimp\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Shrimp\u0026#39;. Found 121, need 150. Processing class: \u0026#39;Crab\u0026#39;... Processing class: \u0026#39;Fish\u0026#39;... Processing class: \u0026#39;Egg (Food)\u0026#39;... Processing class: \u0026#39;Seafood\u0026#39;... Processing class: \u0026#39;Milk\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Milk\u0026#39;. Found 35, need 150. Processing class: \u0026#39;Cheese\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Cheese\u0026#39;. Found 139, need 150. Processing class: \u0026#39;Dairy Product\u0026#39;... Processing class: \u0026#39;Bread\u0026#39;... Processing class: \u0026#39;Baked goods\u0026#39;... Processing class: \u0026#39;Pasta\u0026#39;... Processing class: \u0026#39;Cookie\u0026#39;... Processing class: \u0026#39;Pastry\u0026#39;... Processing class: \u0026#39;Coffee\u0026#39;... Processing class: \u0026#39;Tea\u0026#39;... WARNING: Not enough unique samples for class \u0026#39;Tea\u0026#39;. Found 140, need 150. Processing class: \u0026#39;Juice\u0026#39;... Processing class: \u0026#39;Drink\u0026#39;... Finished filtering. Total unique samples selected for final dataset: 6669. 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 6669/6669 [15.5s elapsed, 0s remaining, 545.5 samples/s] Final filtered dataset \u0026#39;open-images-v7-selected-42-food-classes-filtered\u0026#39; created with 6669 samples. -------------------------------------------------- Launching FiftyOne App to visualize the filtered dataset (optional, close browser tab to continue script)... App launched. Point your web browser to http://localhost:5151 Step 3/3: Exporting dataset to YOLOv8 format in \u0026#39;yolov8_42_food_classes_data\u0026#39;... Directory \u0026#39;yolov8_42_food_classes_data\u0026#39; already exists; export will be merged with existing files 100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 6669/6669 [25.1s elapsed, 0s remaining, 323.9 samples/s] Export complete! Data for YOLOv8 training is in \u0026#39;yolov8_42_food_classes_data\u0026#39;. You will find \u0026#39;images/train/\u0026#39;, \u0026#39;labels/train/\u0026#39;, \u0026#39;classes.txt\u0026#39;, and \u0026#39;dataset.yaml\u0026#39; inside \u0026#39;yolov8_42_food_classes_data\u0026#39;. -------------------------------------------------- 2. view # ","date":"2025-09-25","externalUrl":null,"permalink":"/posts/yolov82%E6%95%B0%E6%8D%AE%E9%9B%86%E9%85%8D%E7%BD%AE%E5%8F%8A%E8%AE%AD%E7%BB%83/","section":"Posts","summary":"","title":"YoloV8(2)ï¼šæ•°æ®é›†é…ç½®åŠè®­ç»ƒ","type":"posts"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/tags/const/","section":"Tags","summary":"","title":"Const","type":"tags"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/tags/cpp/","section":"Tags","summary":"","title":"Cpp","type":"tags"},{"content":"","date":"2025-09-25","externalUrl":null,"permalink":"/category/cpp/","section":"Category","summary":"","title":"CPP","type":"category"},{"content":" ç¬¬ä¸€ç«  å‰è¨€ # ç¬¬äºŒç«  åŸºç¡€è¯­æ³• # 1ã€è¾“å…¥è¾“å‡ºæµ # // ä¸€äº›åŸºæœ¬ç”¨æ³• cout \u0026lt;\u0026lt; \u0026#34; i = \u0026#34; \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34; (decimal )\\n\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34; i = \u0026#34; \u0026lt;\u0026lt; oct \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34; (octal )\\n\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34; i = \u0026#34; \u0026lt;\u0026lt; hex \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34; (hexadecimal)\\n\u0026#34;; cout \u0026lt;\u0026lt; \u0026#34; i = \u0026#34; \u0026lt;\u0026lt; dec \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34; (decimal )\\n\u0026#34;; // æ“çºµç¬¦çš„ä½œç”¨åŸŸç›´åˆ°æ“çºµç¬¦ä¸‹ä¸€æ¬¡æ”¹å˜ä¸ºæ­¢ã€‚setwé™¤å¤–ã€ // setw ç”¨æ¥è®¾ç½®åŸŸå®½ï¼Œsetwè®¾ç½®çš„åŸŸå®½å€¼æœ‰å‰©ä½™ï¼Œsetfillç”¨æ¥è®¾ç½®å‰©ä½™ä½çš„å¡«å……å­—ç¬¦ cout\u0026lt;\u0026lt;setfill(\u0026#39;*\u0026#39;)\u0026lt;\u0026lt;setprecision(4); // ä½¿è¾“å‡º é  è¾“å‡ºåŸŸ çš„å·¦è¾¹ æˆ–è€… å³è¾¹ cout\u0026lt;\u0026lt;left\u0026lt;\u0026lt;setw(10)\u0026lt;\u0026lt;\u0026#34;karen\u0026#34;\u0026lt;\u0026lt;right\u0026lt;\u0026lt;setw(6)\u0026lt;\u0026lt;a\u0026lt;\u0026lt;\u0026#39;\\n\u0026#39;; // æ“çºµç¬¦ setprecision å’Œfixedè”ç”¨ï¼Œè¡¨ç¤ºè®¾ç½®å°æ•°ç‚¹ä¹‹åçš„ä½æ•°ã€‚ cout\u0026lt;\u0026lt;fixed cout\u0026lt;\u0026lt;setfill(\u0026#39;*\u0026#39;)\u0026lt;\u0026lt;setprecision(2); //ç¬¬ä¸‰ç§å†™æ³• cout\u0026lt;\u0026lt;fixed\u0026lt;\u0026lt;setprecision(2); 2ã€C++å¢å¼ºç±»å‹ # é€»è¾‘ç±»å‹ï¼šbool æšä¸¾ç±»å‹ï¼šenum å¼•ç”¨ç±»å‹ï¼š\u0026amp; ç»“æ„ä½“ï¼šstruct\n3ã€å¼•ç”¨ # å¼•ç”¨æ˜¯ä¸€ä¸ªå˜é‡çš„åˆ«åã€‚ å¼•ç”¨å’Œå…¶å¼•ç”¨çš„å˜é‡å ç”¨åŒä¸€æ®µå†…å­˜ç©ºé—´ã€‚ å¼•ç”¨å£°æ˜æ—¶å¿…é¡»è¢«åˆå§‹åŒ–ï¼Œä»¥åä¸èƒ½è¢«æ›´æ”¹ã€‚ å¼•ç”¨çš„å€¼æ”¹å˜å³ç­‰ä»·äºè¢«å¼•ç”¨çš„å˜é‡çš„å€¼å‘ç”Ÿçš„æ”¹å˜ã€‚ 4ã€new/delete # // è¿ç®—ç¬¦newä½¿ç”¨è¯­æ³•æ ¼å¼åŒ–: newÂ datatype int* int_ptr; int_ptr=new int; // è¿ç®—ç¬¦ new[ ] ä½¿ç”¨è¯­æ³•æ ¼å¼ï¼š newÂ datatype[num] int* int_ptr; int_ptr=new int[50]; // è¿ç®—ç¬¦ delete é‡Šæ”¾ç”±newåˆ†é…çš„ç©ºé—´è¯­æ³•æ ¼å¼ï¼š delete pointername; delete int_ptr; // è¿ç®—ç¬¦delete[ ] é‡Šæ”¾ç”±new[ ]åˆ†é…çš„ç©ºé—´è¯­æ³•æ ¼å¼ï¼š delete[ ] pointername; delete[ ] int_ptr; deleteåªèƒ½é‡Šæ”¾newåŠ¨æ€ç”³è¯·çš„ç©ºé—´ï¼ˆmallocç­‰çš„ä¸è¡Œï¼‰ æ™®é€šå˜é‡ç³»ç»Ÿåœ¨ç¨‹åºç»“æŸï¼ˆæˆ–å‡½æ•°è°ƒç”¨ç»“æŸåï¼‰ä¼šè‡ªåŠ¨å›æ”¶å ç”¨çš„ç©ºé—´ï¼Œnewç”³è¯·çš„ç©ºé—´åœ¨å †ä¸Šï¼Œç³»ç»Ÿä¸ä¼šå›æ”¶ç›¸åº”ç©ºé—´ deleteä¹‹åï¼ŒæŒ‡é’ˆæœ¬èº«å’ŒæŒ‡é’ˆæŒ‡å‘çš„ç©ºé—´çš„æ•°æ®ä¸ä¼šæ¸…ç©ºï¼Œé™¤éå†æ¬¡å†™å…¥æ•°æ®ã€‚newçš„é‚£æ®µç©ºé—´ç›¸å½“äºè¢«åŠ ä¸Šä¸èƒ½è¢«å ç”¨çš„æ ‡è®°ï¼Œdeleteç›¸å½“äºæ¸…é™¤äº†æ ‡è®°ï¼Œé‚£å—åœ°å€è¿˜å¯ä»¥ç”¨æŒ‡é’ˆè®¿é—®ï¼Œä½†æœ‰é£é™©äº†ï¼Œå› ä¸ºéšæ—¶å°±æœ‰è¢«å ç”¨çš„å¯èƒ½ 5ã€autoå…³é”®å­— ï¼ˆC++11æ–°å¢ï¼‰ # 6ã€ç±»å‹è½¬æ¢ # static_cast\nconst_cast\ndynamic_cast\nreinterpret_cast\nstatic_cast : ç”¨äºä¸€ç§ç±»å‹åˆ°å¦ä¸€ç§ç±»å‹æˆ–å…·æœ‰ç»§æ‰¿å…³ç³»çš„åˆç†çš„è½¬æ¢ è¯­æ³•æ ¼å¼: static_cast\u0026lt;new_type\u0026gt; (expression)\nconst_cast: ä¸»è¦ä½œç”¨æ˜¯ç§»é™¤ç±»å‹çš„constå±æ€§ï¼Œå¸¸ç”¨äºä¿®æ”¹æŒ‡é’ˆç±»å‹ã€‚ è¯­æ³•: const_cast\u0026lt;new_type\u0026gt; (expression)\nreinterpret_cast : è¯¥å‡½æ•°å°†ä¸€ä¸ªç±»å‹çš„æŒ‡é’ˆè½¬æ¢ä¸ºå¦ä¸€ä¸ªç±»å‹çš„æŒ‡é’ˆ å°†æŒ‡é’ˆå€¼è½¬æ¢ä¸ºä¸€ä¸ªæ•´å‹æ•°ï¼Œä½†ä¸èƒ½ç”¨äºéæŒ‡é’ˆç±»å‹çš„è½¬æ¢\ndynamic_cast:ä¸static_castç›¸å¯¹ï¼Œæ˜¯åŠ¨æ€è½¬æ¢ã€‚è¿™ç§è½¬æ¢æ˜¯åœ¨è¿è¡Œæ—¶è¿›è¡Œè½¬æ¢åˆ†æçš„ï¼Œå¹¶éåœ¨ç¼–è¯‘æ—¶è¿›è¡Œï¼ŒåŒºåˆ«äºå‰3ä¸ªç±»å‹çš„è½¬æ¢æ“ä½œã€‚ è¯¥å‡½æ•°åªèƒ½åœ¨æ´¾ç”Ÿç±»å¯¹è±¡çš„æŒ‡é’ˆä¹‹é—´æˆ–å¼•ç”¨ä¹‹é—´è¿›è¡Œç±»å‹è½¬æ¢è¿›è¡Œè½¬æ¢æ—¶ï¼Œä¼šæ ¹æ®å½“å‰è¿è¡Œæ—¶ç±»å‹ä¿¡æ¯ï¼Œåˆ¤æ–­ç±»å‹å¯¹è±¡ä¹‹é—´çš„è½¬æ¢æ˜¯å¦åˆæ³•ã€‚ è¯­æ³•æ ¼å¼: dynamic_cast\u0026lt;new_type\u0026gt; (expression)\n7ã€String # cstring # char cityname1[20],cityname2[20]; cout\u0026lt;\u0026lt;\u0026#34;è¯·è¾“å…¥ä¸€ä¸ªåŸå¸‚åå­—:\u0026#34;\u0026lt;\u0026lt;endl; cin\u0026gt;\u0026gt;cityname1; cout\u0026lt;\u0026lt;\u0026#34;ä½ çš„è¾“å…¥æ˜¯\u0026#34;\u0026lt;\u0026lt;cityname1\u0026lt;\u0026lt;endl; // ç›´æ¥cin ä»¥Tab ç©ºæ ¼å›è½¦ä¸ºåˆ†éš”ç¬¦ cin.getline(string_var1,Max_Characters+1); char question[20],answer[20];Â cin.getline(question,20); // ä½¿ç”¨getline ä»¥å›è½¦ä½œä¸ºåˆ†éš”ç¬¦ C-String-to-Number å‡½æ•° # å‡½æ•° atoi å’Œ atol æ˜¯æŠŠæ•°å­—å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´å‹å€¼ å‡½æ•° atof æŠŠæ•°å­—å­—ç¬¦ä¸²è½¬æ¢ä¸ºdoubleç±»å‹çš„å€¼ æ ‡å‡†string # #include \u0026lt;string\u0026gt; using namespace std; string s1; string s2=â€œChinaâ€; string s3=s2; string s4(10,â€™xâ€™); 1.å­—ç¬¦ä¸²æ¯”è¾ƒ æ ¹æ®â€œå½“å‰å­—ç¬¦ç‰¹æ€§â€å°†å­—ç¬¦æŒ‰å­—å…¸é¡ºåºè¿›è¡Œé€ä¸€å¾— æ¯”è¾ƒã€‚å­—å…¸æ’åºé å‰çš„å­—ç¬¦å°ï¼Œ æ¯”è¾ƒçš„é¡ºåºæ˜¯ä»å‰å‘åæ¯”è¾ƒï¼Œé‡åˆ°ä¸ç›¸ç­‰çš„å­—ç¬¦å°±æŒ‰è¿™ä¸ªä½ç½®ä¸Šçš„ä¸¤ä¸ªå­—ç¬¦çš„æ¯”è¾ƒç»“æœç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å° 2.å­—ç¬¦ä¸²é•¿åº¦ size()å’Œlength()ï¼šè¿”å›stringå¯¹è±¡çš„å­—ç¬¦ä¸ªæ•°ï¼Œä»–ä»¬æ‰§è¡Œæ•ˆæœç›¸åŒã€‚ 3.è¿æ¥ s3 = s1 + s2; 4.æ’å…¥ string str=\u0026#34;to be question\u0026#34;; string str2=\u0026#34;the \u0026#34;; string str3=\u0026#34;or not to be\u0026#34;; str.insert(6,str2);Â // to be (the )question str.insert(6,str3,3,4);Â // to be (not )the question str.insert(10,\u0026#34;that is cool\u0026#34;,8);Â // to be not (that is )the question str.insert(10,\u0026#34;to be \u0026#34;);Â // to be not (to be )that is the question str.insert(15,1,\u0026#39;:\u0026#39;);Â // to be not to be(:) that is the question str.insert (str.end(),3,\u0026#39;.\u0026#39;);Â // to be, not to be: that is the question(...) 5.æå–å­ä¸² string s1 = \u0026#34;Ray Dennis Steckler\u0026#34;; string s2,s3; s2=s1.substr (4,6); // Dennis s3=s1.substr(0,3) // Ray 6.æŸ¥æ‰¾ f=s1.find(s2); ç¬¬ä¸‰ç«  å‡½æ•°å¢å¼º # 1.ä¼ å‚ # å€¼ä¼ å‚ åœ°å€ä¼ å‚ å¼•ç”¨ä¼ å‚ 2.å¼•ç”¨ä¼ å‚ # ä¼ é€’å¼•ç”¨å‚æ•°æ—¶ï¼Œåœ¨è°ƒç”¨å‡½æ•°ä¸­å¼•ç”¨åƒå˜é‡é‚£æ ·ç›´æ¥ä½¿ç”¨ã€‚\nvoid fun (const int \u0026amp;cref) { cout\u0026lt;\u0026lt;cref/15; //NO PROBLEM cref++; //ERROR! Cannot modify a const reference. } å¼•ç”¨å‚æ•°å¯ä»¥å’Œ #const è¿ç”¨é¿å…åœ¨è°ƒç”¨å‡½æ•°ä¸­æ— æ„æŠŠå‚æ•°å€¼æ”¹å˜ã€‚ ä½¿ç”¨æŒ‡é’ˆä½œä¸ºå‡½æ•°å‚æ•°æ—¶ï¼Œå‡½æ•°è°ƒç”¨æ—¶æˆ‘ä»¬éœ€è¦å‰é¢åŠ ä¸Š\u0026amp;å–åœ°å€è¿ç®—ç¬¦ã€‚ 3.å¯¹æ¯” # Swap(\u0026amp;x,\u0026amp;y); void Swap(int* a, int* b) { int t; t=*a; *a=*b; *b=t; } Swap(x,y); void Swap(int\u0026amp; a, int\u0026amp; b) { int t; t=a; a=b; b=t; } ==å¼•ç”¨ä½œä¸ºå‡½æ•°å‚æ•°æ—¶æ¯”è¾ƒæŒ‡é’ˆçš„ä¼˜ç‚¹ï¼š== ==ä»£ç æ¸…æ™°ï¼Œä¸å¿…æ—¶åˆ»è®°ä½ * çš„ä½¿ç”¨ï¼›== ==ä¸å¿…è®°ä½ä¼ é€’å®å‚çš„åœ°å€ï¼›== ==ä½¿ç”¨å¼•ç”¨æ—¶ï¼Œä¸å¿…æ–°å¼€è¾Ÿå†…å­˜ç©ºé—´ï¼›== ==å½“ä¼ é€’çš„å‚æ•°æ˜¯æŸä¸ªå¯¹è±¡çš„å¼•ç”¨æ—¶ï¼Œå¼•ç”¨çš„æ•ˆç‡ä¼šæ˜¯å¾ˆé‡è¦çš„æ–¹é¢ã€‚==\n4.å¸¦å‚å® # 5.å†…è”å‡½æ•° # 6.å¸¦ç¼ºçœå‚æ•°å€¼çš„å‡½æ•° # C++å…è®¸è‡ªå®šä¹‰å‡½æ•°ä¸­çš„å½¢å‚å€¼æœ‰åˆå§‹é»˜è®¤å€¼ 7.é‡è½½å‡½æ•° # 8.å‡½æ•°æ¨¡æ¿ # template \u0026lt;typename T\u0026gt; T Fun(T n) { // } template \u0026lt;typename T\u0026gt; T Fun(T n) { // } ç¬¬å››ç«  ç±»å’Œå¯¹è±¡ # 1.æ„é€ å‡½æ•° # å¦‚æœç¨‹åºä¸­æœªå£°æ˜ï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨äº§ç”Ÿå‡ºä¸€ä¸ªé»˜è®¤å½¢å¼çš„æ„é€ å‡½æ•° å…è®¸ä¸ºå†…è”å‡½æ•°ã€é‡è½½å‡½æ•°ã€å¸¦é»˜è®¤å½¢å‚å€¼çš„å‡½æ•° ç³»ç»Ÿæä¾›ç¼ºçœçš„æ„é€ å‡½æ•°é»˜è®¤ä¸ºpublicçš„ï¼Œå­˜åœ¨ä¸‹åˆ—ä¸¤ç§æƒ…å†µï¼š åªæœ‰ç±»ä¸­æ²¡æœ‰ä»»ä½•æ„é€ å‡½æ•°çš„å®šä¹‰æˆ–å£°æ˜ï¼Œç³»ç»Ÿæ‰ä¼šæä¾›ç¼ºçœæ„é€ å‡½æ•°ï¼Œå¦‚æœç³»ç»Ÿæä¾›äº†æŸç§æœ‰å‚æ„é€ å‡½æ•°ï¼Œä½†ä»éœ€è¦ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°å³ç¼ºçœæ„é€ å‡½æ•°ï¼Œæ­¤æ—¶éœ€è¦ç¨‹åºå‘˜åœ¨ç±»ä¸­è‡ªå·±å®šä¹‰ç¼ºçœæ„é€ å‡½æ•°ã€‚ å¦‚æœç±»ä¸­å­˜åœ¨æ„é€ å‡½æ•°ï¼Œä½†æ„é€ å‡½æ•°ä¸ºprivateï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¸ä¼šæä¾›ç¼ºçœæ„é€ å‡½æ•°ã€‚ 2.æ‹·è´æ„é€ å‡½æ•° # ==æ‹·è´æ„é€ å‡½æ•°ï¼Œé¡¾åæ€ä¹‰ï¼Œå³ç”¨å·²ç»å­˜åœ¨çš„ç±»çš„å¯¹è±¡å»æ„é€ ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼Œä¸¤ä¸ªå¯¹è±¡çš„æ•°æ®æˆå‘˜å€¼æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚==\næ‹·è´æ„é€ å‡½æ•°çš„å‡½æ•°åŸå‹æ ¼å¼ä¸ºï¼š\nBankAccount(BankAccount\u0026amp;); BankAccount(const BankAccount\u0026amp;); BankAccount account1(100,0.3); BankAccount account2(account1); å¦‚æœç±»ä¸­æ²¡æœ‰å®šä¹‰æ‹·è´æ„é€ å‡½æ•°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æä¾›ä¸€ä¸ªæ‹·è´æ„é€ å‡½æ•°ã€‚ è¿™ä¸ªæ„é€ å‡½æ•°æ‰§è¡Œçš„åŠŸèƒ½æ˜¯ï¼šç”¨ä½œä¸ºåˆå§‹å€¼çš„å¯¹è±¡çš„æ¯ä¸ªæ•°æ®æˆå‘˜çš„å€¼ï¼Œåˆå§‹åŒ–å°†è¦å»ºç«‹çš„å¯¹è±¡çš„å¯¹åº”æ•°æ®æˆå‘˜ã€‚ æ‹·è´æ„é€ å‡½æ•°è¢«è°ƒç”¨çš„3ç§æƒ…å†µ\nç”¨å·²ç»å­˜åœ¨çš„å¯¹è±¡åˆå§‹åŒ–å¦ä¸€ä¸ªå¯¹è±¡æ—¶ï¼› å¯¹è±¡ä½œä¸ºå®å‚ä¼ é€’ç»™å½¢å‚æ—¶ï¼› å¯¹è±¡ä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶ã€‚ æ·±æ‹·è´æ„é€ å‡½æ•° å½“ç±»ä¸­åŒ…å«æŒ‡é’ˆç±»å‹çš„æ•°æ®æˆå‘˜æ—¶ï¼Œéœ€è¦ç¨‹åºå‘˜è‡ªè¡Œå®ç°ä¸€ä¸ªå®Œæ•´çš„æ‹·è´æ„é€ å‡½æ•°ï¼Œå¦åˆ™ä½¿ç”¨ç³»ç»Ÿæä¾›çš„æ‹·è´æ„é€ å‡½æ•°ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„é”™è¯¯ç»“æœã€‚\n3.è½¬æ¢æ„é€ å‡½æ•° # ==æ„é€ å‡½æ•°è¿˜æä¾›äº†ä¸€ç§è‡ªåŠ¨ç±»å‹è½¬æ¢çš„åŠŸèƒ½ï¼Œå³æŠŠä¸€ç§ç±»å‹è½¬æ¢ä¸ºè¯¥ç±»ç±»å‹ã€‚==\n4.ææ„å‡½æ•° # å®Œæˆå¯¹è±¡è¢«åˆ é™¤å‰çš„ä¸€äº›æ¸…ç†å·¥ä½œã€‚ åœ¨å¯¹è±¡çš„ç”Ÿå­˜æœŸç»“æŸçš„æ—¶åˆ»ç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨å®ƒï¼Œç„¶åå†é‡Šæ”¾æ­¤å¯¹è±¡æ‰€å±çš„ç©ºé—´ã€‚ å¦‚æœç¨‹åºä¸­æœªå£°æ˜ææ„å‡½æ•°ï¼Œç¼–è¯‘å™¨å°†è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªé»˜è®¤çš„ææ„å‡½æ•°ã€‚ æ ¼å¼ï¼š ï½ç±»å( )ï¼›\n==ææ„å‡½æ•°ä¸å…è®¸æœ‰å‚æ•°ï¼Œæ‰€ä»¥ä¸€ä¸ªç±»ä¸­åªèƒ½æœ‰å”¯ä¸€çš„ææ„å‡½æ•°ã€‚== ä¸€èˆ¬åœ°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æä¾›ææ„å‡½æ•°ï¼Œå¹¶åœ¨å¯¹è±¡ç”Ÿå­˜æœŸåˆ°å‰è‡ªåŠ¨è°ƒç”¨ææ„å‡½æ•°ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦æ¥å®šä¹‰è‡ªå·±çš„ææ„å‡½æ•°ã€‚ 5.constä¸ç±» # ç¬¬äº”ç«  æ´¾ç”Ÿä¸ç»§æ‰¿ # 1.æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•° # æ´¾ç”Ÿç±»å(å‚æ•°æ€»è¡¨): åŸºç±»å1(å‚æ•°è¡¨1)ï¼Œâ€¦ï¼ŒåŸºç±»åm (å‚æ•°è¡¨m), æˆå‘˜å¯¹è±¡å1(æˆå‘˜å¯¹è±¡å‚æ•°è¡¨1)ï¼Œâ€¦ï¼Œæˆå‘˜å¯¹è±¡ån(æˆå‘˜å¯¹è±¡å‚æ•°è¡¨n) { æ´¾ç”Ÿç±»æ–°å¢æˆå‘˜çš„åˆå§‹åŒ–ï¼› } æ´¾ç”Ÿç±»ä¸­éœ€è¦å£°æ˜è‡ªå·±çš„æ„é€ å‡½æ•° æ„é€ å‡½æ•°ä¸èƒ½è¢«ç»§æ‰¿ æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°éœ€è¦æ³¨æ„3éƒ¨åˆ†ï¼š å¯¹ç»§æ‰¿æ¥çš„åŸºç±»æˆå‘˜çš„åˆå§‹åŒ– å¯¹æœ¬ç±»ä¸­æ–°å¢æˆå‘˜è¿›è¡Œåˆå§‹åŒ– å†…åµŒæˆå‘˜å¯¹è±¡çš„åˆå§‹åŒ–ï¼ˆå³ç±»çš„æ•°æ®æˆå‘˜æ˜¯å…¶ä»–ç±»çš„å¯¹è±¡ï¼‰ åœ¨æ´¾ç”Ÿç±»å¯¹è±¡çš„æˆå‘˜ä¸­ï¼Œä»åŸºç±»ç»§æ‰¿æ¥çš„æˆå‘˜å®ƒä»¬çš„åˆå§‹åŒ–ç”±æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°éšå«è°ƒç”¨åŸºç±»æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼› å†…åµŒæˆå‘˜å¯¹è±¡åˆ™éšå«è°ƒç”¨æˆå‘˜æ‰€å±ç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼› æ´¾ç”Ÿç±»æ–°å¢çš„æ•°æ®æˆå‘˜ç”±æ´¾ç”Ÿç±»åœ¨è‡ªå·±å®šä¹‰çš„æ„é€ å‡½æ•°ä¸­è¿›è¡Œåˆå§‹åŒ–ã€‚ 2.æ´¾ç”Ÿç±»æ„é€ å‡½æ•°è°ƒç”¨è§„åˆ™ # å•ç»§æ‰¿çš„æ„é€ å‡½æ•°è°ƒç”¨é¡ºåº\u000bå•ç»§æ‰¿æ—¶ï¼Œæ´¾ç”Ÿç±»æ„é€ å‡½æ•°è°ƒç”¨çš„ä¸€èˆ¬æ¬¡åºå¦‚ä¸‹ï¼š\nè°ƒç”¨åŸºç±»æ„é€ å‡½æ•°ã€‚ è°ƒç”¨å†…åµŒæˆå‘˜å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œè°ƒç”¨é¡ºåºå–å†³äºå®ƒä»¬åœ¨ç±»ä¸­å®šä¹‰çš„é¡ºåºã€‚ æ´¾ç”Ÿç±»è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚ 3.è™šåŸºç±» # ç”¨äºæœ‰å…±åŒåŸºç±»çš„åœºåˆ ä»¥virtualä¿®é¥°è¯´æ˜åŸºç±» ä¾‹ï¼šclass B1:virtual public B\nä½œç”¨ # ä¸»è¦ç”¨æ¥è§£å†³å¤šç»§æ‰¿æ—¶å¯èƒ½å‘ç”Ÿçš„å¯¹åŒä¸€åŸºç±»ç»§æ‰¿å¤šæ¬¡è€Œäº§ç”Ÿçš„äºŒä¹‰æ€§é—®é¢˜. ä¸ºæœ€è¿œçš„æ´¾ç”Ÿç±»æä¾›æƒŸä¸€çš„åŸºç±»æˆå‘˜ï¼Œè€Œä¸é‡å¤äº§ç”Ÿå¤šæ¬¡æ‹·è´\næ³¨æ„ # åœ¨ç¬¬ä¸€çº§ç»§æ‰¿æ—¶å°±è¦å°†å…±åŒåŸºç±»è®¾è®¡ä¸ºè™šåŸºç±»\nè™šåŸºç±»çš„è°ƒç”¨ # å»ºç«‹å¯¹è±¡æ—¶æ‰€æŒ‡å®šçš„ç±»ç§°ä¸ºæœ€ï¼ˆè¿œï¼‰æ´¾ç”Ÿç±»ã€‚ è™šåŸºç±»çš„æˆå‘˜æ˜¯ç”±æœ€è¿œæ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°é€šè¿‡è°ƒç”¨è™šåŸºç±»çš„æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–çš„ã€‚ åœ¨æ•´ä¸ªç»§æ‰¿ç»“æ„ä¸­ï¼Œç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è™šåŸºç±»çš„æ‰€æœ‰æ´¾ç”Ÿç±»ï¼Œéƒ½å¿…é¡»åœ¨æ„é€ å‡½æ•°çš„æˆå‘˜åˆå§‹åŒ–è¡¨ä¸­ç»™å‡ºå¯¹è™šåŸºç±»çš„æ„é€ å‡½æ•°çš„è°ƒç”¨ã€‚å¦‚æœæœªåˆ—å‡ºï¼Œåˆ™è¡¨ç¤ºè°ƒç”¨è¯¥è™šåŸºç±»çš„é»˜è®¤æ„é€ å‡½æ•°ã€‚ åœ¨å»ºç«‹å¯¹è±¡æ—¶ï¼Œåªæœ‰æœ€è¿œæ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°è°ƒç”¨è™šåŸºç±»çš„æ„é€ å‡½æ•°ï¼Œè¯¥æ´¾ç”Ÿç±»çš„å…¶ä»–åŸºç±»å¯¹è™šåŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨è¢«å¿½ç•¥ã€‚ä»è€Œä¿è¯å¯¹è™šåŸºç±»å­å¯¹è±¡åªåˆå§‹åŒ–ä¸€æ¬¡ã€‚ åœ¨ä¸€ä¸ªæˆå‘˜åˆå§‹åŒ–åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶å‡ºç°å¯¹è™šåŸºç±»å’Œéè™šåŸºç±»æ„é€ å‡½æ•°çš„è°ƒç”¨æ—¶ï¼Œè™šåŸºç±»çš„æ„é€ å‡½æ•°å…ˆäºéè™šåŸºç±»çš„æ„é€ å‡½æ•°æ‰§è¡Œã€‚ è™šåŸºç±»å¹¶ä¸æ˜¯åœ¨å£°æ˜åŸºç±»æ—¶å£°æ˜çš„ï¼Œè€Œæ˜¯åœ¨å£°æ˜æ´¾ç”Ÿç±»æ—¶ï¼ŒæŒ‡å®šç»§æ‰¿æ–¹å¼æ—¶å£°æ˜çš„ã€‚å› ä¸ºä¸€ä¸ªåŸºç±»å¯ä»¥åœ¨ç”Ÿæˆä¸€ä¸ªæ´¾ç”Ÿç±»ä½œä¸ºè™šåŸºç±»ï¼Œè€Œåœ¨ç”Ÿæˆå¦ä¸€ä¸ªæ´¾ç”Ÿç±»æ—¶ä¸ä½œä¸ºè™šåŸºç±»ã€‚ 4. # ç¬¬å…­ç«  å¤šæ€ä¸è™šå‡½æ•° # 1.å¤šæ€æ€§ # å¤šæ€æ€§æ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡çš„é‡è¦ç‰¹å¾ä¹‹ä¸€ã€‚ å¤šæ€æ€§æ˜¯æŒ‡å‘å‡ºåŒæ ·çš„æ¶ˆæ¯è¢«ä¸åŒç±»å‹çš„å¯¹è±¡æ¥æ”¶æ—¶æœ‰å¯èƒ½å¯¼è‡´å®Œå…¨ä¸åŒçš„è¡Œä¸ºã€‚ å¤šæ€çš„å®ç°ï¼š å‡½æ•°é‡è½½ -\u0026gt;é™æ€è”ç¼– è¿ç®—ç¬¦é‡è½½ -\u0026gt;é™æ€è”ç¼– è™šå‡½æ•° -\u0026gt;åŠ¨æ€è”ç¼– 2.é™æ€è¿ç¼–ä¸åŠ¨æ€è”ç¼– # è”ç¼–ï¼šç¨‹åºè‡ªèº«å½¼æ­¤å…³è”çš„è¿‡ç¨‹ï¼Œç¡®å®šç¨‹åºä¸­çš„æ“ä½œè°ƒç”¨ä¸æ‰§è¡Œè¯¥æ“ä½œçš„ä»£ç é—´çš„å…³ç³»ã€‚ é™æ€è”ç¼–ï¼šè”ç¼–è¿‡ç¨‹å‡ºç°åœ¨ç¼–è¯‘é˜¶æ®µï¼Œç”¨å¯¹è±¡åæˆ–è€…ç±»åæ¥é™å®šè¦è°ƒç”¨çš„å‡½æ•°ã€‚ åŠ¨æ€è”ç¼–ï¼ˆè¿Ÿåè”ç¼–ã€æ»åè”ç¼–ï¼‰ï¼šç»‘å®šè¿‡ç¨‹å·¥ä½œåœ¨ç¨‹åºè¿è¡Œæ—¶æ‰§è¡Œï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶æ‰ç¡®å®šå°†è¦è°ƒç”¨çš„å‡½æ•°ã€‚ 3.åŠ¨æ€è”ç¼– # åœ¨ç¼–è¯‘ã€é“¾æ¥è¿‡ç¨‹ä¸­æ— æ³•è§£å†³çš„è”ç¼–é—®é¢˜ï¼Œè¦ç­‰åˆ°ç¨‹åºå¼€å§‹è¿è¡Œä¹‹åå†æ¥ç¡®å®šã€‚åŠ¨æ€è”ç¼–çš„ä¸»è¦ä¼˜ç‚¹æ˜¯æä¾›äº†æ›´å¥½çš„ç¼–ç¨‹çµæ´»æ€§ã€é—®é¢˜æŠ½è±¡æ€§å’Œç¨‹åºæ˜“ç»´æŠ¤æ€§ï¼Œä½†æ˜¯ä¸é™æ€è”ç¼–ç›¸æ¯”ï¼Œå‡½æ•°è°ƒç”¨é€Ÿåº¦æ…¢ï¼Œå› ä¸ºåŠ¨æ€è”ç¼–éœ€è¦åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æœç´¢ä»¥ç¡®å®šå‡½æ•°è°ƒç”¨(æ¶ˆæ¯)ä¸ç¨‹åºä»£ç (æ–¹æ³•)ä¹‹é—´çš„åŒ¹é…å…³ç³»ã€‚ åŠ¨æ€è”ç¼–ç”±è™šå‡½æ•°æ¥å®ç°ã€‚ ==å½¢å‚ä¸ºåŸºç±»çš„å¼•ç”¨== 4.è™šå‡½æ•° # è™šå‡½æ•°å®šä¹‰ # è™šå‡½æ•°å…è®¸ç¨‹åºå‘˜åœ¨åŸºç±»ä¸­å®šä¹‰ï¼Œåœ¨å…¶æ¯ä¸€ä¸ªæ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰ã€‚ å…³é”®å­—virtualåªèƒ½åœ¨å‡½æ•°å£°æ˜æ—¶ä½¿ç”¨ã€‚ è™šå‡½æ•°å¯ä»¥åƒå…¶ä»–å‡½æ•°ä¸€æ ·è¢«ç»§æ‰¿ã€‚ åœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰å‡½æ•°æ—¶ï¼Œè¦æ±‚å‡½æ•°åã€å‡½æ•°ç±»å‹ã€å‡½æ•°å‚æ•°ä¸ªæ•°å’Œç±»å‹å…¨éƒ¨ä¸åŸºç±»çš„è™šå‡½æ•°ç›¸åŒï¼Œå¹¶æ ¹æ®æ´¾ç”Ÿç±»çš„éœ€è¦é‡æ–°å®šä¹‰å‡½æ•°ä½“ã€‚ è™šå‡½æ•°ä½¿ç”¨ # å½“åœ¨ç±»çš„å±‚æ¬¡ç»“æ„ä¸­å£°æ˜äº†è™šå‡½æ•°ä»¥åï¼Œå¹¶ä¸ä¸€å®šå°±èƒ½å®ç°è¿è¡Œæ—¶çš„å¤šæ€æ€§ï¼Œå¿…é¡»åˆç†è°ƒç”¨è™šå‡½æ•°æ‰èƒ½å®ç°åŠ¨æ€è”ç¼–ã€‚ åªæœ‰åœ¨ç¨‹åºä¸­ä½¿ç”¨åŸºç±»ç±»å‹çš„æŒ‡é’ˆæˆ–å¼•ç”¨è°ƒç”¨è™šå‡½æ•°æ—¶ï¼Œç³»ç»Ÿæ‰ä»¥åŠ¨æ€è”ç¼–æ–¹å¼å®ç°å¯¹è™šå‡½æ•°çš„è°ƒç”¨ã€‚ å¦‚æœä½¿ç”¨å¯¹è±¡åè°ƒç”¨è™šå‡½æ•°ï¼Œç³»ç»Ÿä»ç„¶ä»¥é™æ€è”ç¼–æ–¹å¼å®Œæˆå¯¹è™šå‡½æ•°çš„è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨å“ªä¸ªç±»è¯´æ˜çš„å¯¹è±¡ï¼Œå°±è°ƒç”¨åœ¨å“ªä¸ªç±»ä¸­å®šä¹‰çš„è™šå‡½æ•°ã€‚ 5.çº¯è™šå‡½æ•° # C++è§„å®šï¼Œå¯¹äºç±»æ—ä¸­æ— æ³•å®ç°çš„æˆå‘˜å‡½æ•°ï¼Œå¯ä»¥å®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œå…¶å…·ä½“çš„å®ç°ç”±å…¶æ´¾ç”Ÿç±»æ¥å®Œæˆã€‚\nçº¯è™šå‡½æ•°ï¼š # åªæœ‰å‡½æ•°å£°æ˜ï¼Œæ²¡æœ‰å‡½æ•°å®ç°çš„å‡½æ•°ã€‚ ä»è¯­æ³•ä¸Šè®²ï¼Œçº¯è™šå‡½æ•°æ˜¯åœ¨è™šå‡½æ•°çš„åé¢åŠ ä¸Šâ€œ=0â€ï¼Œè¡¨ç¤ºè¯¥è™šå‡½æ•°æ— å‡½æ•°ä½“ã€‚ è¿™é‡Œçš„â€œ=â€å¹¶éèµ‹å€¼è¿ç®—ã€‚ çº¯è™šå‡½æ•°ä¸ºç±»çš„ç»§æ‰¿æä¾›äº†è¿ç»­çš„æ¥å£ã€‚ å®šä¹‰æ ¼å¼ class \u0026lt;class-name\u0026gt; { virtual \u0026lt;type\u0026gt; \u0026lt;function-name\u0026gt;(\u0026lt;arguments\u0026gt;)=0; //â€¦â€¦ } æ³¨æ„ï¼šåœ¨æ„é€ å‡½æ•°å’Œææ„å‡½æ•°ä¸­ä¸èƒ½è°ƒç”¨çº¯è™šå‡½æ•°ã€‚ åªæœ‰è™šå‡½æ•°æ‰å¯èƒ½æ˜¯çº¯è™šå‡½æ•° å³éè™šå‡½æ•°æˆ–æ™®é€šå‡½æ•°éƒ½ä¸èƒ½å®šä¹‰æˆçº¯è™šå‡½æ•°\n6.æŠ½è±¡ç±» # å¦‚æœä¸€ä¸ªç±»ä¸­è‡³å°‘æœ‰ä¸€ä¸ªçº¯è™šå‡½æ•°ï¼Œåˆ™è¿™ä¸ªç±»ä¸ºæŠ½è±¡ç±»ã€‚ å¦‚æœæ´¾ç”Ÿç±»ä¸­æ²¡æœ‰å†å¯¹åŸºç±»ä¸­çš„çº¯è™šå‡½æ•°è¿›è¡Œé‡å®šä¹‰ï¼Œåˆ™æ´¾ç”Ÿç±»ä¹Ÿæ˜¯æŠ½è±¡ç±»ã€‚ ä¸èƒ½å®šä¹‰æŠ½è±¡ç±»çš„å¯¹è±¡ï¼Œä½†å¯ä»¥å®šä¹‰æŠ½è±¡ç±»çš„æŒ‡é’ˆå’Œå¼•ç”¨ã€‚ åœ¨ç»§æ‰¿å±‚æ¬¡ç»“æ„ä¸­ï¼ŒæŠ½è±¡ç±»çš„ä½œç”¨æ˜¯ä¸ºæ´¾ç”Ÿç±»æä¾›ä¸€ä¸ªåŸºæœ¬æ¡†æ¶å’Œå…¬å…±çš„å¯¹å¤–æ¥å£ï¼Œä¸€èˆ¬ä½œä¸ºåŸºç±»å­˜åœ¨ã€‚ ","date":"2025-09-25","externalUrl":null,"permalink":"/posts/cpp_%E7%AC%94%E8%AE%B0_1-5%E7%AB%A0/","section":"Posts","summary":"","title":"CPP_ç¬”è®°_1-5ç« ","type":"posts"},{"content":" 0.å®‰è£…Ubutu22.04 # WSLæ–¹æ¡ˆç›®å‰ä¸å¯è¡Œï¼Œéœ€è¦å®‰è£…å®ä½“æœºUbuntu22.04\nè­¦å‘Š æ³¨æ„: ä»¥ä¸‹ç« èŠ‚å¼ƒç”¨, WSLæ–¹æ¡ˆç›®å‰ä¸å¯è¡Œ\nwsl --install -d Ubuntu-24.04 wsl --export Ubuntu-24.04 D:\\WSL\\Ubuntu-24.04\\Ubuntu-24.04.tar wsl --unregister Ubuntu-24.04 wsl --import Ubuntu-24.04 D:\\WSL\\Ubuntu-24.04 D:\\WSL\\Ubuntu-24.04\\Ubuntu-24.04.tar --version 2 wsl -d Ubuntu-24.04 #é…ç½®é»˜è®¤ç”¨æˆ· ubuntu2404 config --default-user cerry # ç¡®ä¿DNSæœåŠ¡å™¨å›ºå®šï¼Œç½‘ç»œæ­£å¸¸è®¿é—® echo \u0026#39;nameserver 8.8.8.8\u0026#39; | sudo tee /etc/resolv.conf \u0026gt; /dev/null echo \u0026#39;[network]\u0026#39; | sudo tee /etc/wsl.conf \u0026gt; /dev/null echo \u0026#39;generateResolvConf = false\u0026#39; | sudo tee -a /etc/wsl.conf \u0026gt; /dev/null # æ¢æº sudo mv /etc/apt/sources.list.d/ubuntu.sources /etc/apt/backup-sources.list.d-ubuntu.sources sudo vim /etc/apt/sources.list.d/tuna.sources input Types: deb URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ #å¦‚æœä½¿ç”¨å…¶ä»–é•œåƒç«™ï¼Œä¸Šé¢è¿™è¡Œå¯ä»¥æ”¹æˆå…¶ä»–é•œåƒç«™çš„ç½‘å€ Suites: noble noble-updates noble-backports Components: main universe restricted multiverse Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg Types: deb URIs: http://security.ubuntu.com/ubuntu #å¦‚æœå®‰å…¨æ›´æ–°éœ€è¦ä½¿ç”¨é•œåƒç«™ï¼Œä¸Šé¢è¿™è¡Œä¹Ÿæ”¹æˆ URIs: https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ Suites: noble-security Components: main universe restricted multiverse Signed-By: /usr/share/keyrings/ubuntu-archive-keyring.gpg 1. å®‰è£…Miniconda3 # wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh chmod a+x Miniconda3-latest-Linux-x86_64.sh ./Miniconda3-latest-Linux-x86_64.sh 2.å®‰è£… é©±åŠ¨åŒ… # form WSL How to guide - Use ROCm on Radeon GPUs\n# 1. å®‰è£…AMD ç»Ÿä¸€å†…æ ¸æ¨¡å¼ GPU é©±åŠ¨ç¨‹åºã€ROCm å’Œå›¾å½¢ sudo apt update wget https://repo.radeon.com/amdgpu-install/6.4.2.1/ubuntu/noble/amdgpu-install_6.4.60402-1_all.deb sudo apt install ./amdgpu-install_6.4.60402-1_all.deb # 2. å®‰è£…WSL ç”¨ä¾‹ amdgpu-install -y --usecase=wsl,rocm --no-dkms \u0026lt;output [sudo] password for cerry: Hit:1 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble InRelease Hit:2 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-updates InRelease Hit:3 https://mirrors.tuna.tsinghua.edu.cn/ubuntu noble-backports InRelease Hit:4 http://security.ubuntu.com/ubuntu noble-security InRelease Hit:5 https://repo.radeon.com/amdgpu/6.4.2.1/ubuntu noble InRelease Hit:6 https://repo.radeon.com/rocm/apt/6.4.2 noble InRelease Reading package lists... Done Reading package lists... Done Building dependency tree... Done Reading state information... Done hsa-runtime-rocr4wsl-amdgpu is already the newest version (25.10-2188619.24.04). rocm is already the newest version (6.4.2.60402-120~24.04). 0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded. éªŒè¯ï¼š\n(base) cerry@cerry-ROG-Flow-X13-GV301RA-GV301RA:~$ rocminfo ROCk module version 6.12.12 is loaded ===================== HSA System Attributes ===================== Runtime Version: 1.15 Runtime Ext Version: 1.7 System Timestamp Freq.: 1000.000000MHz Sig. Max Wait Duration: 18446744073709551615 (0xFFFFFFFFFFFFFFFF) (timestamp count) Machine Model: LARGE System Endianness: LITTLE Mwaitx: DISABLED XNACK enabled: NO DMAbuf Support: YES VMM Support: YES ========== HSA Agents ========== ******* Agent 1 ******* Name: AMD Ryzen 7 6800HS with Radeon Graphics Uuid: CPU-XX Marketing Name: AMD Ryzen 7 6800HS with Radeon Graphics Vendor Name: CPU Feature: None specified Profile: FULL_PROFILE Float Round Mode: NEAR Max Queue Number: 0(0x0) Queue Min Size: 0(0x0) Queue Max Size: 0(0x0) Queue Type: MULTI Node: 0 Device Type: CPU Cache Info: L1: 32768(0x8000) KB Chip ID: 0(0x0) ASIC Revision: 0(0x0) Cacheline Size: 64(0x40) Max Clock Freq. (MHz): 4785 BDFID: 0 Internal Node ID: 0 Compute Unit: 16 SIMDs per CU: 0 Shader Engines: 0 Shader Arrs. per Eng.: 0 WatchPts on Addr. Ranges:1 Memory Properties: Features: None Pool Info: Pool 1 Segment: GLOBAL; FLAGS: FINE GRAINED Size: 15591488(0xede840) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:4KB Alloc Alignment: 4KB Accessible by all: TRUE Pool 2 Segment: GLOBAL; FLAGS: EXTENDED FINE GRAINED Size: 15591488(0xede840) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:4KB Alloc Alignment: 4KB Accessible by all: TRUE Pool 3 Segment: GLOBAL; FLAGS: KERNARG, FINE GRAINED Size: 15591488(0xede840) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:4KB Alloc Alignment: 4KB Accessible by all: TRUE Pool 4 Segment: GLOBAL; FLAGS: COARSE GRAINED Size: 15591488(0xede840) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:4KB Alloc Alignment: 4KB Accessible by all: TRUE ISA Info: ******* Agent 2 ******* Name: gfx1035 Uuid: GPU-XX Marketing Name: AMD Radeon Graphics Vendor Name: AMD Feature: KERNEL_DISPATCH Profile: BASE_PROFILE Float Round Mode: NEAR Max Queue Number: 128(0x80) Queue Min Size: 64(0x40) Queue Max Size: 131072(0x20000) Queue Type: MULTI Node: 1 Device Type: GPU Cache Info: L1: 16(0x10) KB L2: 2048(0x800) KB Chip ID: 5761(0x1681) ASIC Revision: 2(0x2) Cacheline Size: 128(0x80) Max Clock Freq. (MHz): 2200 BDFID: 2048 Internal Node ID: 1 Compute Unit: 12 SIMDs per CU: 2 Shader Engines: 1 Shader Arrs. per Eng.: 2 WatchPts on Addr. Ranges:4 Coherent Host Access: FALSE Memory Properties: APU Features: KERNEL_DISPATCH Fast F16 Operation: TRUE Wavefront Size: 32(0x20) Workgroup Max Size: 1024(0x400) Workgroup Max Size per Dimension: x 1024(0x400) y 1024(0x400) z 1024(0x400) Max Waves Per CU: 32(0x20) Max Work-item Per CU: 1024(0x400) Grid Max Size: 4294967295(0xffffffff) Grid Max Size per Dimension: x 4294967295(0xffffffff) y 4294967295(0xffffffff) z 4294967295(0xffffffff) Max fbarriers/Workgrp: 32 Packet Processor uCode:: 122 SDMA engine uCode:: 47 IOMMU Support:: None Pool Info: Pool 1 Segment: GLOBAL; FLAGS: COARSE GRAINED Size: 7795744(0x76f420) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:2048KB Alloc Alignment: 4KB Accessible by all: FALSE Pool 2 Segment: GLOBAL; FLAGS: EXTENDED FINE GRAINED Size: 7795744(0x76f420) KB Allocatable: TRUE Alloc Granule: 4KB Alloc Recommended Granule:2048KB Alloc Alignment: 4KB Accessible by all: FALSE Pool 3 Segment: GROUP Size: 64(0x40) KB Allocatable: FALSE Alloc Granule: 0KB Alloc Recommended Granule:0KB Alloc Alignment: 0KB Accessible by all: FALSE ISA Info: ISA 1 Name: amdgcn-amd-amdhsa--gfx1035 Machine Models: HSA_MACHINE_MODEL_LARGE Profiles: HSA_PROFILE_BASE Default Rounding Mode: NEAR Default Rounding Mode: NEAR Fast f16: TRUE Workgroup Max Size: 1024(0x400) Workgroup Max Size per Dimension: x 1024(0x400) y 1024(0x400) z 1024(0x400) Grid Max Size: 4294967295(0xffffffff) Grid Max Size per Dimension: x 4294967295(0xffffffff) y 4294967295(0xffffffff) z 4294967295(0xffffffff) FBarrier Max Size: 32 ISA 2 Name: amdgcn-amd-amdhsa--gfx10-3-generic Machine Models: HSA_MACHINE_MODEL_LARGE Profiles: HSA_PROFILE_BASE Default Rounding Mode: NEAR Default Rounding Mode: NEAR Fast f16: TRUE Workgroup Max Size: 1024(0x400) Workgroup Max Size per Dimension: x 1024(0x400) y 1024(0x400) z 1024(0x400) Grid Max Size: 4294967295(0xffffffff) Grid Max Size per Dimension: x 4294967295(0xffffffff) y 4294967295(0xffffffff) z 4294967295(0xffffffff) FBarrier Max Size: 32 *** Done *** 3. # Install PyTorch for ROCm # form: Install PyTorch for Radeon GPUs on WSL conda create -n ROCm python=3.12 conda activite ROCm sudo apt install python3-pip -y pip3 install --upgrade pip wheel wget https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4.2/torch-2.6.0%2Brocm6.4.2.git76481f7c-cp312-cp312-linux_x86_64.whl wget https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4.2/torchvision-0.21.0%2Brocm6.4.2.git4040d51f-cp312-cp312-linux_x86_64.whl wget https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4.2/pytorch_triton_rocm-3.2.0%2Brocm6.4.2.git7e948ebf-cp312-cp312-linux_x86_64.whl wget https://repo.radeon.com/rocm/manylinux/rocm-rel-6.4.2/torchaudio-2.6.0%2Brocm6.4.2.gitd8831425-cp312-cp312-linux_x86_64.whl pip3 uninstall torch torchvision pytorch-triton-rocm pip3 install torch-2.6.0+rocm6.4.2.git76481f7c-cp312-cp312-linux_x86_64.whl torchvision-0.21.0+rocm6.4.2.git4040d51f-cp312-cp312-linux_x86_64.whl torchaudio-2.6.0+rocm6.4.2.gitd8831425-cp312-cp312-linux_x86_64.whl pytorch_triton_rocm-3.2.0+rocm6.4.2.git7e948ebf-cp312-cp312-linux_x86_64.whl # æ£€æŸ¥å®‰è£…æ˜¯å¦æˆåŠŸ python3 -c \u0026#39;import torch\u0026#39; 2\u0026gt; /dev/null \u0026amp;\u0026amp; echo \u0026#39;Success\u0026#39; || echo \u0026#39;Failure\u0026#39; (ROCm) cerry@cerry-ROG-Flow-X13-GV301RA-GV301RA:~$ python3 -c \u0026#39;import torch\u0026#39; 2\u0026gt; /dev/null \u0026amp;\u0026amp; echo \u0026#39;Success\u0026#39; || echo \u0026#39;Failure\u0026#39; Success (ROCm) cerry@cerry-ROG-Flow-X13-GV301RA-GV301RA:~$ python3 -c \u0026#39;import torch; print(torch.cuda.is_available())\u0026#39; True (ROCm) cerry@cerry-ROG-Flow-X13-GV301RA-GV301RA:~$ python3 -c \u0026#34;import torch; print(f\u0026#39;device name [0]:\u0026#39;, torch.cuda.get_device_name(0))\u0026#34; device name [0]: AMD Radeon Graphics (ROCm) cerry@cerry-ROG-Flow-X13-GV301RA-GV301RA:~$ python3 -m torch.utils.collect_env ","date":"2025-09-08","externalUrl":null,"permalink":"/posts/yolov81ubuntu22.04%E5%AE%9E%E4%BD%93%E6%9C%BAamdrocm%E9%A9%B1%E5%8A%A8%E4%BB%A5%E5%8F%8Arocm%E7%89%88torch%E5%AE%89%E8%A3%85/","section":"Posts","summary":"","title":"YoloV8(1)ï¼šUbuntu22.04å®ä½“æœºAMDRocmé©±åŠ¨ä»¥åŠRocmç‰ˆtorchå®‰è£…","type":"posts"},{"content":"æœ¬èŠ‚ä¸ºHP-calcçš„ä¸€äº›æ–‡ç« ã€‚\n","date":"2025-08-31","externalUrl":null,"permalink":"/posts/hp-calc/","section":"Posts","summary":"HP-calcçš„ä¸€äº›æ–‡ç« é›†åˆ","title":"HP-calc","type":"posts"},{"content":"","date":"2025-08-31","externalUrl":null,"permalink":"/category/hp39gii/","section":"Category","summary":"","title":"Hp39gii","type":"category"},{"content":"ä¸Šå¸è§†è§’å‰§æƒ…å‘æ¢ç´¢ç”Ÿå­˜æ¸¸æˆå˜é’›ä¸–ç•Œï¼Œéšæœºç§å­ç”Ÿæˆä¸–ç•Œï¼Œæœ‰å°åœ°å›¾ï¼Œæœ‰ç›¸æœºç”»é¢æ»šåŠ¨æ•ˆæœã€‚è°ƒç”¨BtAddã€BLibã€BTextã€‚ ","date":"2025-08-31","externalUrl":null,"permalink":"/posts/hp-calc/btworld/","section":"Posts","summary":"ä¸Šå¸è§†è§’å‰§æƒ…å‘æ¢ç´¢ç”Ÿå­˜æ¸¸æˆå˜é’›ä¸–ç•Œï¼Œéšæœºç§å­ç”Ÿæˆä¸–ç•Œï¼Œæœ‰å°åœ°å›¾ï¼Œæœ‰ç›¸æœºç”»é¢æ»šåŠ¨æ•ˆæœã€‚è°ƒç”¨BtAddã€BLibã€BTextã€‚","title":"HP39GIIæ¸¸æˆ-ä¸Šå¸è§†è§’å‰§æƒ…å‘æ¢ç´¢ç”Ÿå­˜æ¸¸æˆå˜é’›ä¸–ç•Œ BtWorld","type":"posts"},{"content":"ç®€å•çš„ç»ˆç«¯æ¨¡æ‹Ÿï¼Œæœ‰ç”¨æˆ·æƒé™ç³»ç»Ÿã€‚\n","date":"2025-08-31","externalUrl":null,"permalink":"/posts/hp-calc/mylinux/","section":"Posts","summary":"ç®€å•çš„ç»ˆç«¯æ¨¡æ‹Ÿï¼Œæœ‰ç”¨æˆ·æƒé™ç³»ç»Ÿã€‚","title":"HP39GIIç¨‹åº-ç®€å•çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ My_Linux","type":"posts"},{"content":" 1 ç¼–ç¨‹è§„èŒƒ # 1.1 å˜é‡åå‰ç¼€ # å˜é‡åå‰ç¼€ å«ä¹‰ c char s int16_t, short l int32_t, long x BaseType_tå…¶å®ƒéæ ‡å‡†çš„ç±»å‹:ç»“æ„ä½“\\task handle queue handle ç­‰ u unsigned p æŒ‡é’ˆ uc uint8_t, unsigned char pc char æŒ‡é’ˆ 1.2 å‡½æ•°åå‰ç¼€ # å‡½æ•°åå‰ç¼€ å«ä¹‰ v è¿”å› void x è¿”å› BaseTpye_t 2 å†…å­˜ç®¡ç† # äº”ç§heapå®ç° ä¸€èˆ¬ä½¿ç”¨ heap_4.c heap_3.cæ˜¯æ ‡å‡†åº“å®ç°,æ¯”è¾ƒæ…¢ heap_2.cæ˜¯ç›´æ¥åˆ†é…çš„,ç›¸é‚»ç©ºé—´ä¸åˆå¹¶å›æ”¶ heap_5.cæ˜¯æ”¯æŒ åˆ†éš”çš„\n3 ä»»åŠ¡ # 3.1 åŠ¨æ€åˆ›å»º # 3.2 é™æ€åˆ†é… # 3.3 ä»»åŠ¡è°ƒåº¦ # ç›¸åŒä¼˜å…ˆçº§çš„è½®æµè¿è¡Œ æœ€é«˜ä¼˜å…ˆçº§çš„å…ˆè¿è¡Œ a. é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æœªæ‰§è¡Œå®Œ, æ›´ä½ä¼˜å…ˆçº§çš„ä»»åŠ¡ æ°¸è¿œæ— æ³•è¿è¡Œ b. ä¸€æ—¦é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡å°±ç»ª, ä¼šé©¬ä¸Šè¿è¡Œ c. æœ€é«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡æœ‰å¤šä¸ª, ä¼šè½®æµè¿è¡Œ 3.4 ç©ºé—²ä»»åŠ¡ # æ£€æŸ¥ç­‰å¾…ç»ˆæ­¢çš„ä»»åŠ¡(è‡ªæ€ä»»åŠ¡) è°ƒç”¨hock å‡½æ•° ç”¨äºè°ƒè¯• æ³¨æ„: åœ¨ é«˜ä¼˜å…ˆçº§ ä»»åŠ¡ æ‰§è¡Œå ä¸»åŠ¨ä½¿ç”¨ vTtaskDelay è¿›å…¥é˜»å¡çŠ¶æ€ ä½¿å¾—ç©ºé—²ä»»åŠ¡ å¾—ä»¥è¿è¡Œ 3.5 dealy å‡½æ•° # vTaskDelay : è‡³å°‘ç­‰å¾…æŒ‡å®šä¸ªæ•°çš„ Tick Interruppt æ‰èƒ½è¿è¡Œ vTaskDelayUntil : ç­‰å¾…åˆ°æŒ‡å®šçš„ç»å¯¹æ—¶åˆ»,æ‰èƒ½å˜æˆå°±ç»ªæ€ 4 åŒæ­¥ # 4.1 æœ‰ç¼ºé™·çš„ä¾‹å­ # ä¾‹1 æœ‰ä¸€ä¸ªå…¨å±€å˜é‡end=0 ä»»åŠ¡A æ‰§è¡Œ è®¡ç®— å¤§æ¦‚è¦ 1.5ç§’ æ‰§è¡Œå®Œåä¼šè®¾ç½®end=1 ä»»åŠ¡B ä½¿ç”¨ while(end) ç­‰å¾…è®¡ç®—å®Œæˆ è¿™æ ·ä¼šå¯¼è‡´ rtosè°ƒåº¦ æŠŠcpuèµ„æºç»™äº†æ— æ„ä¹‰ çš„ ä»»åŠ¡B whileå¾ªç¯ å¯¼è‡´ è®¡ç®—ç¼“æ…¢\nä¾‹2 ä¸‰ä¸ªä»»åŠ¡ ä½¿ç”¨åŒä¸€ä¸ªå‡½æ•° è¿™ä¸ªå‡½æ•° ä½¿ç”¨i2cåœ¨å±å¹•ä¸Šæ‰“å°ä¿¡æ¯ i2c æ˜¯æ¯”è¾ƒè€—æ—¶çš„ start,dev_addr,data,stop å¦‚æœä¸åŠ ä»¥åŒæ­¥çš„ä¿æŠ¤, i2cçš„ä¿¡å·æ˜¯æ··ä¹±çš„ ä½†æ˜¯å³ä¾¿ä½¿ç”¨å…¨å±€å˜é‡æ¥ä¿æŠ¤,ç”±äºæ£€æŸ¥å’Œè®¾ç½®è¿™ä¸ªå…¨å±€å˜é‡ä¸æ˜¯åŸå­æ€§çš„, å‡ºç°å†²çªä¹Ÿæ˜¯ä¸å¯é¿å…çš„, å³ä¾¿è¿™ä¸ªæ¦‚ç‡éå¸¸å° å¯ä»¥ä½¿ç”¨ å…³ä¸­æ–­çš„åŠæ³• é¿å…è°ƒåº¦ ä½†æ˜¯ è¿™æ ·è¿˜æ˜¯ä¸å¯é¿å… çš„ ä¼šä½¿å¾—ä¸ºè·å¾—ä½¿ç”¨æƒçš„ä»»åŠ¡å ç”¨cpuæ— æ„ä¹‰ç­‰å¾…\n4.2 è§£å†³åŠæ³• # ç¯å½¢ç¼“å†²åŒº é˜Ÿåˆ— ä¿¡å·é‡ äº’æ–¥é‡ äº’æ–¥æªæ–½ é˜»å¡-å”¤é†’ å…¨å±€å˜é‡ 1 æ—  æ—  ç¯å½¢ç¼“å†²åŒº å¤šä¸ª æ—  æ—  é˜Ÿåˆ— å¤šä¸ª æœ‰ æœ‰ 4.3 é˜Ÿåˆ— # é˜Ÿåˆ—çš„ç»„æˆ: ç¯å½¢ç¼“å†²åŒº + ä¸¤ä¸ªé“¾è¡¨(å‘é€è€…å’Œæ¥å—è€…) é˜Ÿåˆ—çš„æœ¬è´¨: ç¯å½¢ç¼“å†²åŒº + äº’æ–¥\\é˜»å¡-å”¤é†’æœºåˆ¶\nå¦‚æœé˜Ÿåˆ—ä¸ä¼ è¾“æ•°æ®,åªè°ƒæ•´\u0026quot;æ•°æ®ä¸ªæ•°\u0026quot;,ä»–å°±æ˜¯ä¿¡å·é‡ å¦‚æœä¿¡å·é‡ä¸­,é™å®š\u0026quot;æ•°æ®ä¸ªæ•°\u0026quot;æœ€å¤§ä¸º1,å®ƒå°±æ˜¯äº’æ–¥é‡ å¦‚æœé˜Ÿåˆ—ç©º è¯»ä»»åŠ¡æ²¡æœ‰å¾—åˆ°æ•°æ® å¯ä»¥è¿›å…¥é˜»å¡ , ç­‰å¾…æ•°æ®æ¥åˆ°(å†™è¿›ç¨‹ ä¸»åŠ¨å”¤é†’ æˆ– tickè¶…æ—¶ å”¤é†’)\n","date":"2025-08-07","externalUrl":null,"permalink":"/posts/rtos_day1/","section":"Posts","summary":"","title":"rtos_day1","type":"posts"},{"content":" About me # ğŸ‘‹ Hi, I\u0026rsquo;m [ Cerry2025 ] ğŸš€ï¸ I\u0026rsquo;m currently working as [ QingDao ] ğŸ“®ï¸ How to reach me: Gihub/cerry2022 ğŸ“– My motto: [ Success is small daily steps. ] åç«¯ # å‰ç«¯ # è¿ç»´ # å¼€å‘å·¥å…· # ","date":"2025-07-25","externalUrl":null,"permalink":"/posts/about/","section":"Posts","summary":"","title":"about","type":"posts"},{"content":"","date":"2025-07-24","externalUrl":null,"permalink":"/tags/wsl/","section":"Tags","summary":"","title":"Wsl","type":"tags"},{"content":" èµ·å›  # ä¸€å¼€å§‹æ˜¯è¿™æ ·çš„,ç½‘å¡æ­£å¸¸,ipåœ°å€ä¹Ÿæœ‰,dnsåœ°å€é€šè¿‡å®¿ä¸»æœºåœ°å€è·å– ä½†æ˜¯pingä¸ä¸Šbaidu.com,å³ä¾¿æ˜¯ping 172.26.144.1 ä¹Ÿä¸è¡Œ å°è¯•å¸è½½ è™šæ‹Ÿç½‘å¡é©±åŠ¨ Hyper-V Virtual Ethernet Adapter ç„¶åå†æ‰“å¼€ ä¹Ÿä¸è¡Œ hyper ç®¡ç†å·¥å…·å†…ä¿®æ”¹ä¹Ÿä¸è¡Œ ä¿®æ”¹ .wslconfig ä¸ºå„ç§ç½‘ç»œæ¨¡å¼ä¹Ÿä¸è¡Œ\nè§£å†³åŠæ³• # åˆ é™¤ .wslconfig å†…å¤šä½™çš„é…ç½®,ä¿æŒæœ€ç®€å•çš„æ¯”å¦‚å†…æ ¸å†…å­˜çš„é…ç½®. åœ¨ç¨‹åº-\u0026gt;å¯åŠ¨æˆ–å…³é—­WindwosåŠŸèƒ½-\u0026gt;å…³é—­ é€‚ç”¨äºLinux çš„Windowså­ç³»ç»Ÿ ä»¥åŠ Hyper-V,ç„¶åé‡å¯ç³»ç»Ÿ,ç„¶åæ‰“å¼€é€‚ç”¨äºLinux çš„Windowså­ç³»ç»Ÿ(å¯ä»¥ä¸å¼€å¯Hyper-V,WSLå¹¶ä¸ç›´æ¥ä¾èµ–è¿™ä¸ª,è™½ç„¶åº•å±‚ä¹Ÿæ˜¯Hyper-V),å†æ¬¡é‡å¯ç³»ç»Ÿ. æœ€åæ‰“å¼€wsl,å³å¯è¿ä¸Šç½‘ç»œ . resolv.conf å†…è‡ªåŠ¨ç”Ÿæˆçš„é…ç½®,å°±æ˜¯ WSLè™šæ‹Ÿç½‘å¡ é…ç½® çš„IPv4åœ°å€ ","date":"2025-07-24","externalUrl":null,"permalink":"/posts/wsl%E4%B8%8Bnat%E7%BD%91%E7%BB%9C%E4%BD%BF%E7%94%A8%E9%BB%98%E8%AE%A4%E4%B8%BB%E6%9C%BA%E5%9C%B0%E5%9D%80%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AE%E7%BD%91%E7%BB%9C%E4%BF%AE%E5%A4%8D/","section":"Posts","summary":"","title":"wslä¸‹NATç½‘ç»œä½¿ç”¨é»˜è®¤ä¸»æœºåœ°å€æ— æ³•è®¿é—®ç½‘ç»œä¿®å¤","type":"posts"},{"content":"","date":"2025-07-20","externalUrl":null,"permalink":"/category/%E9%B2%81%E7%8F%AD%E7%8C%AB3/","section":"Category","summary":"","title":"é²ç­çŒ«3","type":"category"},{"content":"## éœ€è¦å‡†å¤‡çš„èµ„æ–™å’Œä¸€äº›åŸºç¡€æ¦‚å¿µ å‚å®¶ç»™çš„èµ„æ–™ # ä¸Šä¸‹ç”µæ—¶åº è¿™éƒ¨åˆ†å¯èƒ½éœ€è¦åœ¨æ˜¾ç¤ºèŠ¯ç‰‡æ•°æ®æ‰‹å†Œä¸­æŸ¥æ‰¾ enable-delay-ms = \u0026lt;35\u0026gt;; prepare-delay-ms = \u0026lt;6\u0026gt;; reset-delay-ms = \u0026lt;100\u0026gt;; init-delay-ms = \u0026lt;200\u0026gt;; unprepare-delay-ms = \u0026lt;0\u0026gt;; disable-delay-ms = \u0026lt;20\u0026gt;; åˆå§‹åŒ–åºåˆ— ä¸€èˆ¬å‚å®¶ç»™çš„ä¸ä¸€å®šæ˜¯è¿™ç§æ ¼å¼ï¼Œè€Œæ˜¯å½¢å¦‚ æˆ–è€… éœ€è¦ä¿®æ”¹æˆ Rockchip æ”¯æŒçš„æ ¼å¼ Rockchip.c panel-init-sequence = [ // Soft Reset \u0026amp; Delay 120ms 05 78 01 01 // CMD: 0x01 (Soft Reset) Delay 120ms (0x78) // Sleep Out \u0026amp; Delay 120ms 05 78 01 11 // CMD: 0x11 (Sleep Out) Delay 120ms (0x78) // Switch to command page 1 39 00 06 ff 77 01 00 00 11 // Set VDD/VSS 15 00 02 d1 11 // Set Tearing Effect Line 15 00 02 55 b0 // Switch to command page 0 39 00 06 ff 77 01 00 00 10 // Set Panel resolution 39 00 03 c0 63 00 // Set porch 39 00 03 c1 09 02 39 00 03 c2 31 08 // Set BCTRL 15 00 02 cc 18 // Gamma Setting + 39 00 11 b0 00 11 19 0c 10 06 07 0a 09 22 04 10 0e 28 30 1c // Gamma Setting - 39 00 11 b1 00 12 19 0d 10 04 06 07 08 23 04 12 11 28 30 1c // Switch to command page 1 39 00 06 ff 77 01 00 00 11 15 00 02 b0 4d 15 00 02 b1 6a 15 00 02 b2 07 15 00 02 b3 80 15 00 02 b5 47 15 00 02 b7 8a 15 00 02 b8 21 15 00 02 b9 10 15 00 02 c1 78 15 00 02 c2 78 // Set power 15 64 02 d0 88 // Delay 100ms (0x64) 39 00 04 e0 00 00 02 39 00 0c e1 01 a0 03 a0 02 a0 04 a0 00 44 44 39 00 0d e2 00 00 00 00 00 00 00 00 00 00 00 00 39 00 05 e3 00 00 33 33 39 00 03 e4 44 44 39 00 11 e5 01 26 a0 a0 03 28 a0 a0 05 2a a0 a0 07 2c a0 a0 39 00 05 e6 00 00 33 33 39 00 03 e7 44 44 39 00 11 e8 02 26 a0 a0 04 28 a0 a0 06 2a a0 a0 08 2c a0 a0 39 00 08 eb 00 01 e4 e4 44 00 40 39 00 11 ed ff f7 65 4f 0b a1 cf ff ff fc 1a b0 f4 56 7f ff // Switch to command page 0 39 00 06 ff 77 01 00 00 00 // Display On \u0026amp; Delay 50ms 05 32 01 29 // CMD: 0x29 (Display On) Delay 50ms (0x32) ]; å»¶è¿Ÿå‚æ•°\nåˆå§‹åŒ–åºåˆ—é…ç½®è§„åˆ™ä»¥åŠæ—¶é’Ÿé¢‘ç‡è®¡ç®—æ–¹æ³• # mipiåˆå§‹åŒ–åºåˆ—é…ç½®è§„åˆ™ï¼š\npanel-init-sequence = [ 15 00 02 80 77 15 00 02 81 77 15 00 02 82 77 15 00 02 83 77 15 00 02 84 77 15 00 02 85 77 15 00 02 86 77 39 00 0D C3 01 66 13 23 00 66 85 33 20 38 38 00 05 64 01 11 05 14 01 29 ]; ä¸­æ‹¬å·é‡Œçš„å†…å®¹ï¼Œæ¯ä¸€è¡Œè¡¨ç¤ºä¸€ä¸²å‘½ä»¤å­—ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š\n15 00 02 80 77 | | | | | | | | | æ•°æ® | | | | å¯„å­˜å™¨åœ°å€ | | æ•°æ®é•¿åº¦ | å»¶æ—¶ å‘½ä»¤ç±»å‹ï¼ˆ0x05: å•å­—èŠ‚æ•°æ® 0x15: åŒå­—èŠ‚æ•°æ® 0x39: å¤šå­—èŠ‚æ•°æ®ï¼‰ å•å­—èŠ‚æ•°æ®ä¸¾ä¾‹ï¼š\n05 64 01 11 åŒå­—èŠ‚æ•°æ®ä¸¾ä¾‹ï¼š\n15 00 02 86 77 å¤šå­—èŠ‚æ•°æ®ä¸¾ä¾‹ï¼š\n39 00 0D C3 01 66 13 23 00 66 85 33 20 38 38 00 clock-frequency çš„è®¡ç®—æ–¹æ³•\nå·²çŸ¥ä¸‹é¢å‚æ•°ï¼š\nfps: å±å¹•åˆ·æ–°ç‡ï¼ˆé»˜è®¤ï¼š60å¸§ï¼‰ htotal: hactive + hback-porch + hfront-porch + hsync-len vtotal: vactive + hfront-porch + vfront-porch + vsync-len æ±‚clock-frequencyå…¬å¼å¦‚ä¸‹ï¼š\nhtotal * vtotal * fps = clock-frequency åˆ›å»ºæ–°çš„Â .dtsiÂ æ–‡ä»¶ # åœ¨LubanCat_SDK\\kernel-6.1\\arch\\arm64\\boot\\dts\\rockchip ä¸‹ æ–°å»º rk3576-lubancat-3-dsi-800x480-3-5inch.dtsi ä¿®æ”¹ mipié…ç½®éƒ¨åˆ†ï¼š Rockchip.c dsi_panel: panel@0 { status = \u0026#34;okay\u0026#34;; compatible = \u0026#34;simple-panel-dsi\u0026#34;; reg = \u0026lt;0\u0026gt;; backlight = \u0026lt;\u0026amp;backlight\u0026gt;; power-supply = \u0026lt;\u0026amp;mipi_dsi_power\u0026gt;; reset-gpios = \u0026lt;\u0026amp;gpio1 RK_PC1 GPIO_ACTIVE_LOW\u0026gt;; enable-delay-ms = \u0026lt;35\u0026gt;; prepare-delay-ms = \u0026lt;6\u0026gt;; reset-delay-ms = \u0026lt;100\u0026gt;; init-delay-ms = \u0026lt;200\u0026gt;; unprepare-delay-ms = \u0026lt;0\u0026gt;; disable-delay-ms = \u0026lt;20\u0026gt;; width-mm = \u0026lt;51\u0026gt;; height-mm = \u0026lt;87\u0026gt;; dsi,flags = \u0026lt;(MIPI_DSI_MODE_VIDEO | MIPI_DSI_MODE_VIDEO_SYNC_PULSE | MIPI_DSI_MODE_LPM)\u0026gt;; dsi,format = \u0026lt;MIPI_DSI_FMT_RGB888\u0026gt;; dsi,lanes = \u0026lt;2\u0026gt;; bits-per-component = \u0026lt;8\u0026gt;; // æ˜ç¡®æŒ‡å®šæ¯ä¸ªé¢œè‰²åˆ†é‡æ˜¯8ä½ /* * Corrected init sequence for ST7701S based on the new rule. * Format: [type] [delay_ms] [payload_len] [cmd] [data...] * A pure delay is: [type] [delay_ms] [00] */ panel-init-sequence = [ // Soft Reset \u0026amp; Delay 120ms 05 78 01 01 // CMD: 0x01 (Soft Reset) Delay 120ms (0x78) // Sleep Out \u0026amp; Delay 120ms 05 78 01 11 // CMD: 0x11 (Sleep Out) Delay 120ms (0x78) // Switch to command page 1 39 00 06 ff 77 01 00 00 11 // Set VDD/VSS 15 00 02 d1 11 // Set Tearing Effect Line 15 00 02 55 b0 // Switch to command page 0 39 00 06 ff 77 01 00 00 10 // Set Panel resolution 39 00 03 c0 63 00 // Set porch 39 00 03 c1 09 02 39 00 03 c2 31 08 // Set BCTRL 15 00 02 cc 18 // Gamma Setting + 39 00 11 b0 00 11 19 0c 10 06 07 0a 09 22 04 10 0e 28 30 1c // Gamma Setting - 39 00 11 b1 00 12 19 0d 10 04 06 07 08 23 04 12 11 28 30 1c // Switch to command page 1 39 00 06 ff 77 01 00 00 11 15 00 02 b0 4d 15 00 02 b1 6a 15 00 02 b2 07 15 00 02 b3 80 15 00 02 b5 47 15 00 02 b7 8a 15 00 02 b8 21 15 00 02 b9 10 15 00 02 c1 78 15 00 02 c2 78 // Set power 15 64 02 d0 88 // Delay 100ms (0x64) 39 00 04 e0 00 00 02 39 00 0c e1 01 a0 03 a0 02 a0 04 a0 00 44 44 39 00 0d e2 00 00 00 00 00 00 00 00 00 00 00 00 39 00 05 e3 00 00 33 33 39 00 03 e4 44 44 39 00 11 e5 01 26 a0 a0 03 28 a0 a0 05 2a a0 a0 07 2c a0 a0 39 00 05 e6 00 00 33 33 39 00 03 e7 44 44 39 00 11 e8 02 26 a0 a0 04 28 a0 a0 06 2a a0 a0 08 2c a0 a0 39 00 08 eb 00 01 e4 e4 44 00 40 39 00 11 ed ff f7 65 4f 0b a1 cf ff ff fc 1a b0 f4 56 7f ff // Switch to command page 0 39 00 06 ff 77 01 00 00 00 // Display On \u0026amp; Delay 50ms 05 32 01 29 // CMD: 0x29 (Display On) Delay 50ms (0x32) ]; panel-exit-sequence = [ // Display Off \u0026amp; Delay 20ms 05 14 01 28 // CMD: 0x28 (Display Off) Delay 20ms (0x14) // Sleep In \u0026amp; Delay 120ms 05 00 01 10 // CMD: 0x10 (Sleep In) Delay 120ms (0x78) ]; disp_timings0: display-timings { native-mode = \u0026lt;\u0026amp;dsi_timing0\u0026gt;; dsi_timing0: timing0 { clock-frequency = \u0026lt;25000000\u0026gt;; hactive = \u0026lt;480\u0026gt;; vactive = \u0026lt;800\u0026gt;; hsync-len = \u0026lt;2\u0026gt;; hback-porch = \u0026lt;18\u0026gt;; hfront-porch = \u0026lt;16\u0026gt;; vsync-len = \u0026lt;2\u0026gt;; vback-porch = \u0026lt;16\u0026gt;; vfront-porch = \u0026lt;14\u0026gt;; hsync-active = \u0026lt;0\u0026gt;; vsync-active = \u0026lt;0\u0026gt;; de-active = \u0026lt;0\u0026gt;; pixelclk-active = \u0026lt;1\u0026gt;; }; }; ports { #address-cells = \u0026lt;1\u0026gt;; #size-cells = \u0026lt;0\u0026gt;; port@0 { reg = \u0026lt;0\u0026gt;; panel_in_dsi: endpoint { remote-endpoint = \u0026lt;\u0026amp;dsi_out_panel\u0026gt;; }; }; }; }; è§¦æ‘¸é©±åŠ¨éƒ¨åˆ†ï¼š\nç¼–è¯‘å±å¹•çš„dtboè®¾å¤‡æ ‘æ’ä»¶å¹¶éƒ¨ç½² # ç¼–è¯‘æ­¥éª¤ # å¦‚æœæœ‰aarch64-linux-gnu-çš„ç¯å¢ƒ\n#åŠ è½½é…ç½®æ–‡ä»¶ make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- ubancat_linux_rk3576_defconfig #ä½¿ç”¨dtbså‚æ•°å•ç‹¬ç¼–è¯‘è®¾å¤‡æ ‘ make ARCH=arm64 -j4 CROSS_COMPILE=aarch64-linux-gnu- dtbs å¦‚æœæ²¡æœ‰ï¼Œé‚£å°±ä½¿ç”¨å¼€å‘åŒ…è‡ªå¸¦çš„ç¼–è¯‘ç¯å¢ƒ\nexport CROSS_COMPILE=/path/LubanCat_SDK/prebuilts/gcc/linux-x86/aarch64/gcc-arm-10.3-2021.07-x86_64-aarch64-none-linux-gnu/bin/aarch64-none-linux-gnu- make ARCH=arm64 lubancat_linux_rk3576_defconfig make ARCH=arm64 -j$(nproc) dtbs # ç¼–è¯‘åçš„ dtboæ–‡ä»¶ åœ¨ arch/arm64/boot/dts/rockchip/overlay/ éƒ¨ç½²Â .dtboÂ æ–‡ä»¶ # å¤åˆ¶åˆ°ä½ çš„ LubanCat æ¿å­çš„Â /boot/dtb/overlay/Â ç›®å½•ä¸‹ ä¿®æ”¹Â uEnv.txtÂ æ–‡ä»¶ ç¦ç”¨æ—§çš„æ˜¾ç¤ºç›¸å…³çš„ overlay å¯ç”¨ä½ çš„æ–°å±å¹• overlay dtoverlay=/dtb/overlay/rk3576-lubancat-dsi-800x480-3-5inch-st7701s.dtbo æœ€å é‡å¯è®¾å¤‡ ","date":"2025-07-20","externalUrl":null,"permalink":"/posts/%E9%B2%81%E7%8F%AD%E7%8C%AB3rk3576%E9%80%82%E9%85%8D3.5%E8%8B%B1%E5%AF%B8%E5%B1%8F%E5%B9%95/","section":"Posts","summary":"","title":"é²ç­çŒ«3(rk3576)é€‚é…3.5è‹±å¯¸å±å¹•","type":"posts"},{"content":" Linux è¿›ç¨‹ # ç¨‹åº # åˆ†æ®µï¼šraw\\data\\rodata\\bss å®é™…ä¸Šå°±æ˜¯é™æ€çš„æ–‡ä»¶\nè¿›ç¨‹ # taskstruct ç®¡ç†è¿›ç¨‹èµ„æº PID: è¿›ç¨‹çš„å”¯ä¸€æ ‡è¯† è¯ç”Ÿå’Œæ­»äº¡ï¼šéšç€ç¨‹åº\npstree æ˜¾ç¤ºè¿›ç¨‹æ ‘ ps -ef | more åªè¾“å‡ºä¸€é¡µçš„å†…å®¹\nfork å‡½æ•° # fork å¤åˆ¶æ–°è¿›ç¨‹ æ‰§è¡Œforkå‡½æ•°ä¹‹åï¼Œforkå‡½æ•°ä¼šè¿”å›ä¸¤æ¬¡ åœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›æ—¶ï¼Œè¿”å›å€¼ä¸º0 åœ¨å­è¿›ç¨‹è¿”å›æ—¶ï¼Œè¿”å›å€¼ä¸ºè¿›ç¨‹çš„pid\nåˆ›å»ºå­è¿›ç¨‹å¤±è´¥è¿”å›-1\nåŸå‹ï¼š\ninclude \u0026lt;unistd.h\u0026gt; pit_t fork(void) exec å‡½æ•°æ— # äº‹å®ä¸Šï¼Œä½¿ç”¨fork()å‡½æ•°å¯åŠ¨ä¸€ä¸ªå­è¿›ç¨‹æ˜¯å¹¶æ²¡æœ‰å¤ªå¤§ä½œç”¨çš„ï¼Œå› ä¸ºå­è¿›ç¨‹è·Ÿçˆ¶è¿›ç¨‹éƒ½æ˜¯ä¸€æ ·çš„ï¼Œ å­è¿›ç¨‹èƒ½å¹²çš„æ´»çˆ¶è¿›ç¨‹ä¹Ÿä¸€æ ·èƒ½å¹²ï¼Œå› æ­¤ä¸–ç•Œå„åœ°çš„å¼€å‘è€…å°±æƒ³æ–¹è®¾æ³•è®©å­è¿›ç¨‹åšä¸ä¸€æ ·çš„äº‹æƒ…\n#include \u0026lt;unistd.h\u0026gt; int execl(const char *path, const char *arg, ...) int execlp(const char *file, const char *arg, ...) int execle(const char *path, const char *arg, ..., char *const envp[]) int execv(const char *path, char *const argv[]) int execvp(const char *file, char *const argv[]) int execve(const char *path, char *const argv[], char *const envp[]) path: å­—ç¬¦ä¸²ä»£è¡¨çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ arg: ä¸€ç³»åˆ—å¯å˜ä¼ é€’å‚æ•°ï¼Œæœ€åä¸€ä¸ªå¿…é¡»ä½¿ç”¨ç©ºæŒ‡é’ˆNULLä½œä¸ºç»“æŸå‘½ä»¤\nä¸¤å¤§ç±»ï¼š l : execlã€execlpå’Œexecleä¼ é€’å¯å˜å‚æ•° v : execvã€execvpå’Œexecveä¼ é€’æ•°ç»„\nåç¼€ï¼š\nl ï¼šå­ç¨‹åºå‚æ•°é€šè¿‡åˆ—è¡¨â€œlistâ€æ•°ä¼ å‚ã€‚ v ï¼šå­ç¨‹åºå‚æ•°é€šè¿‡ä¸€ä¸ªæ•°ç»„â€œvectorâ€è£…è½½ã€‚ p ï¼šåœ¨å½“å‰çš„æ‰§è¡Œè·¯å¾„å’Œç¯å¢ƒå˜é‡â€œPATHâ€ä¸­æœç´¢å¹¶æ‰§è¡Œè¿™ä¸ªç¨‹åºï¼ˆå³å¯ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼‰ï¼›ä¸éœ€è¦æŒ‡å®šç¨‹åºçš„å®Œæ•´è·¯å¾„ã€‚ e ï¼šå¤šä¸€ä¸ªæŒ‡æ˜ç¯å¢ƒå˜é‡åˆ—è¡¨çš„å‚æ•°envp[]ï¼Œä»¥ NULL æŒ‡é’ˆç»“å°¾çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œæ¯ä¸ªå­—ç¬¦ä¸²åº”è¯¥è¡¨ç¤ºä¸ºâ€œenvironment = virablesâ€çš„å½¢å¼ã€‚ ç»ˆæ­¢è¿›ç¨‹ # æ­£å¸¸ç»ˆæ­¢ï¼š main å‡½æ•°è¿”å› exit() å‡½æ•°ç»ˆæ­¢ï¼š ä¼šæ¸…é™¤I/Oç¼“å†²åŒºï¼ŒæŠŠæ–‡ä»¶ç¼“å†²åŒºçš„å†…å®¹å†™å›ç¡¬ç›˜ _exit() å‡½æ•°ç»ˆæ­¢ï¼šä¸ä¼šæ¸…é™¤I/O ç¼“å†²åŒºï¼Œä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±\nå¼‚å¸¸ç»ˆæ­¢ï¼š abort()å‡½æ•° ç”±ç³»ç»Ÿä¿¡å·ç»ˆæ­¢\n#include \u0026lt;unistd.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; pit_t _exit(int status) pit_t exit(int status) status: è¿›ç¨‹ç»ˆæ­¢æ—¶çš„çŠ¶æ€ç ï¼Œ0è¡¨ç¤ºæ­£å¸¸ç»ˆæ­¢ï¼Œ å…¶ä»–é0å€¼è¡¨ç¤ºå¼‚å¸¸ç»ˆæ­¢ï¼Œä¸€èˆ¬éƒ½å¯ä»¥ä½¿ç”¨-1æˆ–è€…1è¡¨ç¤ºï¼Œæ ‡å‡†Cé‡Œæœ‰EXITSUCCESSå’ŒEXITFAILUREä¸¤ä¸ªå®ï¼Œ è¡¨ç¤ºæ­£å¸¸ä¸å¼‚å¸¸ç»ˆæ­¢ã€‚\nç­‰å¾…å­è¿›ç¨‹çš„ç»ˆç»“ wait() # ç­‰å¾…ç¬¬ä¸€ä¸ªç»ˆæ­¢çš„å­è¿›ç¨‹\n#include \u0026lt;sys/wait.h\u0026gt; pit_t wait(int *status) è¿”å›ï¼š\næˆåŠŸï¼šé€€å‡ºå­è¿›ç¨‹çš„pid å¤±è´¥ï¼š-1 å¤„ç†å­è¿›ç¨‹é€€å‡ºçŠ¶æ€å€¼çš„å® WIFEXITED(status)ï¼šå¦‚æœå­è¿›ç¨‹æ­£å¸¸é€€å‡ºï¼Œåˆ™ è¯¥å®ä¸ºçœŸ WEXITSTATUS(status):å¦‚æœå­è¿›ç¨‹æ­£å¸¸é€€å‡ºï¼Œ åˆ™è¯¥å®è·å–å­è¿›ç¨‹çš„é€€å‡ºå€¼\nTASKRUNNING:å°±ç»ª/è¿è¡ŒçŠ¶æ€ TASKINTERRUPTIBLE:å¯ä¸­æ–­ç¡çœ çŠ¶æ€ TASKUNINTERRUPTIBLE:ä¸å¯ä¸­æ–­ç¡çœ çŠ¶ TASKTRACED:è°ƒè¯•æ€ TASKSTOPPED:æš‚åœçŠ¶æ€ EXITZOMBIE:åƒµæ­»çŠ¶æ€ EXITDEAD:æ­»äº¡æ€ ","date":"2025-07-18","externalUrl":null,"permalink":"/posts/learn_linux_arm_day2/","section":"Posts","summary":"","title":"learn_linux_arm_day2","type":"posts"},{"content":"","date":"2025-07-18","externalUrl":null,"permalink":"/tags/linux/","section":"Tags","summary":"","title":"Linux","type":"tags"},{"content":" gccé¢„å¤„ç†cæ–‡ä»¶ # sudo gcc -E ./hello_arm.c -o hello_arm.i -v /usr/libexec/gcc/x86_64-linux-gnu/14/cc1 -E -quiet -v -imultiarch x86_64-linux-gnu ./hello_arm.c -o hello_arm.i -mtune=generic -march=x86-64 -fasynchronous-unwind-tables -dumpbase hello_arm.c -dumpba* gcc ç¼–è¯‘cæ–‡ä»¶ # sudo gcc -S hello_arm.i -o hello_arm.s -v /usr/libexec/gcc/x86_64-linux-gnu/14/cc1 -fpreprocessed hello_arm.i -quiet -dumpbase hello_arm.i -dumpbase-ext .i -mtune=generic -march=x86-64 -version -o hello_arm.s -fasynchronous-unwind-tables æ³¨æ„ï¼šè¿™é‡Œæ˜¯å¤§å†™S å¦‚æœè¾“å…¥å°å†™så°±ç›¸å½“äºç¼–è¯‘äº†ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶äº† ç¼–è¯‘åçš„æ±‡ç¼–æ–‡ä»¶è¾“å‡º gccç¼–è¯‘æ±‡ç¼– # gcc -c hello_arm.s -o hello_arm.o -v as -v --64 -o hello_arm.o hello_arm.s gccé“¾æ¥å¯é‡å®šä½æ–‡ä»¶ # gcc hello_arm.o -o hello_arm -v /usr/libexec/gcc/x86_64-linux-gnu/14/collect2 -plugin /usr/libexec/gcc/x86_64-linux-gnu/14/liblto_plugin.so -plugin-opt=/usr/libexec/gcc/x86_64-linux-gnu/14/lto-wrapper -plugin-opt=-fresolution=/tmp/ccu8Dzjz.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s -plugin-opt=-pass-through=-lc -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_s --build-id --eh-frame-hdr -m elf_x86_64 --hash-style=gnu --as-needed -dynamic-linker /lib64/ld-linux-x86-64.so.2 -pie -o hello_arm /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/Scrt1.o /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/14/crtbeginS.o -L/usr/lib/gcc/x86_64-linux-gnu/14 -L/usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/14/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/14/../../.. hello_arm.o -lgcc --push-state --as-needed -lgcc_s --pop-state -lc -lgcc --push-state --as-needed -lgcc_s --pop-state /usr/lib/gcc/x86_64-linux-gnu/14/crtendS.o /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/crtn.o collect2 å°è£…äº†ldé“¾æ¥å™¨ï¼ˆldå°±æ˜¯gccçš„æ ‡å‡†é“¾æ¥å™¨ï¼‰ -dynamic-linker è¡¨æ˜åŠ¨æ€ç¼–è¯‘ï¼ˆé»˜è®¤ï¼‰\nå¦‚æœå¯ç”¨åŠ¨æ€(ä½¿ç”¨ -staticå‚æ•°)\ngcc hello_arm.o -o hello_arm -v -static /usr/libexec/gcc/x86_64-linux-gnu/14/collect2 -plugin /usr/libexec/gcc/x86_64-linux-gnu/14/liblto_plugin.so -plugin-opt=/usr/libexec/gcc/x86_64-linux-gnu/14/lto-wrapper -plugin-opt=-fresolution=/tmp/ccyTPuMR.res -plugin-opt=-pass-through=-lgcc -plugin-opt=-pass-through=-lgcc_eh -plugin-opt=-pass-through=-lc --build-id -m elf_x86_64 --hash-style=gnu --as-needed -static -o hello_arm /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/crt1.o /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/crti.o /usr/lib/gcc/x86_64-linux-gnu/14/crtbeginT.o -L/usr/lib/gcc/x86_64-linux-gnu/14 -L/usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu -L/usr/lib/gcc/x86_64-linux-gnu/14/../../../../lib -L/lib/x86_64-linux-gnu -L/lib/../lib -L/usr/lib/x86_64-linux-gnu -L/usr/lib/../lib -L/usr/lib/gcc/x86_64-linux-gnu/14/../../.. hello_arm.o --start-group -lgcc -lgcc_eh -lc --end-group /usr/lib/gcc/x86_64-linux-gnu/14/crtend.o /usr/lib/gcc/x86_64-linux-gnu/14/../../../x86_64-linux-gnu/crtn.o é™æ€ç¼–è¯‘ä¸åŠ¨æ€ç¼–è¯‘æ¯”è¾ƒ\né™æ€ é™æ€æ€ å¯è§ é™æ€ç¼–è¯‘è€—æ—¶æ›´ä¹…ï¼Œä¸”ç”Ÿæˆæ–‡ä»¶ä½“ç§¯æ›´å¤§\nMakefile # å¦‚ä½•å­¦ä¹ Makefile # Makefileçš„æœ¬è´¨ï¼š æ— è®ºå¤šä¹ˆå¤æ‚çš„çš„è¯­æ³•ï¼Œéƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„è§£å†³é¡¹ç›®æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚\nä¸‰è¦ç´  # ç›®æ ‡ã€ä¾èµ–ã€å‘½ä»¤ ç›®æ ‡:ä¾èµ–çš„æ–‡ä»¶æˆ–å…¶å®ƒç›®æ ‡ \u0026lt;tab\u0026gt;å‘½ä»¤1 \u0026lt;tab\u0026gt;å‘½ä»¤2 \u0026lt;tab\u0026gt;å‘½ä»¤\u0026hellip;\nvim Makefile targeta:targetb targetc echo \u0026#34;targeta\u0026#34; targetb: echo \u0026#34;targetb\u0026#34; targetc: echo \u0026#34;targetc\u0026#34; ä¿å­˜é€€å‡ºæ‰§è¡Œï¼š make è¾“å‡ºï¼š echo \u0026#34;targetb\u0026#34; targetb echo \u0026#34;targetc\u0026#34; targetc echo \u0026#34;targeta\u0026#34; targeta é€šè¿‡.PHONY: å¯ä»¥æŒ‡å®šä¼ªç›®æ ‡ï¼Œä¸éœ€è¦ç›®æ ‡æ–‡ä»¶å­˜åœ¨ï¼Œè€Œç›´æ¥æ‰§è¡Œç›®æ ‡å¯¹åº”çš„å‘½ä»¤\nå˜é‡ # ç³»ç»Ÿå˜é‡ # $(CC) $(AS) $(MAKE)\nè‡ªå®šä¹‰å˜é‡ # = ï¼Œ å»¶æ—¶èµ‹å€¼ ç›´åˆ°å¼•ç”¨è¿™ä¸ªå˜é‡æ—¶æ‰ä¼šèµ‹å€¼ := ï¼Œ ç«‹å³èµ‹å€¼ æ™®é€šå«ä¹‰çš„èµ‹å€¼ ?= , ç©ºèµ‹å€¼ å˜é‡ä¸ºç©ºèµ‹å€¼æ‰æœ‰æ•ˆ +=ï¼Œè¿½åŠ èµ‹å€¼ åœ¨åŸå€¼ååŠ å…¥æ–°çš„å€¼\nè‡ªåŠ¨åŒ–å˜é‡ # $\u0026lt; , ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶ $^ , å…¨éƒ¨çš„ä¾èµ–æ–‡ä»¶ $@ , ç›®æ ‡\næ¨¡å¼åŒ¹é… # %: åŒ¹é…ä»»æ„å¤šä¸ªéç©ºå­—ç¬¦ shell: * é€šé…ç¬¦\n.oåç¼€çš„ç›®æ ‡æ–‡ä»¶ä¾èµ–åŒåçš„.cæ–‡ä»¶ ä½¿ç”¨CCå˜é‡ï¼Œå³gccï¼Œç¼–è¯‘ï¼Œ$\u0026lt;ç¬¬ä¸€ä¸ªä¾èµ– $@ç›®æ ‡\n%.o:%.c $(CC) -c $\u0026lt; -o $@ é»˜è®¤è§„åˆ™ # .oæ–‡ä»¶é»˜è®¤ä½¿ç”¨.cæ–‡ä»¶ç¼–è¯‘\næ¡ä»¶åˆ†æ”¯ # ARCH ?= x86 ifeq ($(ARCH),x86) CC=gcc else CC=aarch64-linux-gnu-gcc-12 endif Linuxæ–‡ä»¶è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ # ä¸€åˆ‡çš†æ–‡ä»¶ # å±è”½ç¡¬ä»¶åŒºåˆ«ï¼Œæ‰€æœ‰ç¡¬ä»¶è®¾å¤‡æŠ½è±¡æˆæ–‡ä»¶ï¼Œæä¾›ç»Ÿä¸€æ¥å£ æŠ½è±¡å±‚ï¼Œå¯¹æ–‡ä»¶çš„è®¿é—®å®é™…æ˜¯å¯¹æŠ½è±¡å±‚çš„è®¿é—®\næŠ½è±¡å¯¹è±¡ï¼šå°è£…äº†åº•å±‚çš„è¯»å†™ç»†èŠ‚ï¼Œä½¿ç”¨å¤šæ€æ¥å®ç°å…·ä½“çš„æ–‡ä»¶ç³»ç»Ÿæ¥å£ æ™®é€šæ–‡ä»¶ç³»ç»Ÿ # ext4 fat32 ubifs ç‰¹æ®Šæ–‡ä»¶ç³»ç»Ÿ # è¿›ç¨‹æ–‡ä»¶ç³»ç»Ÿ:procfs,æŒ‚è½½åœ¨/proc,å­˜æ”¾è¿›ç¨‹ç›¸å…³ä¿¡æ¯,ä»»åŠ¡ç®¡ç†å™¨ è®¾å¤‡æ–‡ä»¶ç³»ç»Ÿ:devfs/,æŒ‚è½½åœ¨/dev.å­˜æ”¾ç¡¬ä»¶æ“ä½œæ¥å£ æ–‡ä»¶æè¿°ç¬¦å’Œæ‰“å¼€æ¨¡å¼ # ç³»ç»Ÿioç¼–ç¨‹ # open write read lseek close VFS-\u0026gt;file_operation\nint fd; fd = open(filename, flags, mode); lseek(fd,offset,whence); write(fd,buf,write_len); read(fd,buf,read_len); close(fd); æ–‡ä»¶æè¿°ç¬¦ # å®é™…å°±æ˜¯è¿›ç¨‹ä¸­file_structç»“æ„ä½“æˆå‘˜fd_arrayçš„æ•°ç»„ä¸‹æ ‡\nLinuxç³»ç»Ÿæ–‡ä»¶æ“ä½œï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ # open_close # #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/stat.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; int open(const char *pathname, int flags); // å½“æ–‡ä»¶æ“å­˜åœ¨æ—¶ int open(const char *pathname, int flags, mode_t mode); // å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶,æŒ‡å®šæ–‡ä»¶æƒé™ è¿”å›å€¼:\næˆåŠŸï¼šæ–‡ä»¶æè¿°ç¬¦ å¤±è´¥ï¼š-1 æ–‡ä»¶æ‰“å¼€æ¨¡å¼ # ä¸»æ¨¡å¼:\nO_RDONLY:åªè¯»æ¨¡å¼ O_WRONLY:åªå†™æ¨¡å¼ O_RDWR:è¯»å†™æ¨¡å¼ å‰¯æ¨¡å¼: O_CREATE:å½“æ–‡ä»¶ä¸å­˜åœ¨,éœ€è¦åˆ›å»ºæ–‡ä»¶ O_APPEND:è¿½åŠ æ¨¡å¼ O_DIRECT:ç›´æ¥IOæ¨¡å¼ O_SYNC:åŒæ­¥æ¨¡å¼ O_NoBLOCK:éé˜»å¡æ¨¡å¼ #include \u0026lt;unistd.h\u0026gt; int close(int fd); è¿”å›:\næˆåŠŸï¼š0 å¤±è´¥ï¼š-1 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/stat.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; int main() { int fd; fd = open(\u0026#34;./b.txt\u0026#34;, O_RDONLY|O_CREAT, 0666); if (fd \u0026lt; 0) { printf(\u0026#34;open error!!\\r\\n\u0026#34;); } printf(\u0026#34;fd:%d\\r\\n\u0026#34;,fd); close(fd); return 0; } read_writeå‡½æ•°çš„ä½¿ç”¨ # readå‡½æ•° # #include \u0026lt;unistd.h\u0026gt; ssize_t read(int fd, void *buf, size_t count); readå‡½æ•°ç”¨äºä»æ–‡ä»¶ä¸­è¯»å–è‹¥å¹²ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¿å­˜åˆ°æ•°æ®ç¼“å†²åŒºbufä¸­ï¼Œå¹¶è¿” å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ï¼Œå…·ä½“å‡½æ•°å‚æ•°å¦‚ä¸‹ï¼š\nfdï¼šæ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥é€šè¿‡fopenå‡½æ•°è·å¾—ã€‚å¦å¤–ï¼Œå½“ä¸€ä¸ªç¨‹åº è¿è¡Œæ—¶ï¼ŒLinuxé»˜è®¤æœ‰0ã€1ã€2è¿™ä¸‰ä¸ªå·²ç»æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œåˆ†åˆ«å¯¹åº”äº†æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯è¾“å‡ºï¼Œå³å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸‰ç§æ–‡ä»¶æè¿°ç¬¦ï¼› bufï¼šæŒ‡å‘æ•°æ®ç¼“å†²åŒºçš„æŒ‡é’ˆï¼› countï¼šè¯»å–å¤šå°‘ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚ è¿”å›å€¼ï¼š countï¼š æˆåŠŸè¯»å–å…¨éƒ¨ 0-count: å‰©ä½™æ–‡ä»¶é•¿åº¦å°äºcount è¯»å–æœŸé—´è¢«å¼‚æ­¥ä¿¡å·æ‰“æ–­ -1: å¤±è´¥ writeå‡½æ•° # #include \u0026lt;unistd.h\u0026gt; size_t write(int fd, const void *buf, size_t count); writeå‡½æ•°ç”¨äºå¾€æ–‡ä»¶å†™å…¥å†…å®¹ï¼Œå¹¶è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚é•¿åº¦ï¼Œå…·ä½“å‡½æ•°å‚æ•°å¦‚ä¸‹ï¼š\nfdï¼šæ–‡ä»¶å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯ä»¥é€šè¿‡fopenå‡½æ•°è·å¾—ã€‚ bufï¼šæŒ‡å‘æ•°æ®ç¼“å†²åŒºçš„æŒ‡é’ˆï¼› countï¼šå¾€æ–‡ä»¶ä¸­å†™å…¥å¤šå°‘ä¸ªå­—èŠ‚ã€‚ è¿”å›å€¼ï¼š countï¼š æˆåŠŸå†™å…¥å…¨éƒ¨ 0-count: å†™å…¥æœŸé—´è¢«å¼‚æ­¥ä¿¡å·æ‰“æ–­ -1: å¤±è´¥ lseek_sync # lseekå‡½æ•°å¯ä»¥ç”¨ä¸è®¾ç½®æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®ï¼Œå¹¶è¿”å›æ–‡ä»¶æŒ‡é’ˆç›¸å¯¹äºæ–‡ä»¶å¤´ çš„ä½ç½®ã€‚å…¶å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n# include\u0026lt;unistd.h\u0026gt; off_t lseek(int fd, off_t offset, int whence); å®ƒçš„ç”¨æ³•ä¸flseekä¸€æ ·ï¼Œå…¶ä¸­çš„offsetå‚æ•°ç”¨äºæŒ‡å®šä½ç½®ï¼Œwhenceå‚æ•°åˆ™å®šä¹‰äº†offsetçš„æ„ä¹‰ï¼Œwhenceçš„å¯å–å€¼å¦‚ä¸‹ï¼š\nSEEK_SETï¼šoffsetæ˜¯ä»¥æ–‡ä»¶å¼€å¤´ä¸ºå‚è€ƒç‚¹ã€‚ SEEK_ENDï¼šoffsetæ˜¯ä»¥æ–‡ä»¶å°¾ä¸ºå‚è€ƒç‚¹çš„ç›¸å¯¹ä½ç½®ã€‚ SEEK_CURï¼šoffsetæ˜¯ä»¥å½“å‰ä½ç½®ä¸ºå‚è€ƒç‚¹çš„ç›¸å¯¹ä½ç½®ã€‚ è¿”å›ï¼š æˆåŠŸï¼šæ–‡ä»¶åç§»å€¼ å¤±è´¥ï¼š-1 syncï¼šå¼ºåˆ¶æŠŠä¿®æ”¹åçš„é¡µç¼“å­˜åŒºæ•°æ®å†™å…¥ç£ç›˜ #include \u0026lt;unistd.h\u0026gt; void sync(void); è¿”å›:æ— \n#include \u0026lt;sys/types.h\u0026gt; #include \u0026lt;sys/stat.h\u0026gt; #include \u0026lt;fcntl.h\u0026gt; #include \u0026lt;unistd.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; int main() { int fd = open(\u0026#34;file\u0026#34;, O_RDWR|O_CREAT, 0666); write(fd, \u0026#34;123\u0026#34;, 3); lseek(fd, 100, SEEK_CUR); write(fd, \u0026#34;abc\u0026#34;, 3); sync(); close(fd); return 0; } IOæ–‡ä»¶æ ‡å‡†åº“ # æ ‡å‡†åº“å®é™…æ˜¯å¯¹ç³»ç»Ÿè°ƒç”¨å†æ¬¡è¿›è¡Œäº†å°è£…ã€‚ ä½¿ç”¨Cæ ‡å‡†åº“ç¼–å†™çš„ä»£ç ï¼Œèƒ½æ–¹ä¾¿åœ°åœ¨ä¸åŒçš„ç³»ç»Ÿä¸Šç§»æ¤ã€‚\nä¾‹å¦‚Windowsç³»ç»Ÿæ‰“å¼€æ–‡ä»¶æ“ä½œçš„ç³»ç»ŸAPIä¸ºOpenFileï¼ŒLinuxåˆ™ä¸ºopenï¼ŒCæ ‡å‡†åº“éƒ½æŠŠå®ƒä»¬å°è£…ä¸ºfopenï¼ŒWindowsä¸‹çš„Cåº“ä¼šé€šè¿‡fopenè°ƒç”¨OpenFileå‡½æ•°å®ç°æ“ä½œï¼Œè€ŒLinuxä¸‹åˆ™é€šè¿‡glibcè°ƒç”¨openæ‰“å¼€æ–‡ä»¶ã€‚ç”¨æˆ·ä»£ç å¦‚æœä½¿ç”¨fopenï¼Œé‚£ä¹ˆåªè¦æ ¹æ®ä¸åŒçš„ç³»ç»Ÿé‡ æ–°ç¼–è¯‘ç¨‹åºå³å¯ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹å¯¹åº”çš„ä»£ç ã€‚\n8.5.1.1.Â fopenå‡½æ•° # fopenåº“å‡½æ•°ç”¨äºæ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶ï¼Œè¿”å›ç›¸åº”çš„æ–‡ä»¶æµã€‚å®ƒçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; FILE *fopen(const char *pathname, const char *mode) pathnameå‚æ•°ç”¨äºæŒ‡å®šè¦æ‰“å¼€æˆ–åˆ›å»ºçš„æ–‡ä»¶åã€‚ modeå‚æ•°ç”¨äºæŒ‡å®šæ–‡ä»¶çš„æ‰“å¼€æ–¹å¼ï¼Œæ³¨æ„è¯¥å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¾“å…¥æ—¶éœ€è¦å¸¦åŒå¼•å·ï¼š â€œrâ€ï¼šä»¥åªè¯»æ–¹å¼æ‰“å¼€ï¼Œæ–‡ä»¶æŒ‡é’ˆä½äºæ–‡ä»¶çš„å¼€å¤´ã€‚ â€œr+â€ï¼šä»¥è¯»å’Œå†™çš„æ–¹å¼æ‰“å¼€ï¼Œæ–‡ä»¶æŒ‡é’ˆä½äºæ–‡ä»¶çš„å¼€å¤´ã€‚ â€œwâ€ï¼šä»¥å†™çš„æ–¹å¼æ‰“å¼€ï¼Œä¸ç®¡åŸæ–‡ä»¶æ˜¯å¦æœ‰å†…å®¹éƒ½æŠŠåŸå†…å®¹æ¸…ç©ºæ‰ï¼Œæ–‡ä»¶æŒ‡é’ˆä½äºæ–‡ä»¶çš„å¼€å¤´ã€‚ â€œw+â€ï¼š åŒä¸Šï¼Œä¸è¿‡å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ï¼Œå‰é¢çš„â€œwâ€æ¨¡å¼ä¼šè¿”å›é”™è¯¯ï¼Œè€Œæ­¤å¤„çš„â€œw+â€åˆ™ä¼šåˆ›å»ºæ–°æ–‡ä»¶ã€‚ â€œaâ€ï¼šä»¥è¿½åŠ å†…å®¹çš„æ–¹å¼æ‰“å¼€ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨ä¼šåˆ›å»ºæ–°æ–‡ä»¶ï¼Œæ–‡ä»¶æŒ‡é’ˆä½äºæ–‡ä»¶çš„æœ«å°¾ã€‚ä¸â€œw+â€çš„åŒºåˆ«æ˜¯å®ƒä¸ä¼šæ¸…ç©ºåŸæ–‡ä»¶çš„å†…å®¹è€Œæ˜¯è¿½åŠ ã€‚ â€œa+â€ï¼šä»¥è¯»å’Œè¿½åŠ çš„æ–¹å¼æ‰“å¼€ï¼Œå…¶å®ƒåŒä¸Šã€‚ fopençš„è¿”å›å€¼æ˜¯FILEç±»å‹çš„æ–‡ä»¶æ–‡ä»¶æµï¼Œå½“å®ƒçš„å€¼ä¸ä¸ºNULLæ—¶è¡¨ç¤ºæ­£å¸¸ï¼Œåç»­çš„freadã€fwriteç­‰å‡½æ•°å¯é€šè¿‡æ–‡ä»¶æµè®¿é—®å¯¹åº”çš„æ–‡ä»¶ã€‚ 8.5.1.2.Â freadå‡½æ•° # freadåº“å‡½æ•°ç”¨äºä»æ–‡ä»¶æµä¸­è¯»å–æ•°æ®ã€‚å®ƒçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream); streamæ˜¯ä½¿ç”¨fopenæ‰“å¼€çš„æ–‡ä»¶æµï¼Œfreadé€šè¿‡å®ƒæŒ‡å®šè¦è®¿é—®çš„æ–‡ä»¶ï¼Œå®ƒä»è¯¥æ–‡ä»¶ä¸­è¯»å–nmembé¡¹ æ•°æ®ï¼Œæ¯é¡¹çš„å¤§å°ä¸ºsizeï¼Œè¯»å–åˆ°çš„æ•°æ®ä¼šè¢«å­˜å‚¨åœ¨ptræŒ‡å‘çš„æ•°ç»„ä¸­ã€‚freadçš„è¿”å›å€¼ä¸ºæˆåŠŸè¯»å–çš„é¡¹æ•°ï¼ˆé¡¹çš„å•ä½ä¸ºsizeï¼‰ã€‚\n8.5.1.3.Â fwriteå‡½æ•° # fwriteåº“å‡½æ•°ç”¨äºæŠŠæ•°æ®å†™å…¥åˆ°æ–‡ä»¶æµã€‚å®ƒçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; size_t fwrite(void *ptr, size_t size, size_t nmemb, FILE *stream ); å®ƒçš„æ“ä½œä¸freadç›¸åï¼ŒæŠŠptræ•°ç»„ä¸­çš„å†…å®¹å†™å…¥åˆ°streamæ–‡ä»¶æµï¼Œå†™å…¥çš„é¡¹æ•°ä¸ºnmembï¼Œæ¯é¡¹ å¤§å°ä¸ºsizeï¼Œè¿”å›å€¼ä¸ºæˆåŠŸå†™å…¥çš„é¡¹æ•°ï¼ˆé¡¹çš„å•ä½ä¸ºsizeï¼‰ã€‚\n8.5.1.4.Â fcloseå‡½æ•° # fcloseåº“å‡½æ•°ç”¨äºå…³é—­æŒ‡å®šçš„æ–‡ä»¶æµï¼Œå…³é—­æ—¶å®ƒä¼šæŠŠå°šæœªå†™åˆ°æ–‡ä»¶çš„å†…å®¹éƒ½å†™å‡ºã€‚å› ä¸ºæ ‡å‡† åº“ä¼šå¯¹æ•°æ®è¿›è¡Œç¼“å†²ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨fcloseæ¥ç¡®ä¿æ•°æ®è¢«å†™å‡ºã€‚å®ƒçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;unistd.h\u0026gt; int close(int fd); 8.5.1.5.Â fflushå‡½æ•° # fflushå‡½æ•°ç”¨äºæŠŠå°šæœªå†™åˆ°æ–‡ä»¶çš„å†…å®¹ç«‹å³å†™å‡ºã€‚å¸¸ç”¨äºç¡®ä¿å‰é¢æ“ä½œçš„æ•°æ®è¢«å†™ å…¥åˆ°ç£ç›˜ä¸Šã€‚fcloseå‡½æ•°æœ¬èº«ä¹ŸåŒ…å«äº†fflushçš„æ“ä½œã€‚fflushçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; int fflush(FILE *stream); 8.5.1.6.Â fseekå‡½æ•° # fseekå‡½æ•°ç”¨äºè®¾ç½®ä¸‹ä¸€æ¬¡è¯»å†™å‡½æ•°æ“ä½œçš„ä½ç½®ã€‚å®ƒçš„å‡½æ•°åŸå‹å¦‚ä¸‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; int fseek(FILE *stream, long offset, int whence); å…¶ä¸­çš„offsetå‚æ•°ç”¨äºæŒ‡å®šä½ç½®ï¼Œwhenceå‚æ•°åˆ™å®šä¹‰äº†offsetçš„æ„ä¹‰ï¼Œwhenceçš„å¯å–å€¼å¦‚ä¸‹ï¼š\nSEEK_SETï¼šoffsetæ˜¯ä¸€ä¸ªç»å¯¹ä½ç½®ã€‚ SEEK_ENDï¼šoffsetæ˜¯ä»¥æ–‡ä»¶å°¾ä¸ºå‚è€ƒç‚¹çš„ç›¸å¯¹ä½ç½®ã€‚ SEEK_CURï¼šoffsetæ˜¯ä»¥å½“å‰ä½ç½®ä¸ºå‚è€ƒç‚¹çš„ç›¸å¯¹ä½ç½®ã€‚ è¡¨ fopençš„modeä¸opençš„flagså‚æ•°å…³ç³»\nfopençš„modeå‚æ•° opençš„flagså‚æ•° r O_RDONLY w O_WRONLY | O_CREAT | O_TRUNC a O_WRONLY | O_CREAT | O_APPEND r+ O_RDWR w+ O_RDWR | O_CREAT | O_TRUNC a+ O_RDWR | O_CREAT | O_APPEND modeï¼šå½“openå‡½æ•°çš„flagå€¼è®¾ç½®ä¸ºO_CREATæ—¶ï¼Œå¿…é¡»ä½¿ç”¨modeå‚æ•°æ¥è®¾ç½®æ–‡ä»¶ ä¸ç”¨æˆ·ç›¸å…³çš„æƒé™ã€‚modeå¯ç”¨çš„æƒé™å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œè¡¨ä¸­å„ä¸ªå‚æ•°å¯ä½¿ç”¨â€œ| â€æ¥ç»„ åˆã€‚ ","date":"2025-07-17","externalUrl":null,"permalink":"/posts/learn-linux-arm-day1/","section":"Posts","summary":"","title":"learn-linux-arm-day1","type":"posts"},{"content":" NFS é…ç½®è®°å½•ï¼šä¸ºåµŒå…¥å¼å¼€å‘æ­å»ºå…±äº«ç¯å¢ƒ # æœ¬ç¯‡ç¬”è®°è¯¦ç»†è®°å½•äº†åœ¨ Linux ç¯å¢ƒï¼ˆä»¥ WSL2 ä¸ºä¾‹ï¼‰ä¸‹æ­å»º NFS æœåŠ¡å™¨ï¼Œå¹¶ä»ä¸€ä¸ªåµŒå…¥å¼ Linux å¼€å‘æ¿ï¼ˆä»¥ lubancat ä¸ºä¾‹ï¼‰æŒ‚è½½ NFS å…±äº«çš„è¿‡ç¨‹ï¼Œè®°å½•äº†é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚\nç¯å¢ƒæ¦‚è§ˆ # å®¿ä¸»æœºï¼š Windows 10 å®¿ä¸»æœºç½‘ç»œï¼š æ ¡å›­ç½‘ï¼ŒNAT æ¨¡å¼ï¼Œå®¿ä¸»æœº IPï¼š10.101.8.47 WSL2 ç¯å¢ƒï¼š Debian å®¢æˆ·ç«¯è®¾å¤‡ï¼š åµŒå…¥å¼å¼€å‘æ¿ (lubancat) å®¢æˆ·ç«¯ç½‘ç»œï¼š æ ¡å›­ç½‘ï¼Œä½äºä¸åŒå­ç½‘ï¼ŒIPï¼š10.103.6.37 æ­å»ºæ­¥éª¤ # ä¸€ã€ WSL2 (Ubuntu) ä½œä¸º NFS æœåŠ¡å™¨ç«¯é…ç½® # å®‰è£… NFS æœåŠ¡æ‰€éœ€è½¯ä»¶åŒ…ï¼š\nsudo apt update sudo apt install nfs-kernel-server nfs-common nfs-kernel-server: æä¾› NFS æœåŠ¡æ ¸å¿ƒåŠŸèƒ½ã€‚ nfs-common: æä¾› NFS å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ showmountï¼‰å’Œä¸€äº›è¾…åŠ©åº“ã€‚ åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼š åœ¨ WSL2 çš„ Linux æ–‡ä»¶ç³»ç»Ÿå†…åˆ›å»ºç›®å½•ã€‚\nsudo mkdir -p /mnt/nfs_share sudo chmod 777 /mnt/nfs_share chmod 777 æä¾›æœ€å®½æ¾çš„æƒé™ï¼Œæ–¹ä¾¿è°ƒè¯•ã€‚åç»­å¯æ ¹æ®å®‰å…¨éœ€æ±‚è°ƒæ•´ã€‚ é…ç½® /etc/exports æ–‡ä»¶ï¼š æ­¤æ–‡ä»¶å®šä¹‰äº†å“ªäº›ç›®å½•è¢«å¯¼å‡ºä»¥åŠå…è®¸è®¿é—®çš„å®¢æˆ·ç«¯ã€‚\nç¼–è¾‘æ–‡ä»¶ï¼š sudo nano /etc/exports æ·»åŠ ä»¥ä¸‹è¡Œï¼š /mnt/nfs_share 172.26.144.0/20(rw,sync,no_root_squash,insecure,no_subtree_check) é€‰é¡¹è§£æï¼š /mnt/nfs_share: å…±äº«çš„ç›®å½•ã€‚ 172.26.144.0/20: å…è®¸è®¿é—®çš„å®¢æˆ·ç«¯ IP åœ°å€èŒƒå›´ã€‚é€šè¿‡ tcpdump åˆ†æï¼ŒWSL ç½‘ç»œé€‚é…å™¨åœ¨å®¿ä¸»æœºä¸Šè¡¨ç°ä¸º 172.26.144.x ç½‘æ®µï¼Œè¿™æ˜¯æœåŠ¡å™¨è¯†åˆ«åˆ°çš„å®¢æˆ·ç«¯æº IP æ®µã€‚ rw: å…è®¸è¯»å†™ã€‚ sync: ç¡®ä¿æ‰€æœ‰å†™å…¥æ“ä½œç«‹å³åŒæ­¥åˆ°ç£ç›˜ã€‚ no_root_squash: å…è®¸å®¢æˆ·ç«¯çš„ root ç”¨æˆ·ä»¥æœåŠ¡å™¨ä¸Šçš„ root èº«ä»½è®¿é—®ã€‚ insecure: æ ¸å¿ƒé…ç½®ï¼ å…è®¸æ¥è‡ªéç‰¹æƒç«¯å£ï¼ˆå¤§äº 1024ï¼‰çš„å®¢æˆ·ç«¯è¿æ¥è¯·æ±‚ï¼Œè§£å†³äº† rpc.mountd çš„ \u0026ldquo;illegal port\u0026rdquo; é”™è¯¯ã€‚ no_subtree_check: å…³é—­å­ç›®å½•æƒé™æ£€æŸ¥ï¼Œæå‡æ€§èƒ½ã€‚ åº”ç”¨ /etc/exports æ›´æ”¹å¹¶é‡å¯æœåŠ¡ï¼š\nsudo exportfs -ra sudo systemctl restart nfs-kernel-server sudo systemctl status nfs-kernel-server # ç¡®è®¤æœåŠ¡æ­£å¸¸è¿è¡Œ exportfs -ra: é‡æ–°è¯»å–æ‰€æœ‰å¯¼å‡ºé…ç½®å¹¶åº”ç”¨ã€‚ systemctl restart nfs-kernel-server: é‡å¯ NFS æœåŠ¡ä»¥åŠ è½½æ‰€æœ‰æ›´æ”¹ã€‚ ï¼ˆå¯é€‰ä½†æ¨èï¼‰å›ºå®š NFS ç›¸å…³æœåŠ¡ç«¯å£ï¼š ä¸ºäº†ç¡®ä¿ç«¯å£è½¬å‘ç¨³å®šï¼Œå›ºå®š NFS çš„ä¸€äº›å…³é”® RPC æœåŠ¡ç«¯å£æ˜¯ä¸ªå¥½åšæ³•ã€‚\nç¡®è®¤ /etc/default/nfs-kernel-server æˆ– /etc/sysconfig/nfs ä¸­çš„é…ç½®ï¼Œè®¾ç½® RPCMOUNTDOPTSã€STATDOPTS ç­‰ä¸ºå›ºå®šç«¯å£ï¼ˆä¾‹å¦‚ï¼šmountd: 20048, statd: 32765ï¼‰ã€‚ ç¡®ä¿ /etc/modprobe.d/nfsd.conf æ–‡ä»¶åŒ…å« options nfsd nfsd_tcp_port=2049 nfsd_udp_port=2049ã€‚ ç„¶åé‡å¯ NFS æœåŠ¡ã€‚ äºŒã€ Windows å®¿ä¸»æœºç½‘ç»œé…ç½® # è·å– WSL2 çš„åŠ¨æ€ IPï¼š WSL2 çš„ IP å¯èƒ½åœ¨é‡å¯åæ”¹å˜ï¼Œéœ€è¦è„šæœ¬åŠ¨æ€è·å–ã€‚\n$wslIp = (wsl.exe hostname -I | Select-Object -First 1).Trim() é…ç½®ç«¯å£è½¬å‘è§„åˆ™ (TCP)ï¼š ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ PowerShellã€‚å°†å®¿ä¸»æœºç›‘å¬çš„ NFS TCP ç«¯å£æµé‡è½¬å‘åˆ° WSL2 çš„å¯¹åº” IP å’Œç«¯å£ã€‚\n$nfsTcpPorts = @(111, 2049, 20048, 32765, 32803) # NFS æ‰€éœ€çš„å…³é”® TCP ç«¯å£ foreach ($port in $nfsTcpPorts) { # æ¸…ç†æ—§è§„åˆ™ä»¥é¿å…å†²çª netsh interface portproxy delete v4tov4 listenport=$port listenaddress=0.0.0.0 | Out-Null # æ·»åŠ æ–°è§„åˆ™ netsh interface portproxy add v4tov4 listenport=$port connectaddress=$wslIp connectport=$port listenaddress=0.0.0.0 } é…ç½® Windows é˜²ç«å¢™è§„åˆ™ï¼š ç¡®ä¿å…¥ç«™ TCP è¿æ¥èƒ½å¤Ÿé€šè¿‡é˜²ç«å¢™ã€‚\nforeach ($port in $nfsTcpPorts) { $ruleName = \u0026#34;WSL NFS Port $port (TCP)\u0026#34; # æ¸…ç†æ—§è§„åˆ™ Remove-NetFirewallRule -DisplayName $ruleName -ErrorAction SilentlyContinue | Out-Null # æ·»åŠ æ–°è§„åˆ™ New-NetFirewallRule -DisplayName $ruleName -Direction Inbound -Action Allow -Protocol TCP -LocalPort $port } é‡è¦æç¤ºï¼š ä»¥ä¸Š PowerShell å‘½ä»¤å¿…é¡»åœ¨ â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ çš„ PowerShell çª—å£ä¸­æ‰§è¡Œã€‚\nä¸‰ã€ åµŒå…¥å¼å¼€å‘æ¿ (lubancat) å®¢æˆ·ç«¯é…ç½® # ç¡®è®¤ç½‘ç»œäº’é€šæ€§ï¼š\nä» lubancat Ping Windows å®¿ä¸»æœº IP (10.101.8.47)ï¼Œç¡®ä¿ç½‘ç»œå±‚å¯è¾¾ã€‚ å¦‚æœ Ping ä¸é€šï¼Œéœ€è¦æ£€æŸ¥å®¿ä¸»æœºé˜²ç«å¢™çš„ ICMP è§„åˆ™ï¼Œæˆ–æ ¡å›­ç½‘çš„ç½‘ç»œç­–ç•¥ã€‚ åˆ›å»ºæŒ‚è½½ç‚¹ï¼š åœ¨å¼€å‘æ¿ä¸Šä¸ºæŒ‚è½½ NFS å…±äº«åˆ›å»ºç›®å½•ã€‚\nsudo mkdir -p /mnt/nfs æ‰§è¡Œ NFS æŒ‚è½½å‘½ä»¤ï¼š ä½¿ç”¨å®¢æˆ·ç«¯çš„çœŸå® IP (10.103.6.37)ï¼Œä½†æŒ‡å®šå®¿ä¸»æœºçš„ IP (10.101.8.47) æ¥è¿æ¥ NFS æœåŠ¡å™¨ã€‚\nsudo mount -t nfs -o vers=4,proto=tcp,mountproto=tcp,nolock,insecure 10.101.8.47:/mnt/nfs_share /mnt/nfs/ å…³é”®é€‰é¡¹ insecure å…è®¸äº†æ¥è‡ªéç‰¹æƒç«¯å£çš„è¿æ¥ï¼Œè§£å†³äº† rpc.mountd æ‹’ç»é—®é¢˜ã€‚ é‡åˆ°çš„é—®é¢˜ä¸è§£å†³ # mount.nfs: access denied by serverï¼š åŸå› ï¼š NFS æœåŠ¡å™¨ rpc.mountd æ‹’ç»äº†æ¥è‡ªéç‰¹æƒç«¯å£çš„æŒ‚è½½è¯·æ±‚ï¼ˆillegal portï¼‰ã€‚ æ ¹æºåˆ†æï¼š WSL çš„ç½‘ç»œè½¬æ¢å¯¼è‡´ NFS æœåŠ¡å™¨çœ‹åˆ°çš„å®¢æˆ·ç«¯æº IP æ˜¯å®¿ä¸»æœºåœ¨ WSL å†…ç½‘çš„ IP (172.26.144.1)ï¼Œä¸”è¯¥è¿æ¥ä½¿ç”¨äº†éç‰¹æƒç«¯å£ã€‚ è§£å†³æ–¹æ¡ˆï¼š åœ¨ WSL çš„ /etc/exports æ–‡ä»¶ä¸­ä¸º 172.26.144.0/20 æ·»åŠ  insecure é€‰é¡¹ã€‚ ","date":"2025-07-17","externalUrl":null,"permalink":"/posts/nfs-%E9%85%8D%E7%BD%AE%E8%AE%B0%E5%BD%95%E4%B8%BA%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%BC%80%E5%8F%91%E6%90%AD%E5%BB%BA%E5%85%B1%E4%BA%AB%E7%8E%AF%E5%A2%83/","section":"Posts","summary":"","title":"NFS é…ç½®è®°å½•ï¼šä¸ºåµŒå…¥å¼å¼€å‘æ­å»ºå…±äº«ç¯å¢ƒ","type":"posts"},{"content":" Git å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥è¡¨ # è¿™ä»½é€ŸæŸ¥è¡¨æ—¨åœ¨å¸®åŠ©æ‚¨å¿«é€Ÿå›é¡¾å’ŒæŸ¥æ‰¾ Git çš„å¸¸ç”¨å‘½ä»¤ã€‚æŒæ¡å®ƒä»¬æ˜¯é«˜æ•ˆåä½œå’Œç®¡ç†ä»£ç çš„åŸºç¡€ã€‚\nåˆ†ç±» å‘½ä»¤ å¸¸ç”¨é€‰é¡¹ / ç¤ºä¾‹ ç”¨é€” å¤‡æ³¨ I. åˆå§‹åŒ–ä¸å…‹éš† git init åœ¨å½“å‰ç›®å½•åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Git ä»“åº“ã€‚ å¼€å§‹ä¸€ä¸ªæ–°é¡¹ç›®æ—¶ä½¿ç”¨ã€‚ git clone \u0026lt;URL\u0026gt; git clone https://github.com/user/repo.git ä»è¿œç¨‹ä»“åº“å…‹éš†ä¸€ä»½å‰¯æœ¬åˆ°æœ¬åœ°ã€‚ åŠ å…¥ç°æœ‰é¡¹ç›®æˆ–è·å–å¼€æºé¡¹ç›®ä»£ç æ—¶ä½¿ç”¨ã€‚ II. æŸ¥è¯¢ä¸æŸ¥çœ‹ git status æŸ¥çœ‹å·¥ä½œåŒºã€æš‚å­˜åŒºçš„çŠ¶æ€ï¼Œæ˜¾ç¤ºæ–‡ä»¶æ›´æ”¹ã€æš‚å­˜ã€æœªè·Ÿè¸ªç­‰ä¿¡æ¯ã€‚ æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼Œç”¨äºäº†è§£å½“å‰ä»“åº“çŠ¶æ€ã€‚ git diff git diff æ¯”è¾ƒå·¥ä½œåŒºä¸æš‚å­˜åŒºå·®å¼‚ï¼ˆå³æœªæš‚å­˜çš„æ›´æ”¹ï¼‰ã€‚ æŸ¥çœ‹å°šæœª git add çš„ä¿®æ”¹ã€‚ git diff --staged git diff --staged æ¯”è¾ƒæš‚å­˜åŒºä¸æœ€æ–°æäº¤çš„å·®å¼‚ã€‚ æŸ¥çœ‹å·²æš‚å­˜ä½†å°šæœª git commit çš„æ›´æ”¹ã€‚ git log git log --oneline --graph --decorate æŸ¥çœ‹æäº¤å†å²ã€‚\nâ€¢ --oneline: ç®€æ´å•è¡Œã€‚\nâ€¢ --graph: å›¾å½¢åŒ–å†å²ã€‚\nâ€¢ --decorate: æ˜¾ç¤ºåˆ†æ”¯/æ ‡ç­¾ã€‚ å¼ºå¤§çš„å†å²æŸ¥çœ‹å·¥å…·ï¼Œå¸®åŠ©ç†è§£é¡¹ç›®æ¼”è¿›ã€‚ git branch git branch -a â€¢ git branch: åˆ—å‡ºæœ¬åœ°åˆ†æ”¯ã€‚\nâ€¢ -r: åˆ—å‡ºè¿œç¨‹åˆ†æ”¯ã€‚\nâ€¢ -a: åˆ—å‡ºæ‰€æœ‰æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯ã€‚ ç”¨äºæŸ¥çœ‹åˆ†æ”¯ä¿¡æ¯ã€‚ git reflog æŸ¥çœ‹æœ¬åœ°ä»“åº“ HEAD å’Œå…¶ä»–å¼•ç”¨çš„ç§»åŠ¨å†å²ã€‚ æåº¦é‡è¦çš„â€œæ—¶å…‰æœºâ€ï¼Œç”¨äºæ¢å¤è¯¯æ“ä½œï¼Œå¦‚è¯¯åˆ åˆ†æ”¯ã€è¯¯ reset ç­‰ã€‚ git show \u0026lt;commit-id\u0026gt; git show HEAD / git show abcdefg æ˜¾ç¤ºæŸä¸ªæäº¤çš„è¯¦ç»†ä¿¡æ¯ï¼ˆæäº¤ä¿¡æ¯ã€ä½œè€…ã€æ—¥æœŸå’Œå†…å®¹å·®å¼‚ï¼‰ã€‚ ç”¨äºæŸ¥çœ‹ç‰¹å®šæäº¤çš„å…·ä½“å†…å®¹ã€‚ III. æ·»åŠ ä¸æäº¤ git add \u0026lt;file(s)\u0026gt; git add . / git add index.js å°†æ–‡ä»¶æ›´æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºï¼ˆStaging Areaï¼‰ã€‚ git add . å¸¸ç”¨ï¼Œç”¨äºæ·»åŠ æ‰€æœ‰å·²ä¿®æ”¹å’Œæ–°å¢çš„æ–‡ä»¶ã€‚ git commit -m \u0026quot;Message\u0026quot; git commit -m \u0026quot;feat: Add user login\u0026quot; å°†æš‚å­˜åŒºçš„æ›´æ”¹æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ã€‚ æ ¸å¿ƒæäº¤å‘½ä»¤ï¼Œå°†å·¥ä½œåŒºå¿«ç…§ä¿å­˜åˆ°ç‰ˆæœ¬å†å²ã€‚ git commit --amend git commit --amend ä¿®æ”¹ä¸Šä¸€æ¬¡æäº¤ï¼ˆå¯ä¿®æ”¹æäº¤ä¿¡æ¯æˆ–å¢è¡¥æ–‡ä»¶ï¼‰ã€‚ æ³¨æ„ï¼š ä¸å»ºè®®åœ¨å·²æ¨é€çš„æäº¤ä¸Šä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šæ”¹å†™å†å²ã€‚ IV. åˆ†æ”¯ç®¡ç† git checkout \u0026lt;branch-name\u0026gt; git checkout dev åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ã€‚ è¾ƒè€ç‰ˆæœ¬ Git å¸¸ç”¨ çš„åˆ‡æ¢åˆ†æ”¯å‘½ä»¤ã€‚ git checkout -b \u0026lt;new-branch-name\u0026gt; git checkout -b feature/auth åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ã€‚ å¿«é€Ÿåˆ›å»ºæ–°åˆ†æ”¯å¹¶å¼€å§‹å·¥ä½œã€‚ git switch \u0026lt;branch-name\u0026gt; git switch main (Git 2.23+) åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ã€‚ æ¨èæ›¿ä»£ git checkout çš„åˆ‡æ¢åˆ†æ”¯åŠŸèƒ½ï¼Œè¯­ä¹‰æ›´æ¸…æ™°ã€‚ git switch -c \u0026lt;new-branch-name\u0026gt; git switch -c hotfix/bug-fix (Git 2.23+) åˆ›å»ºå¹¶åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ã€‚ æ¨èæ›¿ä»£ git checkout -bã€‚ git merge \u0026lt;branch-to-merge\u0026gt; git merge feature/X å°†æŒ‡å®šåˆ†æ”¯çš„æ›´æ”¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚ æœ€å¸¸è§çš„åˆå¹¶æ–¹å¼ï¼Œé€šå¸¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„åˆå¹¶æäº¤ï¼ˆMerge Commitï¼‰ï¼Œé™¤éæ˜¯å¿«è¿›åˆå¹¶ï¼ˆFast-Forwardï¼‰ã€‚ git rebase \u0026lt;base-branch\u0026gt; git rebase main å°†å½“å‰åˆ†æ”¯çš„æäº¤é‡æ”¾åˆ°å¦ä¸€åˆ†æ”¯çš„æœ€æ–°æäº¤ä¹‹åã€‚ ä¿æŒçº¿æ€§çš„æäº¤å†å²ï¼Œé¿å…å¤šä½™çš„åˆå¹¶æäº¤ã€‚\néå¸¸é‡è¦ï¼š ä¸è¦å¯¹å·²æ¨é€çš„å…¬å…±åˆ†æ”¯ä½¿ç”¨ git rebaseï¼Œå› ä¸ºå®ƒä¼šæ”¹å†™å†å²ï¼Œå¯èƒ½å¯¼è‡´å›¢é˜Ÿåä½œé—®é¢˜ã€‚ git branch -d \u0026lt;branch-name\u0026gt; git branch -d old-feature åˆ é™¤å·²åˆå¹¶çš„æœ¬åœ°åˆ†æ”¯ã€‚ æ¸…ç†ä¸å†ä½¿ç”¨çš„æœ¬åœ°åˆ†æ”¯ã€‚ git branch -D \u0026lt;branch-name\u0026gt; git branch -D temp-branch å¼ºåˆ¶åˆ é™¤æœ¬åœ°åˆ†æ”¯ï¼ˆå³ä½¿è¯¥åˆ†æ”¯çš„æ›´æ”¹å°šæœªåˆå¹¶ï¼‰ã€‚ æ…ç”¨ï¼ ä¼šä¸¢å¤±æœªåˆå¹¶çš„å·¥ä½œã€‚ V. è¿œç¨‹æ“ä½œ git remote -v åˆ—å‡ºæ‰€æœ‰è¿œç¨‹ä»“åº“çš„çŸ­åç§°åŠå…¶ URLã€‚ æŸ¥çœ‹è¿œç¨‹ä»“åº“é…ç½®ã€‚ git fetch \u0026lt;remote\u0026gt; git fetch origin ä»è¿œç¨‹ä»“åº“ä¸‹è½½æœ€æ–°ä¿¡æ¯ï¼ˆæäº¤ã€åˆ†æ”¯ï¼‰ï¼Œä½†ä¸è‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°åˆ†æ”¯ã€‚ ä»…æ›´æ–°æœ¬åœ°çš„è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯ï¼ˆå¦‚ origin/mainï¼‰ï¼Œä¸æ”¹å˜å·¥ä½œåŒºæˆ–æœ¬åœ°åˆ†æ”¯å†…å®¹ã€‚ git pull \u0026lt;remote\u0026gt; \u0026lt;branch\u0026gt; git pull origin main ä»è¿œç¨‹ä»“åº“æ‹‰å–å¹¶é›†æˆæœ€æ–°æ›´æ”¹ï¼ˆç›¸å½“äº git fetch åè·Ÿ git merge æˆ– git rebaseï¼‰ã€‚ è·å–æœ€æ–°ä»£ç å¹¶åŒæ­¥åˆ°æœ¬åœ°ã€‚é»˜è®¤è¡Œä¸ºé€šå¸¸æ˜¯ mergeï¼Œå¯é€šè¿‡é…ç½®æ”¹ä¸º rebaseã€‚ git push \u0026lt;remote\u0026gt; \u0026lt;branch\u0026gt; git push origin main å°†æœ¬åœ°åˆ†æ”¯çš„æäº¤æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ å°†æœ¬åœ°å·¥ä½œåˆ†äº«ç»™å›¢é˜Ÿã€‚ git push -u \u0026lt;remote\u0026gt; \u0026lt;branch\u0026gt; git push -u origin feature/new é¦–æ¬¡æ¨é€æ–°åˆ†æ”¯æ—¶ï¼Œè®¾ç½®ä¸Šæ¸¸ï¼ˆupstreamï¼‰è·Ÿè¸ªåˆ†æ”¯ï¼Œä¹‹åå¯ç›´æ¥ä½¿ç”¨ git pushã€‚ ç®€åŒ–åç»­æ¨é€æ“ä½œï¼Œæ— éœ€æ¯æ¬¡æŒ‡å®š remote å’Œ branchã€‚ git push --force / git push --force-with-lease git push --force origin hotfix å¼ºåˆ¶æ¨é€ï¼Œè¦†ç›–è¿œç¨‹å†å²ã€‚ æåº¦å±é™©ï¼Œä»…åœ¨æ˜ç¡®çŸ¥æ™“åæœä¸”å¿…è¦æ—¶ä½¿ç”¨ã€‚ ä¼šè¦†ç›–è¿œç¨‹åˆ†æ”¯å†å²ã€‚\n--force-with-lease æ›´å®‰å…¨ï¼Œå®ƒä¼šæ£€æŸ¥è¿œç¨‹åˆ†æ”¯æ˜¯å¦åœ¨æœ¬åœ°æ›´æ–°åè¢«ä»–äººæ”¹åŠ¨è¿‡ï¼Œé¿å…è¦†ç›–ä»–äººçš„æ–°æäº¤ã€‚ VI. æ’¤é”€æ“ä½œ git restore \u0026lt;file-path\u0026gt; git restore index.html (Git 2.23+) æ¢å¤å·¥ä½œåŒºä¸­æ–‡ä»¶çš„æ›´æ”¹ï¼Œä½¿å…¶ä¸æš‚å­˜åŒºæˆ–æœ€æ–°æäº¤çš„çŠ¶æ€ä¸€è‡´ã€‚ æ¨èæ›¿ä»£ git checkout -- \u0026lt;file\u0026gt;ã€‚ git restore --staged \u0026lt;file-path\u0026gt; git restore --staged README.md (Git 2.23+) å°†æ–‡ä»¶ä»æš‚å­˜åŒºä¸­å–æ¶ˆæš‚å­˜ï¼Œä½†ä¿ç•™å·¥ä½œåŒºçš„æ›´æ”¹ã€‚ æ¨èæ›¿ä»£ git reset HEAD \u0026lt;file\u0026gt;ã€‚ git reset [options] [commit-id] git reset --soft HEAD~1 ç§»åŠ¨ HEAD æŒ‡é’ˆï¼Œå¹¶å¯é€‰åœ°é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œç”¨äºæ’¤é”€æœ¬åœ°æäº¤ã€‚ â€¢ --soft: ç§»åŠ¨ HEADï¼Œä¿ç•™æš‚å­˜åŒºå’Œå·¥ä½œåŒºã€‚\nâ€¢ --mixed(é»˜è®¤): ç§»åŠ¨ HEADï¼Œæ¸…ç©ºæš‚å­˜åŒºï¼Œä¿ç•™å·¥ä½œåŒºã€‚\nâ€¢ --hard: ç§»åŠ¨ HEADï¼Œæ¸…ç©ºæš‚å­˜åŒºï¼Œä¸¢å¼ƒå·¥ä½œåŒºæ‰€æœ‰æ›´æ”¹ã€‚ æ…ç”¨ï¼ ä¸å»ºè®®å¯¹å·²æ¨é€çš„æäº¤ä½¿ç”¨ã€‚ git revert \u0026lt;commit-id\u0026gt; git revert abcdefg åˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤æ¥æ’¤é”€æŒ‡å®šæäº¤æ‰€åšçš„æ›´æ”¹ï¼Œä¿ç•™å†å²è®°å½•ã€‚ æœ€å®‰å…¨çš„æ’¤é”€å·²å…±äº«å†å²çš„æ–¹æ³•ï¼Œå› ä¸ºå®ƒä¸ä¼šæ”¹å†™å†å²ï¼Œè€Œæ˜¯é€šè¿‡åå‘æäº¤æ¥æŠµæ¶ˆä¹‹å‰çš„ä¿®æ”¹ã€‚ ","date":"2025-07-01","externalUrl":null,"permalink":"/posts/git-3-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/","section":"Posts","summary":"","title":"git-3-å¸¸ç”¨å‘½ä»¤","type":"posts"},{"content":"","date":"2025-06-24","externalUrl":null,"permalink":"/category/%E5%85%AB%E8%82%A1/","section":"Category","summary":"","title":"å…«è‚¡","type":"category"},{"content":" 1. æ¦‚è¿° # é€šä¿¡æ–¹å¼ è¯´æ˜ ç¤ºä¾‹ å…¨åŒå·¥ (Full-duplex) åŒä¸€æ—¶åˆ»ï¼Œæ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸ŠåŒæ—¶ä¼ è¾“ã€‚ ç”µè¯ã€ä»¥å¤ªç½‘ åŠåŒå·¥ (Half-duplex) æ•°æ®å¯ä»¥åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šä¼ è¾“ï¼Œä½†åŒä¸€æ—¶åˆ»åªèƒ½åœ¨ä¸€ä¸ªæ–¹å‘ä¸Šä¼ è¾“ã€‚ å¯¹è®²æœºã€RS485 (ä¸¤çº¿åˆ¶) å•å·¥ (Simplex) æ•°æ®åªèƒ½åœ¨ä¸€ä¸ªå›ºå®šçš„æ–¹å‘ä¸Šä¼ è¾“ã€‚ å¹¿æ’­ã€ç”µè§† å®šæ—¶æ–¹å¼ è¯´æ˜ ç¤ºä¾‹ åŒæ­¥ (Synchronous) é€šä¿¡åŒæ–¹ä½¿ç”¨åŒä¸€æ ¹æ—¶é’Ÿä¿¡å·çº¿æ¥åè°ƒæ•°æ®ä¼ è¾“ã€‚å‘é€æ–¹åœ¨æ—¶é’Ÿä¿¡å·çš„ç‰¹å®šè¾¹æ²¿å‘é€æ•°æ®ï¼Œæ¥æ”¶æ–¹åœ¨ç›¸åŒè¾¹æ²¿æ¥æ”¶æ•°æ®ã€‚ I2C, SPI å¼‚æ­¥ (Asynchronous) é€šä¿¡åŒæ–¹æ²¡æœ‰å…±ç”¨çš„æ—¶é’Ÿçº¿ï¼Œè€Œæ˜¯é€šè¿‡æ•°æ®å¸§ä¸­çš„èµ·å§‹ä½å’Œåœæ­¢ä½æ¥å®ç°åŒæ­¥ã€‚åŒæ–¹éœ€è¦é¢„å…ˆçº¦å®šå¥½ç›¸åŒçš„æ³¢ç‰¹ç‡ã€‚ UART (ä¸²å£) 2. å„ç§é€šè®¯åè®® # 2.1 ä¸²å£é€šä¿¡åè®® (UART) # ç‰©ç†å±‚ç”µå¹³æ ‡å‡†å¯¹æ¯”ï¼š\nåè®® ç‰¹ç‚¹ ç”µå¹³æ ‡å‡† (é€»è¾‘) é€šä¿¡æ–¹å¼ åº”ç”¨åœºæ™¯ TTL å¾®æ§åˆ¶å™¨å¸¸ç”¨çš„ç”µå¹³æ ‡å‡†ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼±ï¼Œä¼ è¾“è·ç¦»çŸ­ã€‚ 1: 2V ~ 5V\n0: 0V ~ 0.8V å…¨åŒå·¥ æ¿çº§é€šä¿¡ã€æ¨¡å—è°ƒè¯• RS232 ä½¿ç”¨è´Ÿé€»è¾‘å’Œé«˜ç”µå‹æ‘†å¹…ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›è¾ƒå¼ºï¼Œä¼ è¾“è·ç¦»ä¸­ç­‰ (çº¦15ç±³)ã€‚ 1: -3V ~ -15V\n0: +3V ~ +15V å…¨åŒå·¥ å·¥ä¸šè®¾å¤‡ã€è€å¼PCä¸²å£ RS485 ä½¿ç”¨å·®åˆ†ä¿¡å·ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›æå¼ºï¼Œä¼ è¾“è·ç¦»è¿œ (å¯è¾¾1200ç±³ä»¥ä¸Š)ï¼Œæ”¯æŒå¤šèŠ‚ç‚¹ç»„ç½‘ã€‚ 1: A-B \u0026gt; +200mV\n0: A-B \u0026lt; -200mV ä¸¤çº¿åˆ¶ï¼šåŠåŒå·¥\nå››çº¿åˆ¶ï¼šå…¨åŒå·¥ å·¥ä¸šè‡ªåŠ¨åŒ–ã€é•¿è·ç¦»æ•°æ®é‡‡é›† æ•°æ®å¸§æ ¼å¼: # ç©ºé—²çŠ¶æ€ï¼š æ€»çº¿å¤„äºé«˜ç”µå¹³ã€‚ èµ·å§‹ä½ (Start Bit)ï¼š 1ä½ä½ç”µå¹³ï¼Œæ ‡å¿—ç€ä¸€ä¸ªæ–°æ•°æ®å¸§çš„å¼€å§‹ã€‚ æ•°æ®ä½ (Data Bits)ï¼š 5-8ä½æœ‰æ•ˆæ•°æ®ï¼Œä½ä½å…ˆè¡Œ (LSB First)ã€‚ æ ¡éªŒä½ (Parity Bit)ï¼š (å¯é€‰) ç”¨äºæ•°æ®æ ¡éªŒï¼Œæœ‰å¥‡æ ¡éªŒã€å¶æ ¡éªŒã€æ— æ ¡éªŒç­‰æ–¹å¼ã€‚ åœæ­¢ä½ (Stop Bit)ï¼š 1ã€1.5æˆ–2ä½é«˜ç”µå¹³ï¼Œæ ‡å¿—ç€æ•°æ®å¸§çš„ç»“æŸã€‚ æ³¢ç‰¹ç‡ä¸æ¯”ç‰¹ç‡: # è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„æ··æ·†ç‚¹ï¼Œå‡†ç¡®å®šä¹‰å¦‚ä¸‹ï¼š\næ³¢ç‰¹ç‡ (Baud Rate)ï¼šæŒ‡ç å…ƒçš„ä¼ è¾“é€Ÿç‡ï¼Œå³æ¯ç§’ä¼ è¾“å¤šå°‘ä¸ªç å…ƒï¼ˆæˆ–ç§°ç¬¦å·ï¼‰ã€‚å•ä½æ˜¯æ³¢ç‰¹ (Baud)ã€‚ä¸€ä¸ªç å…ƒå¯ä»¥æºå¸¦ä¸€æˆ–å¤šä½ä¿¡æ¯ã€‚ æ¯”ç‰¹ç‡ (Bit Rate)ï¼šæŒ‡ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡ï¼Œå³æ¯ç§’ä¼ è¾“å¤šå°‘ä¸ªäºŒè¿›åˆ¶ä½ã€‚å•ä½æ˜¯bps (bits per second)ã€‚ åœ¨ä¸²å£é€šä¿¡ä¸­ï¼Œä¸€ä¸ªç å…ƒåªè¡¨ç¤ºä¸€ä½äºŒè¿›åˆ¶ä¿¡æ¯ï¼ˆé«˜/ä½ç”µå¹³ï¼‰ï¼Œå› æ­¤æ•°å€¼ä¸Šï¼Œæ³¢ç‰¹ç‡ = æ¯”ç‰¹ç‡ã€‚ ä¾‹å¦‚ï¼Œ9600æ³¢ç‰¹ç‡æ„å‘³ç€æ¯”ç‰¹ç‡ä¹Ÿæ˜¯9600 bpsã€‚\næœ‰æ•ˆæ•°æ®ä¼ è¾“é€Ÿç‡è®¡ç®—ï¼š æˆ‘ä»¬é€šå¸¸æ›´å…³å¿ƒæœ‰æ•ˆæ•°æ®ï¼ˆä¸å«èµ·å§‹/åœæ­¢/æ ¡éªŒä½ï¼‰çš„ä¼ è¾“é€Ÿç‡ã€‚\nä¾‹å¦‚ï¼š æ³¢ç‰¹ç‡ä¸º9600ï¼Œæ•°æ®æ ¼å¼ä¸º8ä½æ•°æ®ä½ã€æ— æ ¡éªŒä½ã€1ä½åœæ­¢ä½ (å¸¸è¡¨ç¤ºä¸º 8-N-1)ã€‚ ä¼ è¾“ä¸€ä¸ªå­—èŠ‚ (8ä½) çš„æ•°æ®ï¼Œå®é™…éœ€è¦å‘é€ 1 (èµ·å§‹ä½) + 8 (æ•°æ®ä½) + 1 (åœæ­¢ä½) = 10 ä½ã€‚ æ¯ç§’ä¼ è¾“çš„ä½æ•° = 9600 bpsã€‚ æ¯ç§’ä¼ è¾“çš„å­—èŠ‚æ•° = 9600 / 10 = 960 å­—èŠ‚/ç§’ã€‚ STM32ä¸­é…ç½®æ³¢ç‰¹ç‡çš„è®¡ç®— # f_CK ä¸ºè¯¥USARTå¤–è®¾çš„æ—¶é’Ÿé¢‘ç‡ (ä¾‹å¦‚ï¼ŒUSART1æŒ‚åœ¨APB2ä¸Šï¼Œé€šå¸¸ä¸º72MHz)ã€‚ USARTDIV æ˜¯ä¸€ä¸ªæ— ç¬¦å·å®šç‚¹æ•°ï¼Œç”±æ•´æ•°éƒ¨åˆ† (DIV_Mantissa) å’Œå°æ•°éƒ¨åˆ† (DIV_Fraction) ç»„æˆã€‚ OVER8 æ˜¯è¿‡é‡‡æ ·ç‡ï¼Œ0è¡¨ç¤º16å€è¿‡é‡‡æ ·ï¼Œ1è¡¨ç¤º8å€è¿‡é‡‡æ ·ã€‚ ç¤ºä¾‹ï¼š f_CK = 72MHzï¼ŒBaudRate = 115200ï¼Œ16å€è¿‡é‡‡æ · (OVER8=0)ã€‚\nUSARTDIV = 72,000,000 / (16 * 115200) = 39.0625 æ•´æ•°éƒ¨åˆ† DIV_Mantissa = 39 (å³ 0x27)ã€‚ å°æ•°éƒ¨åˆ† 0.0625ã€‚å› ä¸ºå°æ•°éƒ¨åˆ†ç”¨4ä½è¡¨ç¤ºï¼Œæ‰€ä»¥ä¹˜ä»¥16ï¼š0.0625 * 16 = 1 (å³ 0x1)ã€‚ å†™å…¥USART_BRRå¯„å­˜å™¨çš„å€¼ = (DIV_Mantissa \u0026lt;\u0026lt; 4) | DIV_Fraction = (0x27 \u0026lt;\u0026lt; 4) | 0x1 = 0x271ã€‚ 3. I2Cåè®® (Inter-Integrated Circuit) # I2Cæ˜¯ä¸€ç§åŒæ­¥ã€åŠåŒå·¥ã€å¤šä¸»å¤šä»çš„ä¸²è¡Œæ€»çº¿ã€‚\n3.1 ç‰©ç†å±‚ # ä¸¤æ ¹çº¿ï¼š SCL (Serial Clock): ä¸²è¡Œæ—¶é’Ÿçº¿ï¼Œç”±ä¸»æœºäº§ç”Ÿï¼Œç”¨äºåŒæ­¥æ•°æ®ä¼ è¾“ã€‚ SDA (Serial Data): ä¸²è¡Œæ•°æ®çº¿ï¼Œç”¨äºä¼ è¾“æ•°æ®ã€‚ å¼€æ¼è¾“å‡º (Open-Drain): SCLå’ŒSDAçº¿éƒ½æ˜¯å¼€æ¼/å¼€é›†ç”µæç»“æ„ï¼Œåªèƒ½è¾“å‡ºä½ç”µå¹³ï¼Œä¸èƒ½ä¸»åŠ¨è¾“å‡ºé«˜ç”µå¹³ã€‚ ä¸Šæ‹‰ç”µé˜»ï¼š å› æ­¤ï¼ŒSCLå’ŒSDAçº¿å¿…é¡»å¤–æ¥ä¸Šæ‹‰ç”µé˜»åˆ°VCCï¼Œä»¥å½¢æˆé«˜ç”µå¹³ã€‚æ€»çº¿ç©ºé—²æ—¶ï¼ŒSCLå’ŒSDAéƒ½å¤„äºé«˜ç”µå¹³ã€‚ 3.2 åè®®å±‚ (å…³é”®æ—¶åº) # èµ·å§‹ä¿¡å· (Start Condition): SCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAç”±é«˜ç”µå¹³è·³å˜ä¸ºä½ç”µå¹³ã€‚ åœæ­¢ä¿¡å· (Stop Condition): SCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAç”±ä½ç”µå¹³è·³å˜ä¸ºé«˜ç”µå¹³ã€‚ æ•°æ®ä¼ è¾“ï¼š SCLä¸ºä½ç”µå¹³æ—¶ï¼ŒSDAä¸Šçš„æ•°æ®æ‰å…è®¸å˜åŒ–ï¼›SCLä¸ºé«˜ç”µå¹³æ—¶ï¼ŒSDAä¸Šçš„æ•°æ®å¿…é¡»ä¿æŒç¨³å®šï¼Œä»¥ä¾›æ¥æ”¶æ–¹é‡‡æ ·ã€‚ åº”ç­”ä¿¡å· (ACK): å‘é€æ–¹æ¯å‘é€å®Œ8ä½æ•°æ® (ä¸€ä¸ªå­—èŠ‚) åï¼Œæ¥æ”¶æ–¹ä¼šåœ¨ç¬¬9ä¸ªæ—¶é’Ÿå‘¨æœŸå°†SDAæ‹‰ä½ï¼Œè¡¨ç¤ºæˆåŠŸæ¥æ”¶ï¼Œç§°ä¸ºACKã€‚å¦‚æœæ¥æ”¶æ–¹æœªæ‹‰ä½SDAï¼ˆä¿æŒé«˜ç”µå¹³ï¼‰ï¼Œåˆ™ä¸ºéåº”ç­”ä¿¡å· (NACK)ã€‚ åŸºæœ¬é€šä¿¡æµç¨‹ (ä¸»æœºå†™)ï¼š Start -\u0026gt; ä»æœºåœ°å€(7ä½) + å†™(0) -\u0026gt; ACK -\u0026gt; å¯„å­˜å™¨åœ°å€ -\u0026gt; ACK -\u0026gt; æ•°æ® -\u0026gt; ACK -\u0026gt; \u0026hellip; -\u0026gt; Stop 3.3 ç¡¬ä»¶I2Cå’Œè½¯ä»¶I2Cçš„åŒºåˆ« # ç‰¹æ€§ ç¡¬ä»¶I2C è½¯ä»¶I2C (GPIOæ¨¡æ‹Ÿ) å®ç°æ–¹å¼ ä½¿ç”¨MCUå†…éƒ¨é›†æˆçš„I2Cå¤–è®¾æ¨¡å—ã€‚ ä½¿ç”¨é€šç”¨IOå£ (GPIO)ï¼Œæ‰‹åŠ¨æ§åˆ¶ç”µå¹³é«˜ä½å’Œæ—¶åºã€‚ CPUå ç”¨ ä½ã€‚æ•°æ®æ”¶å‘ç”±ç¡¬ä»¶å¤„ç†ï¼Œå®Œæˆåé€šè¿‡ä¸­æ–­é€šçŸ¥CPUã€‚ é«˜ã€‚CPUéœ€è¦å…¨ç¨‹å‚ä¸ï¼Œæ¨¡æ‹Ÿæ—¶åºï¼Œå ç”¨å¤§é‡CPUæ—¶é—´ã€‚ é€Ÿåº¦/å¯é æ€§ é«˜ã€‚æ—¶åºç²¾å‡†ï¼Œæ”¯æŒæ ‡å‡†é€Ÿç‡å’Œé«˜é€Ÿç‡ã€‚ è¾ƒä½ã€‚é€Ÿåº¦å—CPUä¸»é¢‘å’Œä»£ç æ•ˆç‡å½±å“ï¼Œæ˜“å—ä¸­æ–­å¹²æ‰°ã€‚ çµæ´»æ€§ ä½ã€‚åªèƒ½ä½¿ç”¨æŒ‡å®šçš„I2Cå¼•è„šã€‚ é«˜ã€‚ä»»æ„GPIOå¼•è„šéƒ½å¯ä»¥ç”¨ä½œSCL/SDAã€‚ 4. SPIé€šè®¯åè®® (Serial Peripheral Interface) # SPIæ˜¯ä¸€ç§é«˜é€Ÿã€å…¨åŒå·¥ã€åŒæ­¥çš„é€šä¿¡æ€»çº¿ï¼Œé‡‡ç”¨ä¸»ä»æ¨¡å¼å·¥ä½œã€‚\n4.1 ç‰©ç†å±‚ # é€šå¸¸ä½¿ç”¨4æ ¹çº¿ï¼š\nSCK (Serial Clock): æ—¶é’Ÿçº¿ï¼Œç”±ä¸»æœºäº§ç”Ÿã€‚ MOSI (Master Out Slave In): ä¸»æœºè¾“å‡ºã€ä»æœºè¾“å…¥çº¿ï¼Œæ•°æ®ä»ä¸»æœºæµå‘ä»æœºã€‚ MISO (Master In Slave Out): ä¸»æœºè¾“å…¥ã€ä»æœºè¾“å‡ºçº¿ï¼Œæ•°æ®ä»ä»æœºæµå‘ä¸»æœºã€‚ CS/SS (Chip Select / Slave Select): ç‰‡é€‰çº¿ï¼Œç”±ä¸»æœºæ§åˆ¶ï¼Œç”¨äºé€‰æ‹©ä¸ä¹‹é€šä¿¡çš„ä»æœºã€‚é€šå¸¸ä¸ºä½ç”µå¹³æœ‰æ•ˆã€‚ 4.2 åè®®å±‚ # å·¥ä½œåŸç†ï¼š SPIçš„æ ¸å¿ƒæ˜¯ä¸¤ä¸ªè¿æ¥åœ¨ä¸€èµ·çš„ç§»ä½å¯„å­˜å™¨ï¼ˆä¸€ä¸ªåœ¨ä¸»æœºï¼Œä¸€ä¸ªåœ¨ä»æœºï¼‰ã€‚SCKçš„æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸï¼Œæ•°æ®ä»MOSIç§»å…¥ä»æœºï¼ŒåŒæ—¶ä»MISOç§»å…¥ä¸»æœºï¼Œå®ç°å…¨åŒå·¥æ•°æ®äº¤æ¢ã€‚ æ— åè®®å¼€é”€ï¼š SPIæ²¡æœ‰èµ·å§‹/åœæ­¢ä½ï¼Œä¹Ÿæ²¡æœ‰åº”ç­”æœºåˆ¶ï¼Œåè®®éå¸¸ç®€å•é«˜æ•ˆã€‚æ•°æ®çš„æ„ä¹‰ç”±ä¸Šå±‚åº”ç”¨å®šä¹‰ã€‚ æ³¨æ„ï¼š\nMOSIä¸MISOçš„ä¿¡å·åªåœ¨NSSä¸ºä½ç”µå¹³çš„æ—¶å€™æ‰æœ‰æ•ˆï¼Œåœ¨SCKçš„æ¯ä¸ªæ—¶é’Ÿå‘¨æœŸMOSIå’ŒMISOä¼ è¾“ä¸€ä½æ•°æ®ã€‚æ•°æ®çš„è¾“å…¥å’Œè¾“å‡ºæ˜¯åŒæ—¶è¿›è¡Œçš„ï¼Œåœ¨ SCKä¸‹é™æ²¿ è¿›è¡Œæ•°æ® é‡‡æ · ï¼ŒSPIæ¯æ¬¡æ•°æ®ä¼ è¾“å¯ä»¥ ä»¥8ä½æˆ–16ä½ä¸ºå•ä½ ï¼Œæ¯æ¬¡ä¼ è¾“å•ä½æ•°ä¸å—é™åˆ¶ã€‚ 4.3 SPIé€šè®¯æ¨¡å¼ (4ç§) # ç”±æ—¶é’Ÿææ€§ (CPOL) å’Œ æ—¶é’Ÿç›¸ä½ (CPHA) ç»„åˆå†³å®šã€‚\nCPOL (Clock Polarity): å®šä¹‰SCKç©ºé—²æ—¶çš„ç”µå¹³çŠ¶æ€ã€‚ CPOL=0: ç©ºé—²æ—¶ä¸ºä½ç”µå¹³ã€‚ CPOL=1: ç©ºé—²æ—¶ä¸ºé«˜ç”µå¹³ã€‚ CPHA (Clock Phase): å®šä¹‰æ•°æ®é‡‡æ ·çš„æ—¶é’Ÿè¾¹æ²¿ã€‚ CPHA=0: åœ¨ç¬¬1ä¸ªæ—¶é’Ÿè¾¹æ²¿é‡‡æ ·ã€‚ CPHA=1: åœ¨ç¬¬2ä¸ªæ—¶é’Ÿè¾¹æ²¿é‡‡æ ·ã€‚ æ¨¡å¼ CPOL CPHA æè¿° 0 0 0 SCKç©ºé—²ä¸ºä½ï¼Œç¬¬ä¸€ä¸ªè¾¹æ²¿(ä¸Šå‡æ²¿)é‡‡æ · 1 0 1 SCKç©ºé—²ä¸ºä½ï¼Œç¬¬äºŒä¸ªè¾¹æ²¿(ä¸‹é™æ²¿)é‡‡æ · 2 1 0 SCKç©ºé—²ä¸ºé«˜ï¼Œç¬¬ä¸€ä¸ªè¾¹æ²¿(ä¸‹é™æ²¿)é‡‡æ · 3 1 1 SCKç©ºé—²ä¸ºé«˜ï¼Œç¬¬äºŒä¸ªè¾¹æ²¿(ä¸Šå‡æ²¿)é‡‡æ · 4.4 ä¸»ä»æ§åˆ¶é€»è¾‘ # ä¸»æœºåœ¨é€šä¿¡å‰ï¼Œå°†ç›®æ ‡ä»æœºçš„CSçº¿æ‹‰ä½ã€‚ ä¸»æœºé€šè¿‡SCKçº¿äº§ç”Ÿæ—¶é’Ÿä¿¡å·ã€‚ ä¸»æœºå°†è¦å‘é€çš„æ•°æ®æ”¾åˆ°MOSIçº¿ä¸Šï¼ŒåŒæ—¶ä»MISOçº¿è¯»å–æ•°æ®ã€‚ é€šä¿¡ç»“æŸåï¼Œä¸»æœºå°†CSçº¿æ‹‰é«˜ï¼Œå–æ¶ˆå¯¹è¯¥ä»æœºçš„é€‰æ‹©ã€‚ ä¸»æ¨¡å¼æ”¶å‘æµç¨‹åŠäº‹ä»¶è¯´æ˜å¦‚ä¸‹ï¼š\næ§åˆ¶NSSä¿¡å·çº¿ï¼Œäº§ç”Ÿèµ·å§‹ä¿¡å·(å›¾ä¸­æ²¡æœ‰ç”»å‡º)ï¼› æŠŠè¦å‘é€çš„æ•°æ®å†™å…¥åˆ°â€œæ•°æ®å¯„å­˜å™¨â€œDRâ€ä¸­ï¼Œè¯¥æ•°æ®ä¼šè¢«å­˜å‚¨åˆ°å‘é€ç¼“å†²åŒºï¼› é€šè®¯å¼€å§‹ï¼ŒSCKæ—¶é’Ÿå¼€å§‹è¿è¡Œã€‚MOSI æŠŠå‘é€ç¼“å†²åŒºä¸­çš„æ•°æ®ä¸€ä½ä¸€ä½åœ°ä¼ è¾“å‡ºå»ï¼›MISO åˆ™æŠŠæ•°æ®ä¸€ä½ä¸€ä½åœ°å­˜å‚¨è¿›æ¥æ”¶ç¼“å†²åŒºä¸­ï¼› å½“å‘é€å®Œä¸€å¸§æ•°æ®çš„æ—¶å€™ï¼Œâ€œ çŠ¶æ€å¯„å­˜å™¨ SR â€ä¸­çš„â€œTXE æ ‡å¿—ä½â€ä¼šè¢«ç½® 1ï¼Œè¡¨ç¤ºä¼ è¾“å®Œä¸€ å¸§ï¼Œå‘é€ç¼“å†²åŒºå·²ç©ºï¼›ç±»ä¼¼åœ°ï¼Œå½“æ¥æ”¶å®Œä¸€å¸§æ•°æ®çš„æ—¶å€™ï¼Œâ€œRXNE æ ‡å¿—ä½â€ä¼šè¢«ç½® 1ï¼Œè¡¨ç¤ºä¼ è¾“å®Œä¸€å¸§ï¼Œæ¥æ”¶ç¼“å†²åŒºéç©ºï¼› ç­‰å¾…åˆ°â€œTXE æ ‡å¿—ä½â€ä¸º 1 æ—¶ï¼Œè‹¥è¿˜è¦ç»§ç»­å‘é€æ•°æ®ï¼Œåˆ™å†æ¬¡å¾€â€œæ•°æ®å¯„å­˜å™¨ DRâ€å†™å…¥æ•°æ® å³å¯ï¼›ç­‰å¾…åˆ°â€œRXNE æ ‡å¿—ä½â€ä¸º 1 æ—¶ï¼Œé€šè¿‡è¯»å–â€œæ•°æ®å¯„å­˜å™¨ DRâ€å¯ä»¥è·å–æ¥æ”¶ç¼“å†²åŒºä¸­çš„ å†…å®¹ã€‚ å‡å¦‚æˆ‘ä»¬ä½¿èƒ½äº† TXE æˆ– RXNE ä¸­æ–­ï¼ŒTXE æˆ– RXNE ç½® 1 æ—¶ä¼šäº§ç”Ÿ SPI ä¸­æ–­ä¿¡å·ï¼Œè¿›å…¥åŒä¸€ä¸ªä¸­æ–­æœåŠ¡å‡½æ•°ï¼Œåˆ° SPI ä¸­æ–­æœåŠ¡ç¨‹åºåï¼Œå¯é€šè¿‡æ£€æŸ¥å¯„å­˜å™¨ä½æ¥äº†è§£æ˜¯å“ªä¸€ä¸ªäº‹ä»¶ï¼Œå†åˆ†åˆ«è¿›è¡Œå¤„ç†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ DMA æ–¹å¼æ¥æ”¶å‘â€œæ•°æ®å¯„å­˜å™¨ DRâ€ä¸­çš„æ•°æ®ã€‚ 5. CANåè®® (Controller Area Network) # CANæ˜¯ä¸€ç§åŸºäºæ¶ˆæ¯çš„ä¸²è¡Œé€šä¿¡åè®®ï¼Œä»¥å…¶é«˜å¯é æ€§å’Œå®æ—¶æ€§è‘—ç§°ï¼Œå¹¿æ³›åº”ç”¨äºæ±½è½¦ç”µå­å’Œå·¥ä¸šè‡ªåŠ¨åŒ–é¢†åŸŸã€‚\n5.1 ç‰©ç†å±‚ # å·®åˆ†ä¿¡å·ï¼š ä½¿ç”¨ä¸¤æ ¹çº¿ CAN_H å’Œ CAN_L è¿›è¡Œå·®åˆ†ä¼ è¾“ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›æå¼ºã€‚ æ€»çº¿æ‹“æ‰‘ï¼š å…¸å‹çš„æ€»çº¿ç»“æ„ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æŒ‚åœ¨åŒä¸€å¯¹åŒç»çº¿ä¸Šã€‚ ç»ˆç«¯ç”µé˜»ï¼š æ€»çº¿çš„ä¸¤ç«¯å¿…é¡»å„æ¥ä¸€ä¸ª120Î©çš„ç»ˆç«¯ç”µé˜»ï¼Œç”¨äºé˜²æ­¢ä¿¡å·åå°„å’Œä¿è¯é˜»æŠ—åŒ¹é…ã€‚ ç”µå¹³çŠ¶æ€ï¼š æ˜¾æ€§ (Dominant) - é€»è¾‘'0\u0026rsquo;: CAN_Hå’ŒCAN_Lä¹‹é—´æœ‰ç”µå‹å·® (çº¦2V)ã€‚ éšæ€§ (Recessive) - é€»è¾‘'1\u0026rsquo;: CAN_Hå’ŒCAN_Lä¹‹é—´æ— ç”µå‹å·® (çº¦0V)ã€‚ ç‰¹æ€§ï¼š æ˜¾æ€§ä½å¯ä»¥è¦†ç›–éšæ€§ä½ã€‚å¦‚æœä¸€ä¸ªèŠ‚ç‚¹å‘é€æ˜¾æ€§ä½ï¼Œå¦ä¸€ä¸ªå‘é€éšæ€§ä½ï¼Œæ€»çº¿ä¸Šè¡¨ç°ä¸ºæ˜¾æ€§ä½ã€‚ 5.2 æ ¸å¿ƒç‰¹ç‚¹ # åŸºäºæ¶ˆæ¯ï¼Œè€Œéåœ°å€ï¼š CANç½‘ç»œä¸­æ²¡æœ‰ä¸»ä»æ¦‚å¿µï¼Œä¹Ÿæ²¡æœ‰è®¾å¤‡åœ°å€ã€‚èŠ‚ç‚¹å‘é€çš„æ˜¯å¸¦æœ‰æ¶ˆæ¯ID (Identifier) çš„æŠ¥æ–‡ã€‚æ‰€æœ‰èŠ‚ç‚¹éƒ½èƒ½æ¥æ”¶åˆ°æŠ¥æ–‡ï¼Œä½†ä¼šæ ¹æ®IDè‡ªè¡Œåˆ¤æ–­æ˜¯å¦éœ€è¦å¤„ç†ã€‚ å†²çªä»²è£æœºåˆ¶ (CSMA/CA): è½½æ³¢ä¾¦å¬ (CSMA): èŠ‚ç‚¹åœ¨å‘é€å‰ä¼šæ£€æŸ¥æ€»çº¿æ˜¯å¦ç©ºé—²ã€‚ å†²çªä»²è£ (CA): å¦‚æœå¤šä¸ªèŠ‚ç‚¹åŒæ—¶å‘é€ï¼Œå®ƒä»¬ä¼šé€ä½æ¯”è¾ƒè‡ªå·±å‘é€çš„ä½å’Œæ€»çº¿ä¸Šçš„å®é™…ä½ã€‚å½“èŠ‚ç‚¹å‘é€ä¸€ä¸ªéšæ€§ä½(\u0026lsquo;1\u0026rsquo;)å´åœ¨æ€»çº¿ä¸Šæ£€æµ‹åˆ°æ˜¾æ€§ä½(\u0026lsquo;0\u0026rsquo;)æ—¶ï¼Œå®ƒå°±çŸ¥é“æœ‰æ›´é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯åœ¨å‘é€ï¼ˆå› ä¸ºIDå€¼æ›´å°ï¼‰ï¼Œäºæ˜¯ç«‹å³åœæ­¢å‘é€ï¼Œè½¬ä¸ºæ¥æ”¶æ¨¡å¼ã€‚ ä¼˜å…ˆçº§ï¼šæ¶ˆæ¯IDè¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚ è¿™ä¸ªæœºåˆ¶ä¿è¯äº†æ€»çº¿æ°¸è¿œä¸ä¼šè¢«å†²çªæç˜«ç—ªã€‚ å¼ºå¤§çš„é”™è¯¯å¤„ç†ï¼š CANåè®®å†…ç½®äº†å¤šç§é”™è¯¯æ£€æµ‹æœºåˆ¶ï¼Œå¦‚CRCæ ¡éªŒã€ä½å¡«å……ã€ACKæ ¡éªŒã€å¸§æ ¼å¼æ£€æŸ¥ç­‰ï¼Œç¡®ä¿äº†æé«˜çš„é€šä¿¡å¯é æ€§ã€‚ CANæ•°æ®å¸§ (æ ‡å‡†å¸§ä¸ºä¾‹): SOF (1ä½) -\u0026gt; ID (11ä½) -\u0026gt; RTR -\u0026gt; æ§åˆ¶åœº -\u0026gt; æ•°æ®åœº(0-8å­—èŠ‚) -\u0026gt; CRC(15ä½) -\u0026gt; ACK -\u0026gt; EOF ","date":"2025-06-24","externalUrl":null,"permalink":"/posts/%E5%85%AB%E8%82%A1-arm%E5%90%84%E7%B1%BB%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE/","section":"Posts","summary":"","title":"å…«è‚¡-ARMå„ç±»é€šä¿¡åè®®","type":"posts"},{"content":"","date":"2025-06-19","externalUrl":null,"permalink":"/category/git/","section":"Category","summary":"","title":"Git","type":"category"},{"content":"","date":"2025-06-19","externalUrl":null,"permalink":"/tags/git/","section":"Tags","summary":"","title":"Git","type":"tags"},{"content":" å¦‚ä½•ä¼˜é›…åœ°åˆå¹¶å¼€æºé¡¹ç›®æ›´æ–°åˆ°è‡ªå·±çš„é­”æ”¹ç‰ˆæœ¬ # è¿™å°±æ˜¯æˆ‘æœ€è¿‘é‡åˆ°çš„æƒ…å†µã€‚æˆ‘çš„åšå®¢é¡¹ç›® Cerry2022.github.io åŸºäºä¸€ä¸ªå¾ˆä¸é”™çš„ VitePress åšå®¢æ¨¡æ¿ vitepress-blog-pureã€‚æˆ‘æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•ä¿®æ”¹äº†ä¸€äº›ä»£ç ï¼ŒåŠ å…¥äº†ä¸€äº›ä¸ªæ€§åŒ–çš„å†…å®¹ã€‚ä½†æ˜¯ï¼ŒåŸå§‹çš„ vitepress-blog-pure ä»“åº“æœ€è¿‘æ›´æ–°äº†ä¸€äº›å¾ˆæ£’çš„åŠŸèƒ½å’Œä¼˜åŒ–ã€‚ä½œä¸ºä¸€ä¸ªâ€œé­”æ”¹è€…â€ï¼Œæˆ‘å½“ç„¶å¸Œæœ›èƒ½å¤Ÿäº«å—åˆ°è¿™äº›æ›´æ–°å¸¦æ¥çš„å¥½å¤„ï¼ŒåŒæ—¶åˆä¸ä¸¢å¤±æˆ‘è¾›è¾›è‹¦è‹¦æ”¹åŠ¨çš„ä»£ç ã€‚\nä¸‹é¢æˆ‘å°±ä»¥æˆ‘çš„åšå®¢é¡¹ç›®ä¸ºä¾‹ï¼Œåˆ†äº«ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Git æ¥ä¼˜é›…åœ°å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚\næˆ‘çš„æƒ…å†µï¼š\næˆ‘çš„åšå®¢é¡¹ç›®ä½äº D:\\_Files\\Project\\Cerry2022.github.ioï¼Œå…¶ä¸­åŒ…å«äº†ä» vitepress-blog-pure å¤åˆ¶è¿‡æ¥çš„åŸºç¡€ä»£ç ï¼Œå¹¶ä¸”æˆ‘å·²ç»å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ã€‚ç°åœ¨ï¼ŒåŸå§‹çš„ vitepress-blog-pure ä»“åº“æœ‰äº†æ–°çš„æ›´æ–°ï¼Œæˆ‘éœ€è¦å°†è¿™äº›æ›´æ–°åˆå¹¶åˆ°æˆ‘çš„é¡¹ç›®ä¸­ã€‚\næ“ä½œæ­¥éª¤ï¼š\næ•´ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†åŸå§‹ä»“åº“æ·»åŠ ä¸ºæˆ‘æœ¬åœ°ä»“åº“çš„ä¸€ä¸ªâ€œè¿œç¨‹ä»“åº“â€ï¼Œç„¶åæ‹‰å–å®ƒçš„æ›´æ–°ï¼Œå¹¶åˆå¹¶åˆ°æˆ‘è‡ªå·±çš„åˆ†æ”¯ä¸Šã€‚\ncd D:\\_Files\\Project\\Cerry2022.github.io å°½ç®¡æˆ‘ä»¬å·²ç»æœ‰äº†åŸå§‹é¡¹ç›®çš„ä»£ç ï¼Œä½†ä¸ºäº†æ–¹ä¾¿è·å–æ›´æ–°ï¼Œæˆ‘ä»¬éœ€è¦å°†åŸå§‹çš„ vitepress-blog-pure ä»“åº“ä½œä¸ºæˆ‘ä»¬æœ¬åœ°ä»“åº“çš„ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“æ¥å…³è”ã€‚è¿™ç›¸å½“äºç»™åŸå§‹ä»“åº“åœ¨æˆ‘ä»¬æœ¬åœ°ä»“åº“ä¸­èµ·ä¸ªåˆ«åã€‚\né¦–å…ˆï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ å½“å‰å·²ç»å…³è”çš„è¿œç¨‹ä»“åº“ï¼š\ngit remote -v ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ origin è¿™æ ·çš„è¿œç¨‹ä»“åº“ï¼Œå®ƒé€šå¸¸æŒ‡å‘ä½ è‡ªå·±çš„ GitHub ä»“åº“ Cerry2022.github.ioã€‚\nç°åœ¨ï¼Œæ·»åŠ åŸå§‹çš„ vitepress-blog-pure ä»“åº“ https://github.com/airene/vitepress-blog-pure.gitï¼š\ngit remote add upstream https://github.com/airene/vitepress-blog-pure.git å†æ¬¡è¿è¡Œ git remote -v ç¡®è®¤æ˜¯å¦æˆåŠŸæ·»åŠ äº† upstreamã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä» upstream è¿œç¨‹ä»“åº“æ‹‰å–æœ€æ–°çš„ä»£ç å’Œåˆ†æ”¯ä¿¡æ¯äº†ï¼š\ngit fetch upstream è¿™ä¸ªå‘½ä»¤åªä¼šä¸‹è½½æ›´æ–°åˆ°ä½ çš„æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶åˆ°ä½ å½“å‰å·¥ä½œçš„åˆ†æ”¯ã€‚\nç°åœ¨åˆ°äº†å…³é”®ä¸€æ­¥ï¼Œå°†ä» upstream æ‹‰å–åˆ°çš„æ›´æ–°åˆå¹¶åˆ°ä½ è‡ªå·±çš„åˆ†æ”¯ä¸Šã€‚æˆ‘å½“å‰åœ¨ main åˆ†æ”¯å·¥ä½œï¼Œå¹¶ä¸”åŸå§‹ä»“åº“çš„ä¸»åˆ†æ”¯ä¹Ÿæ˜¯ main (è¯·æ ¹æ®å®é™…æƒ…å†µå°† main æ›¿æ¢ä¸ºä½ è‡ªå·±å’ŒåŸå§‹ä»“åº“çš„ä¸»åˆ†æ”¯åç§°)ï¼š\ngit merge upstream/main Git ä¼šå°è¯•å°† upstream/main åˆ†æ”¯çš„æ›´æ”¹åˆå¹¶åˆ°ä½ å½“å‰æ‰€åœ¨çš„ main åˆ†æ”¯ã€‚\nå¸¸è§é”™è¯¯(å¦‚æœå‡ºç°)\nå‡ºç°çš„é”™è¯¯ä»¥åŠè§£å†³æ–¹æ¡ˆ fatal: refusing to merge unrelated histories è¿™ä¸ªé”™è¯¯è¡¨æ˜ Git è®¤ä¸ºä½ çš„æœ¬åœ°ä»“åº“å’ŒÂ upstream/mainÂ åˆ†æ”¯çš„å†å²æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ²¡æœ‰ä»»ä½•å…±äº«çš„æäº¤ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š\nä½ ç›´æ¥ä¸‹è½½äº†åŸå§‹ä»“åº“çš„ä»£ç ï¼Œç„¶ååœ¨ä½ è‡ªå·±çš„ä»“åº“ä¸­åˆå§‹åŒ–äº† Gitï¼Œå¹¶å°†è‡ªå·±çš„ä»“åº“æ¨é€åˆ°ä¸€ä¸ªç©ºçš„è¿œç¨‹ä»“åº“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ è‡ªå·±çš„ä»“åº“å†å²å’ŒåŸå§‹ä»“åº“å†å²æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚ ä½ ä»åŸå§‹ä»“åº“å…‹éš† (git clone) äº†ä»£ç ï¼Œä½†åœ¨å…‹éš†ä¹‹åï¼ŒåŸå§‹ä»“åº“çš„å†å²è¢«é‡å†™äº†ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨äº†Â git rebaseÂ æˆ–Â git reset \u0026ndash;hardÂ å¹¶å¼ºåˆ¶æ¨é€ï¼‰ã€‚ ä½ å°†åŸå§‹ä»“åº“çš„ä»£ç æ‹·è´åˆ°äº†ä¸€ä¸ªå·²æœ‰çš„ã€æœ‰è‡ªå·±å†å²çš„ä»“åº“ä¸­ã€‚ Git é»˜è®¤é˜»æ­¢åˆå¹¶ä¸ç›¸å…³çš„å†å²ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢ä½ æ„å¤–åœ°åˆå¹¶ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„é¡¹ç›®ï¼Œå¯¼è‡´æ··ä¹±çš„æäº¤å†å²ã€‚ä½†æ˜¯ï¼Œåœ¨ä½ çŸ¥é“è¿™ä¸¤ä¸ªé¡¹ç›®å®é™…ä¸Šæ˜¯ç›¸å…³çš„ï¼ˆä¸€ä¸ªåŸºäºå¦ä¸€ä¸ªï¼‰å¹¶ä¸”ä½ ç¡®å®æƒ³åˆå¹¶å®ƒä»¬çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ˜¾å¼åœ°å‘Šè¯‰ Git å…è®¸åˆå¹¶ä¸ç›¸å…³çš„å†å²ã€‚ è§£å†³æ–¹æ³•æ˜¯åœ¨Â git mergeÂ å‘½ä»¤åé¢åŠ ä¸ŠÂ \u0026ndash;allow-unrelated-historiesÂ é€‰é¡¹ã€‚\ngit merge upstream/main --allow-unrelated-histories è§£å†³å†²çª (å¦‚æœå‡ºç°)\næŸ¥çœ‹å†²çªæ–‡ä»¶ï¼šÂ Git å·²ç»æ ‡è®°äº†æ‰€æœ‰å†²çªçš„æ–‡ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡ŒÂ git statusÂ æ¥å†æ¬¡æŸ¥çœ‹å†²çªæ–‡ä»¶çš„åˆ—è¡¨ã€‚å†²çªæ–‡ä»¶ä¼šæ˜¾ç¤ºåœ¨ \u0026ldquo;Unmerged paths\u0026rdquo; éƒ¨åˆ†ã€‚ git status è¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼ŒUnmerged pathsè¡¨ç¤ºå†²çªæ–‡ä»¶ï¼Œè¿™éƒ¨åˆ†æ˜¯éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªçš„\nUnmerged paths: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to mark resolution) both added: .github/workflows/deploy.yml both added: .gitignore both added: .vitepress/config.ts both added: .vitepress/theme/components/Archives.vue both added: .vitepress/theme/components/Category.vue both added: .vitepress/theme/components/Copyright.vue both added: .vitepress/theme/components/NewLayout.vue both added: .vitepress/theme/components/Page.vue both added: .vitepress/theme/components/Tags.vue both added: .vitepress/theme/custom.css both added: .vitepress/theme/functions.ts both added: .vitepress/theme/index.ts both added: .vitepress/theme/serverUtils.ts both added: changelog.md both added: package.json both added: pages/about.md both added: pages/archives.md both added: pages/category.md both added: pages/tags.md both added: pnpm-lock.yaml both added: posts/vitepress-first.md both added: public/favicon.ico æ‰‹åŠ¨è§£å†³å†²çªï¼šÂ å¯¹äºæ¯ä¸ªå†²çªæ–‡ä»¶ï¼Œä½ éœ€è¦æ‰‹åŠ¨ç¼–è¾‘å®ƒä»¬ï¼Œå¹¶å¤„ç† Git æ·»åŠ çš„å†²çªæ ‡è®° (\u0026laquo;\u0026laquo;\u0026laquo;\u0026lt; HEAD,Â =======,Â \u0026raquo;\u0026raquo;\u0026raquo;\u0026gt; upstream/main)ã€‚ æ‰“å¼€æ¯ä¸ªå†²çªæ–‡ä»¶ï¼ˆä¾‹å¦‚Â .github/workflows/deploy.yml,Â .gitignoreÂ ç­‰ï¼‰åœ¨ä½ çš„ä»£ç ç¼–è¾‘å™¨ä¸­ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç»“æ„ï¼š\n\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD // è¿™æ˜¯æˆ‘åœ¨æœ¬åœ°çš„ä¿®æ”¹ console.log(\u0026#34;My custom feature\u0026#34;); ======= // è¿™æ˜¯åŸå§‹ä»“åº“çš„ä¿®æ”¹ console.log(\u0026#34;New feature from upstream\u0026#34;); \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main ä½ éœ€è¦æ‰‹åŠ¨ç¼–è¾‘è¿™äº›æ–‡ä»¶ï¼š\næ‰¾åˆ°å†²çªæ ‡è®° (\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD, =======, \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main)ã€‚ ä»”ç»†é˜…è¯» \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD åˆ° ======= ä¹‹é—´ï¼ˆä½ æœ¬åœ°çš„ä¿®æ”¹ï¼‰å’Œ ======= åˆ° \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main ä¹‹é—´ï¼ˆåŸå§‹ä»“åº“çš„ä¿®æ”¹ï¼‰çš„ä»£ç ã€‚ æ ¹æ®ä½ çš„éœ€æ±‚ï¼Œæ‰‹åŠ¨ä¿®æ”¹è¿™éƒ¨åˆ†ä»£ç ï¼Œä¿ç•™ä½ æƒ³è¦çš„éƒ¨åˆ†ï¼Œå¹¶åˆ é™¤æ‰€æœ‰çš„å†²çªæ ‡è®°ã€‚ ä¿å­˜æ–‡ä»¶ã€‚ æ ‡è®°å†²çªå·²è§£å†³ç„¶åæ¨é€ï¼š # git add \u0026lt;è§£å†³å†²çªçš„æ–‡ä»¶å\u0026gt; git commit -m \u0026#34;Merge updates from upstream vitepress-blog-pure git push origin main ","date":"2025-06-19","externalUrl":null,"permalink":"/posts/git-1-%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E5%9C%B0%E5%90%88%E5%B9%B6%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E6%9B%B4%E6%96%B0%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E9%AD%94%E6%94%B9%E7%89%88%E6%9C%AC/","section":"Posts","summary":"","title":"Git-1-å¦‚ä½•ä¼˜é›…åœ°åˆå¹¶å¼€æºé¡¹ç›®æ›´æ–°åˆ°è‡ªå·±çš„é­”æ”¹ç‰ˆæœ¬","type":"posts"},{"content":" å¦‚ä½•å°†å…‹éš†çš„å¼€æºé¡¹ç›®å‘å¸ƒåˆ°è‡ªå·±çš„GitHubï¼Œå¹¶ä¼˜é›…åœ°åˆå¹¶ä¸Šæ¸¸æ›´æ–° # æˆ‘çš„é¡¹ç›®CalicoHaroåŸºäºä¸€ä¸ªéå¸¸æ£’çš„å¼€æºé¡¹ç›®YANG-Haruka/LinguaHaruï¼Œæˆ‘æŒ‰ç…§è‡ªå·±çš„æƒ³æ³•ä¿®æ”¹äº†ä¸€äº›ä»£ç ï¼ŒåŠ å…¥äº†ä¸€äº›ä¸ªæ€§åŒ–çš„å†…å®¹ã€‚ç°åœ¨ï¼Œæˆ‘éœ€è¦å°†è¿™äº›æ”¹åŠ¨å‘å¸ƒåˆ°æˆ‘è‡ªå·±çš„GitHubä»“åº“ï¼Œå¹¶ä¸”å¸Œæœ›æœªæ¥èƒ½æ–¹ä¾¿åœ°ä»åŸä½œè€…çš„ä»“åº“è·å–æ›´æ–°ã€‚\nå½“å‰çŠ¶æ€ç¡®è®¤ï¼š è¿è¡Œ git remote -v ï¼Œè¾“å‡ºå¦‚ä¸‹ï¼š\nPS D:\\_Files\\Project\\github\\LinguaHaru\u0026gt; git remote -v origin https://github.com/YANG-Haruka/LinguaHaru.git (fetch) origin https://github.com/YANG-Haruka/LinguaHaru.git (push) è¿™è¡¨æ˜ä½ çš„æœ¬åœ°ä»“åº“çš„ origin è¿œç¨‹åœ°å€æŒ‡å‘äº†åŸå§‹é¡¹ç›®ï¼Œè€Œä¸æ˜¯ä½ è‡ªå·±çš„GitHubä»“åº“ã€‚è¿™æ˜¯æˆ‘ä»¬é¦–å…ˆéœ€è¦è§£å†³çš„é—®é¢˜ã€‚\næˆ‘çš„æƒ…å†µï¼š # æˆ‘çš„é¡¹ç›®ä½äº D:\\_Files\\Project\\github\\LinguaHaruï¼Œå…¶ä¸­åŒ…å«äº†ä» YANG-Haruka/LinguaHaru å¤åˆ¶ï¼ˆæˆ–å…‹éš†ï¼‰è¿‡æ¥çš„åŸºç¡€ä»£ç ï¼Œå¹¶ä¸”æˆ‘å·²ç»å¯¹å…¶è¿›è¡Œäº†ä¿®æ”¹ã€‚ç°åœ¨ï¼Œæˆ‘éœ€è¦å°†è¿™äº›æ”¹åŠ¨å‘å¸ƒåˆ°æˆ‘è‡ªå·±çš„GitHubä»“åº“ï¼ˆä¾‹å¦‚ï¼šhttps://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.gitï¼‰ï¼ŒåŒæ—¶ä¿ç•™ä¸ YANG-Haruka/LinguaHaru åŸå§‹ä»“åº“çš„è¿æ¥ï¼Œä»¥ä¾¿å°†æ¥è·å–æ›´æ–°ã€‚\næ“ä½œæ­¥éª¤ï¼š # æ•´ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šé¦–å…ˆå°†åŸå§‹ä»“åº“é‡å‘½åä¸º upstreamï¼Œç„¶åå°†ä½ è‡ªå·±çš„GitHubä»“åº“è®¾ç½®ä¸ºæ–°çš„ originï¼Œå®Œæˆé¦–æ¬¡æ¨é€ã€‚ä¹‹åï¼Œå†é€šè¿‡ upstream æ‹‰å–åŸå§‹é¡¹ç›®çš„æ›´æ–°å¹¶åˆå¹¶ã€‚\né›¶ã€åœ¨GitHubä¸Šåˆ›å»ºä½ è‡ªå·±çš„æ–°ä»“åº“ (å¦‚æœå°šæœªåˆ›å»º) # åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ å·²ç»åœ¨GitHubä¸Šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ç©ºçš„ä»“åº“ï¼Œç”¨äºå­˜æ”¾ä½ çš„ LinguaHaru é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º LinguaHaru çš„ä»“åº“ã€‚è®°ä¸‹å®ƒçš„HTTPSåœ°å€ï¼Œä¾‹å¦‚ https://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.gitã€‚\nç¬¬ä¸€æ­¥ï¼šè¿›å…¥é¡¹ç›®ç›®å½• # é¦–å…ˆï¼Œåœ¨ä½ çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆæ¯”å¦‚ Git Bashï¼‰ä¸­è¿›å…¥åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•ï¼š\ncd D:\\_Files\\Project\\github\\LinguaHaru ç¬¬äºŒæ­¥ï¼šé‡æ–°é…ç½®è¿œç¨‹ä»“åº“åœ°å€ # è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚ç”±äºä½ å½“å‰çš„ origin æŒ‡å‘äº†åŸå§‹é¡¹ç›®ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œè°ƒæ•´ã€‚\næ£€æŸ¥å½“å‰è¿œç¨‹ä»“åº“ï¼š\ngit remote -v ä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š\norigin https://github.com/YANG-Haruka/LinguaHaru.git (fetch) origin https://github.com/YANG-Haruka/LinguaHaru.git (push) å°†åŸå§‹é¡¹ç›®çš„ origin é‡å‘½åä¸º upstreamï¼š è¿™å°†æŠŠ https://github.com/YANG-Haruka/LinguaHaru.git è¿™ä¸ªåœ°å€å…³è”åˆ° upstream è¿™ä¸ªåˆ«åï¼Œä»¥ä¾¿å°†æ¥è·å–å®ƒçš„æ›´æ–°ã€‚\ngit remote rename origin upstream æ·»åŠ ä½ è‡ªå·±çš„GitHubä»“åº“ä½œä¸ºæ–°çš„ originï¼š ç°åœ¨ï¼Œä½ éœ€è¦æŠŠä½ è‡ªå·±çš„GitHubä»“åº“åœ°å€æ·»åŠ ä¸º originã€‚è¯·å°† https://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.git æ›¿æ¢ä¸ºä½ å®é™…çš„ä»“åº“åœ°å€ã€‚\ngit remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.git å†æ¬¡æ£€æŸ¥è¿œç¨‹ä»“åº“ï¼Œç¡®è®¤é…ç½®ï¼š\ngit remote -v ç°åœ¨ä½ åº”è¯¥èƒ½çœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼š\norigin https://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.git (fetch) origin https://github.com/ä½ çš„ç”¨æˆ·å/LinguaHaru.git (push) upstream https://github.com/YANG-Haruka/LinguaHaru.git (fetch) upstream https://github.com/YANG-Haruka/LinguaHaru.git (push) è¿™è¡¨æ˜ä½ å·²ç»æˆåŠŸè®¾ç½®äº† origin æŒ‡å‘ä½ è‡ªå·±çš„ä»“åº“ï¼Œupstream æŒ‡å‘åŸå§‹ä»“åº“ã€‚\nç¬¬ä¸‰æ­¥ï¼šé¦–æ¬¡æ¨é€ä½ çš„é­”æ”¹ç‰ˆæœ¬åˆ°è‡ªå·±çš„ä»“åº“ # ç°åœ¨ï¼Œä½ çš„æœ¬åœ°ä»“åº“å·²ç»å‡†å¤‡å°±ç»ªï¼Œå¯ä»¥æ¨é€åˆ°ä½ è‡ªå·±çš„GitHubä»“åº“äº†ã€‚\ngit push -u origin main git push: å°†æœ¬åœ°æ›´æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ã€‚ -u (æˆ– --set-upstream): è®¾ç½® origin/main ä½œä¸ºå½“å‰æœ¬åœ°åˆ†æ”¯ main çš„ä¸Šæ¸¸ï¼ˆè·Ÿè¸ªï¼‰åˆ†æ”¯ã€‚è¿™æ ·ï¼Œä»¥åä½ åªéœ€è¦è¿è¡Œ git push æˆ– git pullï¼ŒGit å°±ä¼šçŸ¥é“æ¨é€åˆ°å“ªä¸ªè¿œç¨‹åˆ†æ”¯ã€‚ origin: æ¨é€çš„ç›®æ ‡è¿œç¨‹ä»“åº“åˆ«åã€‚ main: æ¨é€çš„æœ¬åœ°åˆ†æ”¯åç§°ï¼ˆå¦‚æœä½ çš„ä¸»åˆ†æ”¯æ˜¯ masterï¼Œè¯·ç›¸åº”æ›¿æ¢ï¼‰ã€‚ è‡³æ­¤ï¼Œä½ çš„â€œé­”æ”¹â€ç‰ˆæœ¬å·²ç»æˆåŠŸå‘å¸ƒåˆ°äº†ä½ è‡ªå·±çš„GitHubä»“åº“ï¼\nç¬¬å››æ­¥ï¼šè·å–ä¸Šæ¸¸ï¼ˆåŸå§‹ï¼‰ä»“åº“çš„æ›´æ–° # å°†æ¥ï¼Œå½“åŸå§‹é¡¹ç›® YANG-Haruka/LinguaHaru æœ‰äº†æ–°çš„æ›´æ–°æ—¶ï¼Œä½ å¯ä»¥ä» upstream è¿œç¨‹ä»“åº“æ‹‰å–æœ€æ–°çš„ä»£ç å’Œåˆ†æ”¯ä¿¡æ¯ï¼š\ngit fetch upstream è¿™ä¸ªå‘½ä»¤åªä¼šä¸‹è½½æ›´æ–°åˆ°ä½ çš„æœ¬åœ°ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶åˆ°ä½ å½“å‰å·¥ä½œçš„åˆ†æ”¯ã€‚å®ƒä¼šæŠŠ upstream ä»“åº“çš„æ‰€æœ‰åˆ†æ”¯æ›´æ–°ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶å­˜å‚¨ä¸º upstream/mainã€upstream/dev ç­‰å½¢å¼ã€‚\nç¬¬äº”æ­¥ï¼šåˆå¹¶ä¸Šæ¸¸æ›´æ–° # ç°åœ¨åˆ°äº†å…³é”®ä¸€æ­¥ï¼Œå°†ä» upstream æ‹‰å–åˆ°çš„æ›´æ–°åˆå¹¶åˆ°ä½ è‡ªå·±çš„åˆ†æ”¯ä¸Šã€‚æˆ‘å½“å‰åœ¨ main åˆ†æ”¯å·¥ä½œï¼š\ngit merge upstream/main è¯·æ ¹æ®å®é™…æƒ…å†µå°† main æ›¿æ¢ä¸ºä½ è‡ªå·±å’ŒåŸå§‹ä»“åº“çš„ä¸»åˆ†æ”¯åç§°ã€‚ Git ä¼šå°è¯•å°† upstream/main åˆ†æ”¯çš„æ›´æ”¹åˆå¹¶åˆ°ä½ å½“å‰æ‰€åœ¨çš„ main åˆ†æ”¯ã€‚\nå¯èƒ½å‡ºç°çš„é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š fatal: refusing to merge unrelated histories\nè¿™ä¸ªé”™è¯¯è¡¨æ˜ Git è®¤ä¸ºä½ çš„æœ¬åœ°ä»“åº“ï¼ˆä½ ç›®å‰çš„ main åˆ†æ”¯ï¼‰å’Œ upstream/main åˆ†æ”¯çš„å†å²æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œå®ƒä»¬æ²¡æœ‰ä»»ä½•å…±äº«çš„æäº¤ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä½ ä¸æ˜¯é€šè¿‡ git clone è€Œæ˜¯ç›´æ¥ä¸‹è½½ä»£ç å git initï¼Œæˆ–è€…ä½ åœ¨æœ¬åœ°ä»“åº“åˆ›å»ºå†å²åï¼Œæ‰è¯•å›¾åˆå¹¶ä¸€ä¸ªæ²¡æœ‰å…±åŒç¥–å…ˆçš„è¿œç¨‹å†å²ã€‚\nGit é»˜è®¤é˜»æ­¢åˆå¹¶ä¸ç›¸å…³çš„å†å²ï¼Œæ˜¯ä¸ºäº†é˜²æ­¢ä½ æ„å¤–åœ°åˆå¹¶ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„é¡¹ç›®ï¼Œå¯¼è‡´æ··ä¹±çš„æäº¤å†å²ã€‚ä½†æ˜¯ï¼Œåœ¨ä½ çŸ¥é“è¿™ä¸¤ä¸ªé¡¹ç›®å®é™…ä¸Šæ˜¯ç›¸å…³çš„ï¼ˆä½ çš„é¡¹ç›®åŸºäºåŸå§‹é¡¹ç›®ï¼‰å¹¶ä¸”ä½ ç¡®å®æƒ³åˆå¹¶å®ƒä»¬çš„æƒ…å†µä¸‹ï¼Œä½ éœ€è¦æ˜¾å¼åœ°å‘Šè¯‰ Git å…è®¸åˆå¹¶ä¸ç›¸å…³çš„å†å²ã€‚\nè§£å†³æ–¹æ³•æ˜¯åœ¨ git merge å‘½ä»¤åé¢åŠ ä¸Š --allow-unrelated-histories é€‰é¡¹ï¼š\ngit merge upstream/main --allow-unrelated-histories æ³¨æ„ï¼š é€šå¸¸è¿™ä¸ªé€‰é¡¹åªåœ¨é¦–æ¬¡åˆå¹¶ä¸¤ä¸ªä¸ç›¸å…³çš„å†å²æ—¶éœ€è¦ã€‚ä¸€æ—¦ä½ æˆåŠŸåˆå¹¶äº†ä¸€æ¬¡ï¼Œå®ƒä»¬å°±æœ‰äº†å…±åŒçš„æäº¤å†å²ï¼Œåç»­çš„åˆå¹¶å°±ä¸å†éœ€è¦è¿™ä¸ªé€‰é¡¹äº†ã€‚\nç¬¬å…­æ­¥ï¼šè§£å†³å†²çª (å¦‚æœå‡ºç°) # åˆå¹¶æ“ä½œåï¼Œå¦‚æœä½ çš„ä¿®æ”¹å’ŒåŸå§‹é¡¹ç›®çš„æ›´æ–°åœ¨åŒä¸€ä¸ªåœ°æ–¹å‘ç”Ÿäº†é‡å ï¼ŒGit å°±æ— æ³•è‡ªåŠ¨å†³å®šä¿ç•™å“ªä¸ªç‰ˆæœ¬ï¼Œä»è€Œäº§ç”Ÿå†²çªã€‚\næŸ¥çœ‹å†²çªæ–‡ä»¶ï¼š Git å·²ç»æ ‡è®°äº†æ‰€æœ‰å†²çªçš„æ–‡ä»¶ã€‚ä½ å¯ä»¥é€šè¿‡è¿è¡Œ git status æ¥å†æ¬¡æŸ¥çœ‹å†²çªæ–‡ä»¶çš„åˆ—è¡¨ã€‚å†²çªæ–‡ä»¶ä¼šæ˜¾ç¤ºåœ¨ \u0026ldquo;Unmerged paths\u0026rdquo; éƒ¨åˆ†ã€‚\ngit status è¾“å‡ºçš„ä¸€éƒ¨åˆ†ï¼ŒUnmerged paths è¡¨ç¤ºå†²çªæ–‡ä»¶ï¼Œè¿™éƒ¨åˆ†æ˜¯éœ€è¦æ‰‹åŠ¨è§£å†³å†²çªçš„ï¼š\nUnmerged paths: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to mark resolution) both added: .github/workflows/deploy.yml both added: .gitignore both added: .vitepress/config.ts # ... å…¶ä»–å†²çªæ–‡ä»¶ ... æ‰‹åŠ¨è§£å†³å†²çªï¼š å¯¹äºæ¯ä¸ªå†²çªæ–‡ä»¶ï¼Œä½ éœ€è¦æ‰‹åŠ¨ç¼–è¾‘å®ƒä»¬ï¼Œå¹¶å¤„ç† Git æ·»åŠ çš„å†²çªæ ‡è®° (\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD, =======, \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main)ã€‚ æ‰“å¼€æ¯ä¸ªå†²çªæ–‡ä»¶ï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ç»“æ„ï¼š\n\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD // è¿™æ˜¯ä½ åœ¨æœ¬åœ° main åˆ†æ”¯çš„ä¿®æ”¹ console.log(\u0026#34;My custom feature\u0026#34;); ======= // è¿™æ˜¯ä» upstream/main åˆ†æ”¯æ‹‰å–åˆ°çš„åŸå§‹ä»“åº“çš„ä¿®æ”¹ console.log(\u0026#34;New feature from upstream\u0026#34;); \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main ä½ éœ€è¦æ‰‹åŠ¨ç¼–è¾‘è¿™äº›æ–‡ä»¶ï¼š\næ‰¾åˆ°å†²çªæ ‡è®° (\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD, =======, \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main)ã€‚ ä»”ç»†é˜…è¯» \u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt;\u0026lt; HEAD åˆ° ======= ä¹‹é—´ï¼ˆä½ æœ¬åœ°çš„ä¿®æ”¹ï¼‰å’Œ ======= åˆ° \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; upstream/main ä¹‹é—´ï¼ˆåŸå§‹ä»“åº“çš„ä¿®æ”¹ï¼‰çš„ä»£ç ã€‚ æ‰‹åŠ¨ä¿®æ”¹è¿™éƒ¨åˆ†ä»£ç ï¼Œä¿ç•™ä½ æƒ³è¦çš„éƒ¨åˆ†ï¼Œå¹¶åˆ é™¤æ‰€æœ‰çš„å†²çªæ ‡è®°ã€‚ æ ‡è®°å†²çªå·²è§£å†³ç„¶åæ¨é€ï¼š\ngit add \u0026lt;è§£å†³å†²çªçš„æ–‡ä»¶å\u0026gt; git commit -m \u0026#34;Merge updates from upstream YANG-Haruka/LinguaHaru\u0026#34; git push origin main ","date":"2025-06-19","externalUrl":null,"permalink":"/posts/git-2-%E5%A6%82%E4%BD%95%E5%B0%86%E5%85%8B%E9%9A%86%E7%9A%84%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%8F%91%E5%B8%83%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84github%E5%B9%B6%E4%BC%98%E9%9B%85%E5%9C%B0%E5%90%88%E5%B9%B6%E4%B8%8A%E6%B8%B8%E6%9B%B4%E6%96%B0/","section":"Posts","summary":"","title":"Git-2-å¦‚ä½•å°†å…‹éš†çš„å¼€æºé¡¹ç›®å‘å¸ƒåˆ°è‡ªå·±çš„GitHubï¼Œå¹¶ä¼˜é›…åœ°åˆå¹¶ä¸Šæ¸¸æ›´æ–°","type":"posts"},{"content":" BootLoaderçš„å¯åŠ¨åˆ†æ # Bootloaderæ˜¯åœ¨æ“ä½œç³»ç»Ÿè¿è¡Œä¹‹å‰æ‰§è¡Œçš„ä¸€æ®µå°ç¨‹åºã€‚é€šè¿‡è¿™æ®µå°ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥åˆå§‹åŒ–ç¡¬ä»¶è®¾å¤‡ã€å»ºç«‹å†…å­˜ç©ºé—´çš„æ˜ å°„è¡¨ï¼Œä»è€Œå»ºç«‹é€‚å½“çš„ç³»ç»Ÿè½¯ç¡¬ä»¶ç¯å¢ƒï¼Œä¸ºæœ€ç»ˆè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸åšå¥½å‡†å¤‡ã€‚\n1.stage # ç”±äºBootLoaderçš„å®ç°ä¾èµ–äºCPUä½“ç³»ç»“æ„ï¼Œå¤§å¤šæ•°BootLoaderéƒ½åˆ†ä¸ºstage1å’Œstage2ä¸¤å¤§éƒ¨åˆ†\nStage1 ä¾èµ–äºCPUä½“ç³»ç»“æ„ï¼Œå¦‚è®¾å¤‡åˆå§‹åŒ–ä»£ç  é€šå¸¸ç”¨æ±‡ç¼–è¯­è¨€å®ç°ï¼ŒçŸ­å°ç²¾æ‚ Stage2 é€šå¸¸ç”¨Cè¯­è¨€ å¯ä»¥å®ç°å¤æ‚åŠŸèƒ½ ä»£ç å…·æœ‰è¾ƒå¥½çš„å¯è¯»æ€§å’Œå¯ç§»æ¤æ€§ 2.Stage1 # ç›´æ¥è¿è¡Œåœ¨å›ºæ€å­˜å‚¨è®¾å¤‡ä¸Šï¼Œé€šå¸¸åŒ…æ‹¬ä»¥ä¸‹äº”ä¸ªæ­¥éª¤ ï¼š\nç¡¬ä»¶è®¾å¤‡åˆå§‹åŒ– å±è”½æ‰€æœ‰çš„ä¸­æ–­ã€è®¾ç½®CPUçš„é€Ÿåº¦å’Œæ—¶é’Ÿé¢‘ç‡ã€RAMåˆå§‹åŒ–ã€åˆå§‹åŒ–LEDã€å…³é—­CPUå†…éƒ¨æŒ‡ä»¤ï¼æ•°æ® cache ä¸ºåŠ è½½ BootLoaderçš„stage2å‡†å¤‡RAMç©ºé—´ ä¸€èˆ¬è€Œè¨€1MBå·²è¶³å¤Ÿ æ‹·è´ BootLoaderçš„stage2åˆ°RAMç©ºé—´ä¸­ è®¾ç½®å¥½å †æ ˆ é€šå¸¸è®¾ç½®åœ¨ä¸Šè¿°1MB RAM ç©ºé—´çš„æœ€é¡¶ç«¯ åœ¨è®¾ç½®å †æ ˆæŒ‡é’ˆå‰ï¼Œä¹Ÿå¯å…³é—­ led ç¯ï¼Œä»¥æç¤ºç”¨æˆ·å³å°†è·³è½¬åˆ° stage2 è·³è½¬åˆ°stage2çš„Cå…¥å£ç‚¹ 3.Stage2 # é€šå¸¸åŒ…æ‹¬ä»¥ä¸‹äº”ä¸ªæ­¥éª¤\nåˆå§‹åŒ–æœ¬é˜¶æ®µè¦ä½¿ç”¨åˆ°çš„ç¡¬ä»¶è®¾å¤‡ åˆå§‹åŒ–è‡³å°‘ä¸€ä¸ªä¸²å£,åœ¨è®¾å¤‡åˆå§‹åŒ–å®Œæˆåï¼Œè¾“å‡ºä¸€äº›æ‰“å°ä¿¡æ¯ï¼› åˆå§‹åŒ–è®¡æ—¶å™¨ç­‰ã€‚ æ£€æµ‹ç³»ç»Ÿå†…å­˜æ˜ å°„(memory map) å†…å­˜æ˜ å°„ï¼šåœ¨æ•´ä¸ª 4GB ç‰©ç†åœ°å€ç©ºé—´ä¸­æœ‰å“ªäº›åœ°å€ èŒƒå›´è¢«åˆ†é…ç”¨æ¥å¯»å€ç³»ç»Ÿçš„ RAM å•å…ƒ å°† kernel æ˜ åƒå’Œæ ¹æ–‡ä»¶ç³»ç»Ÿæ˜ åƒä» flash ä¸Šè¯»åˆ° RAM ç©ºé—´ä¸­â€”â€”åŠ è½½æ˜ åƒ ä¸ºå†…æ ¸è®¾ç½®å¯åŠ¨å‚æ•° å†…æ ¸å‚æ•°ï¼Œå¦‚é¡µé¢å¤§å°ã€æ ¹è®¾å¤‡ å†…å­˜æ˜ å°„æƒ…å†µ å‘½ä»¤è¡Œå‚æ•° initrdæ˜ åƒå‚æ•° Ramdiskå‚æ•° è°ƒç”¨å†…æ ¸ ç›´æ¥è·³è½¬åˆ°å†…æ ¸çš„ç¬¬ä¸€æ¡æŒ‡ä»¤å¤„ï¼Œä¹Ÿå³RAMä¸­å†…æ ¸ è¢«åŠ è½½çš„åœ°å€å¤„ ä»æ­¤æ“ä½œç³»ç»Ÿæ¥ç®¡æ‰€æœ‰çš„å·¥ä½œ ","date":"2025-06-17","externalUrl":null,"permalink":"/posts/bootloader%E5%90%AF%E5%8A%A8%E5%88%86%E6%9E%90/","section":"Posts","summary":"","title":"BootLoaderå¯åŠ¨åˆ†æ","type":"posts"},{"content":" FLASH # ç±»åˆ« NOR NAND è¯» å†…å­˜ç±»æ¥å£å’Œè®¿é—®SRAMä¸€æ ·ï¼Œéšæœºè®¿é—®ä»»æ„åœ°å€æ•°æ® æœ‰ä¸¥æ ¼çš„æ—¶è®¸è¦æ±‚ å†™ æ…¢ï¼Œåªèƒ½ä»1å†™åˆ°0ï¼Œå†™å…¥1éœ€è¦æ“¦é™¤ å¿«ï¼Œåªèƒ½ä»1å†™åˆ°0ï¼Œå†™å…¥1éœ€è¦æ“¦é™¤ æ“¦é™¤ éå¸¸æ…¢ï¼Œ5s å¿«ï¼Œ3ms XIP YES NO å¯é æ€§ é«˜ ä½ï¼Œå¿…é¡»è¦æ ¡éªŒ æ¥å£ åœ°å€ä¸æ•°æ®åˆ†å¼€ I/O åœ°å€ä¸æ•°æ®å…±ç”¨ å…¶å®ƒ å¯¿å‘½çŸ­ã€å®¹é‡å°ã€ä»·æ ¼é«˜ ä¸NORç›¸å åœºæ™¯ MCUå†…çš„å­˜å‚¨ SDå¡ã€Uç›˜ã€å›ºæ€ CPUã€MPUã€MCUã€SOCã€SOPC # ç±»åˆ« åˆ«å å®šä¹‰ ç†è§£ CPU(Central Processing Unit) ä¸­å¤®å¤„ç†å™¨ ç”±è¿ç®—å™¨ã€æ§åˆ¶å™¨å’Œå¯„å­˜å™¨åŠå®ç°å®ƒä»¬ä¹‹é—´è”ç³»çš„æ•°æ®ã€æ§åˆ¶åŠçŠ¶æ€çš„æ€»çº¿æ„æˆ é€šç”¨çš„CPU MPU(Micro Processor Unit) å¾®å¤„ç†å™¨ å¢å¼ºç‰ˆçš„CPUï¼Œå¾€å¾€æ˜¯ä¸ªäººè®¡ç®—æœºå’Œé«˜ç«¯å·¥ä½œç«™çš„æ ¸å¿ƒCPUã€‚æœ€å¸¸è§çš„å¾®å¤„ç†å™¨æ˜¯Motorolaçš„68Kç³»åˆ—å’ŒIntelçš„X86ç³»åˆ— å¢å¼ºç‰ˆçš„CPU MCU(Micro Control Unit) å¾®æ§åˆ¶å™¨ å°†è®¡ç®—æœºçš„ CPUã€RAMã€ROMã€å®šæ—¶è®¡æ•°å™¨å’Œå¤šç§I/Oæ¥å£é›†æˆåœ¨ä¸€ç‰‡èŠ¯ç‰‡ä¸Šï¼Œå½¢æˆèŠ¯ç‰‡çº§çš„èŠ¯ç‰‡ï¼Œæ¯”å¦‚51ï¼Œavrè¿™äº›èŠ¯ç‰‡ MCU MPU æœ€ä¸»è¦çš„åŒºåˆ«å°±æ˜¯èƒ½å¦ç›´æ¥è¿è¡Œä»£ç ã€‚MCUæœ‰å†…éƒ¨çš„RAM ROMï¼Œè€ŒMPUæ˜¯å¢å¼ºç‰ˆçš„CPUï¼Œéœ€è¦æ·»åŠ å¤–éƒ¨RAM ROMæ‰å¯ä»¥è¿è¡Œä»£ç ã€‚ SOC(System on Chip) ç‰‡ä¸Šç³»ç»Ÿ MCUåªæ˜¯èŠ¯ç‰‡çº§çš„èŠ¯ç‰‡ï¼Œè€ŒSOCæ˜¯ç³»ç»Ÿçº§çš„èŠ¯ç‰‡ï¼Œå®ƒæ—¢åƒMCUï¼ˆ51ï¼Œavrï¼‰é‚£æ ·æœ‰å†…ç½®RAM,ROMï¼ŒåŒæ—¶åˆåƒMPUï¼ˆarmï¼‰é‚£æ ·å¼ºå¤§çš„ï¼Œä¸å•å•æ˜¯æ”¾ç®€å•çš„ä»£ç ï¼Œå¯ä»¥æ”¾ç³»ç»Ÿçº§çš„ä»£ç ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è¿è¡Œæ“ä½œç³»ç»Ÿ å°†å°±è®¤ä¸ºæ˜¯MCUé›†æˆåŒ–ä¸MPUå¼ºå¤„ç†åŠ›å„ä¼˜ç‚¹äºŒåˆä¸€ SOPC(System On a Programmable Chip) å¯ç¼–ç¨‹ç‰‡ä¸Šç³»ç»Ÿï¼ˆFPGAå°±æ˜¯å…¶ä¸­ä¸€ç§ï¼‰ ç¡¬ä»¶é…ç½®ï¼Œè½¯ä»¶é…ç½®éƒ½å¯ä»¥ä¿®æ”¹ï¼Œæ²¡æœ‰ä¸‹è½½å‰ï¼Œå«â€œç™½ç‰‡â€ï¼Œä»€ä¹ˆèŠ¯ç‰‡éƒ½ä¸æ˜¯ï¼ŒæŠŠç¡¬ä»¶é…ç½®ä¿¡æ¯ä¸‹è½½è¿›å»äº†ï¼Œä»–å°±æ˜¯ç›¸åº”çš„èŠ¯ç‰‡äº†ï¼Œå¯ä»¥è®©ä»–å˜æˆ51ï¼Œä¹Ÿå¯ä»¥æ˜¯avrï¼Œç”šè‡³armï¼ŒåŒæ—¶SOPCæ˜¯åœ¨SOCåŸºç¡€ä¸Šæ¥çš„ï¼Œæ‰€ä»¥ä»–ä¹Ÿæ˜¯ç³»ç»Ÿçº§çš„èŠ¯ç‰‡ï¼Œæ‰€ä»¥è®°å¾—å½“æŠŠä»–å˜æˆarmæ—¶è¿˜å¾—åŠ å¤–å›´ROMï¼ŒRAMä¹‹ç±»çš„ï¼Œä¸ç„¶å°±æ˜¯MPUäº† å¯ç¼–ç¨‹ç¡¬ä»¶ äº¤å‰ç¼–è¯‘ # å®šä¹‰ï¼š åœ¨ä¸€ç§è®¡ç®—æœºç¯å¢ƒä¸­è¿è¡Œçš„ç¼–è¯‘ç¨‹åºï¼Œèƒ½ç¼–è¯‘å‡ºåœ¨å¦å¤–ä¸€ç§ç¯å¢ƒä¸‹è¿è¡Œçš„ä»£ç ï¼Œæˆ‘ä»¬å°±ç§°è¿™ç§ç¼–è¯‘å™¨æ”¯æŒäº¤å‰ç¼–è¯‘ã€‚ç®€å•åœ°è¯´ï¼Œå°±æ˜¯åœ¨ä¸€ä¸ªå¹³å°ä¸Šç”Ÿæˆå¦ä¸€ä¸ªå¹³å°ä¸Šçš„å¯æ‰§è¡Œä»£ç ã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯æ‰€è°“å¹³å°ï¼Œå®é™…ä¸ŠåŒ…å«ä¸¤ä¸ªæ¦‚å¿µï¼šä½“ç³»ç»“æ„ï¼ˆArchitectureï¼‰ã€æ“ä½œç³»ç»Ÿï¼ˆOperatingSystemï¼‰ã€‚åŒä¸€ä¸ªä½“ç³»ç»“æ„å¯ä»¥è¿è¡Œä¸åŒçš„æ“ä½œç³»ç»Ÿï¼›åŒæ ·ï¼ŒåŒä¸€ä¸ªæ“ä½œç³»ç»Ÿä¹Ÿå¯ä»¥åœ¨ä¸åŒçš„ä½“ç³»ç»“æ„ä¸Šè¿è¡Œã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œæˆ‘ä»¬å¸¸è¯´çš„x86 Linuxå¹³å°å®é™…ä¸Šæ˜¯Intel x86ä½“ç³»ç»“æ„å’ŒLinux for x86æ“ä½œç³»ç»Ÿçš„ç»Ÿç§°ï¼›è€Œx86 WinNTå¹³å°å®é™…ä¸Šæ˜¯Intel x86ä½“ç³»ç»“æ„å’ŒWindows NT for x86æ“ä½œç³»ç»Ÿçš„ç®€ç§°ã€‚\næœ‰æ—¶æ˜¯å› ä¸ºç›®çš„å¹³å°ä¸Šä¸å…è®¸æˆ–ä¸èƒ½å¤Ÿå®‰è£…æˆ‘ä»¬æ‰€éœ€è¦çš„ç¼–è¯‘å™¨ï¼Œè€Œæˆ‘ä»¬åˆéœ€è¦è¿™ä¸ªç¼–è¯‘å™¨çš„æŸäº›ç‰¹å¾ï¼›æœ‰æ—¶æ˜¯å› ä¸ºç›®çš„å¹³å°ä¸Šçš„èµ„æºè´«ä¹ï¼Œæ— æ³•è¿è¡Œæˆ‘ä»¬æ‰€éœ€è¦ç¼–è¯‘å™¨ï¼›æœ‰æ—¶åˆæ˜¯å› ä¸ºç›®çš„å¹³å°è¿˜æ²¡æœ‰å»ºç«‹ï¼Œè¿æ“ä½œç³»ç»Ÿéƒ½æ²¡æœ‰ï¼Œæ ¹æœ¬è°ˆä¸ä¸Šè¿è¡Œä»€ä¹ˆç¼–è¯‘å™¨ã€‚\nARM Cortex-Må†…æ ¸å¯åŠ¨æµç¨‹ # ä¸€ã€ å¯åŠ¨æµç¨‹ï¼š5 ä¸ªæ ¸å¿ƒæ­¥éª¤ # å†…æ ¸ä¸Šç”µå¤ä½: èŠ¯ç‰‡ç¡¬ä»¶å±‚é¢å®Œæˆåˆå§‹åŒ–çš„æ­¥éª¤ã€‚ PC æŒ‡å‘å¤ä½ä¸­æ–­å‘é‡: ç¡¬ä»¶å¼ºåˆ¶ç¨‹åºè®¡æ•°å™¨ (PC) è·³è½¬åˆ°ä¸­æ–­å‘é‡è¡¨çš„å¤ä½ä¸­æ–­å‡½æ•°ã€‚ æ‰§è¡Œ Reset_Handler å’Œ SystemInit: åœ¨å¤ä½ä¸­æ–­å‡½æ•°ä¸­ï¼Œå®Œæˆæ—¶é’Ÿã€ä¸­æ–­å‘é‡è¡¨ç­‰åˆå§‹åŒ–ã€‚ æ‰§è¡Œ __main å‡½æ•°: å®Œæˆ C è¯­è¨€è¿è¡Œç¯å¢ƒçš„å…³é”®åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬å…¨å±€/é™æ€å˜é‡çš„åˆå§‹åŒ–å’Œé‡å®šä½ï¼Œä»¥åŠå †æ ˆå’Œåº“å‡½æ•°çš„è®¾ç½®ã€‚ è·³è½¬åˆ° main å‡½æ•°: æœ€ç»ˆè¿›å…¥ç”¨æˆ·ç¼–å†™çš„åº”ç”¨ç¨‹åºå…¥å£ç‚¹ã€‚ äºŒã€ æ ¸å¿ƒæ­¥éª¤è¯¦ç»†è§£æ # æ­¥éª¤ 1. å†…æ ¸ä¸Šç”µå¤ä½ - è§¦å‘: å½“å•ç‰‡æœºä¸Šç”µæˆ–å¤–éƒ¨å¤ä½ä¿¡å·ï¼ˆå¦‚æŒ‰ä¸‹å¤ä½æŒ‰é”®ï¼‰æœ‰æ•ˆæ—¶ï¼ŒèŠ¯ç‰‡å†…éƒ¨çš„ç¡¬ä»¶å¤ä½é€»è¾‘è¢«è§¦å‘ã€‚\n- ç¡¬ä»¶æ“ä½œ: å¯¹äº ARM Cortex-M å†…æ ¸ï¼Œç¡¬ä»¶ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹ä¸¤ä¸ªå…³é”®æ“ä½œï¼š\n- ä»åœ°å€ 0x00000000 è¯»å–ä¸€ä¸ª 32 ä½å€¼ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° ä¸»å †æ ˆæŒ‡é’ˆ (MSP) å¯„å­˜å™¨ã€‚è¿™å®šä¹‰äº†å †æ ˆçš„åˆå§‹é¡¶éƒ¨åœ°å€ã€‚\n- ä»åœ°å€ 0x00000004 è¯»å–ä¸€ä¸ª 32 ä½å€¼ï¼Œå¹¶å°†å…¶åŠ è½½åˆ° ç¨‹åºè®¡æ•°å™¨ (PC) å¯„å­˜å™¨ã€‚è¿™ä¸ªå€¼å°±æ˜¯ å¤ä½ä¸­æ–­æœåŠ¡ç¨‹åº (Reset_Handler) çš„å…¥å£åœ°å€ã€‚\n- æœ¬è´¨: å®é™…ä¸Šï¼Œå•ç‰‡æœºå¯åŠ¨çš„æœ¬è´¨å°±æ˜¯ç”±ç¡¬ä»¶è‡ªåŠ¨å‘èµ·äº†ä¸€æ¬¡â€œå¤ä½ä¸­æ–­â€ã€‚ 2.PC æŒ‡å‘å¤ä½ä¸­æ–­å‘é‡ - ä¸­æ–­å‘é‡è¡¨: 0x00000000 å’Œ 0x00000004 æ­£æ˜¯èŠ¯ç‰‡å†…éƒ¨ Flash ä¸­ ä¸­æ–­å‘é‡è¡¨ çš„å¤´ä¸¤ä¸ªæ¡ç›®ã€‚ä¸­æ–­å‘é‡è¡¨æ˜¯å¤„ç†å™¨åœ¨å“åº”ä¸­æ–­æˆ–å¼‚å¸¸æ—¶æŸ¥æ‰¾ç›¸åº”å¤„ç†å‡½æ•°åœ°å€çš„è¡¨æ ¼ã€‚\n- å¼ºåˆ¶æ‰§è¡Œ: ç¡¬ä»¶ç›´æ¥å°† PC æŒ‡å‘ Reset_Handler çš„å…¥å£åœ°å€ï¼Œä»è€Œå¼ºåˆ¶ç¨‹åºä»æ­¤å¤„å¼€å§‹æ‰§è¡Œã€‚ 3.æ‰§è¡Œ Reset_Handler å’Œ SystemInit - Reset_Handler (æ±‡ç¼–): è¿™æ˜¯èŠ¯ç‰‡å¯åŠ¨ä»£ç ä¸­ç¬¬ä¸€ä¸ªè¢«æ‰§è¡Œçš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™ï¼ˆä½äº startup_xxx.s æ–‡ä»¶ä¸­ï¼‰ã€‚å®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯æ­å»º C è¯­è¨€ç¯å¢ƒçš„å‰ç½®æ¡ä»¶ã€‚\n- è°ƒç”¨ SystemInit (C å‡½æ•°): Reset_Handler çš„æ ¸å¿ƒæ“ä½œæ˜¯è°ƒç”¨ SystemInit å‡½æ•°ï¼ˆé€šå¸¸åœ¨ system_xxx.c æ–‡ä»¶ä¸­ï¼‰ï¼Œè¯¥å‡½æ•°ç”±èŠ¯ç‰‡å‚å•†æä¾›ã€‚\n- SystemInit çš„ä¸»è¦å·¥ä½œ:\n- æ—¶é’Ÿåˆå§‹åŒ–: è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚é…ç½®å†…éƒ¨/å¤–éƒ¨æ™¶æŒ¯ã€PLLï¼ˆé”ç›¸ç¯ï¼‰å€é¢‘/åˆ†é¢‘ï¼Œä»¥ç¡®å®šç³»ç»Ÿæ—¶é’Ÿ (SYSCLK)ã€AHB/APB æ€»çº¿æ—¶é’Ÿç­‰ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œå•ç‰‡æœºé€šå¸¸è¿è¡Œåœ¨ä½é€Ÿå†…éƒ¨ RC æŒ¯è¡å™¨ä¸Šã€‚\n- FPU (æµ®ç‚¹å•å…ƒ) ä½¿èƒ½: å¦‚æœèŠ¯ç‰‡åŒ…å«æµ®ç‚¹è¿ç®—å•å…ƒä¸”ç¨‹åºéœ€è¦ä½¿ç”¨ï¼Œåœ¨æ­¤å¤„ä½¿èƒ½ã€‚\n- ä¸­æ–­å‘é‡è¡¨é‡å®šä½ (å¯é€‰): å¦‚æœéœ€è¦å°†ä¸­æ–­å‘é‡è¡¨ä»é»˜è®¤çš„ Flash åœ°å€é‡å®šä½åˆ° RAM ä¸­è¿è¡Œï¼ˆä¾‹å¦‚ï¼Œä¸ºäº†æ”¯æŒ Bootloader å’Œåº”ç”¨ç¨‹åºçš„åˆ‡æ¢ï¼‰ï¼Œä¼šåœ¨æ­¤å¤„é…ç½® VTOR å¯„å­˜å™¨ã€‚\n- å¤–éƒ¨å­˜å‚¨å™¨åˆå§‹åŒ– (å¯é€‰): å¦‚æœç³»ç»Ÿè¿æ¥äº†å¤–éƒ¨ SRAM æˆ– SDRAMï¼Œä¼šè¿›è¡Œå¿…è¦çš„åˆå§‹åŒ–ã€‚ 4. æ‰§è¡Œ __main å‡½æ•° - C åº“å…¥å£: å½“ SystemInit è¿”å›åï¼ŒReset_Handler ä¼šè·³è½¬åˆ° C è¯­è¨€è¿è¡Œæ—¶åº“çš„å…¥å£å‡½æ•° __mainã€‚è¿™ä¸ªå‡½æ•°ç”±ç¼–è¯‘å™¨å·¥å…·é“¾ï¼ˆå¦‚ Keil MDK çš„ ARMCC æˆ– GNU GCCï¼‰æä¾›ï¼Œè´Ÿè´£å®Œæˆ C è¯­è¨€è¿è¡Œç¯å¢ƒçš„æœ€ç»ˆè®¾ç½®ã€‚\n- __main çš„ä¸»è¦å·¥ä½œ (åˆ†æ•£åŠ è½½ - Scatter-Loading):\n1. å¤åˆ¶ .data æ®µ:\n- .data æ®µ: å­˜æ”¾å·²åˆå§‹åŒ–ä¸”åˆå§‹å€¼ ä¸ä¸ºé›¶ çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚\n- åŸç†: è¿™äº›å˜é‡çš„åˆå§‹å€¼å›ºåŒ–åœ¨ Flash ä¸­ï¼ˆç§°ä¸º åŠ è½½åŸŸ Load Region / LMAï¼‰ã€‚ä½†å˜é‡åœ¨ç¨‹åºè¿è¡Œæ—¶éœ€è¦è¢«ä¿®æ”¹ï¼Œå› æ­¤å¿…é¡»å­˜åœ¨äº RAM ä¸­ï¼ˆç§°ä¸º æ‰§è¡ŒåŸŸ Execution Region / VMAï¼‰ã€‚\n- æ“ä½œ: __main ä¼šå°† Flash ä¸­ .data æ®µçš„å†…å®¹ï¼Œç²¾ç¡®åœ°æ‹·è´åˆ° RAM ä¸­å¯¹åº”çš„ä½ç½®ã€‚\n2. æ¸…é›¶ .bss æ®µ:\n- .bss æ®µ: å­˜æ”¾ æœªåˆå§‹åŒ– æˆ– åˆå§‹åŒ–ä¸ºé›¶ çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚\n- åŸç†: ä¸ºäº†èŠ‚çœ Flash ç©ºé—´ï¼Œç¼–è¯‘å™¨ä¸ä¼šåœ¨ Flash ä¸­ä¸ºè¿™äº›å˜é‡å­˜å‚¨å¤§é‡çš„é›¶ã€‚å®ƒåªåœ¨ .map æ–‡ä»¶ä¸­è®°å½•éœ€è¦é¢„ç•™çš„ RAM ç©ºé—´ã€‚\n- æ“ä½œ: __main ä¼šå°† RAM ä¸­ .bss æ®µå¯¹åº”çš„å†…å­˜åŒºåŸŸå…¨éƒ¨å¡«å……ä¸ºé›¶ï¼Œç¬¦åˆ C è¯­è¨€æ ‡å‡†è§„å®šã€‚\n- å…¶ä»–å·¥ä½œ: __main è¿˜ä¼šå®Œæˆå † (heap) å’Œæ ˆ (stack) çš„åˆå§‹åŒ–ï¼Œä»¥åŠä¸º C æ ‡å‡†åº“å‡½æ•°ï¼ˆå¦‚ printfï¼‰å‡†å¤‡å¿…è¦çš„åº•å±‚ç¯å¢ƒã€‚ 5. è·³è½¬åˆ° `main() - ç”¨æˆ·ä»£ç å…¥å£: å½“æ‰€æœ‰ C è¯­è¨€è¿è¡Œç¯å¢ƒçš„å‡†å¤‡å·¥ä½œéƒ½å®Œæˆåï¼Œ__main å‡½æ•°çš„æœ€åä¸€æ­¥å°±æ˜¯æ‰§è¡Œä¸€æ¡è·³è½¬æŒ‡ä»¤ï¼Œå°†ç¨‹åºè®¡æ•°å™¨ (PC) æŒ‡å‘ç”¨æˆ·ç¼–å†™çš„ main å‡½æ•°çš„å…¥å£ã€‚\n- ç¨‹åºè¿è¡Œ: è‡³æ­¤ï¼Œå•ç‰‡æœºå¼€å§‹æ‰§è¡Œç”¨æˆ·è‡ªå·±çš„åº”ç”¨ç¨‹åºé€»è¾‘ã€‚ ä¸‰ã€ å…³é”®æ¦‚å¿µè¡¥å……å’Œè¾¨æ # 1. å˜é‡å­˜å‚¨ä¸å†…å­˜åŒºåŸŸ # _init_data (Flash)ï¼šå­˜æ”¾ .data æ®µå˜é‡çš„åˆå§‹å€¼ï¼Œåœ¨ Flash ä¸­ã€‚ .data (RAM)ï¼šå­˜æ”¾å·²åˆå§‹åŒ–ä¸”åˆå§‹å€¼ ä¸ä¸ºé›¶ çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚å¯åŠ¨æ—¶ä» Flash å¤åˆ¶åˆ°æ­¤ã€‚ .bss (RAM)ï¼šå­˜æ”¾ æœªåˆå§‹åŒ– æˆ– é›¶åˆå§‹åŒ– çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚å¯åŠ¨æ—¶è¢«æ¸…é›¶ã€‚ .rodata (Flash)ï¼šå­˜æ”¾å¸¸é‡ï¼ˆå¦‚ const å…³é”®å­—ä¿®é¥°çš„å…¨å±€å˜é‡å’Œå­—ç¬¦ä¸²å­—é¢é‡ï¼‰ã€‚å®ƒä»¬ä¸éœ€è¦è¢«ä¿®æ”¹ï¼Œç›´æ¥ä» Flash è¯»å–ã€‚ .text (Flash)ï¼šå­˜æ”¾ç¨‹åºçš„æœºå™¨ç ï¼ˆæŒ‡ä»¤ï¼‰ã€‚ å † (Heap)ï¼šåŠ¨æ€åˆ†é…å†…å­˜çš„åŒºåŸŸï¼ˆå¦‚ malloc/freeï¼‰ã€‚è¿è¡Œæ—¶æŒ‰éœ€åˆ†é…ã€‚ æ ˆ (Stack)ï¼šå­˜æ”¾å‡½æ•°å‚æ•°ã€å±€éƒ¨å˜é‡å’Œè¿”å›åœ°å€ã€‚åœ¨å‡½æ•°è°ƒç”¨æ—¶åˆ›å»ºï¼Œå‡½æ•°è¿”å›æ—¶é”€æ¯ã€‚æ ˆç©ºé—´å¤§å°å¯åœ¨ IDE ä¸­è®¾ç½®ã€‚ 2. â€œå•ç‰‡æœºâ€ä¸â€œARMâ€çš„ä»£ç æ‰§è¡Œæ¨¡å¼ # å•ç‰‡æœº (MCU) / ARM Cortex-M ç³»åˆ— (å¦‚ STM32)ï¼š å°±åœ°æ‰§è¡Œ (Execute-In-Place, XIP) ç³»ç»Ÿã€‚å…¶å†…éƒ¨ Flash å­˜å‚¨å™¨è®¿é—®é€Ÿåº¦ç»è¿‡é«˜åº¦ä¼˜åŒ–ï¼ˆæŒ‡ä»¤ç¼“å­˜ã€é¢„å–ç¼“å†²ç­‰ï¼‰ï¼Œè¶³ä»¥åŒ¹é… CPU è¿è¡Œé€Ÿåº¦ã€‚ ä»£ç ï¼ˆ.text æ®µï¼‰é€šå¸¸ç›´æ¥åœ¨ Flash ä¸­æ‰§è¡Œï¼Œä¸éœ€è¦ä¹Ÿä¸èƒ½å®Œå…¨æ‹·è´åˆ° RAMã€‚è¿™èŠ‚çœäº†å®è´µçš„ RAM èµ„æºå¹¶åŠ å¿«å¯åŠ¨é€Ÿåº¦ã€‚ ä¾‹å¤–: æå°‘æ•°å¯¹æ€§èƒ½è¦æ±‚æè‡´çš„å‡½æ•°ï¼ˆå¦‚æŸäº›ä¸­æ–­æœåŠ¡ç¨‹åºï¼‰å¯é€šè¿‡ç¼–è¯‘å™¨æŒ‡ä»¤æŒ‡å®šåŠ è½½åˆ° RAM ä¸­è¿è¡Œã€‚ åº”ç”¨å¤„ç†å™¨ (APU) / ARM Cortex-A ç³»åˆ— (å¦‚æ ‘è“æ´¾ã€æ‰‹æœºå¤„ç†å™¨)ï¼š é€šå¸¸è¿è¡Œå¤§å‹æ“ä½œç³»ç»Ÿï¼ˆå¦‚ Linuxï¼‰ã€‚å¯åŠ¨æ—¶é¢å¯¹çš„æ˜¯ç›¸å¯¹è¾ƒæ…¢çš„å¤–éƒ¨å­˜å‚¨ä»‹è´¨ï¼ˆå¦‚ eMMCã€NAND Flashï¼‰ã€‚ ä¸ºäº†æé«˜æ‰§è¡Œæ•ˆç‡ï¼ŒAPU çš„å¯åŠ¨è¿‡ç¨‹ä¼šå…ˆå°†æ“ä½œç³»ç»Ÿå†…æ ¸ç­‰æ ¸å¿ƒä»£ç ä»æ…¢é€Ÿå­˜å‚¨ å®Œæ•´æ‹·è´åˆ°é«˜é€Ÿçš„ DDR RAM ä¸­ï¼Œå†ä» RAM ä¸­æ‰§è¡Œã€‚ ç»“è®º: æ‚¨æ‰€è¯´çš„â€œå•ç‰‡æœºä¸éœ€è¦å°†ä»£ç ä» ROM æ¬ç§»åˆ° RAMâ€æ˜¯å¯¹ Cortex-M MCU çš„å‡†ç¡®æè¿°ã€‚â€œARM éœ€è¦â€åˆ™ä¸»è¦æŒ‡ Cortex-A APUã€‚ 3. å†…å­˜åœ°å€åˆ†é… # å…¨å±€å˜é‡ã€é™æ€å˜é‡å’Œå¸¸é‡çš„åœ°å€åœ¨ç¼–è¯‘æ—¶å°±å·²è¢«åˆ†é…å¥½ï¼Œå¯ä»¥åœ¨ .map æ–‡ä»¶ä¸­æŸ¥çœ‹å…¶å…·ä½“åœ°å€å’Œå¤§å°ã€‚ å±€éƒ¨å˜é‡çš„åœ°å€åˆ™æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œåœ¨æ ˆä¸ŠåŠ¨æ€åˆ†é…çš„ã€‚ å››ã€ æµç¨‹ç¤ºæ„å›¾ # ä¸Šç”µ/å¤ä½ | v ----------------------------- | ç¡¬ä»¶åˆå§‹åŒ– (PC=0x04, MSP=0x00) | ----------------------------- | v ----------------------------- | Reset_Handler (æ±‡ç¼–) | | - è°ƒç”¨ SystemInit() | ----------------------------- | v ----------------------------- | SystemInit() (Cå‡½æ•°) | | - é…ç½®ç³»ç»Ÿæ—¶é’Ÿ | | - FPU ä½¿èƒ½ (å¦‚æœéœ€è¦) | | - ä¸­æ–­å‘é‡è¡¨é‡å®šä½ (å¦‚æœéœ€è¦) | | - å¤–éƒ¨å­˜å‚¨å™¨åˆå§‹åŒ– (å¦‚æœéœ€è¦) | ----------------------------- | v ----------------------------- | __main() (Cåº“å‡½æ•°) | | - å¤åˆ¶ .data æ®µ (Flash -\u0026gt; RAM)| | - æ¸…é›¶ .bss æ®µ (RAM) | | - å †æ ˆåˆå§‹åŒ– | | - Cåº“å…¶ä»–åˆå§‹åŒ– | ----------------------------- | v ----------------------------- | main() (ç”¨æˆ·åº”ç”¨ç¨‹åºå…¥å£) | ----------------------------- é€šè¿‡è¿™ä»½ç¬”è®°ï¼Œå¸Œæœ›èƒ½å¸®åŠ©æ‚¨æ›´æ·±å…¥ã€æ›´å‡†ç¡®åœ°ç†è§£å•ç‰‡æœºä»åŠ ç”µé‚£ä¸€åˆ»åˆ°æ‚¨ç¼–å†™çš„ main å‡½æ•°å¼€å§‹æ‰§è¡Œçš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚\n","date":"2025-06-11","externalUrl":null,"permalink":"/posts/%E5%85%AB%E8%82%A1-arm%E7%A1%AC%E4%BB%B6%E6%9E%B6%E6%9E%84/","section":"Posts","summary":"","title":"å…«è‚¡-ARMç¡¬ä»¶æ¶æ„","type":"posts"},{"content":"","date":"2025-06-11","externalUrl":null,"permalink":"/tags/c/","section":"Tags","summary":"","title":"C","type":"tags"},{"content":" å…³é”®å­— # å…³é”®å­— å®˜æ–¹è§£é‡Š ç†è§£ åœºæ™¯ volatile volatile å…³é”®å­—æ˜¯ä¸€ç§ç±»å‹ä¿®é¥°ç¬¦ï¼Œç”¨å®ƒå£°æ˜çš„ç±»å‹å˜é‡è¡¨ç¤ºå¯ä»¥è¢«æŸäº›ç¼–è¯‘å™¨æœªçŸ¥çš„å› ç´ æ›´æ”¹ï¼Œæ¯”å¦‚ï¼šæ“ä½œç³»ç»Ÿã€ç¡¬ä»¶æˆ–è€…å…¶å®ƒçº¿ç¨‹ç­‰ã€‚\né‡åˆ°è¿™ä¸ªå…³é”®å­—å£°æ˜çš„å˜é‡ï¼Œç¼–è¯‘å™¨å¯¹è®¿é—®è¯¥å˜é‡çš„ä»£ç å°±ä¸å†è¿›è¡Œä¼˜åŒ–ï¼Œä»è€Œå¯ä»¥æä¾›å¯¹ç‰¹æ®Šåœ°å€çš„ç¨³å®šè®¿é—®ã€‚ æ„ä¸ºâ€œæ˜“å˜çš„â€ï¼Œç”¨äºä¿æŠ¤ä¸€äº›è¢«å¤šä¸ªçº¿ç¨‹å…±äº«çš„å˜é‡ï¼Œé˜²æ­¢ç¼–è¯‘å™¨å¯¹å…¶è¿›è¡Œä¼˜åŒ–ï¼Œæ¯æ¬¡éƒ½ä»å†…å­˜è¯»å–è€Œä¸æ˜¯CPUå¯„å­˜å™¨ã€‚ 1. å¹¶è¡Œè®¾å¤‡çš„ç¡¬ä»¶å¯„å­˜å™¨å­˜å‚¨å™¨æ˜ å°„çš„ç¡¬ä»¶å¯„å­˜å™¨\n2. ä¸­æ–­æœåŠ¡ç¨‹åºä¸­ä¿®æ”¹çš„ä¾›å…¶å®ƒç¨‹åºæ£€æµ‹çš„å˜é‡\n3. å¤šçº¿ç¨‹åº”ç”¨ä¸­è¢«å‡ ä¸ªä»»åŠ¡å…±äº«çš„å˜é‡ static static å…³é”®å­—ç”¨äºå®šä¹‰ é™æ€å˜é‡ï¼Œå®ƒå¯ä»¥åº”ç”¨äºå±€éƒ¨å˜é‡ã€å…¨å±€å˜é‡ä»¥åŠå‡½æ•°ã€‚ æ„ä¸ºâ€œé™æ€çš„â€ï¼Œstaticæ˜¯è¢«å£°æ˜ä¸ºé™æ€ç±»å‹çš„å˜é‡ï¼Œå­˜å‚¨åœ¨é™æ€åŒºï¼ˆå…¨å±€åŒºï¼‰ä¸­ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸä¸ºæ•´ä¸ªç¨‹åºã€‚å¦‚æœæ˜¯é™æ€å±€éƒ¨å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºä¸€å¯¹{}å†…ï¼›å¦‚æœæ˜¯é™æ€å…¨å±€å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºå½“å‰æ–‡ä»¶ã€‚é™æ€å˜é‡å¦‚æœæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™è‡ªåŠ¨åˆå§‹åŒ–ä¸º0ã€‚æ­¤å¤–ï¼Œstaticä¹Ÿå¯ä»¥ä¿®é¥°å‡½æ•°ï¼Œä½¿å‡½æ•°æˆä¸ºå†…éƒ¨é“¾æ¥å±æ€§ï¼Œåªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸­è°ƒç”¨ã€‚ 1. éœ€è¦åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿ç•™å˜é‡çŠ¶æ€çš„å±€éƒ¨å˜é‡ï¼ˆé™æ€å±€éƒ¨å˜é‡ï¼‰\n2. é™åˆ¶å…¨å±€å˜é‡å’Œå‡½æ•°çš„ä½œç”¨åŸŸåœ¨å½“å‰æ–‡ä»¶å†…ï¼Œé¿å…å‘½åå†²çªï¼ˆé™æ€å…¨å±€å˜é‡/å‡½æ•°ï¼‰\n3. å®ç°å•ä¾‹æ¨¡å¼ï¼Œä¿æŒè®¡æ•°å™¨ç­‰ extern extern å…³é”®å­—ç”¨äºå£°æ˜ä¸€ä¸ªå˜é‡æˆ–å‡½æ•°ï¼Œå®ƒå‘Šè¯‰ç¼–è¯‘å™¨è¯¥å˜é‡æˆ–å‡½æ•°åœ¨å…¶ä»–æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå…è®¸åœ¨å½“å‰æ–‡ä»¶ä¸­å¼•ç”¨å®ƒä»¬ã€‚ æ„ä¸ºâ€œå¤–éƒ¨çš„â€ï¼Œç”¨äºå£°æ˜ä¸€ä¸ªå˜é‡æˆ–å‡½æ•°æ˜¯åœ¨å…¶ä»–æ–‡ä»¶ï¼ˆæˆ–åŒä¸€æ–‡ä»¶çš„å…¶ä»–ä½ç½®ï¼‰ä¸­å®šä¹‰çš„ï¼Œè€Œä¸æ˜¯åœ¨å½“å‰ä½ç½®å®šä¹‰ã€‚å®ƒä¸»è¦ç”¨äºå®ç°å¤šæ–‡ä»¶ç¼–è¯‘æ—¶çš„å…¨å±€å˜é‡å’Œå‡½æ•°çš„å…±äº«ã€‚ 1. åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä½¿ç”¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„å…¨å±€å˜é‡\n2. åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­è°ƒç”¨å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰çš„å‡½æ•°\n3. åœ¨å¤´æ–‡ä»¶ä¸­å£°æ˜å…¨å±€å˜é‡ï¼Œåœ¨æºæ–‡ä»¶ä¸­å®šä¹‰ï¼Œä¾›å¤šä¸ªæºæ–‡ä»¶ä½¿ç”¨ const const å…³é”®å­—ç”¨äºå®šä¹‰ å¸¸é‡ï¼Œå®ƒæŒ‡å®šä¸€ä¸ªå˜é‡çš„å€¼ä¸èƒ½è¢«ä¿®æ”¹ã€‚ æ„ä¸ºâ€œå¸¸é‡â€ã€â€œä¸å˜çš„â€ã€‚è¢«constä¿®é¥°çš„å˜é‡å…¶å€¼åœ¨åˆå§‹åŒ–åä¸èƒ½è¢«ä¿®æ”¹ã€‚å®ƒå¯ä»¥ä¿®é¥°åŸºæœ¬ç±»å‹å˜é‡ã€æŒ‡é’ˆã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ï¼Œä»¥æä¾›æ•°æ®å®Œæ•´æ€§å’Œå®‰å…¨æ€§ã€‚ 1. å®šä¹‰ç¨‹åºä¸­ä¸å˜çš„å¸¸é‡ï¼Œå¦‚Ï€ã€æ•°ç»„å¤§å°ç­‰\n2. ä¿®é¥°å‡½æ•°å‚æ•°ï¼Œé˜²æ­¢å‡½æ•°å†…éƒ¨ä¿®æ”¹ä¼ å…¥çš„å‚æ•°å€¼\n3. ä¿®é¥°æŒ‡é’ˆï¼Œè¡¨ç¤ºæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ä¸å¯å˜ï¼Œæˆ–æŒ‡é’ˆæœ¬èº«ä¸å¯å˜\n4. ä½œä¸ºå‡½æ•°è¿”å›å€¼ï¼Œè¡¨ç¤ºè¿”å›çš„å€¼ä¸å¯è¢«ä¿®æ”¹ typedef typedef å…³é”®å­—ç”¨äºä¸ºç°æœ‰çš„æ•°æ®ç±»å‹åˆ›å»ºä¸€ä¸ªæ–°çš„åç§°ï¼ˆåˆ«åï¼‰ã€‚ æ„ä¸ºâ€œç±»å‹å®šä¹‰â€ã€‚å®ƒä¸åˆ›å»ºæ–°çš„ç±»å‹ï¼Œè€Œæ˜¯ä¸ºå·²æœ‰çš„æ•°æ®ç±»å‹ï¼ˆåŒ…æ‹¬ç»“æ„ä½“ã€è”åˆä½“ã€æšä¸¾ã€åŸºæœ¬ç±»å‹ï¼‰æä¾›ä¸€ä¸ªæ›´ç®€æ´ã€æ›´å…·å¯è¯»æ€§çš„åˆ«åã€‚è¿™æœ‰åŠ©äºæé«˜ä»£ç çš„å¯ç§»æ¤æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚ 1. ä¸ºå¤æ‚çš„ç±»å‹å£°æ˜åˆ›å»ºåˆ«åï¼Œå¦‚ç»“æ„ä½“ã€å‡½æ•°æŒ‡é’ˆ\n2. æé«˜ä»£ç çš„å¯è¯»æ€§ï¼Œä½¿ä»£ç æ›´æ˜“ç†è§£\n3. æé«˜ä»£ç çš„å¯ç§»æ¤æ€§ï¼Œå½“åº•å±‚æ•°æ®ç±»å‹æ”¹å˜æ—¶ï¼Œåªéœ€ä¿®æ”¹typedefå®šä¹‰å³å¯\n4. å‡å°‘ç±»å‹åç§°çš„å†—é•¿ï¼Œå¦‚ä¸ºunsigned intå®šä¹‰UINT å˜é‡çš„åˆå§‹åŒ–è¡Œä¸º # å…¨å±€å˜é‡:Â åœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ï¼Œä½œç”¨åŸŸè´¯ç©¿æ•´ä¸ªç¨‹åºã€‚ é™æ€å…¨å±€å˜é‡ :Â ä½¿ç”¨Â staticÂ å…³é”®å­—ä¿®é¥°çš„å…¨å±€å˜é‡ï¼Œä½œç”¨åŸŸä»…é™äºå®šä¹‰å®ƒçš„æ–‡ä»¶ã€‚ å±€éƒ¨å˜é‡Â åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰çš„å˜é‡ï¼Œä½œç”¨åŸŸä»…é™äºå®šä¹‰å®ƒçš„å‡½æ•°å—ã€‚ é™æ€å±€éƒ¨å˜é‡ :Â åœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨Â staticÂ å…³é”®å­—ä¿®é¥°çš„å˜é‡ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸè´¯ç©¿æ•´ä¸ªç¨‹åºï¼Œä½†åœ¨å‡½æ•°å¤–éƒ¨ä¸å¯è§ã€‚å®ƒåªåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å®šä¹‰æ—¶è¢«åˆå§‹åŒ–ä¸€æ¬¡ã€‚ åŠ¨æ€å†…å­˜åˆ†é…:Â ä½¿ç”¨Â newÂ å’ŒÂ deleteÂ (C++) æˆ–Â mallocÂ å’ŒÂ freeÂ (C) åœ¨è¿è¡Œæ—¶åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚ ç‰¹å¾/å˜é‡ç±»å‹ å…¨å±€å˜é‡ (Global) å±€éƒ¨å˜é‡ (Local, non-static) é™æ€å±€éƒ¨å˜é‡ (Static Local) åŠ¨æ€åˆ†é…å†…å­˜ (e.g., new/malloc) å®šä¹‰ä½ç½® å‡½æ•°å¤–éƒ¨ å‡½æ•°å†…éƒ¨ å‡½æ•°å†…éƒ¨ï¼Œå¸¦ static å…³é”®å­— å † (Heap) ä¸Šï¼Œé€šè¿‡æŒ‡é’ˆè®¿é—® å­˜å‚¨åŒºåŸŸ æ•°æ®æ®µæˆ– BSS æ®µ Stack æ•°æ®æ®µæˆ– BSS æ®µ Heap ç”Ÿå‘½å‘¨æœŸ æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ æ‰€åœ¨å‡½æ•°å—æ‰§è¡ŒæœŸé—´ (è¿›å…¥æ—¶åˆ›å»ºï¼Œé€€å‡ºæ—¶é”€æ¯) æ•´ä¸ªç¨‹åºè¿è¡ŒæœŸé—´ (ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å®šä¹‰æ—¶åˆå§‹åŒ–) ä»åˆ†é…åˆ°æ˜¾å¼é‡Šæ”¾ (delete/free) ä½œç”¨åŸŸ æ•´ä¸ªç¨‹åºï¼ˆç”¨ extern å£°æ˜åˆ™å¯åœ¨æ‰€æœ‰æ–‡ä»¶ä¸­ä½¿ç”¨ï¼‰ å®šä¹‰å®ƒçš„å‡½æ•°å—å†…éƒ¨ å®šä¹‰å®ƒçš„å‡½æ•°å—å†…éƒ¨ ä»»ä½•èƒ½è®¿é—®åˆ°æŒ‡é’ˆçš„åœ°æ–¹ åˆå§‹åŒ–æ—¶æœº ç¨‹åºå¯åŠ¨æ—¶ è¿›å…¥å‡½æ•°å—æ—¶ ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å®šä¹‰è¯­å¥æ—¶ è°ƒç”¨ new æˆ– malloc æ—¶ æœªæ˜¾å¼åˆå§‹åŒ–æ—¶çš„é»˜è®¤å€¼ **é›¶å€¼ **ï¼š\n- æ•°å€¼ç±»å‹ï¼š0\n- æŒ‡é’ˆï¼šnullptr/NULL\n- å¸ƒå°”ï¼šfalse\n- å¯¹è±¡ï¼šè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•° (å¦‚æœå­˜åœ¨) **åƒåœ¾å€¼ / ä¸ç¡®å®šå€¼ **ï¼š\n- ä»»ä½•å€¼éƒ½å¯èƒ½ï¼Œä¸ç¡®å®šã€‚\n- è­¦å‘Šï¼šè®¿é—®æ˜¯æœªå®šä¹‰è¡Œä¸ºï¼ **é›¶å€¼ **ï¼š\n- æ•°å€¼ç±»å‹ï¼š0\n- æŒ‡é’ˆï¼šnullptr/NULL\n- å¸ƒå°”ï¼šfalse\n- å¯¹è±¡ï¼šè°ƒç”¨é»˜è®¤æ„é€ å‡½æ•° (å¦‚æœå­˜åœ¨) å–å†³äºåˆ†é…æ–¹å¼ï¼š\n- new Type / malloc: åƒåœ¾å€¼\n- new Type() / new Type[N](): é›¶å€¼ (å¯¹äºåŸºæœ¬ç±»å‹) æˆ– è°ƒç”¨é»˜è®¤æ„é€ å‡½æ•° (å¯¹äºç±»ç±»å‹) é»˜è®¤åˆå§‹åŒ–æœºåˆ¶ é™æ€åˆå§‹åŒ– è‡ªåŠ¨åˆå§‹åŒ– é™æ€åˆå§‹åŒ– (åªå‘ç”Ÿä¸€æ¬¡) å€¼åˆå§‹åŒ– æˆ–é»˜è®¤åˆå§‹åŒ– ä½¿ç”¨staticå…³é”®å­—ä¿®é¥° ä½œç”¨åŸŸé™åˆ¶åœ¨å½“å‰æ–‡ä»¶ï¼Œé¿å…å‘½åå†²çªã€‚ \\ \\ \\ å¤‡æ³¨ åœ¨æ•´ä¸ªç¨‹åºä¸­å¯è§ä¸”ç”Ÿå‘½å‘¨æœŸæœ€é•¿ã€‚ æœ€å¸¸ç”¨ï¼Œç”Ÿå‘½å‘¨æœŸæœ€çŸ­ï¼Œæ•ˆç‡é«˜ã€‚ åªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œå¯ä»¥åœ¨å‡½æ•°è°ƒç”¨ä¹‹é—´ä¿æŒçŠ¶æ€ã€‚ å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œå¦åˆ™ä¼šå†…å­˜æ³„æ¼ã€‚C++ ä¸­å»ºè®®ä½¿ç”¨æ™ºèƒ½æŒ‡é’ˆã€‚ BSSæ®µ # BSS æ®µçš„å­˜åœ¨æ˜¯ä¸ºäº†ä¼˜åŒ–å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ã€‚å¦‚æœæ‰€æœ‰æœªåˆå§‹åŒ–çš„å˜é‡éƒ½åœ¨å¯æ‰§è¡Œæ–‡ä»¶ä¸­å­˜å‚¨é›¶å€¼ï¼Œé‚£ä¹ˆå¯æ‰§è¡Œæ–‡ä»¶ä¼šå˜å¾—éå¸¸å¤§ã€‚BSS æ®µåªéœ€è¦è®°å½•è¿™äº›å˜é‡æ‰€éœ€çš„æ€»å¤§å°ï¼Œè€Œä¸éœ€è¦å­˜å‚¨å®é™…çš„é›¶å€¼ã€‚åœ¨ç¨‹åºåŠ è½½åˆ°å†…å­˜æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šè´Ÿè´£å°† BSS æ®µå¯¹åº”çš„å†…å­˜åŒºåŸŸæ¸…é›¶ã€‚è¿™ä½¿å¾—å¯æ‰§è¡Œæ–‡ä»¶æ›´å°ï¼ŒåŠ è½½æ›´å¿«ã€‚\nå˜é‡ç±»å‹ åˆå§‹åŒ–çŠ¶æ€ å†…å­˜åŒºåŸŸ ç¤ºä¾‹ å…¨å±€å˜é‡ å·²åˆå§‹åŒ–ä¸ºéé›¶å€¼ æ•°æ®æ®µ int gVar = 10; æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸ºé›¶å€¼ BSS æ®µ int gUninitVar;Â int gZeroVar = 0; å…¨å±€é™æ€å˜é‡ å·²åˆå§‹åŒ–ä¸ºéé›¶å€¼ æ•°æ®æ®µ static int sgVar = 20; æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸ºé›¶å€¼ BSS æ®µ static int sgUninitVar;Â static int sgZeroVar = 0; å±€éƒ¨é™æ€å˜é‡ å·²åˆå§‹åŒ–ä¸ºéé›¶å€¼ æ•°æ®æ®µ void f() { static int lsVar = 30; } æœªåˆå§‹åŒ–æˆ–åˆå§‹åŒ–ä¸ºé›¶å€¼ BSS æ®µ void f() { static int lsUninitVar; }Â void f() { static int lsZeroVar = 0; } è§£é‡Šè¡¨æ ¼ä¸­çš„å…³é”®ç‚¹ï¼š\n**é›¶å€¼ å¯¹äºæ•´æ•°ç±»å‹æ˜¯ 0ï¼Œæµ®ç‚¹ç±»å‹æ˜¯ 0.0ï¼ŒæŒ‡é’ˆæ˜¯ nullptr (C++) æˆ– NULL (C)ï¼Œå¸ƒå°”ç±»å‹æ˜¯ falseã€‚å¯¹äºèšåˆç±»å‹ï¼ˆå¦‚ç»“æ„ä½“æˆ–ç±»ï¼‰ï¼Œæ‰€æœ‰æˆå‘˜éƒ½ä¼šé€’å½’åœ°é›¶åˆå§‹åŒ–ã€‚ åƒåœ¾å€¼ / ä¸ç¡®å®šå€¼: æ„å‘³ç€å˜é‡å†…å­˜ä¸­çš„å†…å®¹æ˜¯ä¸å¯é¢„æµ‹çš„ï¼Œå¯èƒ½æ˜¯ä¹‹å‰ä½¿ç”¨è¯¥å†…å­˜åŒºåŸŸçš„ä»»ä½•æ•°æ®ã€‚è®¿é—®è¿™äº›å€¼ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œç¨‹åºå¯èƒ½å´©æºƒï¼Œä¹Ÿå¯èƒ½äº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœã€‚ é™æ€åˆå§‹åŒ–: å‘ç”Ÿåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œåœ¨ main å‡½æ•°æ‰§è¡Œä¹‹å‰ã€‚è¿™åŒ…æ‹¬é›¶åˆå§‹åŒ–å’Œå¸¸é‡åˆå§‹åŒ–ï¼ˆå¦‚æœå˜é‡è¢«å¸¸é‡è¡¨è¾¾å¼åˆå§‹åŒ–ï¼‰ã€‚ è‡ªåŠ¨åˆå§‹åŒ– : å‘ç”Ÿåœ¨è¿›å…¥å˜é‡ä½œç”¨åŸŸæ—¶ï¼Œé€šå¸¸åœ¨æ ˆä¸Šå®Œæˆã€‚ å€¼åˆå§‹åŒ–vs. é»˜è®¤åˆå§‹åŒ–: å€¼åˆå§‹åŒ–ï¼ˆä¾‹å¦‚ int x{}; æˆ– new int();ï¼‰é€šå¸¸ä¼šå¯¼è‡´é›¶åˆå§‹åŒ–ã€‚ é»˜è®¤åˆå§‹åŒ–ï¼ˆä¾‹å¦‚ int x; æˆ– new int;ï¼‰å¯¹äºåŸºæœ¬ç±»å‹ä¼šäº§ç”Ÿåƒåœ¾å€¼ï¼Œä½†å¯¹äºç±»ç±»å‹ä¼šè°ƒç”¨å…¶é»˜è®¤æ„é€ å‡½æ•°ã€‚ æ•°æ®æ®µ / BSS æ®µ: æ•°æ®æ®µ (Data Segment): å­˜å‚¨å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚ BSS æ®µ (Block Started by Symbol): å­˜å‚¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚åœ¨ç¨‹åºåŠ è½½æ—¶ï¼Œè¿™äº›å˜é‡è¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚ æ ˆ (Stack): å­˜å‚¨å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›åœ°å€ã€‚ç©ºé—´è‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ã€‚ å † (Heap): åŠ¨æ€å†…å­˜åŒºåŸŸï¼Œç”±ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†åˆ†é…å’Œé‡Šæ”¾ã€‚ å¸¸é‡æŒ‡é’ˆå’ŒæŒ‡é’ˆå¸¸é‡ # å¸¸é‡æŒ‡é’ˆï¼š æŒ‡é’ˆæŒ‡å‘çš„å†…å®¹æ˜¯å¸¸é‡ï¼Œå³ä¸èƒ½é€šè¿‡è¿™ä¸ªæŒ‡é’ˆå»ä¿®æ”¹å®ƒæ‰€æŒ‡å‘çš„å€¼ ã€‚ä½†æ˜¯ï¼ŒæŒ‡é’ˆæœ¬èº«å¯ä»¥ä¿®æ”¹ï¼Œå¯ä»¥æŒ‡å‘å…¶ä»–åœ°æ–¹ã€‚\n(const int)* p = \u0026amp;a; æŒ‡é’ˆå¸¸é‡ï¼š æŒ‡é’ˆæœ¬èº«æ˜¯å¸¸é‡ï¼Œå³æŒ‡é’ˆä¸€æ—¦åˆå§‹åŒ–åï¼Œå°±ä¸èƒ½å†æŒ‡å‘å…¶ä»–åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œå®ƒæ‰€æŒ‡å‘çš„å†…å®¹å¯ä»¥é€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ä¿®æ”¹ï¼ˆå¦‚æœå†…å®¹æœ¬èº«ä¸æ˜¯å¸¸é‡çš„è¯ï¼‰ã€‚\nint* (const q) = \u0026amp;x; åŠ©è®°ï¼šconsté è¿‘è°ï¼Œè°å°±æ˜¯å¸¸é‡\næŒ‡å‘å¸¸é‡çš„å¸¸é‡æŒ‡é’ˆï¼šæŒ‡é’ˆå¸¸é‡ä¸å¸¸é‡æŒ‡é’ˆçš„ç»“åˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„ä½ç½®ä¸èƒ½æ”¹å˜å¹¶ä¸”ä¹Ÿä¸èƒ½é€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ”¹å˜å˜é‡çš„å€¼ï¼Œä½†æ˜¯ä¾ç„¶å¯ä»¥é€šè¿‡å…¶ä»–çš„æ™®é€šæŒ‡é’ˆæ”¹å˜å˜é‡çš„å€¼\nconst int* const p = \u0026amp;a; constä¿®é¥°å‡½æ•°ï¼š\nconst int* func(); constÂ ä¿®é¥°æŒ‡é’ˆè¿”å›å€¼ï¼ˆconst Type* func()ï¼‰ï¼šæœ‰æ„ä¹‰ã€‚å®ƒä¿è¯ä½ ä¸èƒ½é€šè¿‡è¿”å›çš„æŒ‡é’ˆä¿®æ”¹å…¶æŒ‡å‘çš„å†…å®¹ã€‚ constÂ ä¿®é¥°æ™®é€šç±»å‹è¿”å›å€¼ï¼ˆconst Type func()ï¼‰ï¼šæ— æ„ä¹‰ã€‚å› ä¸ºè¿”å›çš„æ˜¯ä¸€ä¸ªä¸´æ—¶å‰¯æœ¬ï¼Œä¸”è¯¥å‰¯æœ¬é€šå¸¸æ˜¯å³å€¼ï¼Œæ— æ³•è¢«èµ‹å€¼ã€‚ ","date":"2025-06-11","externalUrl":null,"permalink":"/posts/learn-c/%E5%85%AB%E8%82%A1-c%E8%AF%AD%E8%A8%80%E9%9D%A2%E8%AF%95/","section":"Posts","summary":"","title":"å…«è‚¡-Cè¯­è¨€é¢è¯•","type":"posts"},{"content":"","date":"2025-06-11","externalUrl":null,"permalink":"/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/","section":"Tags","summary":"","title":"åµŒå…¥å¼","type":"tags"},{"content":" é€šç”¨æ“ä½œç³»ç»Ÿï¼šDOS/WIN/UNIX # å½“æˆ‘ä»¬åœ¨æ“ä½œç³»ç»Ÿä¸­â€œåŒå‡»â€ä¸€ä¸ªç¨‹åºå›¾æ ‡ï¼Œæˆ–è€…åœ¨å‘½ä»¤è¡Œè¾“å…¥ç¨‹åºåå¹¶å›è½¦æ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šå¯åŠ¨ä¸€ç³»åˆ—å¤æ‚è€Œç²¾å¦™çš„æ­¥éª¤ï¼Œå°†è¿™ä¸ªå­˜å‚¨åœ¨ç¡¬ç›˜ä¸Šçš„â€œé™æ€â€æ–‡ä»¶ï¼Œè½¬å˜ä¸ºä¸€ä¸ªåœ¨å†…å­˜ä¸­â€œåŠ¨æ€â€è¿è¡Œçš„ç¨‹åºâ€”â€”ä¸€ä¸ªè¿›ç¨‹ã€‚\nç¡¬ç›˜ä¸Šçš„ç¨‹åºæ–‡ä»¶ï¼šé™æ€çš„å­˜åœ¨\nåœ¨ç¡¬ç›˜ä¸Šï¼Œç¨‹åºä»¥å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ Windows ä¸Šçš„ .exeï¼ŒLinux ä¸Šçš„ ELF æ–‡ä»¶ï¼‰çš„å½¢å¼å­˜åœ¨ã€‚ è¿™ä¸ªæ–‡ä»¶å†…éƒ¨å·²ç»æŒ‰ç…§ç‰¹å®šçš„æ ¼å¼ï¼ˆå¦‚PEæˆ–ELFï¼‰ç»„ç»‡å¥½äº†ï¼Œå…¶ä¸­åŒ…å«äº†ç¼–è¯‘å¥½çš„ï¼š ä»£ç æ®µæ•°æ® (Text Segment data)ï¼š ç¨‹åºçš„æœºå™¨æŒ‡ä»¤ã€‚ æ•°æ®æ®µæ•°æ® (Data Segment data)ï¼š å·²åˆå§‹åŒ–å…¨å±€/é™æ€å˜é‡çš„åˆå§‹å€¼ã€‚ BSS æ®µå…ƒæ•°æ®ï¼š æœªåˆå§‹åŒ–å…¨å±€/é™æ€å˜é‡çš„åç§°å’Œå¤§å°ä¿¡æ¯ï¼ˆä¸åŒ…å«å®é™…çš„é›¶å€¼ï¼Œä»¥èŠ‚çœæ–‡ä»¶ç©ºé—´ï¼‰ã€‚ å…¶ä»–è¾…åŠ©ä¿¡æ¯ï¼šå¦‚ç¬¦å·è¡¨ã€é‡å®šä½ä¿¡æ¯ã€åŠ¨æ€é“¾æ¥åº“ä¿¡æ¯ç­‰ã€‚ æ“ä½œç³»ç»ŸåŠ è½½ï¼šæ„å»ºè™šæ‹Ÿå†…å­˜ç©ºé—´\nå½“ç¨‹åºè¢«æ‰§è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿï¼ˆå°¤å…¶æ˜¯å†…å­˜ç®¡ç†å•å…ƒ MMUï¼‰ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªæ–°çš„ã€ç‹¬ç«‹çš„ã€ç§æœ‰çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚ æ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šä¸€æ¬¡æ€§å°†æ•´ä¸ªç¨‹åºæ–‡ä»¶å®Œæ•´åœ°è½½å…¥ç‰©ç†å†…å­˜ï¼Œè€Œæ˜¯é‡‡ç”¨æŒ‰éœ€åŠ è½½ï¼ˆdemand pagingï¼‰ æˆ– é¡µå¼å†…å­˜ç®¡ç† çš„ç­–ç•¥ã€‚å®ƒä¼šï¼š æ˜ å°„ä»£ç æ®µï¼š å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä»£ç æ®µæ˜ å°„åˆ°è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä»£ç æ®µåŒºåŸŸã€‚è¿™å—åŒºåŸŸé€šå¸¸æ˜¯åªè¯»çš„ï¼Œä¸”å¯èƒ½è¢«å¤šä¸ªè¿è¡Œç›¸åŒç¨‹åºçš„è¿›ç¨‹å…±äº«ç‰©ç†å†…å­˜ã€‚ æ˜ å°„æ•°æ®æ®µï¼š å°†å¯æ‰§è¡Œæ–‡ä»¶ä¸­å·²åˆå§‹åŒ–çš„æ•°æ®æ®µæ˜ å°„åˆ°è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„æ•°æ®æ®µåŒºåŸŸã€‚è¿™å—åŒºåŸŸæ˜¯å¯è¯»å†™çš„ï¼Œä¸”æ˜¯è¿›ç¨‹ç§æœ‰çš„ã€‚ æ˜ å°„BSSæ®µï¼š æ ¹æ®å¯æ‰§è¡Œæ–‡ä»¶ä¸­BSSæ®µçš„å¤§å°ä¿¡æ¯ï¼Œåœ¨è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„BSSæ®µåŒºåŸŸåˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶ç”±æ“ä½œç³»ç»Ÿåœ¨åŠ è½½æ—¶å°†å…¶æ¸…é›¶ã€‚è¿™å—åŒºåŸŸä¹Ÿæ˜¯å¯è¯»å†™çš„ï¼Œä¸”æ˜¯è¿›ç¨‹ç§æœ‰çš„ã€‚ åˆå§‹åŒ–æ ˆï¼š åœ¨è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„æ ˆåŒºåŸŸåˆ†é…ä¸€å—å†…å­˜ï¼Œå¹¶è®¾ç½®å¥½æ ˆé¡¶æŒ‡é’ˆï¼Œç”¨äºå­˜å‚¨å‡½æ•°è°ƒç”¨ä¿¡æ¯å’Œå±€éƒ¨å˜é‡ã€‚è¿™å—åŒºåŸŸæ˜¯å¯è¯»å†™çš„ï¼Œä¸”æ˜¯è¿›ç¨‹ç§æœ‰çš„ã€‚ åˆå§‹åŒ–å †ï¼š åœ¨è¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´çš„å †åŒºåŸŸåˆ†é…ä¸€å—å†…å­˜åŒºåŸŸï¼Œä½†é€šå¸¸åªæ˜¯é¢„ç•™èµ·å§‹åœ°å€ï¼Œå®é™…çš„å †å†…å­˜åˆ†é…åœ¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡ malloc/new ç­‰å‡½æ•°æŒ‰éœ€å¢é•¿ã€‚è¿™å—åŒºåŸŸæ˜¯å¯è¯»å†™çš„ï¼Œä¸”æ˜¯è¿›ç¨‹ç§æœ‰çš„ã€‚ åŠ è½½å…±äº«åº“ï¼š å¦‚æœç¨‹åºä¾èµ–åŠ¨æ€é“¾æ¥åº“ï¼Œæ“ä½œç³»ç»Ÿä¼šæ‰¾åˆ°è¿™äº›åº“ï¼Œå¹¶å°†å®ƒä»¬çš„ä»£ç å’Œæ•°æ®ä¹ŸåŠ è½½ï¼ˆæˆ–æ˜ å°„ï¼‰åˆ°è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­ã€‚ ç¨‹åºè¿è¡Œï¼šåœ¨å†…å­˜ä¸­åŠ¨æ€æ“ä½œ\nCPUæ‰§è¡ŒæŒ‡ä»¤ï¼š CPUå¼€å§‹ä»ä»£ç æ®µçš„å…¥å£ç‚¹ï¼ˆé€šå¸¸æ˜¯ main å‡½æ•°çš„èµ·å§‹æŒ‡ä»¤ï¼‰æ‰§è¡ŒæŒ‡ä»¤ã€‚ æ•°æ®è®¿é—®ï¼š ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­éœ€è¦è®¿é—®å˜é‡æ—¶ï¼š å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼š å®ƒä»¬å·²ç»åˆ†é…åœ¨æ•°æ®æ®µæˆ–BSSæ®µä¸­ï¼Œå…¶åœ°å€æ˜¯å›ºå®šçš„ã€‚å±€éƒ¨é™æ€å˜é‡çš„å†…å­˜ä¹Ÿæ˜¯é¢„å…ˆåˆ†é…åœ¨æ•°æ®æ®µæˆ–BSSæ®µï¼Œä½†å…¶é€»è¾‘åˆå§‹åŒ–ï¼ˆç‰¹åˆ«æ˜¯å¯¹äºC++å¯¹è±¡ï¼‰åªåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°å…¶å®šä¹‰æ—¶è¿›è¡Œã€‚ å±€éƒ¨ï¼ˆéé™æ€ï¼‰å˜é‡ï¼š åœ¨å‡½æ•°è°ƒç”¨æ—¶åœ¨æ ˆä¸Šåˆ†é…ï¼Œå‡½æ•°è¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ã€‚ åŠ¨æ€åˆ†é…å†…å­˜ï¼š å½“ç¨‹åºéœ€è¦æ›´å¤šå†…å­˜æ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿè¯·æ±‚ï¼ˆé€šè¿‡ malloc/newï¼‰ï¼Œå†…å­˜ä¼šåœ¨å †ä¸Šåˆ†é…ã€‚è¿™éƒ¨åˆ†å†…å­˜éœ€è¦ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†é‡Šæ”¾ã€‚ è™šæ‹Ÿåˆ°ç‰©ç†æ˜ å°„ï¼š æ¯å½“ç¨‹åºè®¿é—®ä¸€ä¸ªè™šæ‹Ÿåœ°å€æ—¶ï¼ŒMMUä¼šå°†è¿™ä¸ªè™šæ‹Ÿåœ°å€ç¿»è¯‘æˆå¯¹åº”çš„ç‰©ç†åœ°å€ï¼Œç„¶åCPUæ‰èƒ½çœŸæ­£è®¿é—®ç‰©ç†å†…å­˜ä¸­çš„æ•°æ®ã€‚ æ ¸å¿ƒæ€æƒ³ï¼šè™šæ‹Ÿå†…å­˜\næ•´ä¸ªè¿‡ç¨‹çš„æ ¸å¿ƒåœ¨äºè™šæ‹Ÿå†…å­˜ã€‚å®ƒä¸ºæ¯ä¸ªç¨‹åºæä¾›äº†ä¸€ä¸ªç‹¬ç«‹çš„ã€éš”ç¦»çš„å†…å­˜è§†å›¾ï¼Œä½¿å¾—ç¨‹åºå¯ä»¥ç®€å•åœ°è®¤ä¸ºè‡ªå·±æ‹¥æœ‰å…¨éƒ¨å†…å­˜ã€‚æ“ä½œç³»ç»Ÿè´Ÿè´£å¤æ‚çš„è™šæ‹Ÿåˆ°ç‰©ç†çš„åœ°å€æ˜ å°„ï¼Œä»è€Œå®ç°äº†ï¼š\néš”ç¦»æ€§ï¼š é˜²æ­¢ä¸åŒç¨‹åºä¹‹é—´ç›¸äº’å¹²æ‰°ã€‚ å®‰å…¨æ€§ï¼š é˜»æ­¢éæ³•å†…å­˜è®¿é—®ã€‚ çµæ´»æ€§ï¼š å…è®¸ç¨‹åºä½¿ç”¨æ¯”å®é™…ç‰©ç†å†…å­˜æ›´å¤§çš„åœ°å€ç©ºé—´ã€‚ æ•ˆç‡ï¼š é€šè¿‡å…±äº«åªè¯»ä»£ç å’ŒæŒ‰éœ€åŠ è½½ï¼Œä¼˜åŒ–äº†ç‰©ç†å†…å­˜çš„ä½¿ç”¨ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œç¡¬ç›˜ä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶è¢«æœ‰æ•ˆåœ°è½¬æ¢ä¸ºä¸€ä¸ªåœ¨å†…å­˜ä¸­å…·æœ‰ç‰¹å®šç»“æ„å’Œè¡Œä¸ºçš„è¿›ç¨‹ã€‚\nåµŒå…¥å¼è®¾å¤‡ï¼šè£¸æœº/RTOS/Linux # å¯¹äºåµŒå…¥å¼è®¾å¤‡ï¼Œå†…å­˜ç®¡ç†å’Œç¨‹åºåŠ è½½çš„æœºåˆ¶ä¸æ¡Œé¢/æœåŠ¡å™¨æ“ä½œç³»ç»Ÿæœ‰æ‰€ä¸åŒï¼Œä½†æ ¸å¿ƒæ€æƒ³æ˜¯ç±»ä¼¼çš„ã€‚å…³é”®åœ¨äºåµŒå…¥å¼è®¾å¤‡çš„å¤æ‚åº¦å’Œå…¶ä¸Šè¿è¡Œçš„æ“ä½œç³»ç»Ÿçš„ç±»å‹ã€‚\nåµŒå…¥å¼è®¾å¤‡çš„å†…å­˜ç®¡ç†ç‰¹ç‚¹ # åµŒå…¥å¼è®¾å¤‡å¯ä»¥å¤§è‡´åˆ†ä¸ºå‡ ç±»ï¼š\nè£¸æœºï¼ˆBare-metalï¼‰/æ— æ“ä½œç³»ç»Ÿï¼š ç›´æ¥åœ¨ç¡¬ä»¶ä¸Šè¿è¡Œç¨‹åºï¼Œæ²¡æœ‰å¤æ‚çš„OSå±‚ã€‚ å¸¸è§çš„åº”ç”¨ï¼šç®€å•çš„ä¼ æ„Ÿå™¨èŠ‚ç‚¹ã€æ§åˆ¶å™¨ã€å°å‹å®¶ç”µã€‚ å®æ—¶æ“ä½œç³»ç»Ÿ (RTOS)ï¼š æä¾›ä»»åŠ¡è°ƒåº¦ã€ä¸­æ–­ç®¡ç†ã€åŒæ­¥æœºåˆ¶ç­‰åŸºæœ¬OSåŠŸèƒ½ï¼Œä½†é€šå¸¸ä¸æä¾›å¤æ‚çš„è™šæ‹Ÿå†…å­˜ç®¡ç†ã€‚ å¸¸è§çš„åº”ç”¨ï¼šå·¥ä¸šæ§åˆ¶ã€æ±½è½¦ç”µå­ã€åŒ»ç–—è®¾å¤‡ã€‚ åµŒå…¥å¼Linux/Androidç­‰é‡é‡çº§æ“ä½œç³»ç»Ÿï¼š æä¾›äº†å®Œæ•´çš„Linuxå†…æ ¸åŠŸèƒ½ï¼ŒåŒ…æ‹¬MMUæ”¯æŒçš„è™šæ‹Ÿå†…å­˜ã€‚ å¸¸è§çš„åº”ç”¨ï¼šæ™ºèƒ½æ‰‹æœºã€å¹³æ¿ã€æ™ºèƒ½ç”µè§†ã€é«˜æ€§èƒ½ç½‘å…³ã€‚ ä¸åŒç±»å‹åµŒå…¥å¼è®¾å¤‡çš„è¯¦ç»†è¯´æ˜ # 1. è£¸æœºï¼ˆBare-metalï¼‰/æ— æ“ä½œç³»ç»Ÿ # ç¨‹åºåŠ è½½ï¼š é€šå¸¸ç¨‹åºï¼ˆå›ºä»¶ï¼‰åœ¨å¼€å‘é˜¶æ®µå°±è¢«ç¼–è¯‘ã€é“¾æ¥æˆä¸€ä¸ªå•ä¸€çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚ .bin æˆ– .hex æ–‡ä»¶ï¼‰ã€‚ è¿™ä¸ªæ–‡ä»¶ä¸­åŒ…å«äº†ï¼š ä»£ç æ®µï¼ˆ.textï¼‰ï¼šÂ ç¨‹åºçš„æœºå™¨æŒ‡ä»¤ã€‚ æ•°æ®æ®µï¼ˆ.dataï¼‰ï¼šÂ å·²åˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡çš„åˆå§‹å€¼ã€‚ BSS æ®µä¿¡æ¯ï¼šÂ BSS æ®µçš„èµ·å§‹åœ°å€å’Œå¤§å°ï¼ˆä½†æ²¡æœ‰å®é™…çš„é›¶å€¼æ•°æ®ï¼‰ã€‚ å¯åŠ¨ä»£ç ï¼ˆStartup Codeï¼‰ï¼šÂ è¿™æ˜¯æœ€å…³é”®çš„éƒ¨åˆ†ï¼Œå®ƒä¼šåœ¨ä¸Šç”µåç¬¬ä¸€ä¸ªæ‰§è¡Œã€‚ è¿™ä¸ªæ–‡ä»¶ä¼šç›´æ¥çƒ§å½•åˆ°è®¾å¤‡çš„éæ˜“å¤±æ€§å­˜å‚¨å™¨ä¸­ï¼Œä¾‹å¦‚ï¼š Flash å†…å­˜ï¼ˆNAND Flash, NOR Flashï¼‰ï¼š ç¨‹åºé€šå¸¸ä»è¿™é‡Œå¯åŠ¨ã€‚ ROM/EEPROMï¼š æŸäº›å¯åŠ¨ä»£ç å¯èƒ½å­˜å‚¨åœ¨è¿™é‡Œã€‚ ä¸Šç”µåï¼ŒCPUç›´æ¥ä»Flashå†…å­˜çš„èµ·å§‹åœ°å€ï¼ˆæˆ–é€šè¿‡Bootloaderè·³è½¬ï¼‰å¼€å§‹æ‰§è¡Œä»£ç ã€‚ å†…å­˜å¸ƒå±€ï¼š æ²¡æœ‰è™šæ‹Ÿå†…å­˜ã€‚ç¨‹åºç›´æ¥æ“ä½œç‰©ç†åœ°å€ã€‚ å†…å­˜é€šå¸¸åˆ†ä¸ºï¼š Flash / ROMï¼š å­˜å‚¨ä»£ç æ®µå’Œåªè¯»æ•°æ®ï¼ˆä¾‹å¦‚å¸¸é‡å­—ç¬¦ä¸²ï¼‰ã€‚ RAM (SRAM/DRAM)ï¼š ä»£ç æ®µï¼ˆå¦‚æœæœ‰RAMæ‰§è¡Œéœ€æ±‚ï¼‰ï¼š æœ‰äº›ä¼˜åŒ–ä¼šå°†é¢‘ç¹æ‰§è¡Œçš„ä»£ç ä»Flashå¤åˆ¶åˆ°RAMä¸­è¿è¡Œï¼Œä»¥æé«˜é€Ÿåº¦ã€‚ æ•°æ®æ®µï¼š å­˜å‚¨å·²åˆå§‹åŒ–çš„å…¨å±€/é™æ€å˜é‡ã€‚åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œè¿™äº›åˆå§‹å€¼é€šå¸¸ä¼šä»Flashå¤åˆ¶åˆ°RAMä¸­ã€‚ BSS æ®µï¼š å­˜å‚¨æœªåˆå§‹åŒ–ï¼ˆæˆ–åˆå§‹åŒ–ä¸º0ï¼‰çš„å…¨å±€/é™æ€å˜é‡ã€‚åœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œå¯åŠ¨ä»£ç ä¼šè´Ÿè´£å°†è¿™å—RAMåŒºåŸŸæ¸…é›¶ã€‚ å †ï¼š å¦‚æœç¨‹åºä½¿ç”¨ malloc ç­‰åŠ¨æ€å†…å­˜åˆ†é…ï¼Œä¼šä»RAMä¸­åˆ’åˆ†ä¸€å—åŒºåŸŸä½œä¸ºå †ã€‚ æ ˆï¼š å±€éƒ¨å˜é‡å’Œå‡½æ•°è°ƒç”¨ä¿¡æ¯ã€‚é€šå¸¸ä»RAMçš„æœ€é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€‚ å„æ®µæ˜¯ç›´æ¥çš„ç‰©ç†å†…å­˜åŒºåŸŸï¼Œæ²¡æœ‰MMUè¿›è¡Œåœ°å€è½¬æ¢ã€‚ å†…å­˜ç©ºé—´ç›¸å¯¹æœ‰é™ä¸”æ˜¯é™æ€åˆ’åˆ†å¥½çš„ã€‚ å±€éƒ¨é™æ€å˜é‡ï¼š å®ƒä»¬ä¼šåƒå…¨å±€å˜é‡ä¸€æ ·ï¼Œè¢«åˆ†é…åˆ°RAMä¸­çš„æ•°æ®æ®µæˆ–BSSæ®µï¼Œä½†å…¶åˆå§‹åŒ–ï¼ˆå¦‚æœæ˜¯C++å¯¹è±¡ï¼‰ä»ä¼šåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œåˆ°æ—¶å‘ç”Ÿï¼Œé€šè¿‡ç¼–è¯‘å™¨ç”Ÿæˆçš„æ ‡å¿—æ¥ç¡®ä¿ã€‚ å¯åŠ¨ä»£ç ï¼ˆStartup Codeï¼‰çš„æ‰§è¡Œ è¿™æ˜¯ BSS æ®µå¤„ç†çš„çœŸæ­£â€œè¿è¡Œâ€å¼€å§‹çš„åœ°æ–¹ã€‚å¯åŠ¨ä»£ç é€šå¸¸æ˜¯ç”¨æ±‡ç¼–è¯­è¨€ç¼–å†™çš„ï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨Cä»£ç è¿è¡Œä¹‹å‰å®Œæˆä¸€äº›åº•å±‚è®¾ç½®ã€‚ è®¾ç½®å †æ ˆæŒ‡é’ˆï¼šÂ å¯åŠ¨ä»£ç çš„ç¬¬ä¸€æ­¥é€šå¸¸æ˜¯è®¾ç½®ä¸»æ ˆæŒ‡é’ˆï¼Œç¡®ä¿Cä»£ç å¯ä»¥æ­£ç¡®åœ°ä½¿ç”¨æ ˆã€‚ åˆå§‹åŒ–æ•°æ®æ®µï¼šÂ å¯åŠ¨ä»£ç ä¼šå°†Flashä¸­å­˜å‚¨çš„Â æ•°æ®æ®µï¼ˆ.dataï¼‰Â çš„åˆå§‹å€¼ï¼Œå¤åˆ¶åˆ°RAMä¸­å¯¹åº”çš„ä½ç½®ã€‚å› ä¸ºFlashæ˜¯åªè¯»çš„ï¼Œè€Œæ•°æ®æ®µéœ€è¦å¯è¯»å†™ã€‚ æ¸…é›¶ BSS æ®µï¼šÂ è¿™æ˜¯å¤„ç† BSS æ®µçš„å…³é”®æ­¥éª¤ã€‚å¯åŠ¨ä»£ç ä¼šè·å– BSS æ®µçš„èµ·å§‹åœ°å€å’Œå¤§å°ï¼ˆè¿™äº›ä¿¡æ¯ç”±é“¾æ¥å™¨æä¾›ï¼Œå¹¶å¯èƒ½åµŒå…¥åœ¨å¯åŠ¨ä»£ç æˆ–ä½œä¸ºç‰¹å®šç¬¦å·ï¼‰ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œå°† BSS æ®µå¯¹åº”çš„RAMåŒºåŸŸçš„æ‰€æœ‰å­—èŠ‚éƒ½æ¸…é›¶ï¼ˆå¡«å……0x00ï¼‰ã€‚ è·³è½¬åˆ°Cä»£ç å…¥å£ï¼šÂ å®Œæˆäº†è¿™äº›åº•å±‚åˆå§‹åŒ–åï¼Œå¯åŠ¨ä»£ç ä¼šè°ƒç”¨Cè¯­è¨€çš„å…¥å£å‡½æ•°ï¼Œé€šå¸¸æ˜¯Â main()Â å‡½æ•°ã€‚ C/C++ ç¨‹åºå¼€å§‹æ‰§è¡Œ å½“Â main()Â å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œæ‰€æœ‰çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆåŒ…æ‹¬æ•°æ®æ®µå’ŒBSSæ®µä¸­çš„ï¼‰éƒ½å·²ç»å‡†å¤‡å°±ç»ªã€‚ BSS æ®µä¸­çš„å˜é‡æ­¤æ—¶éƒ½å·²ç»è¢«ä¿è¯ä¸º0ï¼Œç¨‹åºå¯ä»¥å®‰å…¨åœ°è®¿é—®å®ƒä»¬ã€‚ å¦‚æœç¨‹åºä½¿ç”¨äº†åŠ¨æ€å†…å­˜åˆ†é…ï¼ˆå¦‚Â mallocï¼‰ï¼Œå¯åŠ¨ä»£ç å¯èƒ½è¿˜ä¼šæå‰è®¾ç½®å¥½å †çš„èµ·å§‹å’Œç»“æŸåœ°å€ã€‚ 2. å®æ—¶æ“ä½œç³»ç»Ÿ (RTOS) # ç¨‹åºåŠ è½½ï¼š RTOSå†…æ ¸æœ¬èº«å’Œåº”ç”¨ç¨‹åºä»£ç é€šå¸¸éƒ½çƒ§å½•åœ¨Flashä¸­ã€‚ ä¸Šç”µåï¼ŒBootloaderå¯åŠ¨RTOSå†…æ ¸ï¼Œç„¶åRTOSå†…æ ¸ä¼šåŠ è½½å¹¶å¯åŠ¨åº”ç”¨ç¨‹åºï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªä»»åŠ¡ï¼‰ã€‚ RTOSé€šå¸¸ä¸æä¾›å®Œæ•´çš„è¿›ç¨‹æ¦‚å¿µï¼ˆå¦‚Linuxï¼‰ï¼Œæ›´å¤šæ˜¯ä»»åŠ¡ï¼ˆTaskï¼‰ã€‚ å†…å­˜å¸ƒå±€ï¼š å¤§å¤šæ•°RTOSï¼ˆä¾‹å¦‚FreeRTOS, RT-Thread, uC/OS-IIIï¼‰ä¸ä½¿ç”¨MMUè¿›è¡Œè™šæ‹Ÿå†…å­˜ç®¡ç†ã€‚ä»»åŠ¡å…±äº«åŒä¸€ä¸ªç‰©ç†åœ°å€ç©ºé—´ã€‚ ä»£ç æ®µã€æ•°æ®æ®µã€BSS æ®µï¼š åº”ç”¨ç¨‹åºçš„è¿™äº›æ®µé€šå¸¸ä¹Ÿæ˜¯ç›´æ¥æ˜ å°„åˆ°ç‰©ç†RAMä¸­ã€‚ ä»£ç å¯èƒ½ä»åœ¨Flashä¸­æ‰§è¡Œï¼Œæˆ–å¤åˆ¶åˆ°RAMã€‚ æ•°æ®æ®µå’ŒBSSæ®µéƒ½åœ¨RAMä¸­ã€‚ å †ï¼š RTOSä¼šæä¾›è‡ªå·±çš„å†…å­˜ç®¡ç†æ¥å£ï¼ˆå¦‚ pvPortMalloc åœ¨FreeRTOSä¸­ï¼‰ï¼Œä»ä¸€ä¸ªå…¨å±€çš„RAMæ± ä¸­åˆ†é…å †å†…å­˜ã€‚ æ ˆï¼š æ¯ä¸ªä»»åŠ¡éƒ½ä¼šæœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆã€‚è¿™äº›æ ˆé€šå¸¸æ˜¯é¢„å…ˆåœ¨RAMä¸­åˆ†é…å¥½çš„å›ºå®šå¤§å°çš„åŒºåŸŸï¼Œå¹¶åœ¨ä»»åŠ¡åˆ‡æ¢æ—¶è¿›è¡Œä¿æŠ¤ã€‚ ç”±äºæ²¡æœ‰MMUï¼Œä»»åŠ¡ä¹‹é—´çš„å†…å­˜éš”ç¦»æ€§è¾ƒå¼±ã€‚ä¸€ä¸ªä»»åŠ¡çš„é”™è¯¯è®¿é—®å¯èƒ½ç ´åå…¶ä»–ä»»åŠ¡çš„æ•°æ®ã€‚ å±€éƒ¨é™æ€å˜é‡ï¼š åŒæ ·ä½äºæ•°æ®æ®µæˆ–BSSæ®µï¼Œå¹¶éµå¾ªæ‡’æƒ°åˆå§‹åŒ–åŸåˆ™ã€‚ 3. åµŒå…¥å¼Linux/Androidç­‰é‡é‡çº§æ“ä½œç³»ç»Ÿ # ç¨‹åºåŠ è½½ï¼š è¿™ä¸æ¡Œé¢/æœåŠ¡å™¨Linuxç³»ç»Ÿéå¸¸ç›¸ä¼¼ã€‚æ“ä½œç³»ç»Ÿï¼ˆLinuxå†…æ ¸ï¼‰ä¼šç®¡ç†å¤æ‚çš„å¯åŠ¨æµç¨‹ï¼ŒåŒ…æ‹¬Bootloaderã€å†…æ ¸å¯åŠ¨ã€æ–‡ä»¶ç³»ç»ŸæŒ‚è½½ç­‰ã€‚ ç”¨æˆ·ç¨‹åºï¼ˆå¦‚APKåœ¨Androidä¸Šï¼Œæˆ–æ™®é€šåº”ç”¨ç¨‹åºåœ¨åµŒå…¥å¼Linuxä¸Šï¼‰ä½œä¸ºç‹¬ç«‹è¿›ç¨‹è¿è¡Œã€‚ å†…å­˜å¸ƒå±€ï¼š æä¾›å®Œæ•´çš„è™šæ‹Ÿå†…å­˜ç®¡ç†ã€‚æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œå¹¶é€šè¿‡MMUæ˜ å°„åˆ°ç‰©ç†å†…å­˜ã€‚ æ‰€æœ‰æˆ‘ä»¬åœ¨æ¡Œé¢ç³»ç»Ÿä¸Šè®¨è®ºçš„æ®µï¼ˆä»£ç æ®µã€æ•°æ®æ®µã€BSS æ®µã€å †ã€æ ˆï¼‰éƒ½åœ¨æ¯ä¸ªè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­å­˜åœ¨ï¼Œä¸”éµå¾ªç›¸åŒçš„è¡Œä¸ºå’Œç‰¹æ€§ã€‚ éš”ç¦»æ€§å¼ºï¼š è¿›ç¨‹ä¹‹é—´é€šè¿‡è™šæ‹Ÿå†…å­˜å®ç°éš”ç¦»ï¼Œä¸€ä¸ªè¿›ç¨‹çš„å†…å­˜é”™è¯¯é€šå¸¸ä¸ä¼šå½±å“å…¶ä»–è¿›ç¨‹ã€‚ ç‰©ç†å†…å­˜å…±äº«ï¼š å¤šä¸ªè¿›ç¨‹è¿è¡Œç›¸åŒçš„ç¨‹åºï¼ˆå¦‚å¤šä¸ªæµè§ˆå™¨æ ‡ç­¾ï¼‰ï¼Œå®ƒä»¬çš„åªè¯»ä»£ç æ®µå¯èƒ½ä¼šå…±äº«ç‰©ç†å†…å­˜ã€‚ å±€éƒ¨é™æ€å˜é‡ï¼š è¡Œä¸ºä¸æ¡Œé¢Linuxå®Œå…¨ä¸€è‡´ï¼Œå…¶å†…å­˜ä½äºè¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´çš„ç‰¹å®šæ®µï¼ˆæ•°æ®/BSSï¼‰ï¼Œå¹¶ä¿è¯åœ¨é¦–æ¬¡æ‰§è¡Œæ—¶é€»è¾‘åˆå§‹åŒ–ã€‚ æ€»ç»“ï¼š # ç‰¹æ€§ / è®¾å¤‡ç±»å‹ è£¸æœº/æ— OS RTOS åµŒå…¥å¼Linux/Android è™šæ‹Ÿå†…å­˜ æ—  é€šå¸¸æ—  æœ‰ï¼ˆå…¨åŠŸèƒ½ï¼‰ åœ°å€ç©ºé—´ ç›´æ¥ç‰©ç†åœ°å€ å…±äº«ç‰©ç†åœ°å€ç©ºé—´ ç‹¬ç«‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ ç¨‹åºåŠ è½½ ç›´æ¥ä»Flashå¯åŠ¨/æ‹·è´åˆ°RAM å†…æ ¸å¯åŠ¨ååŠ è½½ä»»åŠ¡/ç¨‹åº å†…æ ¸å¯åŠ¨åä½œä¸ºç‹¬ç«‹è¿›ç¨‹åŠ è½½ å†…å­˜éš”ç¦» æ—  ä»»åŠ¡é—´éš”ç¦»æ€§å¼±ï¼ˆæ— MMUï¼‰ è¿›ç¨‹é—´éš”ç¦»æ€§å¼ºï¼ˆæœ‰MMUï¼‰ æ®µçš„ç‰©ç†ä½ç½® ä»£ç åœ¨Flash/RAMï¼Œæ•°æ®/BSS/å †/æ ˆåœ¨RAM ä»£ç åœ¨Flash/RAMï¼Œæ•°æ®/BSS/å †/æ ˆåœ¨RAM è™šæ‹Ÿåœ°å€æ˜ å°„åˆ°ç‰©ç†RAMï¼Œå¯èƒ½å…±äº«ç‰©ç†ä»£ç  å±€éƒ¨é™æ€å˜é‡è¡Œä¸º å†…å­˜åˆ†åœ¨RAMæ•°æ®/BSSï¼Œé¦–æ¬¡æ‰§è¡Œé€»è¾‘åˆå§‹åŒ– å†…å­˜åˆ†åœ¨RAMæ•°æ®/BSSï¼Œé¦–æ¬¡æ‰§è¡Œé€»è¾‘åˆå§‹åŒ– å†…å­˜åˆ†åœ¨è™šæ‹Ÿåœ°å€æ•°æ®/BSSï¼Œé¦–æ¬¡æ‰§è¡Œé€»è¾‘åˆå§‹åŒ– å› æ­¤ï¼Œå¯¹äºåµŒå…¥å¼è®¾å¤‡ï¼Œæ˜¯å¦â€œå’Œæ¡Œé¢ä¸€æ ·â€å–å†³äºå…¶è¿è¡Œçš„æ“ä½œç³»ç»Ÿæ˜¯å¦æ”¯æŒè™šæ‹Ÿå†…å­˜ã€‚æ— æ“ä½œç³»ç»Ÿæˆ–RTOSé€šå¸¸ä¸å…·å¤‡è™šæ‹Ÿå†…å­˜ï¼Œç›´æ¥æ“ä½œç‰©ç†åœ°å€ï¼›è€Œè¿è¡ŒLinuxç­‰å¤§å‹OSçš„åµŒå…¥å¼è®¾å¤‡ï¼Œå…¶å†…å­˜ç®¡ç†æœºåˆ¶åˆ™ä¸æ¡Œé¢ç³»ç»ŸåŸºæœ¬ç›¸åŒã€‚\n","date":"2025-06-10","externalUrl":null,"permalink":"/posts/%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%86%85%E5%AD%98%E4%B9%8B%E6%97%85--%E4%B8%80%E4%B8%AA%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%92%8C%E8%BF%90%E8%A1%8C/","section":"Posts","summary":"","title":"ç¨‹åºçš„å†…å­˜ä¹‹æ—…--ä¸€ä¸ªç¨‹åºçš„åŠ è½½å’Œè¿è¡Œ","type":"posts"},{"content":"","date":"2025-06-10","externalUrl":null,"permalink":"/category/leetcode/","section":"Category","summary":"","title":"Leetcode","type":"category"},{"content":" e1: # 27.ç§»é™¤å…ƒç´  # ç»™ä½ ä¸€ä¸ªæ•°ç»„Â numsÂ å’Œä¸€ä¸ªå€¼Â valï¼Œä½ éœ€è¦Â åŸåœ°Â ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äºÂ valÂ çš„å…ƒç´ ã€‚å…ƒç´ çš„é¡ºåºå¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚ç„¶åè¿”å›Â numsÂ ä¸­ä¸Â valÂ ä¸åŒçš„å…ƒç´ çš„æ•°é‡ã€‚ å‡è®¾Â numsÂ ä¸­ä¸ç­‰äºÂ valÂ çš„å…ƒç´ æ•°é‡ä¸ºÂ kï¼Œè¦é€šè¿‡æ­¤é¢˜ï¼Œæ‚¨éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š\næ›´æ”¹Â numsÂ æ•°ç»„ï¼Œä½¿Â numsÂ çš„å‰Â kÂ ä¸ªå…ƒç´ åŒ…å«ä¸ç­‰äºÂ valÂ çš„å…ƒç´ ã€‚numsÂ çš„å…¶ä½™å…ƒç´ å’ŒÂ numsÂ çš„å¤§å°å¹¶ä¸é‡è¦ã€‚ è¿”å›Â kã€‚ è¿™äº”ä¸ªå…ƒç´ å¯ä»¥ä»»æ„é¡ºåºè¿”å›ã€‚ ä½ åœ¨è¿”å›çš„ k ä¸ªå…ƒç´ ä¹‹å¤–ç•™ä¸‹äº†ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼ˆå› æ­¤å®ƒä»¬å¹¶ä¸è®¡å…¥è¯„æµ‹ï¼‰ã€‚\næˆ‘çš„è§£ç­”:\n#include \u0026#34;stdio.h\u0026#34; #include \u0026#34;stdlib.h\u0026#34; #include \u0026#34;string.h\u0026#34; int removeElement(int* nums, int numsSize, int val) { int *new_nums = (int*)malloc(numsSize * sizeof(int)); memcpy(new_nums, nums, sizeof(nums)); int i = 0, c = 0; while(numsSize--){ if(new_nums[numsSize] != val){ nums[c++] = new_nums[numsSize]; } } return c; } e2 # 20. æœ‰æ•ˆçš„æ‹¬å· # ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ \u0026lsquo;(\u0026rsquo;ï¼Œ\u0026rsquo;)\u0026rsquo;ï¼Œ\u0026rsquo;{\u0026rsquo;ï¼Œ\u0026rsquo;}\u0026rsquo;ï¼Œ\u0026rsquo;[\u0026rsquo;ï¼Œ\u0026rsquo;]\u0026rsquo; çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚ æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚ å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚ æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚\næ€è·¯: ä½¿ç”¨æ ˆ, é‡åˆ°å·¦æ‹¬å¼§å…¥æ ˆ,å³æ‹¬å¼§å¼¹æ ˆ, ä½¿ç”¨stack.top()çœ‹æ ˆé¡¶å…ƒç´ åŒ¹é…\n#include \u0026lt;stack\u0026gt; #include \u0026lt;string\u0026gt; class Solution { public: bool isValid(const std::string\u0026amp; s) { if (s.length() % 2 != 0) { return false; } std::stack\u0026lt;char\u0026gt; leftchar; for (char c : s) { switch(c){ case \u0026#39;(\u0026#39;: case \u0026#39;[\u0026#39;: case \u0026#39;{\u0026#39;: leftchar.push(c); break; case \u0026#39;)\u0026#39;: if(!leftchar.empty() \u0026amp;\u0026amp; leftchar.top() == \u0026#39;(\u0026#39;){ leftchar.pop(); } else { return false; } break; case \u0026#39;}\u0026#39;: if(!leftchar.empty() \u0026amp;\u0026amp; leftchar.top() == \u0026#39;{\u0026#39;){ leftchar.pop(); } else { return false; } break; case \u0026#39;]\u0026#39;: if(!leftchar.empty() \u0026amp;\u0026amp; leftchar.top() == \u0026#39;[\u0026#39;){ leftchar.pop(); } else { return false; } break; default: break; } } return leftchar.empty(); } }; e3 # 204.è®¡ç®—è´¨æ•° # ç»™å®šæ•´æ•°Â nÂ ï¼Œè¿”å›Â æ‰€æœ‰å°äºéè´Ÿæ•´æ•°Â nÂ çš„è´¨æ•°çš„æ•°é‡Â ã€‚\næ€è·¯ï¼š è´¨æ•°ï¼ˆç´ æ•°ï¼‰ï¼šä¸€ä¸ªå¤§äº1çš„è‡ªç„¶æ•°ï¼Œé™¤äº†1å’Œå®ƒè‡ªèº«å¤–ï¼Œä¸èƒ½è¢«å…¶ä»–è‡ªç„¶æ•°æ•´é™¤çš„æ•° ç´ æ•°ç­›æ³•ï¼Œåˆ é™¤2-nå†…æ‰€æœ‰çš„å€æ•°å³å¯\nC++:\nclass Solution { public: int countPrimes(int n) { vector\u0026lt;bool\u0026gt; nums(n, true); // åªç»Ÿè®¡sqrt(n)å†…çš„içš„å€æ•°ï¼Œä¼˜åŒ– for(int i = 2; i*i\u0026lt;n; i++){ int j = 2; // içš„jå€æ•° while(i*j \u0026lt; n){ nums[i*j] = false; j++; } } int res = 0; for(int i = 2; i\u0026lt;n; i++){ if(nums[i]) res++; } return res; } }; e4 # 48.æ—‹è½¬å›¾åƒ # æè¿°ï¼šç»™å®šä¸€ä¸ªÂ nÂ Ã—Â nÂ çš„äºŒç»´çŸ©é˜µÂ matrixÂ è¡¨ç¤ºä¸€ä¸ªå›¾åƒã€‚è¯·ä½ å°†å›¾åƒé¡ºæ—¶é’ˆæ—‹è½¬ 90 åº¦ã€‚ ä½ å¿…é¡»åœ¨Â åŸåœ°Â æ—‹è½¬å›¾åƒï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦ç›´æ¥ä¿®æ”¹è¾“å…¥çš„äºŒç»´çŸ©é˜µã€‚è¯·ä¸è¦Â ä½¿ç”¨å¦ä¸€ä¸ªçŸ©é˜µæ¥æ—‹è½¬å›¾åƒã€‚\næ€è·¯ï¼šå…ˆè½¬ç½®å†é€è¡Œé€†åº\nclass Solution { public: void rotate(vector\u0026lt;vector\u0026lt;int\u0026gt;\u0026gt;\u0026amp; matrix) { int size = matrix.size(); for(int y = 0; y \u0026lt; size; y++){ for(int x = y + 1; x \u0026lt; size; x++ ){ int temp = matrix[y][x]; matrix[y][x] = matrix[x][y]; matrix[x][y] = temp; } } for(int y = 0; y \u0026lt; size; y++){ for(int x = 0; x \u0026lt; size/2; x++){ int temp = matrix[y][x]; matrix [y][x] = matrix[y][size-x-1]; matrix [y][size-x-1] = temp; } } } }; 387.å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ # æè¿°ï¼š ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²Â sÂ ï¼Œæ‰¾åˆ°Â å®ƒçš„ç¬¬ä¸€ä¸ªä¸é‡å¤çš„å­—ç¬¦ï¼Œå¹¶è¿”å›å®ƒçš„ç´¢å¼•Â ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›Â -1Â ã€‚\næ€è·¯:å› ä¸ºåªæœ‰å°å†™å­—æ¯26ä¸ª,ä½¿ç”¨ç®€å•çš„æ•°ç»„æ ‡è®°å³å¯\nclass Solution { public: int firstUniqChar(string s) { vector\u0026lt;unsigned int\u0026gt; sum(26); for(char c : s) sum[c-\u0026#39;a\u0026#39;]++; for(int i = 0; i \u0026lt; s.length(); i++) if(sum[s[i]-\u0026#39;a\u0026#39;] == 1) return i; return -1; } }; 94.äºŒå‰æ ‘çš„ä¸­åºéå† # ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹Â rootÂ ï¼Œè¿”å›Â å®ƒçš„ **ä¸­åº **Â éå†Â ã€‚\n/** * Definition for a binary tree node. * struct TreeNode { * int val; * TreeNode *left; * TreeNode *right; * TreeNode() : val(0), left(nullptr), right(nullptr) {} * TreeNode(int x) : val(x), left(nullptr), right(nullptr) {} * TreeNode(int x, TreeNode *left, TreeNode *right) : val(x), left(left), right(right) {} * }; */ class Solution { public: void traversal(TreeNode* cur, vector\u0026lt;int\u0026gt;\u0026amp; vec){ if(cur == NULL) return; traversal(cur-\u0026gt;left, vec); // å‰ vec.push_back(cur-\u0026gt;val); // ä¸­ traversal(cur-\u0026gt;right, vec);// å } vector\u0026lt;int\u0026gt; inorderTraversal(TreeNode* root) { vector\u0026lt;int\u0026gt; res; traversal(root, res); return res; } }; e5 # 316. å»é™¤é‡å¤å­—æ¯ # ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸²Â sÂ ï¼Œè¯·ä½ å»é™¤å­—ç¬¦ä¸²ä¸­é‡å¤çš„å­—æ¯ï¼Œä½¿å¾—æ¯ä¸ªå­—æ¯åªå‡ºç°ä¸€æ¬¡ã€‚éœ€ä¿è¯Â è¿”å›ç»“æœçš„å­—å…¸åºæœ€å°ï¼ˆè¦æ±‚ä¸èƒ½æ‰“ä¹±å…¶ä»–å­—ç¬¦çš„ç›¸å¯¹ä½ç½®ï¼‰ã€‚\næ€è·¯ : å•è°ƒæ ˆ+è´ªå¿ƒ\nclass Solution { public: string removeDuplicateLetters(string s) { vector\u0026lt;char\u0026gt; stk; set\u0026lt;char\u0026gt; set; int dic[26] = {0}; for(int i = 0; i \u0026lt; s.length(); i++){ dic[s[i]-\u0026#39;a\u0026#39;] = i; } for(int i = 0; i \u0026lt; s.length(); i++){ if (set.count(s[i])) { continue; } while((!stk.empty()) \u0026amp;\u0026amp; (stk.back() \u0026gt; s[i]) \u0026amp;\u0026amp; (dic[stk.back()-\u0026#39;a\u0026#39;] \u0026gt; i)){ set.erase(stk.back()); stk.pop_back(); } stk.push_back(s[i]); set.insert(s[i]); } string res = \u0026#34;\u0026#34;; for(char c : stk){ res += c; } return res; } }; 402. ç§»æ‰ K ä½æ•°å­— # ç»™ä½ ä¸€ä¸ªä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„éè´Ÿæ•´æ•°Â numÂ å’Œä¸€ä¸ªæ•´æ•°Â kÂ ï¼Œç§»é™¤è¿™ä¸ªæ•°ä¸­çš„Â kÂ ä½æ•°å­—ï¼Œä½¿å¾—å‰©ä¸‹çš„æ•°å­—æœ€å°ã€‚è¯·ä½ ä»¥å­—ç¬¦ä¸²å½¢å¼è¿”å›è¿™ä¸ªæœ€å°çš„æ•°å­—ã€‚\næ€è·¯ï¼šå•è°ƒæ ˆ+è´ªå¿ƒ\nclass Solution { public: string removeKdigits(string num, int k) { vector\u0026lt;char\u0026gt; s; for (char digit : num) { while (k \u0026amp;\u0026amp; !s.empty() \u0026amp;\u0026amp; s.back() \u0026gt; digit) { s.pop_back(); k--; } s.push_back(digit); } while ( k \u0026amp;\u0026amp; !s.empty() ) { s.pop_back(); k--; } string result = \u0026#34;\u0026#34;; bool t = true; for(char c : s){ if( t \u0026amp;\u0026amp; c != \u0026#39;0\u0026#39;) t = false; if( !t ) result += c; } return result == \u0026#34;\u0026#34; ? \u0026#34;0\u0026#34; : result; } }; e6 # 409.æœ€é•¿å›æ–‡ä¸² #è´ªå¿ƒ # ç»™å®šä¸€ä¸ªåŒ…å«å¤§å†™å­—æ¯å’Œå°å†™å­—æ¯çš„å­—ç¬¦ä¸²Â sÂ ï¼Œè¿”å›Â é€šè¿‡è¿™äº›å­—æ¯æ„é€ æˆçš„Â æœ€é•¿çš„å›æ–‡ä¸²Â çš„é•¿åº¦ã€‚\næç¤º:\n1 \u0026lt;= s.length \u0026lt;= 2000 sÂ åªç”±å°å†™Â å’Œ/æˆ–Â å¤§å†™è‹±æ–‡å­—æ¯ç»„æˆ æ€è·¯ï¼š ASCII ç çš„èŒƒå›´æ˜¯ 0-127 å…±128ä¸ªå­—ç¬¦ ç›´æ¥å¼€è¾Ÿä¸€ä¸ªcharç±»å‹128å¤§å°çš„ æ•°ç»„ï¼Œç»Ÿè®¡å­—ç¬¦æ•°é‡ï¼Œç„¶ååˆ†å¥‡å¶æ•°ç›®å¤„ç†ï¼Œå¯¹äºç¬¬ä¸€ä¸ªå¥‡æ•°ä¸ªæ•°çš„å­—ç¬¦çš„ä¼˜å…ˆæ”¾ç½®äºä¸­å¿ƒï¼Œå±äºè´ªå¿ƒç­–ç•¥\nclass Solution { public: int longestPalindrome(string s) { int cnt[128] = {0}; // ä½¿ç”¨æ›´å¤§çš„æ•°ç»„æ¥å®¹çº³æ‰€æœ‰ASCIIå­—ç¬¦ for (char c : s) { cnt[c]++; } int length = 0; bool has_odd = false; for (int i = 0; i \u0026lt; 128; ++i) { // éå†æ‰€æœ‰å¯èƒ½çš„ASCIIå­—ç¬¦ if (cnt[i] \u0026gt; 0) { if (cnt[i] % 2 == 0) { length += cnt[i]; } else { length += cnt[i] - 1; // å‡å»1ï¼Œç”¨äºå¯¹ç§°æ’åˆ— has_odd = true; // æ ‡è®°å­˜åœ¨å‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°çš„å­—ç¬¦ } } } // å¦‚æœå­˜åœ¨å‡ºç°æ¬¡æ•°ä¸ºå¥‡æ•°çš„å­—ç¬¦ï¼Œå¯ä»¥å°†å…¶ä¸­çš„ä¸€ä¸ªæ”¾åœ¨ä¸­å¿ƒ if (has_odd) { length += 1; } return length; } }; 455.åˆ†å‘é¥¼å¹² #è´ªå¿ƒ # å‡è®¾ä½ æ˜¯ä¸€ä½å¾ˆæ£’çš„å®¶é•¿ï¼Œæƒ³è¦ç»™ä½ çš„å­©å­ä»¬ä¸€äº›å°é¥¼å¹²ã€‚ä½†æ˜¯ï¼Œæ¯ä¸ªå­©å­æœ€å¤šåªèƒ½ç»™ä¸€å—é¥¼å¹²ã€‚\nå¯¹æ¯ä¸ªå­©å­Â iï¼Œéƒ½æœ‰ä¸€ä¸ªèƒƒå£å€¼Â g[i]ï¼Œè¿™æ˜¯èƒ½è®©å­©å­ä»¬æ»¡è¶³èƒƒå£çš„é¥¼å¹²çš„æœ€å°å°ºå¯¸ï¼›å¹¶ä¸”æ¯å—é¥¼å¹²Â jï¼Œéƒ½æœ‰ä¸€ä¸ªå°ºå¯¸Â s[j]Â ã€‚å¦‚æœÂ s[j]Â \u0026gt;= g[i]ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªé¥¼å¹²Â jÂ åˆ†é…ç»™å­©å­Â iÂ ï¼Œè¿™ä¸ªå­©å­ä¼šå¾—åˆ°æ»¡è¶³ã€‚ä½ çš„ç›®æ ‡æ˜¯æ»¡è¶³å°½å¯èƒ½å¤šçš„å­©å­ï¼Œå¹¶è¾“å‡ºè¿™ä¸ªæœ€å¤§æ•°å€¼ã€‚\næ€è·¯ï¼šæ’åºæ•°ç»„ï¼Œç”±å°åˆ°å¤§éå†ï¼Œä¼˜å…ˆè®©å°çš„èƒƒå£æ‰¾åˆ°æ»¡è¶³çš„æœ€å°çš„é¥¼å¹²å³å¯\nclass Solution { public: int findContentChildren(vector\u0026lt;int\u0026gt;\u0026amp; g, vector\u0026lt;int\u0026gt;\u0026amp; s) { sort(g.begin(), g.end()); sort(s.begin(), s.end()); int g_size = g.size(); int s_size = s.size(); int g_i = 0, s_i = 0; while(s_i \u0026lt; s_size \u0026amp;\u0026amp; g_i \u0026lt; g_size) { if(g[g_i] \u0026lt;= s[s_i++]) { g_i ++; } } return g_i; } }; 118.æ¨è¾‰ä¸‰è§’ #åŠ¨æ€è§„åˆ’ # ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°Â _numRowsï¼Œ_ç”Ÿæˆã€Œæ¨è¾‰ä¸‰è§’ã€çš„å‰Â numRowsÂ è¡Œã€‚\nåœ¨ã€Œæ¨è¾‰ä¸‰è§’ã€ä¸­ï¼Œæ¯ä¸ªæ•°æ˜¯å®ƒå·¦ä¸Šæ–¹å’Œå³ä¸Šæ–¹çš„æ•°çš„å’Œã€‚\næç¤º:\n1 \u0026lt;= numRows \u0026lt;= 30 æ€è·¯ï¼šç»å…¸åŠ¨æ€è§„åˆ’ï¼š\nå‡†å¤‡ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼ˆdpè¡¨ï¼‰ç”¨äºå­˜å‚¨çŠ¶æ€ çŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼šres[i][0] = 1 res[i][i] = 1ï¼Œ res[i][j] = res[i-1][j] + res[i-1][j-1]Â ï¼ˆå½“Â 0 \u0026lt; j \u0026lt; iÂ æ—¶ï¼‰ class Solution { public: vector\u0026lt;vector\u0026lt;int\u0026gt;\u0026gt; generate(int numRows) { int i, j; vector\u0026lt;vector\u0026lt;int\u0026gt;\u0026gt; res; if(numRows == 1) return {{1}}; for(i = 1; i\u0026lt;=numRows; i++) res.push_back(vector\u0026lt;int\u0026gt;(i,1)); for(i = 2; i\u0026lt;numRows; i++) { for(j = 1; j \u0026lt; i; j++) { res[i][j]=res[i-1][j]+res[i-1][j-1]; } } return res; } }; ","date":"2025-06-10","externalUrl":null,"permalink":"/posts/learn-c/leetcode-%E5%88%B7%E9%A2%98%E6%95%B4%E7%90%86/","section":"Posts","summary":"","title":"leetcode-åˆ·é¢˜æ•´ç†","type":"posts"},{"content":"","date":"2025-06-10","externalUrl":null,"permalink":"/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/","section":"Tags","summary":"","title":"åŠ¨æ€è§„åˆ’","type":"tags"},{"content":"","date":"2025-06-10","externalUrl":null,"permalink":"/tags/%E8%B4%AA%E5%BF%83/","section":"Tags","summary":"","title":"è´ªå¿ƒ","type":"tags"},{"content":" é…ç½®pico-sdk # ä½¿ç”¨å®˜æ–¹è„šæœ¬ï¼š\ngit clone https://github.com/raspberrypi/pico-setup.git sh ./pico-setup/pico_setup.sh\nä¼šè‡ªåŠ¨é…ç½®pico-sdk\\picotool\\openocdä»¥åŠç¯å¢ƒå˜é‡ è¿™é‡Œæˆ‘æŠŠSDKç§»åŠ¨åˆ°äº†%HOME%/_PATH_ä¸‹\nexport PICO_SDK_PATH=/home/cerry/_PATH_/pico/pico-sdk export PICO_EXAMPLES_PATH=/home/cerry/_PATH_/pico/pico-examples export PICO_EXTRAS_PATH=/home/cerry/_PATH_/pico/pico-extras export PICO_PLAYGROUND_PATH=/home/cerry/_PATH_/pico/pico-playground export FREERTOS_KERNEL_PATH=/home/cerry/_PATH_/pico/FreeRTOS-Kernel è¿™ä¸ªæ˜¯bashçš„é…ç½®,å¦‚æœä½¿ç”¨çš„æ˜¯fish,è¦ä½¿ç”¨fishçš„é…ç½®æ–‡ä»¶ %HOME%/.config/fish/config.fish fishä¸‹å¯ä»¥é…ç½®ä¸º:\nset -gx PICO_SDK_PATH /home/cerry/_PATH_/pico/pico-sdk set -gx PICO_EXAMPLES_PATH /home/cerry/_PATH_/pico/pico-examples set -gx PICO_EXTRAS_PATH /home/cerry/_PATH_/pico/pico-extras set -gx PICO_PLAYGROUND_PATH /home/cerry/_PATH_/pico/pico-playground set -gx FREERTOS_KERNEL_PATH /home/cerry/_PATH_/pico/FreeRTOS-Kernel æ¥åˆ°VScodeè¿™è¾¹,æ¥é…ç½®ç¯å¢ƒ: å®‰è£…WSLæ’ä»¶ ç‚¹å‡»å·¦ä¸‹è§’ æ‰“å¼€è¿œç¨‹ç«¯å£ è¿æ¥åˆ°WSl ç»™WSlä¸‹çš„VScodeå®‰è£…æ’ä»¶ C/C++ CMake å¯é€‰:Raspberry Pi Pico(å½“ç„¶é€‰æ‹©è¿™ä¸ªå, ç¯å¢ƒä¼šè‡ªåŠ¨å®‰è£…åˆ°%HOME%/.pico-sdkä¸‹ å°±ä¸éœ€è¦é…ç½®è¿™äº›äº†\næµ‹è¯•é¡¹ç›® # åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹ myapp å¤åˆ¶ \u0026lt;PICO_SDK_PATH\u0026gt;/external/pico_sdk_import.cmake åˆ°appä¸‹ ç¼–å†™CMakeLists.txtæ–‡ä»¶ cmake_minimum_required(VERSION 3.13) include(pico_sdk_import.cmake) project(myapp) pico_sdk_init() add_executable(sb \u0026#34;app.c\u0026#34;) pico_add_extra_outputs(sb) target_link_libraries(sb pico_stdlib) ç¼–å†™app.c #include \u0026lt;stdio.h\u0026gt; #include \u0026#34;pico/stdlib.h\u0026#34; int main() { return 0; } ç”Ÿæˆç›®æ ‡ æœŸé—´å¼¹å‡ºé€‰æ‹©ç¼–è¾‘å™¨,é€‰æ‹© arm-none-eabi CMakeå¯èƒ½ä¼šæŠ¥é”™\næ‰“å¼€è®¾ç½®,æœç´¢ Cmake:configureSettings æ·»åŠ  \u0026quot;CMAKE_EXE_LINKER_FLAGS\u0026quot;: \u0026quot;--specs=nano.specs\u0026quot; Cmakeå°±ä¸ä¼šæŠ¥é”™äº†\né…ç½®FreeRtos # cd _PATH_/pico git clone -b smp https://github.com/FreeRTOS/FreeRTOS-Kernel --recurse-submodules # bashä¸‹ vim ~/.bachrc export FREERTOS_KERNEL_PATH=/home/cerry/_PATH_/pico/FreeRTOS-Kernel # å¦‚æœæ˜¯fish vim ~/.config/fish/config.fish set -gx FREERTOS_KERNEL_PATH /home/cerry/_PATH_/pico/FreeRTOS-Kernel ","date":"2025-06-04","externalUrl":null,"permalink":"/posts/%E9%85%8D%E7%BD%AEpico-sdk%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83-wsl+vscode/","section":"Posts","summary":"","title":"é…ç½®pico-sdkå¼€å‘ç¯å¢ƒ-WSL+VScode","type":"posts"},{"content":" C++ STL æ˜ å°„å®¹å™¨å®¶æ—ï¼šstd::map, std::unordered_map, std::multimap è¯¦è§£ # STLæä¾› ä¸‰ç§ä¸»è¦çš„å…³è”å®¹å™¨ï¼Œç”¨äºå­˜å‚¨ é”®å€¼å¯¹ (key-value pairs) ï¼š std::map ã€ std::unordered_map å’Œ std::multimap ã€‚ å®ƒä»¬çš„æ ¸å¿ƒæ¦‚å¿µéƒ½æ˜¯é€šè¿‡ä¸€ä¸ªå”¯ä¸€çš„é”®æ¥å¿«é€ŸæŸ¥æ‰¾å¯¹åº”çš„å€¼ï¼Œä½†å®ƒä»¬åœ¨ å†…éƒ¨å®ç°ã€é”®çš„å”¯ä¸€æ€§è¦æ±‚å’Œå…ƒç´ é¡ºåº ä¸Šæœ‰ç€æ˜¾è‘—åŒºåˆ«ã€‚ æ­¤å¤–ï¼ŒSTL ä¹Ÿæä¾›äº†ä¸€ç»„ é›†åˆå®¹å™¨ ï¼Œç”¨äºå­˜å‚¨ å”¯ä¸€å…ƒç´  æˆ– å…è®¸é‡å¤å…ƒç´  çš„é›†åˆã€‚ å…¶ä¸­ï¼Œ std::set å’Œ std::unordered_set ç±»ä¼¼äºæ˜ å°„å®¹å™¨ï¼Œä½†å®ƒä»¬åªå­˜å‚¨é”®ï¼Œä¸å­˜å‚¨å€¼ã€‚\nå…±åŒæ ¸å¿ƒçŸ¥è¯† # å¤´æ–‡ä»¶: std::map å’Œ std::multimap -\u0026gt; #include \u0026lt;map\u0026gt;ã€‚ std::unordered_map å’Œ std::unordered_multimap -\u0026gt; #include \u0026lt;unordered_map\u0026gt; ã€‚ std::set å’Œ std::multiset -\u0026gt; #include \u0026lt;set\u0026gt; ã€‚ std::unordered_set -\u0026gt; #include \u0026lt;unordered_set\u0026gt; ã€‚ å®šä¹‰: æ˜ å°„å®¹å™¨ (å­˜å‚¨é”®å€¼å¯¹) ï¼š ContainerType\u0026lt;KeyType, ValueType\u0026gt; myContainer; ä¾‹å¦‚ï¼š std::map\u0026lt;int, std::string\u0026gt; myMap; std::unordered_map\u0026lt;std::string, double\u0026gt; myUnorderedMap; std::multimap\u0026lt;char, int\u0026gt; myMultimap; é›†åˆå®¹å™¨ (åªå­˜å‚¨é”®/å…ƒç´ ) ï¼š ContainerType\u0026lt;ElementType\u0026gt; myContainer; ä¾‹å¦‚ï¼š std::set\u0026lt;int\u0026gt; mySet; std::unordered_set\u0026lt;std::string\u0026gt; myUnorderedSet; åŸºæœ¬æ¦‚å¿µ: é”®å€¼å¯¹ (æ˜ å°„å®¹å™¨): å­˜å‚¨ (é”®, å€¼) å½¢å¼çš„æ•°æ®ã€‚ å…ƒç´  (é›†åˆå®¹å™¨): åªå­˜å‚¨ å…ƒç´ æœ¬èº« (ä½œä¸ºé”®)ã€‚ å…³è”å®¹å™¨: å…ƒç´ é€šè¿‡é”®æ¥è®¿é—®ï¼Œè€Œä¸æ˜¯é€šè¿‡ä½ç½® (å¦‚ std::vector)ã€‚ åŠ¨æ€å¤§å°: å®¹å™¨çš„å¤§å°ä¼šæ ¹æ®å…ƒç´ çš„å¢åˆ åŠ¨æ€è°ƒæ•´ã€‚ è¿­ä»£å™¨: éƒ½æ”¯æŒè¿­ä»£å™¨éå†ï¼Œä½†è¿­ä»£é¡ºåºå› å®¹å™¨ç±»å‹è€Œå¼‚ã€‚ å¸¸ç”¨æˆå‘˜å‡½æ•° (å…±é€šéƒ¨åˆ†): insert() / emplace(): æ’å…¥å…ƒç´ ã€‚ erase(): åˆ é™¤å…ƒç´ ã€‚ find(): æŸ¥æ‰¾å…ƒç´ ã€‚ empty(): æ£€æŸ¥å®¹å™¨æ˜¯å¦ä¸ºç©ºã€‚ size(): è¿”å›å…ƒç´ æ•°é‡ã€‚ begin() / end(): è·å–è¿­ä»£å™¨ã€‚ æ ¸å¿ƒåŒºåˆ«ä¸ç‰¹æ€§å¯¹æ¯” (æ˜ å°„å®¹å™¨) # ç‰¹æ€§ / å®¹å™¨ std::map std::unordered_map std::multimap é”®çš„å”¯ä¸€æ€§ å”¯ä¸€é”® (Unique Keys) å”¯ä¸€é”® (Unique Keys) å…è®¸é‡å¤é”® (Multiple Keys) å…ƒç´ é¡ºåº æŒ‰é”®æ’åº (æœ‰åº) ï¼šæ ¹æ®é”®çš„æ¯”è¾ƒå‡½æ•° (é»˜è®¤ operator\u0026lt;) è‡ªåŠ¨æ’åºã€‚ æ— åº: å…ƒç´ å­˜å‚¨é¡ºåºä¾èµ–äºå“ˆå¸Œå‡½æ•°å’Œå†…éƒ¨å®ç°ï¼Œä¸ä¿è¯ä»»ä½•ç‰¹å®šé¡ºåºã€‚ æŒ‰é”®æ’åº (æœ‰åº) ï¼šä¸ std::map ç›¸åŒï¼Œæ ¹æ®é”®çš„æ¯”è¾ƒå‡½æ•°è‡ªåŠ¨æ’åºã€‚å¯¹äºé‡å¤é”®ï¼Œå…¶ç›¸å¯¹é¡ºåºä¸ä¿è¯ã€‚ åº•å±‚å®ç° çº¢é»‘æ ‘ (é€šå¸¸æ˜¯è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘)ã€‚ å“ˆå¸Œè¡¨ (é€šå¸¸æ˜¯å¼€æ”¾å¯»å€æˆ–é“¾å¼æ‹‰é“¾æ³•)ã€‚ çº¢é»‘æ ‘ (é€šå¸¸æ˜¯è‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘)ã€‚ æ—¶é—´å¤æ‚åº¦ O(log N) (æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾)ã€‚ å¹³å‡ O(1) (æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾)ï¼› æœ€å O(N) (å“ˆå¸Œå†²çªä¸¥é‡)ã€‚ O(log N) (æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾)ã€‚å¯¹äº count å’Œ equal_range æ¶‰åŠé‡å¤é”®çš„æ“ä½œï¼Œå¯èƒ½æ˜¯ O(log N + M)ï¼ŒM ä¸ºé‡å¤é”®çš„æ•°é‡ã€‚ é”®ç±»å‹è¦æ±‚ é”®ç±»å‹å¿…é¡»æ”¯æŒ ä¸¥æ ¼å¼±åº (Strict Weak Ordering) (é»˜è®¤ operator\u0026lt;)ã€‚ é”®ç±»å‹å¿…é¡»æ˜¯ å¯å“ˆå¸Œçš„ (Hashable) (æä¾› std::hash ç‰¹åŒ–æˆ–è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°) ä¸”æ”¯æŒ ç›¸ç­‰æ¯”è¾ƒ (operator==) ã€‚ é”®ç±»å‹å¿…é¡»æ”¯æŒ ä¸¥æ ¼å¼±åº (Strict Weak Ordering) (é»˜è®¤ operator\u0026lt;)ã€‚ ç‰¹å®šæˆå‘˜å‡½æ•° operator[], at() operator[], at() count(), equal_range(), lower_bound(), upper_bound() è®¿é—®é‡å¤é”® æ— æ¦‚å¿µ (é”®å”¯ä¸€) æ— æ¦‚å¿µ (é”®å”¯ä¸€) ä½¿ç”¨ count() è·å–æ•°é‡ï¼›ä½¿ç”¨ equal_range() ã€ lower_bound() å’Œ upper_bound() è¿­ä»£æ‰€æœ‰é‡å¤é”®ã€‚ é›†åˆå®¹å™¨ (std::set, std::unordered_set) ç®€è¿° # é›†åˆå®¹å™¨ä¸å­˜å‚¨é”®å€¼å¯¹ï¼Œåªå­˜å‚¨å…ƒç´ æœ¬èº«ã€‚å…¶å†…éƒ¨å®ç°å’Œæ€§èƒ½ç‰¹æ€§ä¸å¯¹åº”çš„æ˜ å°„å®¹å™¨éå¸¸ç›¸ä¼¼ï¼š\nstd::set\u0026lt;T\u0026gt; : ç‰¹ç‚¹: æœ‰åºï¼Œå…ƒç´ å”¯ä¸€ã€‚åº•å±‚å®ç°ä¸ºçº¢é»‘æ ‘ã€‚ æ—¶é—´å¤æ‚åº¦: O(log N)ã€‚ åº”ç”¨åœºæ™¯: éœ€è¦å­˜å‚¨ä¸€ç»„å”¯ä¸€ä¸”æœ‰åºçš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼š==æ’åºåçš„ä¸é‡å¤æ•°å­—åˆ—è¡¨==ã€‚ std::unordered_set\u0026lt;T\u0026gt;: ç‰¹ç‚¹: æ— åºï¼Œå…ƒç´ å”¯ä¸€ã€‚åº•å±‚å®ç°ä¸ºå“ˆå¸Œè¡¨ã€‚ æ—¶é—´å¤æ‚åº¦: å¹³å‡ O(1)ï¼Œæœ€å O(N)ã€‚ åº”ç”¨åœºæ™¯: ==éœ€è¦å¿«é€Ÿæ£€æŸ¥æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºé›†åˆä¸­ï¼Œä¸”ä¸å…³å¿ƒå…ƒç´ çš„é¡ºåºã€‚==ä¾‹å¦‚ï¼šè®°å½•å·²è®¿é—®è¿‡çš„èŠ‚ç‚¹ã€å»é‡ã€‚ è¯¦ç»†è®²è§£ä¸ä»£ç ç¤ºä¾‹ # 1. std::map (æœ‰åºï¼Œå”¯ä¸€é”®) # ç‰¹ç‚¹: åƒä¸€æœ¬å­—å…¸ï¼Œæ¯ä¸ªå•è¯ (é”®) éƒ½æœ‰å”¯ä¸€çš„è§£é‡Š (å€¼)ï¼Œå¹¶ä¸”æ‰€æœ‰å•è¯éƒ½æŒ‰ç…§å­—æ¯é¡ºåºæ’åˆ—ã€‚ ä¼˜ç‚¹: é”®è‡ªåŠ¨æ’åº ï¼Œéå†æ—¶å…ƒç´ æœ‰åºï¼› æ€§èƒ½ç¨³å®š ã€‚ ç¼ºç‚¹: æŸ¥æ‰¾é€Ÿåº¦ä¸å¦‚ unordered_map (å¹³å‡)ï¼›é¢å¤–å†…å­˜å¼€é”€ã€‚ ä»£ç ç¤ºä¾‹: #include \u0026lt;iostream\u0026gt; #include \u0026lt;map\u0026gt; #include \u0026lt;string\u0026gt; void demo_map() { std::map\u0026lt;int, std::string\u0026gt; students; // æ’å…¥å…ƒç´ ï¼šoperator[] æ›´ç®€æ´ï¼Œinsert è¿”å›æ’å…¥ç»“æœ students[101] = \u0026#34;Alice\u0026#34;; students.insert({103, \u0026#34;Charlie\u0026#34;}); students[101] = \u0026#34;Alicia\u0026#34;; // é”®101å·²å­˜åœ¨ï¼Œä¿®æ”¹å…¶å€¼ std::cout \u0026lt;\u0026lt; \u0026#34;--- std::map ç¤ºä¾‹ ---\u0026#34; \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Map size: \u0026#34; \u0026lt;\u0026lt; students.size() \u0026lt;\u0026lt; std::endl; // éå† (æŒ‰é”®æœ‰åº) for (const auto\u0026amp; pair : students) { std::cout \u0026lt;\u0026lt; \u0026#34;ID: \u0026#34; \u0026lt;\u0026lt; pair.first \u0026lt;\u0026lt; \u0026#34;, Name: \u0026#34; \u0026lt;\u0026lt; pair.second \u0026lt;\u0026lt; std::endl; } // æŸ¥æ‰¾å…ƒç´  auto it = students.find(103); if (it != students.end()) { std::cout \u0026lt;\u0026lt; \u0026#34;Found 103: \u0026#34; \u0026lt;\u0026lt; it-\u0026gt;second \u0026lt;\u0026lt; std::endl; } // ä½¿ç”¨ at() è®¿é—® (é”®ä¸å­˜åœ¨ä¼šæŠ›å¼‚å¸¸) try { std::cout \u0026lt;\u0026lt; \u0026#34;Accessing 101 with at(): \u0026#34; \u0026lt;\u0026lt; students.at(101) \u0026lt;\u0026lt; std::endl; // std::cout \u0026lt;\u0026lt; \u0026#34;Accessing 999 with at(): \u0026#34; \u0026lt;\u0026lt; students.at(999) \u0026lt;\u0026lt; std::endl; // è¿™è¡Œä¼šæŠ›å‡ºå¼‚å¸¸ } catch (const std::out_of_range\u0026amp; e) { std::cerr \u0026lt;\u0026lt; \u0026#34;Error: \u0026#34; \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; std::endl; } // åˆ é™¤å…ƒç´  students.erase(101); std::cout \u0026lt;\u0026lt; \u0026#34;After erasing 101, map size: \u0026#34; \u0026lt;\u0026lt; students.size() \u0026lt;\u0026lt; std::endl; } 2. std::unordered_map (æ— åºï¼Œå”¯ä¸€é”®) # ç‰¹ç‚¹: åƒä¸€ä¸ªæ•£è£…çš„æ‚ç‰©æŠ½å±‰ï¼Œä¸œè¥¿æ”¾è¿›å»æ—¶ä¸ä¼šæŒ‰é¡ºåºæ•´ç†ï¼Œä½†ä½ çŸ¥é“å¤§æ¦‚æ”¾åœ¨å“ªä¸ªåˆ†åŒº (æ¡¶) é‡Œï¼Œæ‰€ä»¥æŸ¥æ‰¾èµ·æ¥é€šå¸¸éå¸¸å¿«ã€‚ ä¼˜ç‚¹: æé€ŸæŸ¥æ‰¾ (å¹³å‡ O(1))ã€‚ ç¼ºç‚¹: å…ƒç´ æ— åº ï¼›æœ€åæƒ…å†µæ€§èƒ½å¯èƒ½é€€åŒ–ï¼›å¯èƒ½éœ€è¦è‡ªå®šä¹‰å“ˆå¸Œå‡½æ•°ã€‚ ä»£ç ç¤ºä¾‹: #include \u0026lt;iostream\u0026gt; #include \u0026lt;unordered_map\u0026gt; #include \u0026lt;string\u0026gt; void demo_unordered_map() { std::unordered_map\u0026lt;std::string, double\u0026gt; grades; // æ’å…¥å…ƒç´  grades[\u0026#34;Math\u0026#34;] = 95.5; grades[\u0026#34;Physics\u0026#34;] = 88.0; grades[\u0026#34;Chemistry\u0026#34;] = 92.0; grades[\u0026#34;Math\u0026#34;] = 98.0; // é”®\u0026#34;Math\u0026#34;å·²å­˜åœ¨ï¼Œæ›´æ–°å…¶å€¼ std::cout \u0026lt;\u0026lt; \u0026#34;\\n--- std::unordered_map ç¤ºä¾‹ ---\u0026#34; \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Unordered map size: \u0026#34; \u0026lt;\u0026lt; grades.size() \u0026lt;\u0026lt; std::endl; // éå† (é¡ºåºä¸ç¡®å®š) for (const auto\u0026amp; pair : grades) { std::cout \u0026lt;\u0026lt; \u0026#34;Subject: \u0026#34; \u0026lt;\u0026lt; pair.first \u0026lt;\u0026lt; \u0026#34;, Grade: \u0026#34; \u0026lt;\u0026lt; pair.second \u0026lt;\u0026lt; std::endl; } // æŸ¥æ‰¾å…ƒç´  auto it = grades.find(\u0026#34;Physics\u0026#34;); if (it != grades.end()) { std::cout \u0026lt;\u0026lt; \u0026#34;Found Physics grade: \u0026#34; \u0026lt;\u0026lt; it-\u0026gt;second \u0026lt;\u0026lt; std::endl; } // ä½¿ç”¨ at() è®¿é—® try { std::cout \u0026lt;\u0026lt; \u0026#34;Accessing Chemistry with at(): \u0026#34; \u0026lt;\u0026lt; grades.at(\u0026#34;Chemistry\u0026#34;) \u0026lt;\u0026lt; std::endl; } catch (const std::out_of_range\u0026amp; e) { std::cerr \u0026lt;\u0026lt; \u0026#34;Error: \u0026#34; \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; std::endl; } // åˆ é™¤å…ƒç´  grades.erase(\u0026#34;Math\u0026#34;); std::cout \u0026lt;\u0026lt; \u0026#34;After erasing Math, unordered map size: \u0026#34; \u0026lt;\u0026lt; grades.size() \u0026lt;\u0026lt; std::endl; } 3. std::multimap (æœ‰åºï¼Œå…è®¸é‡å¤é”®) # ç‰¹ç‚¹: åƒä¸€ä¸ªå­¦ç”Ÿæˆç»©å•ï¼Œä¸€ä¸ªå­¦ç”Ÿ (é”®) å¯èƒ½æœ‰å¤šé—¨è¯¾ç¨‹çš„æˆç»© (å€¼)ï¼Œæ‰€æœ‰å­¦ç”Ÿä»æŒ‰å§“åæ’åºï¼Œä½†ä¸€ä¸ªå­¦ç”Ÿåä¸‹å¯èƒ½æœ‰å¤šæ¡æˆç»©è®°å½•ã€‚ ä¼˜ç‚¹: å…è®¸é‡å¤é”® ï¼› é”®è‡ªåŠ¨æ’åº ã€‚ ç¼ºç‚¹: æ²¡æœ‰ operator[] å’Œ at() ï¼›æŸ¥æ‰¾æ‰€æœ‰é‡å¤é”®çš„å€¼ç›¸å¯¹å¤æ‚ã€‚ ä»£ç ç¤ºä¾‹: #include \u0026lt;iostream\u0026gt; #include \u0026lt;map\u0026gt; // multimapä¹Ÿåœ¨\u0026lt;map\u0026gt;å¤´æ–‡ä»¶ä¸­ #include \u0026lt;string\u0026gt; void demo_multimap() { std::multimap\u0026lt;std::string, int\u0026gt; studentScores; // æ’å…¥å…ƒç´  (å…è®¸é‡å¤é”®) studentScores.insert({\u0026#34;Alice\u0026#34;, 90}); studentScores.insert({\u0026#34;Bob\u0026#34;, 85}); studentScores.insert({\u0026#34;Alice\u0026#34;, 95}); // Alice çš„ç¬¬äºŒé—¨æˆç»© studentScores.emplace(\u0026#34;Charlie\u0026#34;, 78); studentScores.insert({\u0026#34;Bob\u0026#34;, 70}); // Bob çš„ç¬¬äºŒé—¨æˆç»© std::cout \u0026lt;\u0026lt; \u0026#34;\\n--- std::multimap ç¤ºä¾‹ ---\u0026#34; \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;Multimap size: \u0026#34; \u0026lt;\u0026lt; studentScores.size() \u0026lt;\u0026lt; std::endl; // éå† (æŒ‰é”®æœ‰åº) for (const auto\u0026amp; pair : studentScores) { std::cout \u0026lt;\u0026lt; \u0026#34;Name: \u0026#34; \u0026lt;\u0026lt; pair.first \u0026lt;\u0026lt; \u0026#34;, Score: \u0026#34; \u0026lt;\u0026lt; pair.second \u0026lt;\u0026lt; std::endl; } // ç»Ÿè®¡æŸä¸ªé”®çš„æ•°é‡ std::cout \u0026lt;\u0026lt; \u0026#34;Count of Alice: \u0026#34; \u0026lt;\u0026lt; studentScores.count(\u0026#34;Alice\u0026#34;) \u0026lt;\u0026lt; std::endl; // æŸ¥æ‰¾æŸä¸ªé”®çš„æ‰€æœ‰å€¼ std::string searchName = \u0026#34;Bob\u0026#34;; auto range = studentScores.equal_range(searchName); std::cout \u0026lt;\u0026lt; \u0026#34;Scores for \u0026#34; \u0026lt;\u0026lt; searchName \u0026lt;\u0026lt; \u0026#34;:\u0026#34; \u0026lt;\u0026lt; std::endl; for (auto it = range.first; it != range.second; ++it) { std::cout \u0026lt;\u0026lt; \u0026#34; - \u0026#34; \u0026lt;\u0026lt; it-\u0026gt;second \u0026lt;\u0026lt; std::endl; } // åˆ é™¤æŸä¸ªé”®çš„æ‰€æœ‰å…ƒç´  studentScores.erase(\u0026#34;Bob\u0026#34;); std::cout \u0026lt;\u0026lt; \u0026#34;After erasing Bob, multimap size: \u0026#34; \u0026lt;\u0026lt; studentScores.size() \u0026lt;\u0026lt; std::endl; } 4. std::unordered_set\u0026lt;int\u0026gt; (æ— åºï¼Œå”¯ä¸€å…ƒç´ ) # ç‰¹ç‚¹: ä¸€ä¸ªé«˜æ•ˆçš„ç¯®å­ï¼Œç”¨äºå­˜æ”¾ç‹¬ä¸€æ— äºŒçš„ç‰©å“ã€‚å½“ä½ æƒ³çŸ¥é“æŸä¸ªç‰©å“æ˜¯å¦å·²ç»åœ¨ç¯®å­é‡Œæ—¶ï¼Œå®ƒèƒ½éå¸¸å¿«é€Ÿåœ°å‘Šè¯‰ä½ ã€‚ ä¼˜ç‚¹: æé€Ÿæ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ (å¹³å‡ O(1))ï¼› è‡ªåŠ¨å»é‡ ã€‚ ç¼ºç‚¹: å…ƒç´ æ— åº ï¼›æœ€åæƒ…å†µæ€§èƒ½å¯èƒ½é€€åŒ–ã€‚ ä»£ç ç¤ºä¾‹: #include \u0026lt;iostream\u0026gt; #include \u0026lt;unordered_set\u0026gt; // åŒ…å«unordered_setå¤´æ–‡ä»¶ void demo_unordered_set() { // å®šä¹‰ä¸€ä¸ªå­˜å‚¨æ•´æ•°çš„æ— åºé›†åˆï¼Œç”¨äºè®°å½•å·²è®¿é—®è¿‡çš„é‡‘é¢ std::unordered_set\u0026lt;int\u0026gt; visited_amounts; std::cout \u0026lt;\u0026lt; \u0026#34;\\n--- std::unordered_set ç¤ºä¾‹ ---\u0026#34; \u0026lt;\u0026lt; std::endl; // æ’å…¥å…ƒç´  visited_amounts.insert(100); visited_amounts.insert(25); visited_amounts.insert(75); visited_amounts.insert(25); // 25å·²å­˜åœ¨ï¼Œä¸ä¼šè¢«é‡å¤æ’å…¥ std::cout \u0026lt;\u0026lt; \u0026#34;Set size: \u0026#34; \u0026lt;\u0026lt; visited_amounts.size() \u0026lt;\u0026lt; std::endl; // Output: 3 (100, 25, 75) // æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ (O(1) å¹³å‡æ—¶é—´å¤æ‚åº¦) if (visited_amounts.count(100)) { // countè¿”å›0æˆ–1 std::cout \u0026lt;\u0026lt; \u0026#34;100 has been visited.\u0026#34; \u0026lt;\u0026lt; std::endl; } if (visited_amounts.find(50) == visited_amounts.end()) { // findè¿”å›è¿­ä»£å™¨ std::cout \u0026lt;\u0026lt; \u0026#34;50 has not been visited.\u0026#34; \u0026lt;\u0026lt; std::endl; } // éå† (é¡ºåºä¸ç¡®å®š) std::cout \u0026lt;\u0026lt; \u0026#34;Visited amounts: \u0026#34;; for (int amount : visited_amounts) { std::cout \u0026lt;\u0026lt; amount \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; // åˆ é™¤å…ƒç´  visited_amounts.erase(75); std::cout \u0026lt;\u0026lt; \u0026#34;After erasing 75, set size: \u0026#34; \u0026lt;\u0026lt; visited_amounts.size() \u0026lt;\u0026lt; std::endl; // Output: 2 } // ä¸»å‡½æ•°ï¼Œè°ƒç”¨æ‰€æœ‰ç¤ºä¾‹ int main() { demo_map(); demo_unordered_map(); demo_multimap(); demo_unordered_set(); return 0; } é€‰æ‹©æŒ‡å— # éœ€è¦ä¿æŒé”®çš„æ’åºä¸”é”®å”¯ä¸€ï¼Ÿ -\u0026gt; é€‰æ‹© std::map ã€‚ ä¸å…³å¿ƒé”®çš„æ’åºï¼Œä½†éœ€è¦æœ€å¿«çš„å¹³å‡æŸ¥æ‰¾/æ’å…¥/åˆ é™¤é€Ÿåº¦ä¸”é”®å”¯ä¸€ï¼Ÿ -\u0026gt; é€‰æ‹© std::unordered_map ã€‚ éœ€è¦ä¿æŒé”®çš„æ’åºï¼Œä¸”å…è®¸é”®é‡å¤ï¼Ÿ -\u0026gt; é€‰æ‹© std::multimap ã€‚ éœ€è¦å­˜å‚¨ä¸€ç»„å”¯ä¸€ä¸”æœ‰åºçš„å…ƒç´ ï¼Ÿ -\u0026gt; é€‰æ‹© std::set ã€‚ éœ€è¦å¿«é€Ÿåˆ¤æ–­æŸä¸ªå…ƒç´ æ˜¯å¦å­˜åœ¨äºä¸€ä¸ªå”¯ä¸€é›†åˆä¸­ï¼Œä¸å…³å¿ƒé¡ºåºï¼Ÿ -\u0026gt; é€‰æ‹© std::unordered_set ã€‚ ä¸å…³å¿ƒé”®çš„æ’åºï¼Œä¸”å…è®¸é”®é‡å¤ï¼Ÿ -\u0026gt; è€ƒè™‘ std::unordered_multimap (ä¸ unordered_map ç±»ä¼¼ï¼Œä½†å…è®¸é‡å¤é”®)ã€‚ éœ€è¦å­˜å‚¨ä¸€ç»„å…è®¸é‡å¤ä¸”æœ‰åºçš„å…ƒç´ ï¼Ÿ -\u0026gt; è€ƒè™‘ std::multiset ã€‚ ","date":"2025-06-03","externalUrl":null,"permalink":"/posts/learn-c/cpp-node1.5-std-%E4%B8%89%E7%A7%8Dset%E5%9F%BA%E7%A1%80/","section":"Posts","summary":"","title":"cpp-node1.5-std-ä¸‰ç§setåŸºç¡€","type":"posts"},{"content":" C++ std::stack åŸºç¡€ä¸ç”¨æ³• # std::stack æ˜¯ C++ æ ‡å‡†æ¨¡æ¿åº“ (STL) ä¸­çš„ä¸€ä¸ªå®¹å™¨é€‚é…å™¨ï¼Œå®ƒæä¾›äº†ä¸€ç§ åè¿›å…ˆå‡º (Last-In, First-Out, LIFO) çš„æ•°æ®ç»“æ„ã€‚ ç±»ä¼¼äºç°å®ç”Ÿæ´»ä¸­çš„ä¸€å ç›˜å­ï¼Œæœ€åè¢«æ”¾å…¥æ ˆä¸­çš„å…ƒç´ å°†æ˜¯ç¬¬ä¸€ä¸ªè¢«ç§»é™¤çš„å…ƒç´ ã€‚\nstd::stack æ ¸å¿ƒçŸ¥è¯† # å¤´æ–‡ä»¶: #include \u0026lt;stack\u0026gt;\nå®šä¹‰:\nstd::stack\u0026lt;int\u0026gt; myStack; // åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ•´æ•°çš„æ ˆ std::stack\u0026lt;double\u0026gt; doubleStack; // åˆ›å»ºä¸€ä¸ªå­˜å‚¨åŒç²¾åº¦æµ®ç‚¹æ•°çš„æ ˆ std::stack\u0026lt;std::string\u0026gt; stringStack; // åˆ›å»ºä¸€ä¸ªå­˜å‚¨å­—ç¬¦ä¸²çš„æ ˆ ä¸»è¦ç‰¹æ€§:\nLIFO (Last-In, First-Out): åè¿›å…ˆå‡ºã€‚ å®¹å™¨é€‚é…å™¨: åŸºäºå…¶ä»–å®¹å™¨ (é»˜è®¤æ˜¯ std::deque) å®ç°ã€‚ æä¾›äº†å—é™çš„æ¥å£ï¼Œä»¥æ»¡è¶³ LIFO çš„è¦æ±‚ã€‚ åŠ¨æ€å¤§å°: æ ˆçš„å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œå–å†³äºåº•å±‚å®¹å™¨çš„å®ç°ã€‚ å¸¸ç”¨æˆå‘˜å‡½æ•°:\npush(const T\u0026amp; value): å°†ä¸€ä¸ªå…ƒç´ å‹å…¥æ ˆé¡¶ã€‚ T: æ ˆå­˜å‚¨çš„å…ƒç´ ç±»å‹ã€‚ value: è¦å‹å…¥æ ˆä¸­çš„å…ƒç´ çš„å€¼ (å¤åˆ¶æ„é€ )ã€‚ emplace(Args\u0026amp;\u0026amp;... args) (C++11 åŠä»¥ä¸Š): åœ¨æ ˆé¡¶æ„é€ ä¸€ä¸ªæ–°å…ƒç´  (é¿å…å¤åˆ¶æˆ–ç§»åŠ¨)ã€‚ Args\u0026amp;\u0026amp;... args: ç”¨äºæ„é€ æ–°å…ƒç´ æ‰€éœ€çš„å‚æ•°ã€‚ pop(): ä»æ ˆé¡¶ç§»é™¤ (å¼¹å‡º) ä¸€ä¸ªå…ƒç´ ã€‚ ä¸è¿”å›è¢«ç§»é™¤çš„å…ƒç´ çš„å€¼. top(): è®¿é—®æ ˆé¡¶å…ƒç´  (è¿”å›æ ˆé¡¶å…ƒç´ çš„ å¼•ç”¨)ã€‚ ä¸ç§»é™¤å…ƒç´ . empty(): æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©ºã€‚ è¿”å› true å¦‚æœæ ˆä¸ºç©ºï¼Œå¦åˆ™è¿”å› falseã€‚ size(): è¿”å›æ ˆä¸­å…ƒç´ çš„æ•°é‡ã€‚ ç¤ºä¾‹ä»£ç :\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;stack\u0026gt; #include \u0026lt;string\u0026gt; int main() { std::stack\u0026lt;int\u0026gt; myStack; // å‹å…¥å…ƒç´  myStack.push(10); myStack.push(20); myStack.push(30); std::cout \u0026lt;\u0026lt; \u0026#34;Stack size: \u0026#34; \u0026lt;\u0026lt; myStack.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šStack size: 3 // è®¿é—®æ ˆé¡¶å…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;Top element: \u0026#34; \u0026lt;\u0026lt; myStack.top() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šTop element: 30 // å¼¹å‡ºå…ƒç´  while (!myStack.empty()) { std::cout \u0026lt;\u0026lt; \u0026#34;Popping: \u0026#34; \u0026lt;\u0026lt; myStack.top() \u0026lt;\u0026lt; std::endl; myStack.pop(); } std::cout \u0026lt;\u0026lt; \u0026#34;Stack size after popping: \u0026#34; \u0026lt;\u0026lt; myStack.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šStack size after popping: 0 // ä½¿ç”¨ emplace (C++11+) std::stack\u0026lt;std::string\u0026gt; stringStack; stringStack.emplace(\u0026#34;hello\u0026#34;); stringStack.emplace(\u0026#34;world\u0026#34;); std::cout \u0026lt;\u0026lt; \u0026#34;Top string: \u0026#34; \u0026lt;\u0026lt; stringStack.top() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šTop string: world return 0; } åº•å±‚å®ç°:\né»˜è®¤ä½¿ç”¨ std::deque ä½œä¸ºåº•å±‚å®¹å™¨. ä¹Ÿå¯ä½¿ç”¨ std::vector æˆ– std::listï¼Œä½† deque é€šå¸¸æ˜¯æœ€ä½³é€‰æ‹©. ä½¿ç”¨æ³¨æ„äº‹é¡¹:\nåœ¨ä½¿ç”¨ top() ä¹‹å‰ï¼Œå¿…é¡»å…ˆè°ƒç”¨ empty() æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©º. pop() ä»…ç§»é™¤å…ƒç´ ï¼Œä¸è¿”å›å…ƒç´ çš„å€¼. ä½¿ç”¨ top() è·å–åå†ä½¿ç”¨ pop(). æ²¡æœ‰è¿­ä»£å™¨: æ— æ³•ä½¿ç”¨è¿­ä»£å™¨éå† std::stack. å®¹å™¨é€‚é…å™¨: æä¾›å—é™æ¥å£ï¼Œæ»¡è¶³ LIFO. åº”ç”¨åœºæ™¯:\nè¡¨è¾¾å¼æ±‚å€¼ (åç¼€è¡¨è¾¾å¼)ã€‚ å‡½æ•°è°ƒç”¨æ ˆã€‚ æ‹¬å·åŒ¹é…ã€‚ æ·±åº¦ä¼˜å…ˆæœç´¢ (DFS)ã€‚ æ’¤é”€/é‡åšåŠŸèƒ½ã€‚ å›æº¯ç®—æ³•ã€‚ æµè§ˆå™¨å†å²è®°å½•ã€‚ ","date":"2025-05-29","externalUrl":null,"permalink":"/posts/learn-c/cpp-note1.4-std-stack-%E5%9F%BA%E7%A1%80%E4%B8%8E%E7%94%A8%E6%B3%95/","section":"Posts","summary":"","title":"cpp-note1.4-std-stack-åŸºç¡€ä¸ç”¨æ³•","type":"posts"},{"content":"åœ¨ C++ ä¸­ï¼ŒqueueÂ æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡º (FIFO - First-In, First-Out)Â çš„çº¿æ€§æ•°æ®ç»“æ„ã€‚è¿™æ„å‘³ç€æœ€å…ˆè¢«æ’å…¥é˜Ÿåˆ—çš„å…ƒç´ å°†æ˜¯æœ€å…ˆè¢«ç§»é™¤çš„å…ƒç´ ã€‚ ä½ å¯ä»¥å°†å…¶æƒ³è±¡æˆç°å®ç”Ÿæ´»ä¸­çš„æ’é˜Ÿç­‰å¾…åœºæ™¯ï¼Œæ¯”å¦‚äººä»¬åœ¨é“¶è¡Œæˆ–è¶…å¸‚æ’é˜Ÿã€‚\nstd::queueÂ æ ¸å¿ƒçŸ¥è¯† # å¤´æ–‡ä»¶: #include \u0026lt;queue\u0026gt;\nå®šä¹‰:\nstd::queue\u0026lt;int\u0026gt; q1; // é»˜è®¤åº•å±‚å®¹å™¨æ˜¯ std::dequeï¼Œç©ºé˜Ÿåˆ—ï¼Œå­˜å‚¨ int ç±»å‹å…ƒç´ ã€‚ std::queue\u0026lt;double\u0026gt; q2; // ç©ºé˜Ÿåˆ—ï¼Œå­˜å‚¨ double ç±»å‹å…ƒç´ ã€‚ std::queue\u0026lt;std::string\u0026gt; q3; // ç©ºé˜Ÿåˆ—ï¼Œå­˜å‚¨ std::string ç±»å‹å…ƒç´ ã€‚ std::queue\u0026lt;int, std::list\u0026lt;int\u0026gt;\u0026gt; q4; // ä½¿ç”¨ std::list ä½œä¸ºåº•å±‚å®¹å™¨ (å¾ˆå°‘è§ï¼Œä½†å¯èƒ½)ã€‚ æ˜¾å¼æŒ‡å®šåº•å±‚å®¹å™¨ã€‚ std::queue\u0026lt;int, std::deque\u0026lt;int\u0026gt;\u0026gt; q5; // ä½¿ç”¨ std::deque ä½œä¸ºåº•å±‚å®¹å™¨ (é»˜è®¤)ã€‚ æ˜¾å¼æŒ‡å®šåº•å±‚å®¹å™¨ (é€šå¸¸ä¸å¿…)ã€‚ ä¸»è¦ç‰¹æ€§:\nFIFO (First-In, First-Out): éµå¾ªå…ˆè¿›å…ˆå‡ºçš„åŸåˆ™ã€‚ æœ€å…ˆè¿›å…¥é˜Ÿåˆ—çš„å…ƒç´ æœ€å…ˆè¢«ç§»é™¤ã€‚ è®¿é—®é™åˆ¶: åªèƒ½è®¿é—®é˜Ÿé¦–å…ƒç´ ï¼ˆæœ€æ—©è¿›å…¥çš„å…ƒç´ ï¼‰å’Œé˜Ÿå°¾å…ƒç´ ï¼ˆæœ€æ–°è¿›å…¥çš„å…ƒç´ ï¼‰ã€‚ ä¸èƒ½ç›´æ¥è®¿é—®ä¸­é—´å…ƒç´ ã€‚ åŠ¨æ€å¤§å°: é˜Ÿåˆ—çš„å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œå–å†³äºåº•å±‚å®¹å™¨çš„ç‰¹æ€§ã€‚ é˜Ÿåˆ—ä¼šè‡ªåŠ¨ç®¡ç†å†…å­˜ã€‚ å°è£…æ€§: queue æ˜¯ä¸€ä¸ªå®¹å™¨é€‚é…å™¨ã€‚è¿™æ„å‘³ç€å®ƒä¸æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼Œè€Œæ˜¯å»ºç«‹åœ¨å…¶ä»–å®¹å™¨ï¼ˆå¦‚ deque æˆ– listï¼‰ä¹‹ä¸Šçš„ï¼Œå¹¶æä¾›äº†ç‰¹å®šçš„æ¥å£ï¼ˆpush, pop, front, back, empty, sizeï¼‰ã€‚ queue éšè—äº†åº•å±‚å®¹å™¨çš„å®ç°ç»†èŠ‚ï¼Œå¯¹å¤–åªæš´éœ²äº† FIFO çš„æ“ä½œæ¥å£ã€‚ åº•å±‚å®¹å™¨çš„å¯é€‰æ€§: è™½ç„¶é»˜è®¤ä½¿ç”¨ dequeï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ¨¡æ¿å‚æ•°é€‰æ‹©ä¸åŒçš„åº•å±‚å®¹å™¨ã€‚è¿™ä½¿å¾— queue å…·æœ‰ä¸€å®šçš„çµæ´»æ€§ï¼Œå¯ä»¥æ ¹æ®ä¸åŒçš„åº”ç”¨åœºæ™¯é€‰æ‹©æœ€é€‚åˆçš„åº•å±‚å®ç°ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ éœ€è¦é¢‘ç¹åœ°åœ¨é˜Ÿåˆ—ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ list ä½œä¸ºåº•å±‚å®¹å™¨ã€‚ ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œdeque å·²ç»è¶³å¤Ÿé«˜æ•ˆäº†ã€‚ å¸¸ç”¨æˆå‘˜å‡½æ•°:\npush(const T\u0026amp; val): åœ¨é˜Ÿåˆ—çš„æœ«å°¾æ·»åŠ ä¸€ä¸ªå…ƒç´ ã€‚ T æ˜¯é˜Ÿåˆ—å­˜å‚¨çš„å…ƒç´ ç±»å‹ã€‚ (å…¥é˜Ÿ) pop(): ç§»é™¤é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´  (é˜Ÿé¦–)ã€‚ æ²¡æœ‰è¿”å›å€¼ã€‚ (å‡ºé˜Ÿ) front(): è¿”å›é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ˆé˜Ÿé¦–ï¼‰çš„ å¼•ç”¨ã€‚ ä¸ç§»é™¤å…ƒç´ ã€‚ å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¡Œä¸ºæœªå®šä¹‰ (ä½¿ç”¨å‰æ£€æŸ¥ empty())ã€‚ back(): è¿”å›é˜Ÿåˆ—çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆé˜Ÿå°¾ï¼‰çš„ å¼•ç”¨. ä¸ç§»é™¤å…ƒç´ ã€‚ å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œè¡Œä¸ºæœªå®šä¹‰ (ä½¿ç”¨å‰æ£€æŸ¥ empty())ã€‚ empty(): æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚ è¿”å› bool å€¼ (true è¡¨ç¤ºç©ºï¼Œfalse è¡¨ç¤ºéç©º)ã€‚ size(): è¿”å›é˜Ÿåˆ—ä¸­å…ƒç´ çš„æ•°é‡ã€‚ è¿”å›å€¼ç±»å‹ä¸º size_tã€‚ emplace(args...) (C++11 åŠä»¥ä¸Š): åœ¨é˜Ÿåˆ—çš„æœ«å°¾å°±åœ°æ„é€ ä¸€ä¸ªæ–°å…ƒç´ ã€‚ é¿å…äº†å¤åˆ¶æˆ–ç§»åŠ¨å…ƒç´ çš„å¼€é”€ (ä¸ push ç›¸æ¯”)ã€‚ args æ˜¯æ„é€ æ–°å…ƒç´ æ‰€éœ€çš„å‚æ•°ã€‚ åº•å±‚å®ç° (é‡è¦):\nqueue çš„åº•å±‚å®ç°é€šå¸¸ä½¿ç”¨ deque (åŒç«¯é˜Ÿåˆ—) æˆ– list ä½œä¸ºå…¶åº•å±‚å®¹å™¨ã€‚ deque ä½œä¸ºåº•å±‚å®¹å™¨ (é»˜è®¤): deque æä¾›äº†åœ¨ä¸¤ç«¯è¿›è¡Œé«˜æ•ˆæ’å…¥å’Œåˆ é™¤çš„èƒ½åŠ› (O(1) å¹³å‡æ—¶é—´å¤æ‚åº¦)ã€‚ è¿™ä½¿å¾— push å’Œ pop æ“ä½œéå¸¸é«˜æ•ˆï¼Œå› æ­¤ deque æ˜¯ queue æœ€å¸¸è§çš„åº•å±‚å®ç°ã€‚ æ­¤å¤–ï¼Œdeque åœ¨å†…å­˜åˆ†é…ä¸Šå…·æœ‰ä¸€å®šçš„ä¼˜åŠ¿ï¼Œé¿å…äº†é¢‘ç¹çš„å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚ list ä½œä¸ºåº•å±‚å®¹å™¨: list ä¹Ÿå¯ç”¨äº queueã€‚ list çš„ä¸»è¦ä¼˜ç‚¹æ˜¯åœ¨ä»»ä½•ä½ç½®è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œéƒ½éå¸¸é«˜æ•ˆ (O(1))ã€‚ ä½†å¯¹äº queue æ¥è¯´ï¼Œpush å’Œ pop æ“ä½œé€šå¸¸æ˜¯åœ¨é˜Ÿåˆ—çš„ä¸¤ç«¯è¿›è¡Œçš„ï¼Œå› æ­¤ deque é€šå¸¸æ˜¯æ›´å¥½çš„é€‰æ‹©ï¼Œå› ä¸ºå®ƒå…·æœ‰æ›´ä½çš„å†…å­˜å¼€é”€å’Œæ›´å¥½çš„ç¼“å­˜å±€éƒ¨æ€§ã€‚ é€‰æ‹©åº•å±‚å®¹å™¨çš„å½±å“: åº•å±‚å®¹å™¨çš„é€‰æ‹©ä¼šå½±å“ queue çš„æ€§èƒ½ã€‚ å¯¹äºç»å¤§å¤šæ•°åº”ç”¨ï¼Œä½¿ç”¨é»˜è®¤çš„ deque å°±è¶³å¤Ÿäº†ã€‚ åªæœ‰åœ¨ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œä¾‹å¦‚éœ€è¦é¢‘ç¹åœ°åœ¨é˜Ÿåˆ—ä¸­é—´æ’å…¥å…ƒç´ ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ list ä½œä¸ºåº•å±‚å®¹å™¨ã€‚ è¿­ä»£å™¨ (æ³¨æ„):\nqueue ä¸æä¾›è¿­ä»£å™¨ã€‚ ä½ æ— æ³•ç›´æ¥ä½¿ç”¨è¿­ä»£å™¨éå† queue ä¸­çš„å…ƒç´ ã€‚ è¿™æ˜¯å› ä¸º queue çš„è®¾è®¡ç›®æ ‡æ˜¯æä¾› FIFO æ“ä½œï¼Œéšè—äº†åº•å±‚å®¹å™¨çš„å®ç°ç»†èŠ‚ï¼Œå¹¶é™åˆ¶äº†è®¿é—®æ–¹å¼ã€‚ å¿…é¡»é€šè¿‡ front() å’Œ pop() æ¥é€ä¸ªè®¿é—®å’Œå¤„ç†å…ƒç´ ã€‚ å¦‚æœä½ éœ€è¦éå†é˜Ÿåˆ—ä¸­çš„å…ƒç´ ï¼Œè¯·è€ƒè™‘ä½¿ç”¨å¾ªç¯ç»“åˆ front() å’Œ pop()ï¼Œæˆ–è€…å¤åˆ¶é˜Ÿåˆ—åˆ°ä¸€ä¸ªå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨çš„å®¹å™¨ (ä¾‹å¦‚ vector æˆ– list)ã€‚ æ³¨æ„ï¼Œåœ¨å¤åˆ¶çš„è¿‡ç¨‹ä¸­ï¼ŒåŸå§‹é˜Ÿåˆ—çš„å†…å®¹ä¼šè¢«ä¿®æ”¹ã€‚ ç¤ºä¾‹ä»£ç :\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;queue\u0026gt; #include \u0026lt;string\u0026gt; int main() { // åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ•´æ•°çš„é˜Ÿåˆ— std::queue\u0026lt;int\u0026gt; myQueue; // å…¥é˜Ÿ (push) myQueue.push(10); myQueue.push(20); myQueue.push(30); // è®¿é—®é˜Ÿåˆ—çš„å¤§å° std::cout \u0026lt;\u0026lt; \u0026#34;Queue size: \u0026#34; \u0026lt;\u0026lt; myQueue.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šQueue size: 3 // è®¿é—®é˜Ÿé¦–å…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;Front element: \u0026#34; \u0026lt;\u0026lt; myQueue.front() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šFront element: 10 // è®¿é—®é˜Ÿå°¾å…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;Back element: \u0026#34; \u0026lt;\u0026lt; myQueue.back() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šBack element: 30 // å‡ºé˜Ÿå¹¶æ‰“å°å…ƒç´  while (!myQueue.empty()) { std::cout \u0026lt;\u0026lt; \u0026#34;Popping: \u0026#34; \u0026lt;\u0026lt; myQueue.front() \u0026lt;\u0026lt; std::endl; myQueue.pop(); } // æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º std::cout \u0026lt;\u0026lt; \u0026#34;Is queue empty? \u0026#34; \u0026lt;\u0026lt; myQueue.empty() \u0026lt;\u0026lt; std::endl; // è¾“å‡ºï¼šIs queue empty? 1 std::cout \u0026lt;\u0026lt; \u0026#34;Queue size: \u0026#34; \u0026lt;\u0026lt; myQueue.size() \u0026lt;\u0026lt; std::endl; // è¾“å‡º: Queue size: 0 // ä½¿ç”¨ emplace (C++11+) std::queue\u0026lt;std::string\u0026gt; stringQueue; stringQueue.emplace(\u0026#34;hello\u0026#34;); // ç›´æ¥åœ¨é˜Ÿåˆ—æœ«å°¾æ„é€ ä¸€ä¸ª string å¯¹è±¡ stringQueue.emplace(\u0026#34;world\u0026#34;); std::cout \u0026lt;\u0026lt; \u0026#34;String Queue Front: \u0026#34; \u0026lt;\u0026lt; stringQueue.front() \u0026lt;\u0026lt; std::endl; // Output: String Queue Front: hello return 0; } åº”ç”¨åœºæ™¯:\nå¹¿åº¦ä¼˜å…ˆæœç´¢ (BFS): åœ¨å›¾éå†ä¸­ï¼Œç”¨äºæŒ‰ç…§å±‚æ¬¡é¡ºåºè®¿é—®èŠ‚ç‚¹ã€‚ ä»»åŠ¡è°ƒåº¦: æŒ‰ç…§ä»»åŠ¡çš„åˆ°è¾¾é¡ºåºè¿›è¡Œå¤„ç†ã€‚ æ¨¡æ‹Ÿç³»ç»Ÿ: æ¨¡æ‹Ÿäº‹ä»¶é©±åŠ¨ç³»ç»Ÿï¼ŒæŒ‰ç…§äº‹ä»¶å‘ç”Ÿçš„æ—¶é—´é¡ºåºå¤„ç†äº‹ä»¶ã€‚ ç¼“å†²åŒº: ç”¨äºç¼“å­˜æ•°æ®ï¼ŒæŒ‰ç…§FIFOåŸåˆ™è¿›è¡Œå¤„ç†ã€‚ æ‰“å°ä»»åŠ¡é˜Ÿåˆ—: å°†å¾…æ‰“å°çš„æ–‡æ¡£æŒ‰é¡ºåºæ”¾å…¥é˜Ÿåˆ—ã€‚ ç½‘ç»œè¯·æ±‚é˜Ÿåˆ—: ç®¡ç†å¹¶å‘çš„ç½‘ç»œè¯·æ±‚ã€‚ æ³¨æ„äº‹é¡¹å’Œå¸¸è§é”™è¯¯:\nfront() å’Œ back() çš„å®‰å…¨æ€§: åœ¨è°ƒç”¨ front() æˆ– back() ä¹‹å‰ï¼ŒåŠ¡å¿…æ£€æŸ¥é˜Ÿåˆ—æ˜¯å¦ä¸ºç©º (ä½¿ç”¨ empty())ï¼Œå¦åˆ™ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸º (é€šå¸¸æ˜¯å´©æºƒ)ã€‚ å¤åˆ¶é—®é¢˜: queue æœ¬èº«ä¸èƒ½è¢«å¤åˆ¶ï¼Œåªèƒ½è¢«ç§»åŠ¨ã€‚ å¦‚æœä½ éœ€è¦å¤åˆ¶ queue çš„å†…å®¹ï¼Œä½ éœ€è¦ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–èµ‹å€¼è¿ç®—ç¬¦å¤åˆ¶åº•å±‚å®¹å™¨ï¼ˆå¦‚ deque æˆ– listï¼‰ã€‚ æ³¨æ„ï¼Œè¿™ç§å¤åˆ¶ä¼šå½±å“åŸå§‹é˜Ÿåˆ—ã€‚ æ²¡æœ‰è¿­ä»£å™¨: æ— æ³•ä½¿ç”¨è¿­ä»£å™¨éå† queueï¼Œåªèƒ½é€šè¿‡ front() å’Œ pop() è®¿é—®å…ƒç´ ã€‚ åº•å±‚å®¹å™¨çš„é€‰æ‹©: é»˜è®¤çš„ deque åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æœ€ä½³é€‰æ‹©ã€‚ åªæœ‰åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œæ¯”å¦‚éœ€è¦é¢‘ç¹çš„åœ¨ä¸­é—´æ’å…¥å…ƒç´ æ—¶ï¼Œæ‰è€ƒè™‘ listã€‚ å¸Œæœ›è¿™ä¸ªæ›´è¯¦ç»†çš„åˆ†æèƒ½å¤Ÿå¸®åŠ©ä½ ç†è§£ std::queueã€‚ è®°ä½ï¼Œç†è§£åº•å±‚å®ç°å’Œç‰¹æ€§å¯¹äºæœ‰æ•ˆåœ°ä½¿ç”¨æ•°æ®ç»“æ„è‡³å…³é‡è¦ã€‚\n","date":"2025-05-29","externalUrl":null,"permalink":"/posts/learn-c/cpp-note1.3-std-queue-%E5%9F%BA%E7%A1%80/","section":"Posts","summary":"","title":"cpp-note1.3-std-queue-åŸºç¡€","type":"posts"},{"content":"std::string è¿›é˜¶ä¸ç»†èŠ‚\næœ¬è´¨ï¼š\nstd::string æ˜¯ä¸€ä¸ª æ¨¡æ¿ç±» std::basic_string\u0026lt;char\u0026gt; çš„ç‰¹åŒ–ã€‚ å®ƒåœ¨å†…éƒ¨é€šå¸¸ç»´æŠ¤ä¸€ä¸ªæŒ‡å‘å­—ç¬¦æ•°ç»„çš„æŒ‡é’ˆã€å½“å‰å­—ç¬¦ä¸²çš„é•¿åº¦ä»¥åŠå·²åˆ†é…å†…å­˜çš„å®¹é‡ï¼ˆcapacityï¼‰ã€‚ æ„é€ å‡½æ•°å¤šæ ·æ€§ï¼š\nstd::string s1; // é»˜è®¤æ„é€ ï¼Œç©ºå­—ç¬¦ä¸² std::string s2(\u0026#34;hello\u0026#34;); // ä» C é£æ ¼å­—ç¬¦ä¸²æ„é€  std::string s3(s2); // æ‹·è´æ„é€  std::string s4(s2, 1, 3); // ä» s2 çš„ç´¢å¼• 1 å¼€å§‹å– 3 ä¸ªå­—ç¬¦ (\u0026#34;ell\u0026#34;) std::string s5(5, \u0026#39;x\u0026#39;); // åŒ…å« 5 ä¸ª \u0026#39;x\u0026#39; çš„å­—ç¬¦ä¸² (\u0026#34;xxxxx\u0026#34;) std::string s6 = \u0026#34;world\u0026#34;; // èµ‹å€¼æ„é€ ï¼ˆéšå¼è½¬æ¢ï¼‰ å®¹é‡ (Capacity) ä¸å¤§å° (Size/Length)ï¼š\nlength() æˆ– size()ï¼š å®é™…å­˜å‚¨çš„å­—ç¬¦æ•°ï¼ˆä¸åŒ…æ‹¬ç»ˆæ­¢ç¬¦ \\0ï¼‰ã€‚ capacity()ï¼š å½“å‰å­—ç¬¦ä¸²å·²åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆåŒ…æ‹¬ç»ˆæ­¢ç¬¦ \\0 çš„ç©ºé—´ï¼Œä½†ä¸è®¡å…¥è¿”å›ç»“æœï¼‰ï¼Œé€šå¸¸ capacity() \u0026gt;= size()ã€‚å½“ size() è¶…è¿‡ capacity() æ—¶ï¼Œstring ä¼šè‡ªåŠ¨é‡æ–°åˆ†é…æ›´å¤§çš„å†…å­˜ã€‚ reserve(n)ï¼š é¢„ç•™è‡³å°‘ n ä¸ªå­—ç¬¦çš„ç©ºé—´ï¼Œé¿å…é¢‘ç¹çš„å†…å­˜é‡æ–°åˆ†é…ï¼Œæé«˜æ•ˆç‡ã€‚ shrink_to_fit() (C++11)ï¼š è¯·æ±‚å‡å°‘ capacity() åˆ° size()ï¼Œé‡Šæ”¾å¤šä½™å†…å­˜ï¼ˆä¸ä¿è¯ä¸€å®šä¼šæ”¶ç¼©ï¼‰ã€‚ å­—ç¬¦è®¿é—®ï¼š\ns[i]ï¼š å¿«é€Ÿè®¿é—®ï¼Œä½† ä¸è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚è¶Šç•Œè®¿é—®ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºã€‚ s.at(i)ï¼š è®¿é—®å­—ç¬¦ï¼Œè¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚å¦‚æœè¶Šç•Œï¼Œä¼šæŠ›å‡º std::out_of_range å¼‚å¸¸ã€‚ è¿­ä»£å™¨ï¼š s.begin(), s.end(), s.rbegin(), s.rend() ç”¨äºéå†ï¼Œæ”¯æŒèŒƒå›´forå¾ªç¯ for (char c : s)ã€‚ æ¯”è¾ƒæ“ä½œï¼š\næ”¯æŒæ‰€æœ‰å…³ç³»è¿ç®—ç¬¦ï¼š==, !=, \u0026lt;, \u0026lt;=, \u0026gt;, \u0026gt;=ã€‚ æŒ‰å­—å…¸åºæ¯”è¾ƒï¼ˆé€å­—ç¬¦æ¯”è¾ƒ ASCII å€¼ï¼‰ã€‚ if (s1 == s2) { /* ... */ } if (s1 \u0026lt; \u0026#34;apple\u0026#34;) { /* ... */ } ä¿®æ”¹å­—ç¬¦ä¸²ï¼š\nappend()ï¼š åœ¨æœ«å°¾æ·»åŠ å­—ç¬¦ä¸²ï¼Œä¸ + æˆ– += ç±»ä¼¼ï¼Œä½†å¯ä»¥æ›´çµæ´»åœ°æŒ‡å®šè¦æ·»åŠ çš„éƒ¨åˆ†ã€‚ assign()ï¼š æ›¿æ¢å½“å‰å­—ç¬¦ä¸²å†…å®¹ã€‚ insert(pos, str)ï¼š åœ¨æŒ‡å®šä½ç½®æ’å…¥å­—ç¬¦ä¸²ã€‚ erase(pos, len)ï¼š åˆ é™¤ä» pos å¼€å§‹ len ä¸ªå­—ç¬¦ã€‚ replace(pos, len, str)ï¼š æ›¿æ¢ä» pos å¼€å§‹ len ä¸ªå­—ç¬¦ä¸º strã€‚ c_str() ä¸ data()ï¼š\ns.c_str()ï¼š è¿”å›ä¸€ä¸ªä»¥ null ç»“å°¾çš„ const char* æŒ‡é’ˆã€‚ä¸è¦ä¿®æ”¹è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å†…å®¹ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸ string å¯¹è±¡ç»‘å®šã€‚ s.data() (C++11)ï¼š è¿”å›ä¸€ä¸ª const char* æŒ‡å‘å†…éƒ¨æ•°æ®ï¼Œä½†ä¸ä¿è¯ä»¥ null ç»“å°¾ã€‚åœ¨ C++11 ä¹‹åï¼Œs.data() è¿”å›çš„æŒ‡é’ˆæ˜¯è¿ç»­çš„ï¼Œä¸”åœ¨ C++17 ä¹‹åï¼Œs.data() è¿”å›çš„æŒ‡é’ˆä¹Ÿä¿è¯ä»¥ null ç»“å°¾ï¼ˆä¸ c_str() ç›¸åŒï¼‰ã€‚å¦‚æœéœ€è¦ä¿®æ”¹å†…éƒ¨æ•°æ®ï¼ˆä¸å¸¸è§ä¸”å±é™©ï¼‰ï¼Œåœ¨ C++11 åå¯ä»¥é€šè¿‡ s.data() å¾—åˆ°ä¸€ä¸ª char*ï¼ˆå¦‚æœ string æ˜¯é const çš„ï¼‰ã€‚ è¾“å…¥/è¾“å‡ºï¼š\nstd::cin \u0026gt;\u0026gt; myString; // è¯»å–ä¸€ä¸ªå•è¯ï¼ˆä»¥ç©ºæ ¼ã€æ¢è¡Œç¬¦åˆ†éš”ï¼‰ std::getline(std::cin, myString); // è¯»å–ä¸€æ•´è¡Œç›´åˆ°æ¢è¡Œç¬¦ std::cout \u0026lt;\u0026lt; myString; // è¾“å‡ºå­—ç¬¦ä¸² æ•ˆç‡è€ƒè™‘ï¼š\né¢‘ç¹çš„å­—ç¬¦ä¸²æ‹¼æ¥ï¼ˆå¦‚åœ¨å¾ªç¯ä¸­ä½¿ç”¨ +ï¼‰å¯èƒ½å¯¼è‡´å¤šæ¬¡å†…å­˜é‡æ–°åˆ†é…ï¼Œæ•ˆç‡ä½ä¸‹ã€‚å¯ä»¥è€ƒè™‘ä½¿ç”¨ append()ï¼Œæˆ–è€…é¢„å…ˆ reserve() ç©ºé—´ï¼Œæˆ–è€…ä½¿ç”¨ std::stringstream è¿›è¡Œæ„å»ºã€‚ ç¤ºä¾‹ä»£ç ç‰‡æ®µï¼š\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;string\u0026gt; // å¿…é¡»åŒ…å« int main() { std::string s1 = \u0026#34;Hello\u0026#34;; std::string s2 = \u0026#34; World\u0026#34;; // æ‹¼æ¥ std::string s3 = s1 + s2; std::cout \u0026lt;\u0026lt; \u0026#34;s3: \u0026#34; \u0026lt;\u0026lt; s3 \u0026lt;\u0026lt; std::endl; // Output: Hello World // é•¿åº¦ä¸å®¹é‡ std::cout \u0026lt;\u0026lt; \u0026#34;s3 length: \u0026#34; \u0026lt;\u0026lt; s3.length() \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;s3 capacity: \u0026#34; \u0026lt;\u0026lt; s3.capacity() \u0026lt;\u0026lt; std::endl; // è®¿é—®å­—ç¬¦ std::cout \u0026lt;\u0026lt; \u0026#34;s3[0]: \u0026#34; \u0026lt;\u0026lt; s3[0] \u0026lt;\u0026lt; std::endl; // Output: H try { std::cout \u0026lt;\u0026lt; \u0026#34;s3.at(100): \u0026#34; \u0026lt;\u0026lt; s3.at(100) \u0026lt;\u0026lt; std::endl; } catch (const std::out_of_range\u0026amp; e) { std::cerr \u0026lt;\u0026lt; \u0026#34;Error: \u0026#34; \u0026lt;\u0026lt; e.what() \u0026lt;\u0026lt; std::endl; // Output: Error: basic_string::at: __n (which is 100) \u0026gt;= this-\u0026gt;size() (which is 11) } // æŸ¥æ‰¾ä¸å­ä¸² size_t pos = s3.find(\u0026#34;World\u0026#34;); if (pos != std::string::npos) { std::cout \u0026lt;\u0026lt; \u0026#34;\u0026#39;World\u0026#39; found at position: \u0026#34; \u0026lt;\u0026lt; pos \u0026lt;\u0026lt; std::endl; // Output: \u0026#39;World\u0026#39; found at position: 6 std::string sub = s3.substr(pos, 5); std::cout \u0026lt;\u0026lt; \u0026#34;Substring: \u0026#34; \u0026lt;\u0026lt; sub \u0026lt;\u0026lt; std::endl; // Output: World } // è½¬æ¢ä¸º C é£æ ¼å­—ç¬¦ä¸² const char* c_str = s3.c_str(); std::cout \u0026lt;\u0026lt; \u0026#34;C-style string: \u0026#34; \u0026lt;\u0026lt; c_str \u0026lt;\u0026lt; std::endl; // Output: Hello World // ä¿®æ”¹ s1.clear(); std::cout \u0026lt;\u0026lt; \u0026#34;s1 empty? \u0026#34; \u0026lt;\u0026lt; s1.empty() \u0026lt;\u0026lt; std::endl; // Output: s1 empty? 1 s1.append(\u0026#34;New Content\u0026#34;); std::cout \u0026lt;\u0026lt; \u0026#34;s1: \u0026#34; \u0026lt;\u0026lt; s1 \u0026lt;\u0026lt; std::endl; // Output: New Content s1.replace(4, 3, \u0026#34;---\u0026#34;); // ä»ç´¢å¼•4å¼€å§‹ï¼Œæ›¿æ¢3ä¸ªå­—ç¬¦ä¸º\u0026#34;---\u0026#34; std::cout \u0026lt;\u0026lt; \u0026#34;s1 after replace: \u0026#34; \u0026lt;\u0026lt; s1 \u0026lt;\u0026lt; std::endl; // Output: New ---tent return 0; } std::string çš„éå† # éå† std::string æ˜¯è®¿é—®å…¶ä¸­æ¯ä¸ªå­—ç¬¦çš„å¸¸è§æ“ä½œã€‚C++ æä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œæ¯ç§æ–¹å¼éƒ½æœ‰å…¶é€‚ç”¨åœºæ™¯å’Œç‰¹ç‚¹ã€‚\nåŸºäºèŒƒå›´çš„ for å¾ªç¯ (Range-based for loop) - (C++11 åŠæ›´é«˜ç‰ˆæœ¬æ¨è) è¿™æ˜¯ç°ä»£ C++ ä¸­æœ€ç®€æ´ã€æœ€æ¨èçš„éå†æ–¹å¼ï¼Œå› ä¸ºå®ƒè‡ªåŠ¨å¤„ç†è¿­ä»£å™¨çš„å¼€å§‹å’Œç»“æŸï¼Œä¸æ˜“å‡ºé”™ã€‚\nè¯­æ³•ï¼š for (char_type variable_name : string_object) ç‰¹ç‚¹ï¼š ç®€æ´æ˜“è¯»ï¼š ä»£ç é‡æœ€å°‘ã€‚ å®‰å…¨ï¼š ä¸æ¶‰åŠæ‰‹åŠ¨ç®¡ç†ç´¢å¼•æˆ–è¿­ä»£å™¨ï¼Œé™ä½äº†è¶Šç•Œé£é™©ã€‚ é»˜è®¤åªè¯»ï¼š char c å½¢å¼æ˜¯æŒ‰å€¼æ‹·è´ï¼Œä¸ä¼šä¿®æ”¹åŸå­—ç¬¦ä¸²ã€‚ å¯ä¿®æ”¹ï¼š ä½¿ç”¨ char\u0026amp; c (å¼•ç”¨) å¯ä»¥ç›´æ¥ä¿®æ”¹å­—ç¬¦ä¸²ä¸­çš„å­—ç¬¦ã€‚ std::string s = \u0026#34;Hello C++\u0026#34;; // 1. åªè¯»éå† (æŒ‰å€¼æ‹·è´ï¼Œä¸ä¿®æ”¹åŸå­—ç¬¦ä¸²) std::cout \u0026lt;\u0026lt; \u0026#34;Read-only (by value): \u0026#34;; for (char c : s) { std::cout \u0026lt;\u0026lt; c \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: H e l l o C + + } std::cout \u0026lt;\u0026lt; std::endl; // 2. å¯ä¿®æ”¹éå† (é€šè¿‡å¼•ç”¨ä¿®æ”¹åŸå­—ç¬¦ä¸²) std::cout \u0026lt;\u0026lt; \u0026#34;Modifiable (by reference): \u0026#34;; for (char\u0026amp; c : s) { // æ³¨æ„è¿™é‡Œçš„ \u0026#39;\u0026amp;\u0026#39; if (c == \u0026#39; \u0026#39;) { c = \u0026#39;_\u0026#39;; // å°†ç©ºæ ¼æ›¿æ¢ä¸ºä¸‹åˆ’çº¿ } std::cout \u0026lt;\u0026lt; c \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; // è¾“å‡º: H e l l o _ C + + std::cout \u0026lt;\u0026lt; \u0026#34;String after modification: \u0026#34; \u0026lt;\u0026lt; s \u0026lt;\u0026lt; std::endl; // è¾“å‡º: Hello_C++ ä½¿ç”¨ç´¢å¼• (Index-based loop) è¿™æ˜¯ C è¯­è¨€é£æ ¼çš„éå†æ–¹å¼ï¼Œé€šè¿‡æ•´æ•°ç´¢å¼•è®¿é—®æ¯ä¸ªå­—ç¬¦ã€‚\nè¯­æ³•ï¼š for (size_t i = 0; i \u0026lt; s.length(); ++i) ç‰¹ç‚¹ï¼š æ§åˆ¶ç²¾ç¡®ï¼š å¯ä»¥ç²¾ç¡®æ§åˆ¶èµ·å§‹å’Œç»“æŸä½ç½®ï¼Œä»¥åŠæ­¥é•¿ã€‚ å¯ä¿®æ”¹ï¼š s[i] å¯ä»¥ç”¨äºè¯»å†™å­—ç¬¦ã€‚ æ½œåœ¨é£é™©ï¼š éœ€è¦æ‰‹åŠ¨ç®¡ç†ç´¢å¼•ï¼Œå®¹æ˜“å‘ç”Ÿè¶Šç•Œé”™è¯¯ã€‚ä½¿ç”¨ s.at(i) å¯ä»¥æä¾›è¾¹ç•Œæ£€æŸ¥ï¼Œä½†ä¼šå¸¦æ¥é¢å¤–çš„æ€§èƒ½å¼€é”€ã€‚ std::string s = \u0026#34;ABCDE\u0026#34;; // 1. æ­£å‘éå† std::cout \u0026lt;\u0026lt; \u0026#34;Index-based forward: \u0026#34;; for (size_t i = 0; i \u0026lt; s.length(); ++i) { // æˆ– s.size() std::cout \u0026lt;\u0026lt; s[i] \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: A B C D E } std::cout \u0026lt;\u0026lt; std::endl; // 2. åå‘éå† (æˆ–ç‰¹å®šæ­¥é•¿) std::cout \u0026lt;\u0026lt; \u0026#34;Index-based reverse: \u0026#34;; for (int i = s.length() - 1; i \u0026gt;= 0; --i) { std::cout \u0026lt;\u0026lt; s[i] \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: E D C B A } std::cout \u0026lt;\u0026lt; std::endl; ä½¿ç”¨è¿­ä»£å™¨ (Iterator-based loop) std::string åƒæ‰€æœ‰æ ‡å‡†åº“å®¹å™¨ä¸€æ ·ï¼Œæ”¯æŒè¿­ä»£å™¨ã€‚è¿­ä»£å™¨æä¾›äº†ä¸€ç§æŠ½è±¡çš„æŒ‡é’ˆæ¦‚å¿µï¼Œå¯ä»¥æŒ‡å‘å®¹å™¨ä¸­çš„å…ƒç´ ã€‚\nå¸¸ç”¨è¿­ä»£å™¨ï¼š\ns.begin(): æŒ‡å‘å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ã€‚ s.end(): æŒ‡å‘å­—ç¬¦ä¸²æœ«å°¾çš„â€œè¿‡å»â€ä½ç½®ï¼ˆå³æœ€åä¸€ä¸ªå­—ç¬¦çš„ä¸‹ä¸€ä¸ªä½ç½®ï¼‰ã€‚ s.cbegin() / s.cend() (C++11): è¿”å› const_iteratorï¼Œåªè¯»éå†ã€‚ s.rbegin() / s.rend() (åå‘è¿­ä»£å™¨): ç”¨äºåå‘éå†ã€‚ s.crbegin() / s.crend() (C++11): è¿”å› const_reverse_iteratorï¼Œåªè¯»åå‘éå†ã€‚ ç‰¹ç‚¹ï¼š\né€šç”¨æ€§å¼ºï¼š é€‚ç”¨äºæ‰€æœ‰æ ‡å‡†åº“å®¹å™¨ï¼Œç»Ÿä¸€äº†éå†æ¥å£ã€‚ çµæ´»ï¼š å¯ä»¥ç”¨äºæ›´å¤æ‚çš„ç®—æ³•ï¼ˆå¦‚ std::find, std::sort ç­‰ï¼‰ã€‚ å¯ä¿®æ”¹ï¼š é const è¿­ä»£å™¨å¯ä»¥ä¿®æ”¹å…¶æŒ‡å‘çš„å…ƒç´ ã€‚ std::string s = \u0026#34;Iterator\u0026#34;; // 1. æ­£å‘éå† (è¯»å†™) std::cout \u0026lt;\u0026lt; \u0026#34;Iterator-based forward: \u0026#34;; for (std::string::iterator it = s.begin(); it != s.end(); ++it) { *it = std::toupper(*it); // å°†å­—ç¬¦è½¬ä¸ºå¤§å†™ (éœ€è¦ #include \u0026lt;cctype\u0026gt;) std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: I T E R A T O R } std::cout \u0026lt;\u0026lt; std::endl; std::cout \u0026lt;\u0026lt; \u0026#34;String after modification: \u0026#34; \u0026lt;\u0026lt; s \u0026lt;\u0026lt; std::endl; // Output: ITERATOR // 2. æ­£å‘éå† (åªè¯»ï¼Œä½¿ç”¨ const_iterator æˆ– auto) std::cout \u0026lt;\u0026lt; \u0026#34;Iterator-based const_iterator: \u0026#34;; for (std::string::const_iterator it = s.cbegin(); it != s.cend(); ++it) { std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: I T E R A T O R } std::cout \u0026lt;\u0026lt; std::endl; // 3. åå‘éå† std::cout \u0026lt;\u0026lt; \u0026#34;Reverse iterator: \u0026#34;; for (std::string::reverse_iterator it = s.rbegin(); it != s.rend(); ++it) { std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è¾“å‡º: R O T A R E T I } std::cout \u0026lt;\u0026lt; std::endl; ","date":"2025-05-25","externalUrl":null,"permalink":"/posts/learn-c/cpp-note1.2-std-string-%E5%9F%BA%E7%A1%80/","section":"Posts","summary":"","title":"cpp-note1.2-std-string-åŸºç¡€","type":"posts"},{"content":" C++ std::vector åŸºç¡€ä¸éå† # std::vector æ˜¯ C++ æ ‡å‡†åº“ä¸­çš„åŠ¨æ€æ•°ç»„ï¼Œå®ƒå…è®¸åœ¨è¿è¡Œæ—¶è°ƒæ•´å¤§å°ï¼Œå…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾ã€‚\nstd::vector æ ¸å¿ƒçŸ¥è¯† # å¤´æ–‡ä»¶: #include \u0026lt;vector\u0026gt; å®šä¹‰: std::vector\u0026lt;int\u0026gt; v1; // ç©ºvector std::vector\u0026lt;int\u0026gt; v2 = {1, 2, 3}; // åˆå§‹åŒ– (C++11 åˆ—è¡¨åˆå§‹åŒ–) std::vector\u0026lt;int\u0026gt; v3(10); // 10ä¸ªå…ƒç´ ï¼Œé»˜è®¤åˆå§‹åŒ–ä¸º0 (å¯¹äºåŸºæœ¬ç±»å‹) std::vector\u0026lt;int\u0026gt; v4(5, 100); // 5ä¸ªå…ƒç´ ï¼Œéƒ½ä¸º100 ä¸»è¦ç‰¹æ€§: åŠ¨æ€å¤§å°: è‡ªåŠ¨ç®¡ç†å†…å­˜ï¼Œå¯å¢åˆ å…ƒç´ ã€‚ è¿ç»­å­˜å‚¨: å…ƒç´ å†…å­˜è¿ç»­ï¼Œæ”¯æŒ O(1) éšæœºè®¿é—®ã€‚ é«˜æ•ˆæœ«å°¾æ“ä½œ: push_back(), pop_back() é€šå¸¸ O(1) æ‘Šè¿˜æ—¶é—´ã€‚ ä½æ•ˆä¸­é—´æ“ä½œ: insert(), erase() é€šå¸¸ O(N)ã€‚ å¸¸ç”¨æˆå‘˜å‡½æ•°: push_back(val): æœ«å°¾æ·»åŠ å…ƒç´ ã€‚ pop_back(): åˆ é™¤æœ«å°¾å…ƒç´ ã€‚ size(): å…ƒç´ æ•°é‡ (ç±»å‹ä¸º size_t)ã€‚ empty(): æ˜¯å¦ä¸ºç©ºã€‚ clear(): æ¸…ç©ºæ‰€æœ‰å…ƒç´ ã€‚ at(idx): è®¿é—®å…ƒç´ ï¼ˆå¸¦è¾¹ç•Œæ£€æŸ¥ï¼ŒæŠ›å‡º std::out_of_range å¼‚å¸¸ï¼Œå®‰å…¨ï¼‰ã€‚ operator[](idx): è®¿é—®å…ƒç´ ï¼ˆä¸å¸¦è¾¹ç•Œæ£€æŸ¥ï¼Œé€Ÿåº¦å¿«ï¼Œä¸å®‰å…¨ï¼‰ã€‚ front(): ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ back(): æœ€åä¸€ä¸ªå…ƒç´ ã€‚ begin(), end(): è·å–æ­£å‘è¿­ä»£å™¨ã€‚ rbegin(), rend(): è·å–åå‘è¿­ä»£å™¨ã€‚ cbegin(), cend(), crbegin(), crend(): è·å–å¸¸é‡è¿­ä»£å™¨ (C++11+)ã€‚ åµŒå¥— std::vector (ä¾‹å¦‚ï¼Œ2D æ•°ç»„) # åµŒå¥—çš„ std::vector å¸¸ç”¨äºè¡¨ç¤ºå¤šç»´æ•°æ®ç»“æ„ï¼Œä¾‹å¦‚ 2D æ•°ç»„ï¼ˆçŸ©é˜µï¼‰ã€‚std::vector\u0026lt;std::vector\u0026lt;int\u0026gt;\u0026gt; çš„ä½¿ç”¨æ–¹å¼ä¸æ™®é€š vector ç±»ä¼¼ï¼Œåªæ˜¯å¤šäº†ä¸€å±‚ç»´åº¦ã€‚\nè®¿é—®å…ƒç´ : matrix[row_index][col_index] è·å–è¡Œæ•°: matrix.size() è·å–åˆ—æ•° (å‡å®šæ‰€æœ‰è¡Œç­‰é•¿): matrix[0].size() (è¯·å…ˆæ£€æŸ¥ matrix.empty() å’Œ matrix[0].empty() ä»¥é˜²è¶Šç•Œ) #include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; void printAndModifyMatrix(std::vector\u0026lt;std::vector\u0026lt;int\u0026gt;\u0026gt;\u0026amp; m) { std::cout \u0026lt;\u0026lt; \u0026#34;--- åŸå§‹çŸ©é˜µ ---\u0026#34; \u0026lt;\u0026lt; std::endl; // éå†å¹¶æ‰“å° for (const auto\u0026amp; row : m) { // row æ˜¯ const std::vector\u0026lt;int\u0026gt;\u0026amp; for (int val : row) { // val æ˜¯ int std::cout \u0026lt;\u0026lt; val \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; } // ä¿®æ”¹ç¬¬ä¸€ä¸ªå…ƒç´  if (!m.empty() \u0026amp;\u0026amp; !m[0].empty()) { m[0][0] = 99; std::cout \u0026lt;\u0026lt; \u0026#34;\\n--- ä¿®æ”¹åçŸ©é˜µ ---\u0026#34; \u0026lt;\u0026lt; std::endl; for (const auto\u0026amp; row : m) { for (int val : row) { std::cout \u0026lt;\u0026lt; val \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; } } } int main() { std::vector\u0026lt;std::vector\u0026lt;int\u0026gt;\u0026gt; myMatrix = {{1, 2, 3}, {4, 5, 6}}; printAndModifyMatrix(myMatrix); // ä¼ å…¥å¼•ç”¨ï¼Œå…è®¸å‡½æ•°ä¿®æ”¹åŸçŸ©é˜µ return 0; } /* Output: --- åŸå§‹çŸ©é˜µ --- 1 2 3 4 5 6 --- ä¿®æ”¹åçŸ©é˜µ --- 99 2 3 4 5 6 */ std::vector éå†æ–¹å¼ # 1. åŸºäºèŒƒå›´çš„ for å¾ªç¯ (Range-based for loop) - æ¨è (C++11+) # ç‰¹ç‚¹: æœ€ç®€æ´ã€å®‰å…¨ï¼Œé€‚ç”¨äºç»å¤§å¤šæ•°åªè¯»æˆ–å…ƒç´ ç‹¬ç«‹çš„ä¿®æ”¹åœºæ™¯ã€‚ä¸èƒ½ç›´æ¥è·å–ç´¢å¼•ï¼Œä¸åº”åœ¨å¾ªç¯å†…ä¿®æ”¹å®¹å™¨å¤§å°ï¼ˆæ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; numbers = {10, 20, 30}; // åªè¯»è®¿é—® std::cout \u0026lt;\u0026lt; \u0026#34;åªè¯»è®¿é—®: \u0026#34;; for (int num : numbers) { // num æ˜¯ numbers ä¸­å…ƒç´ çš„å‰¯æœ¬ std::cout \u0026lt;\u0026lt; num \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // 10 20 30 } std::cout \u0026lt;\u0026lt; std::endl; // ä¿®æ”¹å…ƒç´  std::cout \u0026lt;\u0026lt; \u0026#34;ä¿®æ”¹å: \u0026#34;; for (int\u0026amp; num : numbers) { // ä½¿ç”¨å¼•ç”¨ \u0026#39;int\u0026amp;\u0026#39; æ‰èƒ½ä¿®æ”¹åŸå…ƒç´  num *= 2; } for (int num : numbers) { std::cout \u0026lt;\u0026lt; num \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // 20 40 60 } std::cout \u0026lt;\u0026lt; std::endl; return 0; } 2. åŸºäºç´¢å¼•çš„å¾ªç¯ (Index-based loop) # ç‰¹ç‚¹: ä¼ ç»Ÿæ–¹å¼ï¼Œå½“éœ€è¦çŸ¥é“å…ƒç´ ç´¢å¼•æ—¶ä½¿ç”¨ï¼Œæˆ–è€…éœ€è¦è·³è·ƒè®¿é—®æ—¶ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; #include \u0026lt;string\u0026gt; // For std::string int main() { std::vector\u0026lt;std::string\u0026gt; names = {\u0026#34;Alice\u0026#34;, \u0026#34;Bob\u0026#34;, \u0026#34;Charlie\u0026#34;}; for (size_t i = 0; i \u0026lt; names.size(); ++i) { // æ¨èä½¿ç”¨ size_t ç±»å‹ä½œä¸ºç´¢å¼• std::cout \u0026lt;\u0026lt; \u0026#34;Name at \u0026#34; \u0026lt;\u0026lt; i \u0026lt;\u0026lt; \u0026#34;: \u0026#34; \u0026lt;\u0026lt; names[i] \u0026lt;\u0026lt; std::endl; } return 0; } 3. ä½¿ç”¨è¿­ä»£å™¨ (Iterator-based loop) # ç‰¹ç‚¹: æœ€é€šç”¨ã€æœ€çµæ´»ï¼Œé€‚ç”¨äºæ‰€æœ‰æ ‡å‡†å®¹å™¨ã€‚å¯è¿›è¡Œå¤æ‚æ“ä½œï¼ˆå¦‚å¾ªç¯å†…å®‰å…¨åœ°æ’å…¥/åˆ é™¤å…ƒç´ ï¼‰ï¼Œä½†éœ€æ³¨æ„è¿­ä»£å™¨å¤±æ•ˆé—®é¢˜ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; int main() { std::vector\u0026lt;double\u0026gt; scores = {1.1, 2.2, 3.3}; // ä¼ ç»Ÿè¿­ä»£å™¨éå† std::cout \u0026lt;\u0026lt; \u0026#34;ä¼ ç»Ÿè¿­ä»£å™¨: \u0026#34;; for (std::vector\u0026lt;double\u0026gt;::iterator it = scores.begin(); it != scores.end(); ++it) { std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // è§£å¼•ç”¨è¿­ä»£å™¨è·å–å…ƒç´  } std::cout \u0026lt;\u0026lt; std::endl; // ä½¿ç”¨ auto ç®€åŒ– (C++11+) // cbegin()/cend() è¿”å› const_iteratorï¼Œç”¨äºåªè¯»è®¿é—®ï¼Œæ›´å®‰å…¨ã€‚ std::cout \u0026lt;\u0026lt; \u0026#34;ä½¿ç”¨ auto å’Œ const è¿­ä»£å™¨: \u0026#34;; for (auto it = scores.cbegin(); it != scores.cend(); ++it) { std::cout \u0026lt;\u0026lt; *it \u0026lt;\u0026lt; \u0026#34; \u0026#34;; } std::cout \u0026lt;\u0026lt; std::endl; return 0; } 4. ä½¿ç”¨åå‘è¿­ä»£å™¨ (Reverse Iterator) # ç‰¹ç‚¹: ä» vector æœ«å°¾å‘å‰éå†ã€‚\n#include \u0026lt;iostream\u0026gt; #include \u0026lt;vector\u0026gt; int main() { std::vector\u0026lt;int\u0026gt; data = {1, 2, 3}; std::cout \u0026lt;\u0026lt; \u0026#34;åå‘éå†: \u0026#34;; for (auto rit = data.rbegin(); rit != data.rend(); ++rit) { // rbegin()/rend() è¿”å›åå‘è¿­ä»£å™¨ std::cout \u0026lt;\u0026lt; *rit \u0026lt;\u0026lt; \u0026#34; \u0026#34;; // 3 2 1 } std::cout \u0026lt;\u0026lt; std::endl; return 0; } æ¨èä½¿ç”¨åœºæ™¯æ€»ç»“:\næ—¥å¸¸éå† (è¯»æˆ–ç‹¬ç«‹ä¿®æ”¹): åŸºäºèŒƒå›´çš„ for å¾ªç¯ (æœ€ç®€æ´ã€å®‰å…¨)ã€‚ éœ€è¦å…ƒç´ ç´¢å¼•: åŸºäºç´¢å¼•çš„ for å¾ªç¯ã€‚ å¤æ‚æ“ä½œ/é€šç”¨æ€§ (ä¾‹å¦‚å¾ªç¯ä¸­å¢åˆ å…ƒç´ ): è¿­ä»£å™¨å¾ªç¯ (éœ€è°¨æ…å¤„ç†è¿­ä»£å™¨å¤±æ•ˆ)ã€‚ ","date":"2025-05-25","externalUrl":null,"permalink":"/posts/learn-c/cpp-note1.1-std-vector-%E5%9F%BA%E7%A1%80%E4%B8%8E%E9%81%8D%E5%8E%86/","section":"Posts","summary":"","title":"cpp-note1.1-std-vector-åŸºç¡€ä¸éå†","type":"posts"},{"content":"","date":"2025-05-14","externalUrl":null,"permalink":"/category/c%E8%AF%AD%E8%A8%80/","section":"Category","summary":"","title":"Cè¯­è¨€","type":"category"},{"content":" C è¯­è¨€çš„ç§˜å¯†æ­¦å™¨ï¼šé‚£äº›ä½ å¿…é¡»çŸ¥é“çš„æ ‡å‡†åº“å‡½æ•° (é™„ç¤ºä¾‹) # å˜¿ï¼Œå„ä½Cè¯­è¨€çš„çˆ±å¥½è€…ä»¬ï¼ ğŸ‘‹\nå½“ä½ å¼€å§‹å­¦ä¹ Cè¯­è¨€ï¼Œæˆ–è€…å·²ç»å†™äº†ä¸€æ®µæ—¶é—´çš„Cä»£ç æ—¶ï¼Œå¾ˆå¿«å°±ä¼šå‘ç°ä¸€ä¸ªäº‹å®ï¼šä½ ä¸éœ€è¦ä»é›¶å¼€å§‹æ„å»ºä¸€åˆ‡ã€‚Cè¯­è¨€ä¹‹æ‰€ä»¥å¼ºå¤§ä¸”é«˜æ•ˆï¼Œå¾ˆå¤§ä¸€éƒ¨åˆ†åŠŸåŠ³åœ¨äºå®ƒä¸°å¯Œè€Œå¼ºå¤§çš„æ ‡å‡†åº“ã€‚\næ ‡å‡†åº“å°±åƒæ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥å…·ç®±ï¼Œé‡Œé¢è£…æ»¡äº†å„ç§é¢„å…ˆå†™å¥½çš„ã€ç»è¿‡ä¸¥æ ¼æµ‹è¯•çš„å‡½æ•°ï¼Œæ¶µç›–äº†è¾“å…¥è¾“å‡ºã€å­—ç¬¦ä¸²å¤„ç†ã€æ•°å­¦è®¡ç®—ã€å†…å­˜ç®¡ç†ç­‰ç­‰å‡ ä¹æ‰€æœ‰åŸºç¡€æ“ä½œã€‚ç†Ÿç»ƒä½¿ç”¨å®ƒä»¬ï¼Œä¸ä»…èƒ½å¤§å¤§æé«˜ä½ çš„å¼€å‘æ•ˆç‡ï¼Œè¿˜èƒ½è®©ä½ çš„ä»£ç æ›´å¥å£®ã€æ›´æ ‡å‡†ã€‚\nä»Šå¤©ï¼Œå’±ä»¬å°±æ¥ä¸€èµ·æ¢ç´¢Cè¯­è¨€ä¸­é‚£äº›æœ€å¸¸ç”¨ã€æœ€å®ç”¨çš„æ ‡å‡†åº“å‡½æ•°ã€‚æˆ‘ä¼šä¸ºä½ ä»‹ç»æ¯ä¸ªåº“çš„å¤§è‡´ç”¨é€”ï¼Œå¹¶æä¾›ä¸€äº›ç®€å•çš„å°ç¤ºä¾‹ï¼Œè®©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼\nåˆ«å¿˜äº†ï¼Œåœ¨ä½¿ç”¨è¿™äº›åº“å‡½æ•°ä¹‹å‰ï¼Œä½ éœ€è¦åœ¨ä»£ç æ–‡ä»¶å¼€å¤´åŠ ä¸Šç›¸åº”çš„å¤´æ–‡ä»¶å¼•ç”¨ï¼Œå°±åƒè¿™æ ·ï¼š#include \u0026lt;åº“å.h\u0026gt;ã€‚\nå‡†å¤‡å¥½äº†å—ï¼Ÿå’±ä»¬å¼€å§‹ï¼\n1. ä¸ä¸–ç•Œå¯¹è¯ï¼šstdio.h (æ ‡å‡†è¾“å…¥è¾“å‡ºåº“) # è¿™æ˜¯ä½ æ¥è§¦Cè¯­è¨€æ—¶æœ€æ—©é‡åˆ°çš„æœ‹å‹ï¼Œè´Ÿè´£å¤„ç†ç¨‹åºä¸å¤–éƒ¨ä¸–ç•Œçš„äº¤äº’ï¼Œæ¯”å¦‚ä»é”®ç›˜è¯»å–æ•°æ®ï¼Œæˆ–è€…å°†ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚å®ƒä¹Ÿæ˜¯æ–‡ä»¶æ“ä½œçš„åŸºçŸ³ã€‚\nprintf(): æ ¼å¼åŒ–è¾“å‡ºçš„ç‹è€…ï¼æƒ³åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ–‡å­—ã€æ•°å­—ã€å˜é‡ï¼Ÿå…¨é å®ƒäº†ã€‚ä½ å¯ä»¥ç”¨ %d, %f, %s ç­‰æ ¼å¼ç¬¦æ¥æ§åˆ¶è¾“å‡ºçš„ç±»å‹å’Œæ ¼å¼ã€‚ scanf(): ä»æ ‡å‡†è¾“å…¥ï¼ˆé€šå¸¸æ˜¯é”®ç›˜ï¼‰è¯»å–æ•°æ®ã€‚æ³¨æ„ï¼š ä½¿ç”¨æ—¶éœ€è¦æä¾›å˜é‡çš„åœ°å€ï¼ˆå‰é¢åŠ  \u0026amp;ï¼‰ï¼Œå¹¶ä¸”è¦å°å¿ƒè¾“å…¥ä¸åŒ¹é…çš„é—®é¢˜ã€‚ puts(): è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶åœ¨æœ«å°¾è‡ªåŠ¨åŠ ä¸Šæ¢è¡Œç¬¦ã€‚æ¯” printf(\u0026quot;...\\n\u0026quot;) å°‘æ•²å‡ ä¸ªé”®ï¼ fgets(): è¯»å–ä¸€è¡Œå­—ç¬¦ä¸²ï¼ˆé€šå¸¸ä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥ï¼‰ã€‚éå¸¸é‡è¦ï¼ å®ƒæ˜¯ gets() çš„å®‰å…¨æ›¿ä»£å“ï¼Œå¯ä»¥æŒ‡å®šæœ€å¤§è¯»å–å­—ç¬¦æ•°ï¼Œé˜²æ­¢ç¼“å†²åŒºæº¢å‡ºã€‚ å°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; // å¼•å…¥æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ int main() { // ä½¿ç”¨ printf è¾“å‡ºä¿¡æ¯å’Œå˜é‡ int age = 25; printf(\u0026#34;æ¬¢è¿å­¦ä¹ Cè¯­è¨€ï¼\\n\u0026#34;); // æ‰“å°å­—ç¬¦ä¸²å¹¶æ¢è¡Œ printf(\u0026#34;æˆ‘çš„å¹´é¾„æ˜¯ %d å²ã€‚\\n\u0026#34;, age); // æ ¼å¼åŒ–è¾“å‡ºæ•´æ•° // ä½¿ç”¨ scanf è¯»å–ç”¨æˆ·è¾“å…¥ int score; printf(\u0026#34;è¯·è¾“å…¥ä½ çš„åˆ†æ•°ï¼š\u0026#34;); scanf(\u0026#34;%d\u0026#34;, \u0026amp;score); // è¯»å–ä¸€ä¸ªæ•´æ•°åˆ° score å˜é‡ printf(\u0026#34;ä½ è¾“å…¥çš„åˆ†æ•°æ˜¯: %d\\n\u0026#34;, score); // ä½¿ç”¨ puts è¾“å‡ºå­—ç¬¦ä¸² puts(\u0026#34;è¿™æ˜¯ä¸€ä¸ªé€šè¿‡ puts è¾“å‡ºçš„å­—ç¬¦ä¸²ã€‚\u0026#34;); // ä½¿ç”¨ fgets å®‰å…¨è¯»å–å­—ç¬¦ä¸² (ä»£æ›¿gets) char city[30]; // å£°æ˜ä¸€ä¸ªå­—ç¬¦æ•°ç»„å­˜æ”¾åŸå¸‚å printf(\u0026#34;è¯·è¾“å…¥ä½ æ‰€åœ¨çš„åŸå¸‚ï¼š\u0026#34;); fgets(city, sizeof(city), stdin); // ä»æ ‡å‡†è¾“å…¥è¯»å–æœ€å¤š 29 ä¸ªå­—ç¬¦ + nullç»ˆæ­¢ç¬¦ printf(\u0026#34;ä½ æ‰€åœ¨çš„åŸå¸‚æ˜¯ï¼š%s\u0026#34;, city); // fgets å¯èƒ½ä¿ç•™æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥è¿™é‡Œä¸éœ€è¦é¢å¤–çš„ \\n return 0; } 2. æ–‡å­—æ¸¸æˆçš„é­”æœ¯å¸ˆï¼šstring.h (å­—ç¬¦ä¸²å¤„ç†åº“) # Cè¯­è¨€ä¸­çš„å­—ç¬¦ä¸²æ˜¯ä»¥nullç»ˆæ­¢ç¬¦ (\\0) ç»“å°¾çš„å­—ç¬¦æ•°ç»„ã€‚string.h æä¾›äº†å¤„ç†è¿™äº›å­—ç¬¦æ•°ç»„çš„å„ç§ä¾¿åˆ©å‡½æ•°ã€‚\nstrlen(): è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä¸åŒ…æ‹¬ \\0ï¼‰ã€‚ strcpy(): å°†ä¸€ä¸ªå­—ç¬¦ä¸²å®Œå…¨å¤åˆ¶åˆ°å¦ä¸€ä¸ªã€‚æ³¨æ„ï¼š å¦‚æœç›®æ ‡ç©ºé—´ä¸è¶³ï¼Œä¼šå‘ç”Ÿå±é™©çš„ç¼“å†²åŒºæº¢å‡ºï¼åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ›´æ¨èä½¿ç”¨ strncpy() æˆ–å…¶ä»–æ›´å®‰å…¨çš„å‡½æ•°ç‰ˆæœ¬ã€‚ strcat(): å°†ä¸€ä¸ªå­—ç¬¦ä¸²è¿æ¥ï¼ˆè¿½åŠ ï¼‰åˆ°å¦ä¸€ä¸ªçš„æœ«å°¾ã€‚åŒæ ·è¦æ³¨æ„ç©ºé—´é—®é¢˜ï¼Œå¯èƒ½æº¢å‡ºï¼ æ¨èä½¿ç”¨ strncat()ã€‚ strcmp(): æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚è¿”å›0è¡¨ç¤ºç›¸ç­‰ï¼Œå°äº0è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²â€œå°äºâ€ç¬¬äºŒä¸ªï¼ˆæŒ‰å­—å…¸åºï¼‰ï¼Œå¤§äº0åˆ™ç›¸åã€‚ strstr(): åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾å¦ä¸€ä¸ªå­—ç¬¦ä¸²ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚ å°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;string.h\u0026gt; // å¼•å…¥å­—ç¬¦ä¸²å¤„ç†åº“ int main() { char greeting[20] = \u0026#34;Hello\u0026#34;; char name[] = \u0026#34;Alice\u0026#34;; char message[50]; // ç”¨äºå­˜æ”¾è¿æ¥åçš„å­—ç¬¦ä¸² // ä½¿ç”¨ strlen è·å–é•¿åº¦ printf(\u0026#34;\\\u0026#34;%s\\\u0026#34; çš„é•¿åº¦æ˜¯: %zu\\n\u0026#34;, greeting, strlen(greeting)); // %zu é€‚ç”¨äº size_t // ä½¿ç”¨ strcpy å¤åˆ¶ (æ³¨æ„å®‰å…¨æ€§) strcpy(message, greeting); // å°† \u0026#34;Hello\u0026#34; å¤åˆ¶åˆ° message printf(\u0026#34;å¤åˆ¶å: %s\\n\u0026#34;, message); // message ç°åœ¨æ˜¯ \u0026#34;Hello\u0026#34; // ä½¿ç”¨ strcat è¿æ¥ (æ³¨æ„å®‰å…¨æ€§) strcat(message, \u0026#34; \u0026#34;); // message å˜ä¸º \u0026#34;Hello \u0026#34; strcat(message, name); // message å˜ä¸º \u0026#34;Hello Alice\u0026#34; printf(\u0026#34;è¿æ¥å: %s\\n\u0026#34;, message); // ä½¿ç”¨ strcmp æ¯”è¾ƒ char str_a[] = \u0026#34;apple\u0026#34;; char str_b[] = \u0026#34;banana\u0026#34;; char str_c[] = \u0026#34;apple\u0026#34;; printf(\u0026#34;æ¯”è¾ƒ \\\u0026#34;%s\\\u0026#34; å’Œ \\\u0026#34;%s\\\u0026#34;: %d\\n\u0026#34;, str_a, str_b, strcmp(str_a, str_b)); // è¾“å‡ºè´Ÿæ•° printf(\u0026#34;æ¯”è¾ƒ \\\u0026#34;%s\\\u0026#34; å’Œ \\\u0026#34;%s\\\u0026#34;: %d\\n\u0026#34;, str_a, str_c, strcmp(str_a, str_c)); // è¾“å‡º 0 // ä½¿ç”¨ strstr æŸ¥æ‰¾å­ä¸² char phrase[] = \u0026#34;Learning C is fun!\u0026#34;; char word[] = \u0026#34;C is\u0026#34;; char *found_pos = strstr(phrase, word); if (found_pos) { printf(\u0026#34;åœ¨ \\\u0026#34;%s\\\u0026#34; ä¸­æ‰¾åˆ°äº† \\\u0026#34;%s\\\u0026#34;ï¼Œä½ç½®åœ¨ç´¢å¼• %ld\\n\u0026#34;, phrase, word, found_pos - phrase); } return 0; } 3. æ•°å­—ä¸–ç•Œçš„åŠ©æ‰‹ï¼šmath.h (æ•°å­¦åº“) # è¿›è¡Œå„ç§æ•°å­¦è¿ç®—æ—¶ï¼Œmath.h æ˜¯ä½ çš„å¾—åŠ›åŠ©æ‰‹ã€‚å®ƒæä¾›äº†å¹³æ–¹æ ¹ã€å¹‚ã€ä¸‰è§’å‡½æ•°ã€å¯¹æ•°ç­‰åŠŸèƒ½ã€‚\nsqrt(): è®¡ç®—å¹³æ–¹æ ¹ã€‚ pow(x, y): è®¡ç®— x çš„ y æ¬¡æ–¹ã€‚ fabs(): è®¡ç®—æµ®ç‚¹æ•°çš„ç»å¯¹å€¼ã€‚ ceil(): å‘ä¸Šå–æ•´ã€‚ floor(): å‘ä¸‹å–æ•´ã€‚ sin(), cos(), tan(): è®¡ç®—æ­£å¼¦ã€ä½™å¼¦ã€æ­£åˆ‡ï¼ˆå‚æ•°æ˜¯å¼§åº¦ï¼‰ã€‚ log(), log10(): è‡ªç„¶å¯¹æ•°å’Œä»¥10ä¸ºåº•çš„å¯¹æ•°ã€‚ å°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;math.h\u0026gt; // å¼•å…¥æ•°å­¦åº“ int main() { double num = 25.0; double base = 2.0; double exponent = 3.0; double neg = -10.5; double decimal = 4.3; printf(\u0026#34;%.2f çš„å¹³æ–¹æ ¹æ˜¯ %.2f\\n\u0026#34;, num, sqrt(num)); printf(\u0026#34;%.2f çš„ %.2f æ¬¡æ–¹æ˜¯ %.2f\\n\u0026#34;, base, exponent, pow(base, exponent)); printf(\u0026#34;%.2f çš„ç»å¯¹å€¼æ˜¯ %.2f\\n\u0026#34;, neg, fabs(neg)); printf(\u0026#34;%.2f å‘ä¸Šå–æ•´æ˜¯ %.2f\\n\u0026#34;, decimal, ceil(decimal)); printf(\u0026#34;%.2f å‘ä¸‹å–æ•´æ˜¯ %.2f\\n\u0026#34;, decimal, floor(decimal)); // è®¡ç®— sin(90åº¦)ã€‚æ³¨æ„ï¼šmath.h çš„ä¸‰è§’å‡½æ•°ä½¿ç”¨å¼§åº¦ double angle_deg = 90.0; double angle_rad = angle_deg * M_PI / 180.0; // å°†åº¦è½¬æ¢ä¸ºå¼§åº¦ (M_PI æ˜¯åœ†å‘¨ç‡å¸¸é‡) printf(\u0026#34;sin(%.2f åº¦) æ˜¯ %.2f\\n\u0026#34;, angle_deg, sin(angle_rad)); return 0; } (æ³¨ï¼šM_PI ä¸æ˜¯Cæ ‡å‡†åº“å¼ºåˆ¶è¦æ±‚çš„ï¼Œä½†åœ¨å¾ˆå¤šç¼–è¯‘å™¨ï¼ˆå¦‚GCCï¼‰çš„ math.h ä¸­ä¼šå®šä¹‰ã€‚æ›´ä¸¥è°¨çš„åšæ³•æ˜¯è‡ªå·±å®šä¹‰ const double PI = acos(-1.0);)\n4. ç‘å£«å†›åˆ€ï¼šstdlib.h (é€šç”¨å·¥å…·åº“) # è¿™ä¸ªåº“åŒ…å«äº†ä¸€ç³»åˆ—é€šç”¨çš„å®ç”¨å‡½æ•°ï¼ŒåŠŸèƒ½æ¯”è¾ƒæ‚ï¼Œä½†éƒ½éå¸¸å®ç”¨ã€‚\nmalloc() / free(): è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…å’Œé‡Šæ”¾ã€‚è¿™æ˜¯Cè¯­è¨€çµæ´»æ€§çš„é‡è¦æ¥æºï¼Œä½†ä¹Ÿéœ€è¦å°å¿ƒä½¿ç”¨ï¼Œé¿å…å†…å­˜æ³„æ¼æˆ–é‡æŒ‡é’ˆã€‚ atoi(), atol(), atof(): å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°ã€é•¿æ•´æ•°ã€æµ®ç‚¹æ•°ã€‚ rand(), srand(): ç”Ÿæˆä¼ªéšæœºæ•°ã€‚srand() ç”¨äºè®¾ç½®éšæœºæ•°ç§å­ï¼Œé€šå¸¸ç”¨å½“å‰æ—¶é—´ä½œä¸ºç§å­ï¼Œè®©æ¯æ¬¡ç¨‹åºè¿è¡Œäº§ç”Ÿçš„éšæœºåºåˆ—ä¸åŒã€‚ exit(): ç»ˆæ­¢ç¨‹åºçš„æ‰§è¡Œã€‚ å°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; // å¼•å…¥é€šç”¨å·¥å…·åº“ #include \u0026lt;time.h\u0026gt; // ä½¿ç”¨æ—¶é—´ä½œä¸ºéšæœºæ•°ç§å­ int main() { // å­—ç¬¦ä¸²è½¬æ•°å­— char num_str[] = \u0026#34;456\u0026#34;; int number = atoi(num_str); printf(\u0026#34;å­—ç¬¦ä¸² \\\u0026#34;%s\\\u0026#34; è½¬ä¸ºæ•´æ•°: %d\\n\u0026#34;, num_str, number); // åŠ¨æ€å†…å­˜åˆ†é…ä¸é‡Šæ”¾ int *my_array; int size = 5; // åˆ†é… size ä¸ª int å¤§å°çš„å†…å­˜å— my_array = (int*)malloc(size * sizeof(int)); if (my_array == NULL) { fprintf(stderr, \u0026#34;å†…å­˜åˆ†é…å¤±è´¥ï¼\\n\u0026#34;); return 1; // è¿”å›é”™è¯¯ç  } printf(\u0026#34;æˆåŠŸåˆ†é…äº† %zu å­—èŠ‚å†…å­˜ã€‚\\n\u0026#34;, size * sizeof(int)); // ä½¿ç”¨è¿™å—å†…å­˜... æ¯”å¦‚åˆå§‹åŒ– for(int i = 0; i \u0026lt; size; i++) { my_array[i] = i * 10; } printf(\u0026#34;åˆ†é…çš„å†…å­˜å†…å®¹ï¼š\u0026#34;); for(int i = 0; i \u0026lt; size; i++) { printf(\u0026#34;%d \u0026#34;, my_array[i]); } printf(\u0026#34;\\n\u0026#34;); free(my_array); // é‡Šæ”¾åˆ†é…çš„å†…å­˜ï¼ éå¸¸é‡è¦ï¼ printf(\u0026#34;å†…å­˜å·²é‡Šæ”¾ã€‚\\n\u0026#34;); // ç”Ÿæˆéšæœºæ•° srand(time(NULL)); // ç”¨å½“å‰æ—¶é—´åˆå§‹åŒ–éšæœºæ•°ç”Ÿæˆå™¨ printf(\u0026#34;ä¸€ä¸ªéšæœºæ•°ï¼š%d\\n\u0026#34;, rand()); printf(\u0026#34;å¦ä¸€ä¸ªéšæœºæ•°ï¼š%d\\n\u0026#34;, rand()); // exit ç¤ºä¾‹ (å–æ¶ˆæ³¨é‡Šå³å¯çœ‹åˆ°æ•ˆæœ) // printf(\u0026#34;ç¨‹åºå³å°†é€šè¿‡ exit é€€å‡ºã€‚\\n\u0026#34;); // exit(0); // é€€å‡ºç¨‹åºï¼Œ0é€šå¸¸è¡¨ç¤ºæˆåŠŸ return 0; // å¦‚æœæ²¡æœ‰è°ƒç”¨ exitï¼Œmain å‡½æ•°è¿”å› 0 ä¹Ÿæ˜¯æˆåŠŸé€€å‡ºçš„æ ‡å¿— } 5. å­—ç¬¦çš„ä¾¦æ¢ä¸åŒ–å¦†å¸ˆï¼šctype.h (å­—ç¬¦å¤„ç†åº“) # è¿™ä¸ªåº“æä¾›äº†ä¸€ç³»åˆ—å‡½æ•°ï¼Œå¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸€ä¸ªå­—ç¬¦çš„å±æ€§ï¼ˆæ¯”å¦‚æ˜¯ä¸æ˜¯æ•°å­—ã€å­—æ¯ã€ç©ºç™½ç¬¦ç­‰ï¼‰ï¼Œæˆ–è€…å°†å­—ç¬¦è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚\nisdigit(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯æ•°å­— (\u0026lsquo;0\u0026rsquo;-\u0026lsquo;9\u0026rsquo;)ã€‚ isalpha(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯å­—æ¯ (\u0026lsquo;a\u0026rsquo;-\u0026lsquo;z\u0026rsquo;, \u0026lsquo;A\u0026rsquo;-\u0026lsquo;Z\u0026rsquo;)ã€‚ isalnum(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯å­—æ¯æˆ–æ•°å­—ã€‚ isspace(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢è¡Œç¬¦ç­‰ï¼‰ã€‚ isupper(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯å¤§å†™å­—æ¯ã€‚ islower(c): æ£€æŸ¥å­—ç¬¦ c æ˜¯å¦æ˜¯å°å†™å­—æ¯ã€‚ toupper(c): å°†å­—ç¬¦ c è½¬æ¢ä¸ºå¤§å†™ï¼ˆå¦‚æœå·²ç»æ˜¯å¤§å†™æˆ–ä¸æ˜¯å­—æ¯åˆ™ä¸å˜ï¼‰ã€‚ tolower(c): å°†å­—ç¬¦ c è½¬æ¢ä¸ºå°å†™ï¼ˆå¦‚æœå·²ç»æ˜¯å°å†™æˆ–ä¸æ˜¯å­—æ¯åˆ™ä¸å˜ï¼‰ã€‚ è¿™äº›æ£€æŸ¥å‡½æ•°é€šå¸¸è¿”å›éé›¶å€¼ï¼ˆçœŸï¼‰æˆ–é›¶ï¼ˆå‡ï¼‰ã€‚\nå°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;ctype.h\u0026gt; // å¼•å…¥å­—ç¬¦å¤„ç†åº“ int main() { char ch1 = \u0026#39;G\u0026#39;; char ch2 = \u0026#39;5\u0026#39;; char ch3 = \u0026#39;$\u0026#39;; char ch4 = \u0026#39; \u0026#39;; char ch5 = \u0026#39;x\u0026#39;; printf(\u0026#34;å­—ç¬¦ \u0026#39;%c\u0026#39;:\\n\u0026#34;, ch1); printf(\u0026#34; æ˜¯æ•°å­—å—ï¼Ÿ %s\\n\u0026#34;, isdigit(ch1) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); printf(\u0026#34; æ˜¯å­—æ¯å—ï¼Ÿ %s\\n\u0026#34;, isalpha(ch1) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); printf(\u0026#34; æ˜¯å­—æ¯æˆ–æ•°å­—å—ï¼Ÿ %s\\n\u0026#34;, isalnum(ch1) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); printf(\u0026#34; æ˜¯ç©ºç™½å­—ç¬¦å—ï¼Ÿ %s\\n\u0026#34;, isspace(ch1) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); printf(\u0026#34; æ˜¯å¤§å†™å­—æ¯å—ï¼Ÿ %s\\n\u0026#34;, isupper(ch1) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); printf(\u0026#34;\\nå­—ç¬¦ \u0026#39;%c\u0026#39;:\\n\u0026#34;, ch4); printf(\u0026#34; æ˜¯ç©ºç™½å­—ç¬¦å—ï¼Ÿ %s\\n\u0026#34;, isspace(ch4) ? \u0026#34;æ˜¯\u0026#34; : \u0026#34;å¦\u0026#34;); // å¤§å°å†™è½¬æ¢ printf(\u0026#34;\\nå°† \u0026#39;%c\u0026#39; è½¬æ¢ä¸ºå°å†™ï¼š%c\\n\u0026#34;, ch1, tolower(ch1)); // G -\u0026gt; g printf(\u0026#34;å°† \u0026#39;%c\u0026#39; è½¬æ¢ä¸ºå¤§å†™ï¼š%c\\n\u0026#34;, ch5, toupper(ch5)); // x -\u0026gt; X printf(\u0026#34;å°† \u0026#39;%c\u0026#39; è½¬æ¢ä¸ºå¤§å†™ï¼š%c\\n\u0026#34;, ch2, toupper(ch2)); // 5 -\u0026gt; 5 (éå­—æ¯ä¸å˜) return 0; } 6. æŒæ§æ—¶é—´ï¼štime.h (æ—¶é—´æ—¥æœŸåº“) # éœ€è¦è·å–å½“å‰æ—¶é—´ã€å¤„ç†æ—¶é—´æ ¼å¼æˆ–è€…æµ‹é‡ç¨‹åºè¿è¡Œæ—¶é—´ï¼Ÿtime.h å°±èƒ½å¸®ä½ ã€‚\ntime(): è·å–å½“å‰æ—¥å†æ—¶é—´ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºè‡ªæŸä¸ªå›ºå®šæ—¶é—´ç‚¹ï¼ˆå¦‚Unixçºªå…ƒï¼š1970å¹´1æœˆ1æ—¥00:00:00 UTCï¼‰ä»¥æ¥çš„ç§’æ•°ã€‚ ctime(): å°† time_t ç±»å‹çš„æ—¶é—´å€¼è½¬æ¢ä¸ºä¸€ä¸ªäººç±»å¯è¯»çš„å­—ç¬¦ä¸²ï¼Œé€šå¸¸æ˜¯æœ¬åœ°æ—¶åŒºçš„æ—¶é—´ã€‚ localtime(): å°† time_t ç±»å‹çš„æ—¶é—´å€¼è½¬æ¢ä¸ºä¸€ä¸ªåŒ…å«å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ç­‰ä¿¡æ¯çš„ç»“æ„ä½“ (struct tm)ï¼Œä½¿ç”¨æœ¬åœ°æ—¶åŒºã€‚ strftime(): æ ¹æ®æŒ‡å®šçš„æ ¼å¼å­—ç¬¦ä¸²ï¼Œå°† struct tm ä¸­çš„æ—¶é—´ä¿¡æ¯æ ¼å¼åŒ–æˆä½ æƒ³è¦çš„å­—ç¬¦ä¸²ã€‚ å°ç¤ºä¾‹ï¼š\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;time.h\u0026gt; // å¼•å…¥æ—¶é—´æ—¥æœŸåº“ int main() { time_t raw_time; // å£°æ˜ä¸€ä¸ª time_t å˜é‡ // è·å–å½“å‰æ—¶é—´ time(\u0026amp;raw_time); // æˆ–è€… raw_time = time(NULL); // ä½¿ç”¨ ctime ç›´æ¥æ‰“å°æ—¶é—´å­—ç¬¦ä¸² printf(\u0026#34;å½“å‰æœ¬åœ°æ—¶é—´ (ctime): %s\u0026#34;, ctime(\u0026amp;raw_time)); // ctime è¿”å›çš„å­—ç¬¦ä¸²è‡ªå¸¦æ¢è¡Œ // ä½¿ç”¨ localtime å’Œ strftime è¿›è¡Œè‡ªå®šä¹‰æ ¼å¼åŒ– struct tm *local_info; // å£°æ˜ä¸€ä¸ªæŒ‡å‘ struct tm çš„æŒ‡é’ˆ local_info = localtime(\u0026amp;raw_time); // å°† time_t è½¬æ¢ä¸ºæœ¬åœ°æ—¶é—´çš„ struct tm char time_buffer[100]; // ç”¨äºå­˜æ”¾æ ¼å¼åŒ–åçš„æ—¶é—´å­—ç¬¦ä¸² // æ ¼å¼åŒ–å­—ç¬¦ä¸²ç¤ºä¾‹ï¼š å¹´/æœˆ/æ—¥ æ—¶:åˆ†:ç§’ strftime(time_buffer, sizeof(time_buffer), \u0026#34;%Y/%m/%d %H:%M:%S\u0026#34;, local_info); printf(\u0026#34;å½“å‰æœ¬åœ°æ—¶é—´ (strftime): %s\\n\u0026#34;, time_buffer); return 0; } ä¸ºä»€ä¹ˆå¦‚æ­¤ä¾èµ–æ ‡å‡†åº“ï¼Ÿ # æ•ˆç‡ä¸ä¼˜åŒ–ï¼š æ ‡å‡†åº“å‡½æ•°é€šå¸¸ç”±ç¼–è¯‘å™¨å¼€å‘è€…å®ç°ï¼Œå¹¶ç»è¿‡é«˜åº¦ä¼˜åŒ–ï¼Œæ€§èƒ½è¿œè¶…ä½ è‡ªå·±ä»å¤´å®ç°çš„ç‰ˆæœ¬ã€‚ æ­£ç¡®æ€§ä¸å¥å£®æ€§ï¼š å®ƒä»¬ç»è¿‡äº†æ— æ•°æ¬¡çš„æµ‹è¯•å’Œä¿®æ­£ï¼Œé”™è¯¯çš„å¯èƒ½æ€§æå°ã€‚ å¯ç§»æ¤æ€§ï¼š æ ‡å‡†åº“å‡½æ•°åœ¨æ‰€æœ‰ç¬¦åˆCæ ‡å‡†çš„å¹³å°ä¸Šéƒ½å¯ç”¨ï¼Œè¿™è®©ä½ çš„ä»£ç æ›´å®¹æ˜“åœ¨ä¸åŒç³»ç»Ÿä¸Šç¼–è¯‘å’Œè¿è¡Œã€‚ æé«˜å¼€å‘é€Ÿåº¦ï¼š é¿å…é‡å¤é€ è½®å­ï¼Œè®©ä½ ä¸“æ³¨äºè§£å†³æ ¸å¿ƒé—®é¢˜ã€‚ æ·±å…¥å­¦ä¹ çš„å…¥å£ # ä¸Šé¢æåˆ°çš„åªæ˜¯Cæ ‡å‡†åº“çš„å†°å±±ä¸€è§’ã€‚æ¯ä¸ªå¤´æ–‡ä»¶ä¸­éƒ½è¿˜æœ‰å¾ˆå¤šå…¶ä»–æœ‰ç”¨çš„å‡½æ•°ã€‚å½“ä½ é‡åˆ°å…·ä½“é—®é¢˜æ—¶ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ï¼š\næŸ¥é˜…æ–‡æ¡£ï¼š æœç´¢â€œC standard library documentationâ€æˆ–è€…å…·ä½“å‡½æ•°åï¼ˆå¦‚â€œC printf man pageâ€ï¼‰ã€‚åƒ cppreference.com è¿™æ ·çš„ç½‘ç«™æä¾›äº†éå¸¸è¯¦ç»†ä¸”å‡†ç¡®çš„Cæ ‡å‡†åº“å‡½æ•°è¯´æ˜ã€‚ é˜…è¯»ç¤ºä¾‹ä»£ç ï¼š ç†è§£å‡½æ•°çš„ç”¨æ³•å’Œå‚æ•°ã€‚ ç»“è¯­ # æŒæ¡Cè¯­è¨€çš„æ ‡å‡†åº“æ˜¯å†™å‡ºé«˜æ•ˆã€å¯é ã€å¯ç§»æ¤Cä»£ç çš„å…³é”®ã€‚ä¸è¦å®³æ€•æŸ¥é˜…æ–‡æ¡£ï¼Œå¤šåŠ¨æ‰‹å®è·µï¼Œå°†è¿™äº›å¼ºå¤§çš„å·¥å…·èå…¥ä½ çš„ç¼–ç¨‹ä¹ æƒ¯ä¸­ã€‚\nå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨Cè¯­è¨€çš„æ ‡å‡†åº“å‡½æ•°ï¼å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–è€…æƒ³åˆ†äº«ä½ å¸¸ç”¨çš„Cåº“å‡½æ•°ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼\nç¼–ç æ„‰å¿«ï¼ ğŸ˜Š\n","date":"2025-05-14","externalUrl":null,"permalink":"/posts/learn-c/c%E8%AF%AD%E8%A8%80%E7%9A%84%E7%A7%98%E5%AF%86%E6%AD%A6%E5%99%A8%E9%82%A3%E4%BA%9B%E4%BD%A0%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93%E5%87%BD%E6%95%B01%E9%99%84%E7%A4%BA%E4%BE%8B/","section":"Posts","summary":"","title":"Cè¯­è¨€çš„ç§˜å¯†æ­¦å™¨ï¼šé‚£äº›ä½ å¿…é¡»çŸ¥é“çš„æ ‡å‡†åº“å‡½æ•°(1)(é™„ç¤ºä¾‹)","type":"posts"},{"content":" C è¯­è¨€çš„ç§˜å¯†æ­¦å™¨ï¼šé‚£äº›ä½ å¿…é¡»çŸ¥é“çš„æ ‡å‡†åº“å‡½æ•° (2) (é™„ç¤ºä¾‹) # å„ä½Cè¯­è¨€çš„æ¢ç´¢è€…ä»¬ï¼Œæ¬¢è¿å›åˆ°æˆ‘ä»¬çš„æ ‡å‡†åº“å‡½æ•°ä¹‹æ—…ï¼ ğŸ‘‹\nåœ¨ ç¬¬ä¸€ç¯‡ æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¸€èµ·äº†è§£äº† stdio.h (åŸºç¡€è¾“å…¥è¾“å‡º)ã€string.h (åŸºç¡€å­—ç¬¦ä¸²å¤„ç†)ã€math.h (æ•°å­¦)ã€stdlib.h (é€šç”¨å·¥å…·åŸºç¡€) å’Œ ctype.h (å­—ç¬¦å¤„ç†) çš„ä¸€äº›æ ¸å¿ƒå‡½æ•°ã€‚å®ƒä»¬æ„æˆäº†Cè¯­è¨€ç¼–ç¨‹çš„åŸºçŸ³ã€‚\nä½†æ˜¯ï¼ŒCè¯­è¨€æ ‡å‡†åº“çš„å¼ºå¤§è¿œä¸æ­¢äºæ­¤ï¼åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤„ç†æ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€ä¸æ–‡ä»¶äº¤äº’ä»¥åŠæ›´ç²¾ç»†åœ°æ§åˆ¶å†…å­˜ã€‚\nä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨æ›´å¤šCè¯­è¨€æ ‡å‡†åº“çš„å‡½æ•°ï¼Œç‰¹åˆ«æ˜¯å¤§å®¶å…³å¿ƒçš„åŠ¨æ€å†…å­˜ç®¡ç†ä»¥åŠå¿…ä¸å¯å°‘çš„æ–‡ä»¶è¾“å…¥è¾“å‡ºã€‚\nè€è§„çŸ©ï¼Œå¼€å§‹ä¹‹å‰ï¼Œè®°å¾—åœ¨ä½ çš„Cæ–‡ä»¶é¡¶éƒ¨åŒ…å«ç›¸åº”çš„å¤´æ–‡ä»¶å“¦ï¼\n1. ç²¾å‡†æŒæ§å†…å­˜ï¼šstdlib.h åŠ¨æ€å†…å­˜ç®¡ç†è¿›é˜¶ # åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬æåˆ°äº† malloc() å’Œ free() ç”¨äºåŠ¨æ€åˆ†é…å’Œé‡Šæ”¾å†…å­˜ã€‚è¿™é‡Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»å®ƒä»¬ï¼Œå¹¶åŠ å…¥å¦å¤–ä¸¤ä¸ªåŒæ ·é‡è¦çš„ä¼™ä¼´ï¼šcalloc() å’Œ realloc()ã€‚\nmalloc(size_t size): åˆ†é… size å­—èŠ‚çš„å†…å­˜å—ã€‚åˆ†é…çš„å†…å­˜å†…å®¹æ˜¯ä¸ç¡®å®šçš„ï¼ˆå¯èƒ½æ˜¯éšæœºå€¼ï¼‰ã€‚æˆåŠŸæ—¶è¿”å›æŒ‡å‘åˆ†é…å†…å­˜èµ·å§‹ä½ç½®çš„æŒ‡é’ˆï¼Œå¤±è´¥æ—¶è¿”å› NULLã€‚ free(void *ptr): é‡Šæ”¾ä¹‹å‰ç”± malloc, calloc, realloc åˆ†é…çš„å†…å­˜ã€‚é‡è¦ï¼š åªèƒ½é‡Šæ”¾åŠ¨æ€åˆ†é…çš„å†…å­˜ï¼Œä¸”ä¸è¦é‡å¤é‡Šæ”¾æˆ–é‡Šæ”¾ NULL æŒ‡é’ˆï¼ˆfree(NULL) æ˜¯å®‰å…¨çš„ï¼‰ã€‚ calloc(size_t num, size_t size): åˆ†é…ä¸€ä¸ªèƒ½å®¹çº³ num ä¸ªå¤§å°ä¸º size çš„å…ƒç´ çš„å†…å­˜å—ï¼Œå¹¶å°†æ‰€æœ‰å­—èŠ‚åˆå§‹åŒ–ä¸ºé›¶ã€‚æˆåŠŸæ—¶è¿”å›æŒ‡é’ˆï¼Œå¤±è´¥æ—¶è¿”å› NULLã€‚éå¸¸é€‚åˆä¸ºæ•°ç»„åˆ†é…å†…å­˜å¹¶æ¸…é›¶ã€‚ realloc(void *ptr, size_t new_size): é‡æ–°è°ƒæ•´ä¹‹å‰ç”± malloc, calloc, realloc åˆ†é…çš„å†…å­˜å—çš„å¤§å°ä¸º new_sizeã€‚ å¦‚æœ ptr æ˜¯ NULLï¼Œåˆ™è¡Œä¸ºç±»ä¼¼äº malloc(new_size)ã€‚ å¦‚æœ new_size æ˜¯ 0 ä¸” ptr é NULLï¼Œåˆ™è¡Œä¸ºç±»ä¼¼äº free(ptr)ã€‚ realloc å¯èƒ½ä¼šåœ¨åŸåœ°æ‰©å±•å†…å­˜ï¼Œä¹Ÿå¯èƒ½åˆ†é…æ–°çš„å†…å­˜å—å¹¶å°†æ—§æ•°æ®å¤åˆ¶è¿‡å»ï¼Œç„¶åé‡Šæ”¾æ—§å—ã€‚å®ƒè¿”å›æ–°å—çš„æŒ‡é’ˆï¼ˆå¯èƒ½ä¸æ—§æŒ‡é’ˆç›¸åŒæˆ–ä¸åŒï¼‰ã€‚ é‡è¦ï¼š realloc å¤±è´¥æ—¶è¿”å› NULLï¼Œä½†åŸå§‹çš„ ptr ä»ç„¶æœ‰æ•ˆã€‚å› æ­¤ï¼Œé€šå¸¸çš„åšæ³•æ˜¯å°† realloc çš„ç»“æœèµ‹ç»™ä¸€ä¸ªä¸´æ—¶æŒ‡é’ˆï¼Œæ£€æŸ¥æ˜¯å¦ä¸º NULLï¼Œå¦‚æœä¸æ˜¯å†æ›´æ–°åŸå§‹æŒ‡é’ˆã€‚ ä¸ºä»€ä¹ˆéœ€è¦åŠ¨æ€å†…å­˜ï¼Ÿ\næœ‰æ—¶å€™ï¼Œä½ åœ¨ç¼–å†™ä»£ç æ—¶ä¸çŸ¥é“éœ€è¦å¤šå°‘å†…å­˜ï¼ˆæ¯”å¦‚ç”¨æˆ·è¾“å…¥çš„æ•°é‡ã€ä»æ–‡ä»¶è¯»å–çš„æ•°æ®é‡ï¼‰ã€‚é™æ€åˆ†é…ï¼ˆå¦‚ int arr[10];ï¼‰å¤§å°æ˜¯å›ºå®šçš„ã€‚åŠ¨æ€åˆ†é…è®©ä½ å¯ä»¥åœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®éœ€è¦ç”³è¯·å†…å­˜ï¼Œæå¤§åœ°æé«˜äº†ç¨‹åºçš„çµæ´»æ€§ã€‚\nå°ç¤ºä¾‹ (stdlib.h - å†…å­˜ç®¡ç†):\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; // å¼•å…¥é€šç”¨å·¥å…·åº“ int main() { int *arr1 = NULL; int *arr2 = NULL; int *arr3 = NULL; int original_size = 3; int new_size = 5; // calloc ç¤ºä¾‹ï¼šåˆ†é…å¹¶æ¸…é›¶ä¸€ä¸ªæ•´æ•°æ•°ç»„ printf(\u0026#34;ä½¿ç”¨ calloc åˆ†é… %d ä¸ªæ•´æ•°å¹¶æ¸…é›¶...\\n\u0026#34;, original_size); arr1 = (int*)calloc(original_size, sizeof(int)); if (arr1 == NULL) { fprintf(stderr, \u0026#34;calloc åˆ†é…å¤±è´¥ï¼\\n\u0026#34;); return 1; } printf(\u0026#34;arr1 (calloced) åˆå§‹å€¼: \u0026#34;); for (int i = 0; i \u0026lt; original_size; i++) { printf(\u0026#34;%d \u0026#34;, arr1[i]); // åº”è¯¥éƒ½æ˜¯ 0 } printf(\u0026#34;\\n\u0026#34;); // malloc ç¤ºä¾‹ï¼šåˆ†é…ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼ˆå†…å®¹ä¸ç¡®å®šï¼‰ printf(\u0026#34;ä½¿ç”¨ malloc åˆ†é… %d ä¸ªæ•´æ•°...\\n\u0026#34;, original_size); arr2 = (int*)malloc(original_size * sizeof(int)); if (arr2 == NULL) { fprintf(stderr, \u0026#34;malloc åˆ†é…å¤±è´¥ï¼\\n\u0026#34;); // åœ¨è¿™é‡Œä¹Ÿåº”è¯¥é‡Šæ”¾ arr1ï¼Œè™½ç„¶æœ¬ä¾‹åé¢ä¼šé›†ä¸­é‡Šæ”¾ free(arr1); return 1; } printf(\u0026#34;arr2 (malloced) åˆå§‹å€¼ (ä¸ç¡®å®š): \u0026#34;); for (int i = 0; i \u0026lt; original_size; i++) { // æ‰“å° malloc åˆ†é…çš„å†…å­˜å†…å®¹ï¼Œé€šå¸¸æ˜¯åƒåœ¾å€¼ printf(\u0026#34;%d \u0026#34;, arr2[i]); // ä¸ºäº†åç»­ realloc ç¤ºä¾‹ï¼Œç»™ arr2 èµ‹å€¼ arr2[i] = (i + 1) * 10; } printf(\u0026#34;\\n\u0026#34;); printf(\u0026#34;arr2 èµ‹å€¼å: \u0026#34;); for (int i = 0; i \u0026lt; original_size; i++) { printf(\u0026#34;%d \u0026#34;, arr2[i]); } printf(\u0026#34;\\n\u0026#34;); // realloc ç¤ºä¾‹ï¼šé‡æ–°åˆ†é… arr2 çš„å¤§å° printf(\u0026#34;ä½¿ç”¨ realloc å°† arr2 å¤§å°ä» %d è°ƒæ•´åˆ° %d ä¸ªæ•´æ•°...\\n\u0026#34;, original_size, new_size); // **é‡è¦ï¼š** å°† realloc ç»“æœèµ‹ç»™ä¸´æ—¶æŒ‡é’ˆ int *temp_ptr = (int*)realloc(arr2, new_size * sizeof(int)); if (temp_ptr == NULL) { fprintf(stderr, \u0026#34;realloc å¤±è´¥ï¼åŸå§‹ arr2 ä»ç„¶æœ‰æ•ˆï¼\\n\u0026#34;); // realloc å¤±è´¥ï¼Œarr2 æŒ‡å‘çš„å†…å­˜å—æ²¡å˜ï¼Œå†…å®¹ä¹Ÿæ²¡å˜ // ä½ ä»ç„¶å¯ä»¥ä½¿ç”¨å¹¶æœ€ç»ˆé‡Šæ”¾ arr2 // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä¸ºäº†æ¼”ç¤º freeï¼Œæˆ‘ä»¬ç›´æ¥è·³åˆ° free æ­¥éª¤ } else { printf(\u0026#34;realloc æˆåŠŸã€‚æ–° arr2 çš„å€¼ (å¯èƒ½åŒ…å«æ—§æ•°æ®): \u0026#34;); arr3 = temp_ptr; // realloc æˆåŠŸï¼Œæ›´æ–°åŸå§‹æŒ‡é’ˆ // è®¿é—®æ–°åˆ†é…çš„å†…å­˜ for (int i = 0; i \u0026lt; new_size; i++) { // å‰ original_size ä¸ªå…ƒç´ å¯èƒ½ä¿ç•™æ—§å€¼ printf(\u0026#34;%d \u0026#34;, arr3[i]); } printf(\u0026#34;\\n\u0026#34;); // æ–°å¢éƒ¨åˆ†æœªåˆå§‹åŒ–ï¼Œéœ€è¦è‡ªå·±èµ‹å€¼æˆ–å¤„ç† if (new_size \u0026gt; original_size) { printf(\u0026#34;åˆå§‹åŒ–æ–°å¢çš„ %d ä¸ªå…ƒç´ ...\\n\u0026#34;, new_size - original_size); for (int i = original_size; i \u0026lt; new_size; i++) { arr3[i] = (i + 1) * 10; } printf(\u0026#34;arr3 èµ‹å€¼å: \u0026#34;); for (int i = 0; i \u0026lt; new_size; i++) { printf(\u0026#34;%d \u0026#34;, arr3[i]); } printf(\u0026#34;\\n\u0026#34;); } } // é‡Šæ”¾æ‰€æœ‰åŠ¨æ€åˆ†é…çš„å†…å­˜ printf(\u0026#34;\\né‡Šæ”¾å†…å­˜...\\n\u0026#34;); free(arr1); printf(\u0026#34;arr1 é‡Šæ”¾æˆåŠŸã€‚\\n\u0026#34;); // realloc æˆåŠŸæ—¶ï¼Œfree åŸæ¥çš„ arr2 æ˜¯ä¸å®‰å…¨çš„ï¼Œå› ä¸º realloc å¯èƒ½å·²ç»é‡Šæ”¾äº†å®ƒã€‚ // å¦‚æœ realloc å¤±è´¥ï¼Œarr2 ä»ç„¶éœ€è¦è¢« freeã€‚ // è¿™é‡Œçš„é€»è¾‘ä¾èµ– realloc æ˜¯å¦æˆåŠŸã€‚å‡è®¾ realloc æˆåŠŸï¼Œæˆ‘ä»¬åº”è¯¥ free arr3 (å®ƒç°åœ¨æ˜¯ arr2 çš„æ–°åœ°å€) if (arr3 != NULL) { // åªæœ‰ realloc æˆåŠŸæ—¶ arr3 æ‰é NULL free(arr3); printf(\u0026#34;arr3 (åŸ arr2 çš„æ–°åœ°å€) é‡Šæ”¾æˆåŠŸã€‚\\n\u0026#34;); } else if (arr2 != NULL) { // å¦‚æœ realloc å¤±è´¥ï¼Œarr3 æ˜¯ NULLï¼Œä½† arr2 ä»éœ€é‡Šæ”¾ free(arr2); printf(\u0026#34;arr2 é‡Šæ”¾æˆåŠŸ (realloc å¤±è´¥)ã€‚\\n\u0026#34;); } printf(\u0026#34;æ‰€æœ‰åŠ¨æ€å†…å­˜å·²é‡Šæ”¾ã€‚\\n\u0026#34;); return 0; } é‡è¦æç¤ºï¼š åŠ¨æ€å†…å­˜ç®¡ç†æ˜¯Cè¯­è¨€çš„å¼ºå¤§ä¹‹å¤„ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“å‡ºé”™çš„åœ°æ–¹ï¼ˆå†…å­˜æ³„æ¼ã€é‡æŒ‡é’ˆã€é‡å¤é‡Šæ”¾ï¼‰ã€‚åŠ¡å¿…å°å¿ƒï¼\n2. æ–‡ä»¶ I/Oï¼šä¸ç£ç›˜ä¸Šçš„æ–‡ä»¶äº¤äº’ (stdio.h) # é™¤äº†æ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œstdio.h è¿˜æä¾›äº†å¼ºå¤§çš„æ–‡ä»¶æ“ä½œåŠŸèƒ½ã€‚è¿™è®©ä½ èƒ½è¯»å–ã€å†™å…¥ã€åˆ›å»ºæ–‡ä»¶ã€‚\nFILE *fopen(const char *filename, const char *mode): æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ã€‚ filename: æ–‡ä»¶åï¼ˆåŒ…æ‹¬è·¯å¾„ï¼‰ã€‚ mode: æ‰“å¼€æ¨¡å¼å­—ç¬¦ä¸²ï¼Œå¦‚ \u0026quot;r\u0026quot; (è¯»), \u0026quot;w\u0026quot; (å†™ï¼Œè¦†ç›–åŸæœ‰å†…å®¹), \u0026quot;a\u0026quot; (è¿½åŠ ), \u0026quot;rb\u0026quot; (è¯»äºŒè¿›åˆ¶), \u0026quot;wb\u0026quot; (å†™äºŒè¿›åˆ¶), \u0026quot;ab\u0026quot; (è¿½åŠ äºŒè¿›åˆ¶), \u0026quot;r+\u0026quot; (è¯»å†™), \u0026quot;w+\u0026quot; (è¯»å†™ï¼Œè¦†ç›–), \u0026quot;a+\u0026quot; (è¯»å†™ï¼Œè¿½åŠ )ã€‚ æˆåŠŸæ—¶è¿”å›ä¸€ä¸ªæŒ‡å‘ FILE ç»“æ„çš„æŒ‡é’ˆï¼ˆæ–‡ä»¶æµï¼‰ï¼Œå¤±è´¥æ—¶è¿”å› NULLã€‚åŠ¡å¿…æ£€æŸ¥è¿”å›å€¼ï¼ int fclose(FILE *stream): å…³é—­ä¸€ä¸ªæ–‡ä»¶æµã€‚ä¼šåˆ·æ–°ç¼“å†²åŒºæ•°æ®åˆ°æ–‡ä»¶å¹¶é‡Šæ”¾ç›¸å…³çš„ç³»ç»Ÿèµ„æºã€‚æˆåŠŸæ—¶è¿”å›0ï¼Œå¤±è´¥æ—¶è¿”å› EOFã€‚ int fprintf(FILE *stream, const char *format, ...): æ ¼å¼åŒ–è¾“å‡ºåˆ°æŒ‡å®šçš„æ–‡ä»¶æµï¼Œç”¨æ³•ç±»ä¼¼ printfã€‚ int fscanf(FILE *stream, const char *format, ...): ä»æŒ‡å®šçš„æ–‡ä»¶æµä¸­æ ¼å¼åŒ–è¯»å–ï¼Œç”¨æ³•ç±»ä¼¼ scanfã€‚ int fgetc(FILE *stream): ä»æ–‡ä»¶æµä¸­è¯»å–ä¸€ä¸ªå­—ç¬¦ã€‚ int fputc(int character, FILE *stream): å‘æ–‡ä»¶æµä¸­å†™å…¥ä¸€ä¸ªå­—ç¬¦ã€‚ char *fgets(char *str, int size, FILE *stream): ä»æ–‡ä»¶æµä¸­è¯»å–ä¸€è¡Œå­—ç¬¦ä¸²ï¼ˆæœ€å¤š size-1 ä¸ªå­—ç¬¦ï¼‰ï¼Œå¹¶å­˜å‚¨åˆ° str ä¸­ã€‚å®‰å…¨å‡½æ•°ã€‚ int fputs(const char *str, FILE *stream): å‘æ–‡ä»¶æµä¸­å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚ size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream): ä»æ–‡ä»¶æµä¸­è¯»å– nmemb ä¸ªå¤§å°ä¸º size çš„æ•°æ®é¡¹åˆ° ptr æŒ‡å‘çš„ç¼“å†²åŒºã€‚å¸¸ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream): å‘æ–‡ä»¶æµä¸­å†™å…¥ nmemb ä¸ªå¤§å°ä¸º size çš„æ•°æ®é¡¹ï¼Œæ•°æ®æ¥æºäº ptr æŒ‡å‘çš„ç¼“å†²åŒºã€‚å¸¸ç”¨äºäºŒè¿›åˆ¶æ–‡ä»¶ã€‚ int fseek(FILE *stream, long offset, int origin): ç§»åŠ¨æ–‡ä»¶æµçš„è¯»å†™ä½ç½®ã€‚origin å¯ä»¥æ˜¯ SEEK_SET (æ–‡ä»¶å¼€å¤´), SEEK_CUR (å½“å‰ä½ç½®), SEEK_END (æ–‡ä»¶æœ«å°¾)ã€‚ long ftell(FILE *stream): è·å–æ–‡ä»¶æµçš„å½“å‰ä½ç½®ã€‚ å°ç¤ºä¾‹ (stdio.h - æ–‡ä»¶ I/O):\n#include \u0026lt;stdio.h\u0026gt; // å¼•å…¥æ ‡å‡†è¾“å…¥è¾“å‡ºåº“ (åŒ…å«æ–‡ä»¶ I/O) #include \u0026lt;stdlib.h\u0026gt; // ç”¨äº exit æˆ–è¿”å›éé›¶é”™è¯¯ç  int main() { FILE *file_ptr = NULL; // å£°æ˜æ–‡ä»¶æŒ‡é’ˆ // --- å†™å…¥æ–‡ä»¶ç¤ºä¾‹ --- file_ptr = fopen(\u0026#34;example.txt\u0026#34;, \u0026#34;w\u0026#34;); // ä»¥å†™å…¥æ¨¡å¼æ‰“å¼€æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å­˜åœ¨ä¼šæ¸…ç©º if (file_ptr == NULL) { perror(\u0026#34;æ‰“å¼€ example.txt ç”¨äºå†™å…¥å¤±è´¥\u0026#34;); // æ‰“å°é”™è¯¯ä¿¡æ¯ return 1; // è¿”å›é”™è¯¯ç  } fprintf(file_ptr, \u0026#34;Hello from C!\\n\u0026#34;); // å†™å…¥ä¸€è¡Œæ–‡æœ¬ fprintf(file_ptr, \u0026#34;This is the second line.\\n\u0026#34;); fputc(\u0026#39;A\u0026#39;, file_ptr); // å†™å…¥ä¸€ä¸ªå­—ç¬¦ fputc(\u0026#39;\\n\u0026#39;, file_ptr); fputs(\u0026#34;This is a line using fputs.\\n\u0026#34;, file_ptr); // å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸² if (fclose(file_ptr) == EOF) { perror(\u0026#34;å…³é—­ example.txt å¤±è´¥\u0026#34;); return 1; } printf(\u0026#34;æ•°æ®å·²å†™å…¥ example.txt\\n\u0026#34;); // --- è¯»å–æ–‡ä»¶ç¤ºä¾‹ --- file_ptr = fopen(\u0026#34;example.txt\u0026#34;, \u0026#34;r\u0026#34;); // ä»¥è¯»å–æ¨¡å¼æ‰“å¼€æ–‡ä»¶ if (file_ptr == NULL) { perror(\u0026#34;æ‰“å¼€ example.txt ç”¨äºè¯»å–å¤±è´¥\u0026#34;); return 1; } printf(\u0026#34;\\nè¯»å– example.txt çš„å†…å®¹ï¼š\\n\u0026#34;); char buffer[100]; // ä½¿ç”¨ fgets é€è¡Œè¯»å– while (fgets(buffer, sizeof(buffer), file_ptr) != NULL) { printf(\u0026#34;%s\u0026#34;, buffer); // fgets è¯»å–çš„å­—ç¬¦ä¸²åŒ…å«æ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ç›´æ¥æ‰“å° } // æ£€æŸ¥æ–‡ä»¶è¯»å–æ˜¯å¦æ˜¯å› ä¸ºåˆ°è¾¾æ–‡ä»¶æœ«å°¾ (EOF) è¿˜æ˜¯å‘ç”Ÿé”™è¯¯ if (feof(file_ptr)) { // è¯»å–ç›´åˆ°æ–‡ä»¶æœ«å°¾æ˜¯æ­£å¸¸çš„ } else if (ferror(file_ptr)) { perror(\u0026#34;è¯»å– example.txt å‘ç”Ÿé”™è¯¯\u0026#34;); fclose(file_ptr); // å‘ç”Ÿé”™è¯¯ä¹Ÿè¦å°è¯•å…³é—­æ–‡ä»¶ return 1; } if (fclose(file_ptr) == EOF) { perror(\u0026#34;å…³é—­ example.txt å¤±è´¥\u0026#34;); return 1; } printf(\u0026#34;æ–‡ä»¶è¯»å–å®Œæˆã€‚\\n\u0026#34;); // --- è¿½åŠ æ–‡ä»¶ç¤ºä¾‹ --- file_ptr = fopen(\u0026#34;example.txt\u0026#34;, \u0026#34;a\u0026#34;); // ä»¥è¿½åŠ æ¨¡å¼æ‰“å¼€æ–‡ä»¶ if (file_ptr == NULL) { perror(\u0026#34;æ‰“å¼€ example.txt ç”¨äºè¿½åŠ å¤±è´¥\u0026#34;); return 1; } fprintf(file_ptr, \u0026#34;--- Appended line at %s ---\\n\u0026#34;, __TIME__); // è¿½åŠ ä¸€è¡Œæ–‡æœ¬ï¼ŒåŒ…å«å½“å‰æ—¶é—´ if (fclose(file_ptr) == EOF) { perror(\u0026#34;å…³é—­ example.txt å¤±è´¥\u0026#34;); return 1; } printf(\u0026#34;æ•°æ®å·²è¿½åŠ åˆ° example.txt\\n\u0026#34;); return 0; // æˆåŠŸé€€å‡º } 3. æ›´å¼ºå¤§çš„å­—ç¬¦ä¸²ä¸å†…å­˜æ“ä½œï¼šstring.h \u0026amp; å†…å­˜å‡½æ•° # é™¤äº†ç¬¬ä¸€éƒ¨åˆ†ä»‹ç»çš„åŸºç¡€å‡½æ•°ï¼Œstring.h è¿˜æä¾›äº†ä¸€äº›æ“ä½œå†…å­˜å—çš„å‡½æ•°ï¼Œå®ƒä»¬ä¸å…³å¿ƒæ˜¯å¦æ˜¯nullç»ˆæ­¢çš„å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯æŒ‰å­—èŠ‚è¿›è¡Œæ“ä½œã€‚\nstrncpy(char *dest, const char *src, size_t n): å¤åˆ¶ src çš„å‰ n ä¸ªå­—ç¬¦åˆ° destã€‚æ³¨æ„ï¼š å¦‚æœ src çš„é•¿åº¦å°äº nï¼Œdest çš„å‰©ä½™éƒ¨åˆ†ä¼šç”¨é›¶å¡«å……ï¼›å¦‚æœ src çš„é•¿åº¦å¤§äºç­‰äº nï¼Œdest ä¸ä¼šè‡ªåŠ¨ä»¥nullç»ˆæ­¢ï¼Œé™¤é n æ°å¥½æ˜¯ src çš„é•¿åº¦ä¸”åŒ…å«ç»ˆæ­¢ç¬¦ã€‚ strncat(char *dest, const char *src, size_t n): å°† src çš„å‰ n ä¸ªå­—ç¬¦è¿½åŠ åˆ° dest çš„æœ«å°¾ï¼Œå¹¶åœ¨ç»“æœæœ«å°¾æ·»åŠ ä¸€ä¸ªnullç»ˆæ­¢ç¬¦ã€‚ strncmp(const char *s1, const char *s2, size_t n): æ¯”è¾ƒ s1 å’Œ s2 çš„å‰ n ä¸ªå­—ç¬¦ã€‚ strchr(const char *s, int c): åœ¨å­—ç¬¦ä¸² s ä¸­æŸ¥æ‰¾å­—ç¬¦ c ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å­—ç¬¦çš„æŒ‡é’ˆï¼Œæˆ–åœ¨æœªæ‰¾åˆ°æ—¶è¿”å› NULLã€‚ strrchr(const char *s, int c): åœ¨å­—ç¬¦ä¸² s ä¸­æŸ¥æ‰¾å­—ç¬¦ c æœ€åä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚è¿”å›ä¸€ä¸ªæŒ‡å‘è¯¥å­—ç¬¦çš„æŒ‡é’ˆï¼Œæˆ–åœ¨æœªæ‰¾åˆ°æ—¶è¿”å› NULLã€‚ memset(void *s, int c, size_t n): å°† s æŒ‡å‘çš„å†…å­˜å—çš„å‰ n ä¸ªå­—èŠ‚è®¾ç½®ä¸ºæŒ‡å®šçš„å€¼ c (ä»¥ unsigned char å½¢å¼)ã€‚å¸¸ç”¨äºæ¸…é›¶ (memset(buffer, 0, sizeof(buffer));) æˆ–åˆå§‹åŒ–ã€‚è¿”å› sã€‚ memcpy(void *dest, const void *src, size_t n): ä» src æŒ‡å‘çš„å†…å­˜åŒºåŸŸå¤åˆ¶ n ä¸ªå­—èŠ‚åˆ° dest æŒ‡å‘çš„å†…å­˜åŒºåŸŸã€‚æ³¨æ„ï¼š dest å’Œ src åŒºåŸŸä¸èƒ½é‡å ã€‚è¿”å› destã€‚ memmove(void *dest, const void *src, size_t n): åŠŸèƒ½ç±»ä¼¼ memcpyï¼Œä½†å¯ä»¥æ­£ç¡®å¤„ç† dest å’Œ src åŒºåŸŸé‡å çš„æƒ…å†µã€‚è¿”å› destã€‚ å°ç¤ºä¾‹ (string.h - æ‰©å±•):\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;string.h\u0026gt; // å¼•å…¥å­—ç¬¦ä¸²å¤„ç†åº“ int main() { char buffer[20]; char src[] = \u0026#34;Hello World\u0026#34;; char dest[20] = \u0026#34;Greeting: \u0026#34;; // strncpy ç¤ºä¾‹ (æ³¨æ„æ½œåœ¨çš„énullç»ˆæ­¢é—®é¢˜) printf(\u0026#34;ä½¿ç”¨ strncpy å¤åˆ¶å‰ 5 ä¸ªå­—ç¬¦...\\n\u0026#34;); strncpy(buffer, src, 5); // å¤åˆ¶ \u0026#34;Hello\u0026#34; buffer[5] = \u0026#39;\\0\u0026#39;; // æ‰‹åŠ¨æ·»åŠ nullç»ˆæ­¢ç¬¦ï¼Œå› ä¸º n=5 å°äº src é•¿åº¦ printf(\u0026#34;strncpy ç»“æœ: \\\u0026#34;%s\\\u0026#34;\\n\u0026#34;, buffer); // è¾“å‡º \u0026#34;Hello\u0026#34; printf(\u0026#34;ä½¿ç”¨ strncpy å¤åˆ¶å‰ 15 ä¸ªå­—ç¬¦...\\n\u0026#34;); // n=15 å¤§äº src é•¿åº¦ï¼Œbuffer ä¼šè¢« \u0026#34;Hello World\\0\u0026#34; å¡«å……ï¼Œå‰©ä½™ç©ºé—´æ¸…é›¶ strncpy(buffer, src, 15); printf(\u0026#34;strncpy ç»“æœ (n \u0026gt; strlen): \\\u0026#34;%s\\\u0026#34;\\n\u0026#34;, buffer); // è¾“å‡º \u0026#34;Hello World\u0026#34; // strncat ç¤ºä¾‹ printf(\u0026#34;\\nä½¿ç”¨ strncat è¿æ¥å‰ 5 ä¸ªå­—ç¬¦...\\n\u0026#34;); // å°† src çš„å‰ 5 ä¸ªå­—ç¬¦ \u0026#34;Hello\u0026#34; è¿½åŠ åˆ° dest \u0026#34;Greeting: \u0026#34; åé¢ strncat(dest, src, 5); printf(\u0026#34;strncat ç»“æœ: \\\u0026#34;%s\\\u0026#34;\\n\u0026#34;, dest); // è¾“å‡º \u0026#34;Greeting: Hello\u0026#34; // strchr å’Œ strrchr ç¤ºä¾‹ char path[] = \u0026#34;/home/user/document/file.txt\u0026#34;; char *first_slash = strchr(path, \u0026#39;/\u0026#39;); // æŸ¥æ‰¾ç¬¬ä¸€ä¸ª \u0026#39;/\u0026#39; char *last_dot = strrchr(path, \u0026#39;.\u0026#39;); // æŸ¥æ‰¾æœ€åä¸€ä¸ª \u0026#39;.\u0026#39; if (first_slash) { printf(\u0026#34;\\nç¬¬ä¸€ä¸ª \u0026#39;/\u0026#39; çš„ä½ç½®: %ld\\n\u0026#34;, first_slash - path); } if (last_dot) { printf(\u0026#34;æœ€åä¸€ä¸ª \u0026#39;.\u0026#39; çš„ä½ç½®: %ld\\n\u0026#34;, last_dot - path); } // memset å’Œ memcpy ç¤ºä¾‹ char data[10]; printf(\u0026#34;\\nåˆå§‹åŒ–å†…å­˜å—ä¸º \u0026#39;X\u0026#39;...\\n\u0026#34;); memset(data, \u0026#39;X\u0026#39;, sizeof(data)); // å°† data çš„æ‰€æœ‰å­—èŠ‚è®¾ç½®ä¸º \u0026#39;X\u0026#39; printf(\u0026#34;memset ç»“æœ: \u0026#34;); for(int i = 0; i \u0026lt; sizeof(data); i++) printf(\u0026#34;%c\u0026#34;, data[i]); printf(\u0026#34;\\n\u0026#34;); char source_data[] = \u0026#34;ABCDEF\u0026#34;; char destination_data[10]; printf(\u0026#34;ä½¿ç”¨ memcpy å¤åˆ¶ \\\u0026#34;%s\\\u0026#34;...\\n\u0026#34;, source_data); // å°† source_data çš„å‰ 6 ä¸ªå­—èŠ‚å¤åˆ¶åˆ° destination_data memcpy(destination_data, source_data, strlen(source_data) + 1); // +1 ä¸ºäº†å¤åˆ¶ null ç»ˆæ­¢ç¬¦ printf(\u0026#34;memcpy ç»“æœ: \\\u0026#34;%s\\\u0026#34;\\n\u0026#34;, destination_data); return 0; } 4. å…¶ä»–å®ç”¨å·¥å…·ç®±æˆå‘˜ (stdlib.h \u0026amp; errno.h) # stdlib.h ä¸­è¿˜æœ‰ä¸€äº›å…¶ä»–éå¸¸å®ç”¨çš„å‡½æ•°ã€‚åŒæ—¶ï¼Œäº†è§£å¦‚ä½•æ£€æŸ¥åº“å‡½æ•°è°ƒç”¨æ˜¯å¦æˆåŠŸä¹Ÿå¾ˆé‡è¦ï¼Œè¿™æ—¶ errno.h å°±æ´¾ä¸Šç”¨åœºäº†ã€‚\nqsort(void *base, size_t nmemb, size_t size, int (*compar)(const void *, const void *)): å¯¹æ•°ç»„è¿›è¡Œå¿«é€Ÿæ’åºã€‚ base: æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆã€‚ nmemb: æ•°ç»„å…ƒç´ çš„æ•°é‡ã€‚ size: æ¯ä¸ªå…ƒç´ çš„å­—èŠ‚å¤§å°ã€‚ compar: æŒ‡å‘ä¸€ä¸ªæ¯”è¾ƒå‡½æ•°çš„æŒ‡é’ˆï¼Œè¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªæŒ‡å‘å…ƒç´ çš„ const void * æŒ‡é’ˆï¼Œæ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ ç›¸å¯¹äºç¬¬äºŒä¸ªå…ƒç´ çš„å¤§å°å…³ç³»è¿”å›è´Ÿæ•°ã€é›¶æˆ–æ­£æ•°ã€‚ system(const char *command): æ‰§è¡Œæ“ä½œç³»ç»Ÿå‘½ä»¤ã€‚æ³¨æ„ï¼š è°ƒç”¨å¤–éƒ¨å‘½ä»¤å¯èƒ½å­˜åœ¨å®‰å…¨é£é™©ï¼Œç‰¹åˆ«æ˜¯å½“ command æ¥æºäºä¸å—ä¿¡ä»»çš„è¾“å…¥æ—¶ã€‚ getenv(const char *name): è·å–æŒ‡å®šåç§°çš„ç¯å¢ƒå˜é‡çš„å€¼ã€‚ int errno: åœ¨å‘ç”Ÿé”™è¯¯æ—¶ï¼ŒæŸäº›åº“å‡½æ•°ä¼šè®¾ç½®è¿™ä¸ªå…¨å±€å˜é‡ã€‚å®ƒçš„å€¼è¡¨ç¤ºé”™è¯¯ç±»å‹ã€‚éœ€è¦ #include \u0026lt;errno.h\u0026gt;ã€‚ void perror(const char *s): æ‰“å°ä¸€æ¡æè¿° errno å½“å‰å€¼çš„é”™è¯¯ä¿¡æ¯ï¼Œå‰é¢å¯åŠ ä¸Šè‡ªå®šä¹‰æ¶ˆæ¯ s:ã€‚ char *strerror(int errnum): è¿”å›ä¸€ä¸ªæŒ‡å‘é”™è¯¯ä¿¡æ¯å­—ç¬¦ä¸²çš„æŒ‡é’ˆï¼Œè¯¥å­—ç¬¦ä¸²æè¿°äº†é”™è¯¯å· errnum (é€šå¸¸å°±æ˜¯ errno çš„å€¼)ã€‚éœ€è¦ #include \u0026lt;string.h\u0026gt; æˆ– #include \u0026lt;errno.h\u0026gt; (C99)ã€‚ å°ç¤ºä¾‹ (stdlib.h \u0026amp; errno.h):\n#include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; // å¼•å…¥é€šç”¨å·¥å…·åº“ #include \u0026lt;string.h\u0026gt; // ç”¨äº strerror (C99+ ä¹Ÿå¯ç”¨ errno.h) #include \u0026lt;errno.h\u0026gt; // å¼•å…¥é”™è¯¯ç åº“ // qsort éœ€è¦çš„æ¯”è¾ƒå‡½æ•° int compare_integers(const void *a, const void *b) { int arg1 = *(const int*)a; int arg2 = *(const int*)b; // å¦‚æœ arg1 \u0026lt; arg2 è¿”å›è´Ÿæ•° // å¦‚æœ arg1 == arg2 è¿”å› 0 // å¦‚æœ arg1 \u0026gt; arg2 è¿”å›æ­£æ•° // (arg1 \u0026gt; arg2) - (arg1 \u0026lt; arg2) æ˜¯ä¸€ä¸ªç®€æ´çš„å®ç° return (arg1 \u0026gt; arg2) - (arg1 \u0026lt; arg2); // ä¹Ÿå¯ä»¥ç›´æ¥ return arg1 - arg2; ä½†éœ€è¦æ³¨æ„æ•´æ•°æº¢å‡ºé£é™©ï¼Œä¸è¿‡å¯¹äºä¸€èˆ¬ int èŒƒå›´é€šå¸¸æ²¡é—®é¢˜ } int main() { // qsort ç¤ºä¾‹ int numbers[] = {5, 2, 8, 1, 9, 4}; int count = sizeof(numbers) / sizeof(numbers[0]); printf(\u0026#34;æ’åºå‰: \u0026#34;); for (int i = 0; i \u0026lt; count; i++) { printf(\u0026#34;%d \u0026#34;, numbers[i]); } printf(\u0026#34;\\n\u0026#34;); // å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’åº qsort(numbers, count, sizeof(int), compare_integers); printf(\u0026#34;æ’åºå: \u0026#34;); for (int i = 0; i \u0026lt; count; i++) { printf(\u0026#34;%d \u0026#34;, numbers[i]); } printf(\u0026#34;\\n\u0026#34;); // system ç¤ºä¾‹ (å–å†³äºæ“ä½œç³»ç»Ÿ) printf(\u0026#34;\\næ‰§è¡Œç³»ç»Ÿå‘½ä»¤ \u0026#39;ls\u0026#39; (æˆ– \u0026#39;dir\u0026#39; on Windows)...\\n\u0026#34;); // int status = system(\u0026#34;ls\u0026#34;); // Linux/macOS int status = system(\u0026#34;dir\u0026#34;); // Windows if (status == -1) { perror(\u0026#34;æ‰§è¡Œç³»ç»Ÿå‘½ä»¤å¤±è´¥\u0026#34;); } else { printf(\u0026#34;ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œå®Œæ¯•ï¼Œè¿”å›çŠ¶æ€ç : %d\\n\u0026#34;, status); } // getenv ç¤ºä¾‹ (è·å–PATHç¯å¢ƒå˜é‡çš„å€¼) char *path_env = getenv(\u0026#34;PATH\u0026#34;); // æˆ– \u0026#34;Path\u0026#34; on Windows if (path_env) { printf(\u0026#34;\\nPATH ç¯å¢ƒå˜é‡çš„å€¼æ˜¯:\\n%s\\n\u0026#34;, path_env); } else { printf(\u0026#34;\\næœªæ‰¾åˆ° PATH ç¯å¢ƒå˜é‡ã€‚\\n\u0026#34;); } // errno å’Œ perror/strerror ç¤ºä¾‹ (æ¼”ç¤ºæ–‡ä»¶æ‰“å¼€å¤±è´¥) FILE *non_existent_file = fopen(\u0026#34;non_existent_file.txt\u0026#34;, \u0026#34;r\u0026#34;); if (non_existent_file == NULL) { printf(\u0026#34;\\nå°è¯•æ‰“å¼€ä¸å­˜åœ¨çš„æ–‡ä»¶å¤±è´¥ã€‚\\n\u0026#34;); printf(\u0026#34;errno çš„å€¼æ˜¯: %d\\n\u0026#34;, errno); // æ‰“å°é”™è¯¯ç  perror(\u0026#34;é™„åŠ ä¿¡æ¯ï¼š\u0026#34;); // æ‰“å°åŸºäº errno çš„ç³»ç»Ÿé”™è¯¯ä¿¡æ¯ï¼Œå‰é¢åŠ  \u0026#34;é™„åŠ ä¿¡æ¯ï¼š\u0026#34; printf(\u0026#34;strerror æè¿°ï¼š%s\\n\u0026#34;, strerror(errno)); // æ‰“å°åŸºäº errno çš„é”™è¯¯å­—ç¬¦ä¸² } else { printf(\u0026#34;æ„å¤–ï¼šæˆåŠŸæ‰“å¼€äº† non_existent_file.txt\\n\u0026#34;); fclose(non_existent_file); } return 0; } ç»“è¯­ # è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»æ¢ç´¢äº†Cè¯­è¨€æ ‡å‡†åº“ä¸­å¤§é‡å¸¸ç”¨ä¸”å¼ºå¤§çš„å‡½æ•°ï¼ŒåŒ…æ‹¬åŸºç¡€I/Oã€å­—ç¬¦ä¸²å¤„ç†ã€æ•°å­¦è®¡ç®—ã€åŠ¨æ€å†…å­˜ç®¡ç†ã€æ–‡ä»¶æ“ä½œä»¥åŠä¸€äº›é€šç”¨çš„å®ç”¨å·¥å…·ã€‚\næ ‡å‡†åº“æ˜¯Cç¨‹åºå‘˜çš„å®åº“ã€‚ç†è§£å¹¶ç†Ÿç»ƒä½¿ç”¨è¿™äº›å‡½æ•°ï¼Œå°†æå¤§åœ°æå‡ä½ çš„ç¼–ç¨‹æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚è¯·è®°ä½ï¼ŒæŸ¥é˜…å®˜æ–¹æ–‡æ¡£æ˜¯å­¦ä¹ æ ‡å‡†åº“çš„æœ€ä½³æ–¹å¼ï¼Œå®ƒå¯ä»¥æä¾›å‡½æ•°æœ€å‡†ç¡®ã€æœ€è¯¦ç»†çš„è¯´æ˜ã€‚\nå¸Œæœ›è¿™ä¸ªç³»åˆ—çš„æ–‡ç« èƒ½ä¸ºä½ æ‰“å¼€Cè¯­è¨€æ ‡å‡†åº“çš„å¤§é—¨ï¼Œè®©ä½ æ›´æœ‰ä¿¡å¿ƒå»ç¼–å†™æ›´å¤æ‚ã€æ›´å¼ºå¤§çš„Cç¨‹åºï¼\nå¤šåŠ¨æ‰‹å®è·µï¼Œä¸æ–­å°è¯•ï¼Œä½ ä¼šåœ¨Cè¯­è¨€çš„ä¸–ç•Œé‡Œè¶Šèµ°è¶Šè¿œï¼\nä¸‹æ¬¡è§ï¼ ğŸ‘‹\n","date":"2025-05-14","externalUrl":null,"permalink":"/posts/learn-c/c%E8%AF%AD%E8%A8%80%E7%9A%84%E7%A7%98%E5%AF%86%E6%AD%A6%E5%99%A8%E9%82%A3%E4%BA%9B%E4%BD%A0%E5%BF%85%E9%A1%BB%E7%9F%A5%E9%81%93%E7%9A%84%E6%A0%87%E5%87%86%E5%BA%93%E5%87%BD%E6%95%B02%E9%99%84%E7%A4%BA%E4%BE%8B/","section":"Posts","summary":"","title":"Cè¯­è¨€çš„ç§˜å¯†æ­¦å™¨ï¼šé‚£äº›ä½ å¿…é¡»çŸ¥é“çš„æ ‡å‡†åº“å‡½æ•°(2)(é™„ç¤ºä¾‹)","type":"posts"},{"content":"ELS:ä¿„ç½—æ–¯æ–¹å—ï¼Œæ·»åŠ ç‚¸å¼¹ã€‚\næºä»£ç :\nç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç \nç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç \n","date":"2025-04-11","externalUrl":null,"permalink":"/posts/hp-calc/els2021/","section":"Posts","summary":"ä¿„ç½—æ–¯æ–¹å—æ¸¸æˆï¼Œæ·»åŠ ç‚¸å¼¹","title":"HP39GIIæ¸¸æˆ-ä¿„ç½—æ–¯æ–¹å— ELS2021","type":"posts"},{"content":"","date":"2025-04-11","externalUrl":null,"permalink":"/category/codewars/","section":"Category","summary":"","title":"Codewars","type":"category"},{"content":" é¢˜ç›®1: # é¢˜ç›® ä½ çš„ä»»åŠ¡æ˜¯åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥å—ä¸€ä¸ªæ•´æ•°å¹¶è¿”å›è¯¥æ•´æ•°çš„â€œè§‚æµ‹-æè¿°â€å‡½æ•°çš„ç»“æœã€‚è¿™åº”è¯¥æ˜¯ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå®ƒæ¥å—ä»»ä½•æ­£æ•´æ•°ä½œä¸ºè¾“å…¥å¹¶è¿”å›ä¸€ä¸ªæ•´æ•°ï¼›è¾“å…¥ä¸é™äºä»¥â€œ1â€å¼€å¤´çš„åºåˆ—ã€‚\nåº·å¨çš„â€œè§‚æµ‹-æè¿°â€åºåˆ—æ˜¯è¿™æ ·çš„ï¼š\nä»ä¸€ä¸ªæ•°å­—å¼€å§‹ã€‚ è§‚å¯Ÿè¿™ä¸ªæ•°å­—ï¼Œå¹¶å°†è¿ç»­çš„æ•°å­—åˆ†ç»„ã€‚ å¯¹äºæ¯ä¸ªæ•°å­—ç»„ï¼Œæè¿°_æ•°å­—çš„ä¸ªæ•°ï¼Œç„¶åæ˜¯æ•°å­—æœ¬èº«ã€‚ è¿™å¯ä»¥é‡å¤åº”ç”¨äºå…¶ç»“æœä»¥ç”Ÿæˆåºåˆ—ã€‚\nä¾‹å¦‚ï¼š\nä»Â 1Â å¼€å§‹ã€‚ æœ‰ä¸€ä¸ªÂ 1Â \u0026ndash;\u0026gt;Â 11 ä»Â 11Â å¼€å§‹ã€‚æœ‰ä¸¤ä¸ªÂ 1Â æ•°å­— \u0026ndash;\u0026gt;Â 21 ä»Â 21Â å¼€å§‹ã€‚æœ‰ä¸€ä¸ªÂ 2Â å’Œä¸€ä¸ªÂ 1Â \u0026ndash;\u0026gt;Â 1211 ä»Â 1211Â å¼€å§‹ã€‚æœ‰ä¸€ä¸ªÂ 1ï¼Œä¸€ä¸ªÂ 2ï¼Œå’Œä¸¤ä¸ªÂ 1Â \u0026ndash;\u0026gt;Â 111221 ç¤ºä¾‹è¾“å…¥å’Œè¾“å‡ºï¼š\n0Â \u0026ndash;\u0026gt;Â 10 2014Â \u0026ndash;\u0026gt;Â 12101114 9000Â \u0026ndash;\u0026gt;Â 1930 22322Â \u0026ndash;\u0026gt;Â 221322 222222222222Â \u0026ndash;\u0026gt;Â 122 æˆ‘çš„è§£ç­”:\n#include \u0026lt;string.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; typedef unsigned long long ullong; int toal(char *n_str, int len, int i){ int sum = 0; for(int j = i; j\u0026lt;len; j++){ if(n_str[j] == n_str[i]) sum++; else break; } return sum; } ullong look_say (ullong n) { char str[64], out_str[64]; sprintf(str, \u0026#34;%llu\u0026#34;, n); int len = strlen(str); int i = 0; while(i \u0026lt; len){ int i_toal = toal(str, len, i); sprintf(out_str, \u0026#34;%s%d%c\u0026#34;, out_str, toal(str, len, i), str[i]); i += i_toal; } ullong out = strtoull(out_str, NULL, 10); return out; } ","date":"2025-04-11","externalUrl":null,"permalink":"/posts/codewars-e5/","section":"Posts","summary":"","title":"codewars-e5","type":"posts"},{"content":" é¢˜ç›®1 : # Write an algorithm that takes an array and moves all of the zeros to the end, preserving the order of the other elements.\nmove_zeros(10, int [] {1, 2, 0, 1, 0, 1, 0, 3, 0, 1}); // -\u0026gt; int [] {1, 2, 1, 1, 3, 1, 0, 0, 0, 0} æˆ‘çš„è§£ç­”ï¼š\n#include \u0026lt;stddef.h\u0026gt; void move_zeros(size_t len, int arr[len]) { size_t pl = 0, pr = -1; while (++pr \u0026lt; len) if (arr[pr] != 0) arr[pl++] = arr[pr]; while (pl \u0026lt; len) arr[pl++] = 0; } é¢˜ç›®2ï¼š # èµ°è¿·å®«\nç¬”è®° è¿·å®«æ•°ç»„å°†å¦‚ä¸‹æ‰€ç¤º\nmaze = [[1,1,1,1,1,1,1], [1,0,0,0,0,0,3], [1,0,1,0,1,0,1], [0,0,1,0,0,0,1], [1,0,1,0,1,0,1], [1,0,0,0,0,0,1], [1,2,1,0,1,0,1]] ..ä»¥åŠä»¥ä¸‹é”®å€¼\n0 = å®‰å…¨é€šè¡ŒåŒºåŸŸ 1 = å¢™å£ 2 = èµ·ç‚¹ 3 = ç»ˆç‚¹ directions = \u0026ldquo;NNNNNEEEEE\u0026rdquo; == \u0026ldquo;Finish\u0026rdquo; // (directions passed as a string)\næˆ‘çš„è§£ç­”ï¼š\n#include \u0026lt;stddef.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; char *maze_runner(const int *maze, size_t n, const char *directions) { if (maze == NULL || directions == NULL || n == 0) { return \u0026#34;Dead\u0026#34;; } int x = 0, y = 0; int found = 0; for (int i = 0; i \u0026lt; n; i++) { for (int j = 0; j \u0026lt; n; j++) { if (*(maze + j * n + i) == 2) { x = i; y = j; found = 1; break; } } if (found) { break; } } if (!found) { return \u0026#34;Dead\u0026#34;; } const char* ptr = directions; while (*ptr != \u0026#39;\\0\u0026#39;) { switch (*ptr) { case \u0026#39;N\u0026#39;: y--; break; case \u0026#39;S\u0026#39;: y++; break; case \u0026#39;W\u0026#39;: x--; break; case \u0026#39;E\u0026#39;: x++; break; default: return \u0026#34;Dead\u0026#34;; } // è¾¹ç•Œæ£€æŸ¥ if (x \u0026lt; 0 || x \u0026gt;= n || y \u0026lt; 0 || y \u0026gt;= n) { return \u0026#34;Dead\u0026#34;; } int cell_value = *(maze + y * n + x); if (cell_value == 1) { return \u0026#34;Dead\u0026#34;; } else if (cell_value == 3) { return \u0026#34;Finish\u0026#34;; } ptr++; } return \u0026#34;Lost\u0026#34;; } ä¸€ä¸ªç®€æ´çš„è§£ç­” å¯¹äºå­—ç¬¦ä¸² å¯ä»¥ç›´æ¥ä½¿ç”¨å­—ç¬¦æœ¬èº«æ˜¯å¦æœ‰æ•ˆåˆ¤æ–­å…¶æ˜¯å¦ç»“æŸ è¿™ä¸ªè§£ç­”ä½¿ç”¨äº†directions[i] ä½œä¸ºforçš„å¾ªç¯åˆ¤æ–­\nå¯¹äºè¿™ä¸ªå¾ªç¯ç»“æ„ç»ˆæ­¢çš„åˆ¤æ–­æœ‰ä¸¤ç§å†™æ³•ï¼Œå¾ªç¯ç¬¬ä¸€æ¬¡æ‰§è¡Œæ—¶ï¼Œåˆå€¼éƒ½æ˜¯directions\n\\[1\\] for for (size_t i = 0; directions[i]; i++) { //... } whileï¼šè¿™ä¸ªæ›´ç®€æ´ while (directions) { //... directions++ } #include \u0026lt;stddef.h\u0026gt; #include \u0026lt;iso646.h\u0026gt; #define NORTH \u0026#39;N\u0026#39; #define SOUTH \u0026#39;S\u0026#39; #define EAST \u0026#39;E\u0026#39; #define WEST \u0026#39;W\u0026#39; #define START 2 #define WALL 1 #define FINISH 3 char *maze_runner(const int *maze, size_t n, const char *directions) { size_t x, y; for (size_t i = 0; i \u0026lt; n; i++){ for (size_t j = 0; j \u0026lt; n; j++) if (maze[i * n + j] == START){ x = j; y = i; } } for (size_t i = 0; directions[i]; i++){ x += (directions[i] == EAST) - (directions[i] == WEST); y += (directions[i] == SOUTH) - (directions[i] == NORTH); if (maze[y * n + x] == WALL or x \u0026gt;= n or y \u0026gt;= n) return \u0026#34;Dead\u0026#34;; if (maze[y * n + x] == FINISH) return \u0026#34;Finish\u0026#34;; } return \u0026#34;Lost\u0026#34;; } ","date":"2025-04-09","externalUrl":null,"permalink":"/posts/codewars-e4/","section":"Posts","summary":"","title":"codewars-e4","type":"posts"},{"content":"","date":"2025-04-04","externalUrl":null,"permalink":"/tags/lubancat3/","section":"Tags","summary":"","title":"Lubancat3","type":"tags"},{"content":"é¦–å…ˆæ˜¯æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ manifestsé…ç½®\nåœ¨Ubuntu LTSä¸‹å®‰è£…SDKæ„å»ºæ‰€éœ€è¦çš„è½¯ä»¶åŒ… æˆ‘æ˜¯åœ¨wsl2-debainç¯å¢ƒä¸‹åŒæ ·å¯ä»¥ # å®‰è£…SDKæ„å»ºæ‰€éœ€è¦çš„è½¯ä»¶åŒ… sudo apt install git ssh make gcc libssl-dev liblz4-tool u-boot-tools curl \\ expect g++ patchelf chrpath gawk texinfo chrpath diffstat binfmt-support \\ qemu-user-static live-build bison flex fakeroot cmake gcc-multilib g++-multilib \\ unzip device-tree-compiler python-pip libncurses5-dev python3-pyelftools \\ dpkg-dev # éªŒè¯å®‰è£… repo --version å®‰è£…repo mkdir ~/bin curl https://storage.googleapis.com/git-repo-downloads/repo \u0026gt; ~/bin/repo # å¦‚æœä¸Šé¢çš„åœ°å€æ— æ³•è®¿é—®ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„ï¼š # curl -sSL \u0026#39;https://gerrit-googlesource.proxy.ustclug.org/git-repo/+/master/repo?format=TEXT\u0026#39; |base64 -d \u0026gt; ~/bin/repo chmod a+x ~/bin/repo echo PATH=~/bin:$PATH \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc ä¿è¯pythonç‰ˆæœ¬3 #æŸ¥çœ‹å½“å‰ç³»ç»Ÿå®‰è£…çš„Pythonç‰ˆæœ¬æœ‰å“ªäº› ls /usr/bin/python* #å°†pythoné“¾æ¥åˆ°python3 sudo ln -sf /usr/bin/python3 /usr/bin/python #é‡æ–°æŸ¥çœ‹é»˜è®¤Pythonç‰ˆæœ¬ python -V æ‹‰å–é€šç”¨SDK RK3576åªèƒ½ä½¿ç”¨é€šç”¨SDK repo --trace init --depth=1 -u https://github.com/LubanCat/manifests.git -b linux -m lubancat_linux_generic.xml githubæ‹‰å–å¾ˆæ…¢ï¼Œå¯ä»¥ä½¿ç”¨ç½‘ç›˜ä¸‹è½½ 4Gå·¦å³å¤§å° [[https://doc.embedfire.com/linux/rk356x/quick_start/zh/latest/quick_start/baidu_cloud/baidu_cloud.html#id1 | ç™¾åº¦äº‘é•œåƒ]]\n# å®‰è£…tarå‹ç¼©å·¥å…·,ä¸€èˆ¬æ¥è¯´ç³»ç»Ÿé»˜è®¤å®‰è£…äº† sudo apt install tar # åœ¨ç”¨æˆ·å®¶ç›®å½•åˆ›å»ºLubanCat_SDKç›®å½• mkdir ~/LubanCat_SDK # å°†ä¸‹è½½çš„SDKæºç ç§»åŠ¨åˆ°LubanCat_SDKç›®å½•ä¸‹ï¼Œxxxä¸ºæ—¥æœŸ mv LubanCat_Linux_Generic_SDK_xxx.tgz ~/LubanCat_SDK # è¿›å…¥LubanCat_SDKç›®å½• cd ~/LubanCat_SDK # è§£å‹SDKå‹ç¼©åŒ… tar -xvf LubanCat_Linux_Generic_SDK_xxx.tgz æ›´æ–°åŒæ­¥ä»£ç  # æ£€å‡º.repoç›®å½•ä¸‹çš„gitä»“åº“ .repo/repo/repo sync -l # å°†æ‰€æœ‰çš„æºç ä»“åº“åŒæ­¥åˆ°æœ€æ–°ç‰ˆæœ¬ .repo/repo/repo sync -c # è¿›å…¥kernel-6.10ç›®å½•ä¸‹ cd kernel-6.1 # æ£€å‡ºåˆ°å½“å‰æäº¤æ‰€åœ¨çš„åˆ†æ”¯ git checkout lbc-develop-6.1 # æ‹‰å–gitä»“åº“ git pull é…ç½®å†…æ ¸ # Lubancat_SDK ç›®å½•ä¸‹ # ä½¿ç”¨./build.sh config å‘½ä»¤æ¥ä¿®æ”¹SDKé…ç½® ./build.sh config #ä½¿ç”¨./build.sh kernel-configæˆ–./build.sh kconfigå¯ä»¥ç›´æ¥æ‰“å¼€å†…æ ¸é…ç½®ç•Œé¢ ./build.sh kernel-config Networking \u0026mdash;\u0026gt;Â (è¿›å…¥ç½‘ç»œé€‰é¡¹)\nNetworking options \u0026mdash;\u0026gt;Â (è¿›å…¥ç½‘ç»œé€‰é¡¹çš„å­èœå•)\nNetwork packet filtering (netfilter) \u0026mdash;\u0026gt;Â (è¿™æ˜¯ IPTABLES çš„æ ¸å¿ƒ)\nCore Netfilter Configuration \u0026mdash;\u0026gt;Â (å‡€è¿‡æ»¤å™¨æ ¸å¿ƒé…ç½®) Netfilter Xtables support (required for ip_tables):Â é€‰æ‹©ä¸ºÂ *Â (ç¼–è¯‘è¿›å†…æ ¸)ã€‚è¿™ä¸ªæ˜¯ IPTABLES çš„æ ¸å¿ƒæ”¯æŒï¼Œå¿…é¡»ç¼–è¯‘è¿›å»ã€‚ Networking \u0026mdash;\u0026gt;\nNetworking options \u0026mdash;\u0026gt;\nNetwork packet filtering (replaces ipchains) \u0026mdash;\u0026gt;\nIP: Netfilter configuration \u0026mdash;\u0026gt;Â (IP å‡€è¿‡æ»¤å™¨é…ç½®ï¼Œè¿™é‡Œæœ‰å¤§é‡ IP ç›¸å…³çš„ IPTABLES æ¨¡å—) IP Tables supportï¼šé€‰æ‹©Â *Â (ç¼–è¯‘è¿›å†…æ ¸)æ¥æä¾›åŸºæœ¬çš„ IP è¡¨æ”¯æŒã€‚ æ„å»º # LubanCat_SDKç›®å½•ä¸‹ # æ„å»ºä¸ºdebåŒ… ./build.sh kerneldeb ## æç¤º:ç¼–è¯‘è¿‡ç¨‹æŠ¥é”™å¯èƒ½éœ€è¦çš„åŒ… sudo apt install bc å¦‚æœæ²¡æœ‰æ„å»ºæˆåŠŸå°±å»æ£€æŸ¥èŠ¯ç‰‡ç‰ˆæœ¬ã€æ„å»ºé…ç½®æœ‰æ²¡æœ‰é€‰é”™ æ„å»ºæˆåŠŸåä¼šæç¤ºå¦‚ä¸‹ï¼š\nç”Ÿæˆ4ä¸ªdebæ–‡ä»¶ï¼š linux-headers-6.1.99-rk3576_6.1.99-rk3576-4_arm64.deb linux-image-6.1.99-rk3576_6.1.99-rk3576-4_arm64.deb linux-image-6.1.99-rk3576-dbg_6.1.99-rk3576-4_arm64.deb linux-libc-dev_6.1.99-rk3576-4_arm64.deb Gemini 2.5 Proç»™å‡ºçš„è§£é‡Šå¦‚ä¸‹ï¼š\nlinux-image-6.1.99-rk3576_6.1.99-rk3576-4_arm64.deb\næ ¸å¿ƒçš„ Linux å†…æ ¸æ˜ åƒåŒ…ã€‚ ç”¨é€”ï¼šÂ å®‰è£…è¿™ä¸ªåŒ…å°±æ˜¯å®‰è£…è¯¥ç‰¹å®šç‰ˆæœ¬çš„ Linux å†…æ ¸æœ¬èº«ã€‚è¿™æ˜¯è®©ç³»ç»Ÿèƒ½å¤Ÿä½¿ç”¨è¿™ä¸ªå†…æ ¸ç‰ˆæœ¬å¯åŠ¨æ‰€å¿…éœ€çš„åŒ…ã€‚ä½ ä¹‹å‰å®‰è£…çš„å°±æ˜¯è¿™ä¸ªã€‚ linux-headers-6.1.99-rk3576_6.1.99-rk3576-4_arm64.deb\nLinux å†…æ ¸å¤´æ–‡ä»¶åŒ…ã€‚ å†…å®¹ï¼šÂ åŒ…å«ä¸Â 6.1.99-rk3576Â å†…æ ¸ç‰ˆæœ¬ç›¸åŒ¹é…çš„ C è¯­è¨€å¤´æ–‡ä»¶ (.hÂ æ–‡ä»¶) å’Œç¼–è¯‘å†…æ ¸æ¨¡å—æ‰€éœ€çš„æ„å»ºå·¥å…·é“¾æ–‡ä»¶ï¼ˆå¦‚ Makefilesï¼‰ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å®‰è£…åœ¨Â /usr/src/linux-headers-6.1.99-rk3576/Â ç›®å½•ä¸‹ã€‚ ç”¨é€”ï¼šÂ ä¸»è¦ç”¨äºç¼–è¯‘å¤–éƒ¨å†…æ ¸æ¨¡å—ã€‚å¦‚æœä½ éœ€è¦å®‰è£…æˆ–ç¼–è¯‘ä¸åŒ…å«åœ¨ä¸»å†…æ ¸æ ‘ä¸­çš„é©±åŠ¨ç¨‹åºï¼ˆä¾‹å¦‚ï¼ŒæŸäº›ç‰¹å®šçš„ WiFi é©±åŠ¨ã€è™šæ‹ŸåŒ–è½¯ä»¶çš„å†…æ ¸æ¨¡å—å¦‚ VirtualBox guest additionsï¼Œæˆ–è€…ä½ è‡ªå·±å¼€å‘çš„é©±åŠ¨ï¼‰ï¼Œä½ å°±éœ€è¦å®‰è£…ä¸å½“å‰è¿è¡Œå†…æ ¸ç‰ˆæœ¬åŒ¹é…çš„å¤´æ–‡ä»¶åŒ…ã€‚æ™®é€šç”¨æˆ·å¦‚æœåªæ˜¯ä½¿ç”¨ç³»ç»Ÿï¼Œé€šå¸¸ä¸éœ€è¦å®‰è£…è¿™ä¸ªåŒ…ã€‚ linux-image-6.1.99-rk3576-dbg_6.1.99-rk3576-4_arm64.deb\nè¿™æ˜¯ Linux å†…æ ¸æ˜ åƒçš„è°ƒè¯•ç¬¦å·åŒ… (Debug Symbols)ã€‚ å†…å®¹ï¼šÂ åŒ…å«å¸¦æœ‰å®Œæ•´è°ƒè¯•ä¿¡æ¯çš„å†…æ ¸æ˜ åƒæ–‡ä»¶ã€‚è¿™æ„å‘³ç€å†…æ ¸ç¼–è¯‘æ—¶æ²¡æœ‰å»é™¤ï¼ˆstripï¼‰ç¬¦å·è¡¨ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥ä½¿ç”¨è°ƒè¯•å™¨ï¼ˆå¦‚Â gdb,Â kgdb,Â crashï¼‰æ¥åˆ†æå†…æ ¸å´©æºƒï¼ˆpanicï¼‰è½¬å‚¨ï¼ˆdumpï¼‰ã€è®¾ç½®æ–­ç‚¹ã€æŸ¥çœ‹å˜é‡å€¼ç­‰ã€‚è¿™ä¸ªåŒ…é€šå¸¸éå¸¸å¤§ã€‚ ç”¨é€”ï¼šÂ ä»…ç”¨äºå†…æ ¸å¼€å‘å’Œæ·±åº¦è°ƒè¯•ã€‚æ™®é€šç”¨æˆ·ç»å¯¹ä¸éœ€è¦å®‰è£…è¿™ä¸ªåŒ…ã€‚å®‰è£…å®ƒä¼šå ç”¨å¤§é‡ç£ç›˜ç©ºé—´ã€‚ linux-libc-dev_6.1.99-rk3576-4_arm64.deb\nè¿™æ˜¯ Linux ç”¨æˆ·ç©ºé—´ API å¤´æ–‡ä»¶åŒ… (Linux Userland API Headers)ã€‚ å†…å®¹ï¼šÂ åŒ…å«ä» Linux å†…æ ¸æºä»£ç ä¸­æå–å‡ºæ¥ã€ä¾›ç”¨æˆ·ç©ºé—´ç¨‹åºä½¿ç”¨çš„å¤´æ–‡ä»¶ã€‚è¿™äº›å¤´æ–‡ä»¶å®šä¹‰äº†å†…æ ¸æä¾›çš„ç³»ç»Ÿè°ƒç”¨æ¥å£ã€æ•°æ®ç»“æ„ï¼ˆå¦‚ç”¨äºÂ ioctlÂ çš„ç»“æ„ï¼‰ã€å¸¸é‡ç­‰ã€‚å®ƒä»¬æ˜¯ç¼–è¯‘æ ‡å‡† C åº“ï¼ˆå¦‚ glibcï¼‰å’Œå‡ ä¹æ‰€æœ‰éœ€è¦ä¸å†…æ ¸ç›´æ¥äº¤äº’ï¼ˆé€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼‰çš„ç”¨æˆ·ç©ºé—´ç¨‹åºæ‰€å¿…éœ€çš„ã€‚è¿™äº›æ–‡ä»¶é€šå¸¸å®‰è£…åœ¨Â /usr/include/linux/Â å’ŒÂ /usr/include/asm/Â ç­‰ç›®å½•ä¸‹ã€‚ ç”¨é€”ï¼šÂ ç”¨äºç¼–è¯‘ç”¨æˆ·ç©ºé—´çš„åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯è¿›è¡Œä»»ä½• C/C++ å¼€å‘çš„åŸºç¡€åŒ…ä¹‹ä¸€ï¼Œé€šå¸¸ä½œä¸ºÂ build-essentialÂ æˆ–Â libc6-devÂ åŒ…çš„ä¾èµ–è¢«å®‰è£…ã€‚è™½ç„¶ç‰ˆæœ¬å·ä¸å†…æ ¸ç›¸å…³ï¼ˆå› ä¸ºå®ƒå®šä¹‰äº†è¯¥å†…æ ¸ç‰ˆæœ¬æä¾›çš„ APIï¼‰ï¼Œä½†å®ƒæœåŠ¡äºç”¨æˆ·ç©ºé—´å¼€å‘ï¼Œè€Œä¸æ˜¯å†…æ ¸æ¨¡å—å¼€å‘ã€‚ æ€»ç»“ï¼š\nlinux-image:Â å¿…éœ€çš„ï¼Œæ˜¯å†…æ ¸æœ¬èº«ã€‚ linux-headers: ç¼–è¯‘å†…æ ¸æ¨¡å—æ—¶éœ€è¦ã€‚ linux-image-dbg:Â å†…æ ¸è°ƒè¯•æ—¶éœ€è¦ï¼Œæ™®é€šç”¨æˆ·ä¸éœ€è¦ã€‚ linux-libc-dev: ç¼–è¯‘ç”¨æˆ·ç©ºé—´ç¨‹åºæ—¶éœ€è¦ï¼Œæ˜¯åŸºç¡€å¼€å‘åŒ…ã€‚ å®‰è£… ä¸Šä¼ ç»™é²ç­çŒ«3ç”¨aptå®‰è£…å³å¯ï¼Œ/bootåˆ†åŒºç©ºé—´è‹¥ä¸å¤Ÿï¼Œå¯ä»¥å…ˆç”¨apt remove å¸è½½æ—§çš„å†…æ ¸ sudo apt update # æ›´æ–°å…¨éƒ¨è¦æ›´æ–°çš„è½¯ä»¶åŒ… sudo apt upgrade #æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬ uname -a sudo apt-get install -y sudo apt install linux-image-6.1.xxx-rk3576 sudo apt install linux-headers-6.1.xxx-rk3576 å®‰è£…åå¯ç”¨uname -aæŸ¥çœ‹å†…æ ¸ç¼–è¯‘æ—¶é—´\nLinux lubancat 6.1.99-rk3576 #4 SMP Fri Apr 4 20:58:21 CST 2025 aarch64 GNU/Linux\nå‚è€ƒ:å®˜æ–¹æ–‡æ¡£.8.Linuxå†…æ ¸çš„ç¼–è¯‘ manifests\n","date":"2025-04-04","externalUrl":null,"permalink":"/posts/%E8%AE%B0%E7%BB%99%E9%B2%81%E7%8F%AD%E7%8C%AB3%E7%BC%96%E8%AF%91%E5%86%85%E6%A0%B8/","section":"Posts","summary":"","title":"è®°ï¼šç»™é²ç­çŒ«3ç¼–è¯‘å†…æ ¸","type":"posts"},{"content":" codewars-e2 # é¢˜ç›®1ï¼šæ•°ç»µç¾Š # ç»™å®šä¸€ä¸ªå¸ƒå°”ç±»å‹æ•°ç»„ï¼Œç¡®å®šå…¶ä¸­trueçš„æ•°é‡ã€‚\næˆ‘çš„è§£ç­”ï¼š\n#include \u0026lt;stdbool.h\u0026gt; #include \u0026lt;stddef.h\u0026gt; size_t count_sheep(const bool sheep[/* count */], size_t count) { int sum = 0; while(count--) { sum += *(sheep++); } return sum; } æœ€ä½³å®è·µï¼š\n#include \u0026lt;stdbool.h\u0026gt; #include \u0026lt;stddef.h\u0026gt; size_t count_sheep(const bool *sheep, size_t count) { int number = 0; for (size_t n = 0; n \u0026lt; count; n++) { if (sheep[n] == true) number++; else if (sheep[n] != false) printf(\u0026#34;Null or undefined\u0026#34;); } return number; } é¢˜ç›®2ï¼šç»Ÿè®¡å…ƒéŸ³å­—æ¯æ•°é‡ # æˆ‘çš„è§£ç­”ï¼š\n#include \u0026lt;stddef.h\u0026gt; size_t get_count(const char *s) { int count = 0; while(*s){ if(*s == \u0026#39;a\u0026#39; || *s == \u0026#39;e\u0026#39; || *s == \u0026#39;i\u0026#39; || *s == \u0026#39;o\u0026#39; || *s == \u0026#39;u\u0026#39;) count++; s++; } return count; } æœ€ä½³å®è·µï¼š æ›´ä¸ºç²¾å¦™ é¦–å…ˆå¯¹ç©ºæŒ‡é’ˆåšäº†åˆ¤æ–­!sï¼Œé¿å…å¼‚å¸¸ å…¶æ¬¡å¯¹å­—ç¬¦ä¸²çš„éå†æ˜¯ç”¨while(*s)çš„æ–¹å¼ï¼Œ*s++æŒ‡é’ˆè‡ªå¢ï¼Œç›´åˆ°é‡åˆ°å­—ç¬¦ä¸²ç»“æŸç¬¦'\\0',å¾ªç¯åœæ­¢\n#include \u0026lt;stddef.h\u0026gt; size_t get_count(const char *s) { size_t cnt = 0ul; if (!s) return 0ul; while (*s) switch (*s++) { case \u0026#39;a\u0026#39;: case \u0026#39;e\u0026#39;: case \u0026#39;i\u0026#39;: case \u0026#39;o\u0026#39;: case \u0026#39;u\u0026#39;: ++cnt; break; } return cnt; } é¢˜ç›®3ï¼šç»Ÿè®¡ç¬‘è„¸ # ç»™å®šä¸€ä¸ªæ•°ç»„ï¼ˆarrï¼‰ä½œä¸ºå‚æ•°ï¼Œå®Œæˆå‡½æ•°Â countSmileysï¼Œè¯¥å‡½æ•°åº”è¿”å›ç¬‘è„¸çš„æ€»æ•°ã€‚ ç¬‘è„¸çš„è§„åˆ™ï¼š\næ¯ä¸ªç¬‘è„¸å¿…é¡»åŒ…å«ä¸€å¯¹æœ‰æ•ˆçš„çœ¼ç›ã€‚çœ¼ç›å¯ä»¥ç”¨Â :Â æˆ–Â ;Â è¡¨ç¤ºã€‚ ç¬‘è„¸å¯ä»¥æœ‰é¼»å­ï¼Œä½†ä¸ä¸€å®šæœ‰ã€‚é¼»å­çš„æœ‰æ•ˆå­—ç¬¦æ˜¯Â -Â æˆ–Â ~ã€‚ æ¯ä¸ªç¬‘è„¸éƒ½å¿…é¡»æœ‰ä¸€ä¸ªå¾®ç¬‘çš„å˜´å·´ï¼Œåº”è¯¥ç”¨Â )Â æˆ–Â DÂ è¡¨ç¤ºã€‚ é™¤äº†æåˆ°çš„å­—ç¬¦å¤–ï¼Œä¸å…è®¸æœ‰å…¶ä»–å­—ç¬¦ã€‚ æœ‰æ•ˆçš„ç¬‘è„¸ç¤ºä¾‹ï¼šÂ :) :D ;-D :~)\næ— æ•ˆçš„ç¬‘è„¸ï¼šÂ ;( :\u0026gt; :} :]\næˆ‘çš„è§£ç­”ï¼š åˆ†æ”¯ç»“æ„ï¼Œå¯è¯»æ€§ä¸€èˆ¬\n#include \u0026lt;stddef.h\u0026gt; size_t count_smileys(size_t length, const char *const array[length]) { size_t count = 0; const char *str; if(length \u0026gt; 0){ while(length --) { str = array[length]; printf(\u0026#34;%s\\n\u0026#34;, str); if(*str == \u0026#39;:\u0026#39; || *str == \u0026#39;;\u0026#39;) { if(*(str+1)==\u0026#39;-\u0026#39; || *(str+1)==\u0026#39;~\u0026#39;) { if(*(str+2)==\u0026#39;)\u0026#39; || *(str+2)==\u0026#39;D\u0026#39;) count++; } else if(*(str+1)==\u0026#39;)\u0026#39; || *(str+1)==\u0026#39;D\u0026#39;) count++; } } } return count; } å‡½æ•°è§£ç­”ï¼ˆå¯è¯»æ€§å¥½ï¼‰ï¼š\n#include \u0026lt;stddef.h\u0026gt; // chain: checkEye -\u0026gt; checkNose -\u0026gt; checkMouse -\u0026gt; checkNull // chain: checkEye -\u0026gt; checkMouse -\u0026gt; checkNull int checkSmiley(const char* const p) { return checkEye(p); } int checkEye(const char* const p) { return (*p == \u0026#39;:\u0026#39; || *p == \u0026#39;;\u0026#39;) ? checkMouse(p + 1) || checkNose(p + 1) : 0; } int checkNose(const char* const p) { return (*p == \u0026#39;-\u0026#39; || *p == \u0026#39;~\u0026#39;) ? checkMouse(p + 1) : 0; } int checkMouse(const char* const p) { return (*p == \u0026#39;)\u0026#39; || *p == \u0026#39;D\u0026#39;) ? checkNull(p + 1) : 0; } int checkNull(const char* const p) { return (*p == \u0026#39;\\0\u0026#39;) ? 1 : 0; } size_t count_smileys(size_t length, const char *const array[length]) { size_t n = 0; for(size_t i = 0; i \u0026lt; length; i++){ // printf(\u0026#34;%s\\n\u0026#34;, array[i]); n += checkSmiley(array[i]); } return n; } åº“å‡½æ•°æš´åŠ›è§£ç­”ï¼š\n#include \u0026lt;stddef.h\u0026gt; #include \u0026lt;regex.h\u0026gt; size_t count_smileys(size_t length, const char *const array[length]) { regex_t reg; regcomp(\u0026amp;reg, \u0026#34;[:;][-~]?[D)]\u0026#34;, REG_EXTENDED); int match = 0; for (size_t i = 0; i \u0026lt; length; ++i) if (regexec(\u0026amp;reg, array[i], 0, NULL, 0) == 0) ++match; return match; } åº“å‡½æ•°æš´åŠ›è§£ç­”2ï¼š\n#include \u0026lt;stddef.h\u0026gt; #include \u0026lt;string.h\u0026gt; size_t count_smileys(size_t length, const char *const array[length]) { size_t smileys = 0; for (size_t i = 0; i \u0026lt; length; i++) { smileys += strstr(\u0026#34;:) :D :-) :-D :~) :~D ;) ;D ;-) ;-D ;~) ;~D\u0026#34;, array[i]) != NULL; } return smileys; } ","date":"2025-04-02","externalUrl":null,"permalink":"/posts/codewars-e2/","section":"Posts","summary":"","title":"codewars-e2","type":"posts"},{"content":" codewars-e3 # é¢˜ç›®1 # é¢˜ç›® ä¸€ä¸ªå­©å­åœ¨é«˜å±‚å»ºç­‘çš„ç¬¬nå±‚ç©çƒã€‚è¿™ä¸€å±‚è·ç¦»åœ°é¢çš„é«˜åº¦ï¼Œhï¼Œæ˜¯å·²çŸ¥çš„ã€‚\nä»–ä»çª—æˆ·æ‰”ä¸‹çƒã€‚çƒä¼šåå¼¹ï¼ˆä¾‹å¦‚ï¼‰ï¼Œè¾¾åˆ°å…¶é«˜åº¦çš„ä¸‰åˆ†ä¹‹äºŒï¼ˆåå¼¹ç³»æ•°ä¸º0.66ï¼‰ã€‚\nä»–çš„æ¯äº²ä»è·ç¦»åœ°é¢1.5ç±³çš„çª—æˆ·å‘å¤–çœ‹ã€‚\næ¯äº²ä¼šåœ¨å¤šå°‘æ¬¡çœ‹åˆ°çƒä»å¥¹çª—å‰ç»è¿‡ï¼ˆåŒ…æ‹¬çƒä¸‹è½å’Œåå¼¹æ—¶ï¼‰ï¼Ÿ\nè¿›è¡Œæœ‰æ•ˆå®éªŒå¿…é¡»æ»¡è¶³çš„ä¸‰ä¸ªæ¡ä»¶ï¼š æµ®ç‚¹å‚æ•° \u0026ldquo;h\u0026rdquo;ï¼ˆä»¥ç±³ä¸ºå•ä½ï¼‰å¿…é¡»å¤§äº0 æµ®ç‚¹å‚æ•° \u0026ldquo;bounce\u0026rdquo; å¿…é¡»å¤§äº0ä¸”å°äº1 æµ®ç‚¹å‚æ•° \u0026ldquo;window\u0026rdquo; å¿…é¡»å°äºhã€‚ å¦‚æœä»¥ä¸Šä¸‰ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œè¿”å›ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå¦åˆ™è¿”å›-1ã€‚\næ³¨æ„ï¼š åªæœ‰å½“åå¼¹åçƒçš„é«˜åº¦ä¸¥æ ¼å¤§äºçª—å£å‚æ•°æ—¶ï¼Œæ‰èƒ½çœ‹åˆ°çƒã€‚\nç¤ºä¾‹ï¼š\nh = 3, bounce = 0.66, window = 1.5, ç»“æœæ˜¯ 3\nh = 3, bounce = 1, window = 1.5, ç»“æœæ˜¯ -1\nï¼ˆæ¡ä»¶2ä¸æ»¡è¶³ï¼‰ã€‚\næˆ‘çš„è§£ç­”ï¼š ä¸æœ€ä½³å®è·µä¸€è‡´\n#include \u0026lt;math.h\u0026gt; int bouncingBall(double h, double bounce, double window) { int count = -1; if(h\u0026gt;0 \u0026amp;\u0026amp; bounce\u0026gt;0 \u0026amp;\u0026amp; bounce\u0026lt;1 \u0026amp;\u0026amp; window\u0026lt;h){ while(h\u0026gt;window){ count += 2; h = h*bounce; } return count; } return -1; } é¢˜ç›®2 # é¢˜ç›® ä½ å°†ä¼šå¾—åˆ°ä¸€ä¸ªæ•´æ•°æ•°ç»„ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ‰¾åˆ°ç´¢å¼•Nï¼Œä½¿å¾—Nå·¦ä¾§çš„æ•´æ•°ä¹‹å’Œç­‰äºNå³ä¾§çš„æ•´æ•°ä¹‹å’Œã€‚\nå¦‚æœæ²¡æœ‰ç´¢å¼•èƒ½æ»¡è¶³è¿™ç§æƒ…å†µï¼Œè¿”å›-1ã€‚\næˆ‘çš„è§£ç­”ï¼š\nint find_even_index(const int *values, int length) { int sumr = 0, suml = 0; int p = length; while(p--) { sumr += values[p]; } p = 0; while(p \u0026lt; length){ if(p == 0){ sumr -= values[0]; } else if(p \u0026lt; length){ suml += values[p-1]; sumr -= values[p]; } if(suml == sumr){ return p; } p++; } return -1; } æ›´å¥½çš„è§£ç­”ï¼š\nint find_even_index(const int *values, int length) { int sum = 0; for(int i = 0; i \u0026lt; length; i++) sum += values[i]; int left = 0; int right = sum; for(int i = 0; i \u0026lt; length; i++) { right -= values[i]; if(left == right) return i; left += values[i]; } return -1; } é¢˜ç›®3 # é¢˜ç›® ç¼–å†™ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªè¿ç»­ï¼ˆé€’å¢ï¼‰çš„å­—æ¯æ•°ç»„ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›æ•°ç»„ä¸­ç¼ºå¤±çš„å­—æ¯ã€‚\nä½ å°†å§‹ç»ˆè·å¾—ä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç»„ã€‚å¹¶ä¸”å§‹ç»ˆåªæœ‰ä¸€ä¸ªå­—æ¯ç¼ºå¤±ã€‚æ•°ç»„çš„é•¿åº¦å°†å§‹ç»ˆè‡³å°‘ä¸º2ã€‚ æ•°ç»„å°†å§‹ç»ˆåªåŒ…å«å•ä¸€å¤§å°å†™çš„å­—æ¯ã€‚\nç¤ºä¾‹ï¼š\n[\u0026lsquo;a\u0026rsquo;,\u0026lsquo;b\u0026rsquo;,\u0026lsquo;c\u0026rsquo;,\u0026rsquo;d\u0026rsquo;,\u0026lsquo;f\u0026rsquo;] -\u0026gt; \u0026rsquo;e\u0026rsquo; [\u0026lsquo;O\u0026rsquo;,\u0026lsquo;Q\u0026rsquo;,\u0026lsquo;R\u0026rsquo;,\u0026lsquo;S\u0026rsquo;] -\u0026gt; \u0026lsquo;P\u0026rsquo; ï¼ˆä½¿ç”¨åŒ…å«26ä¸ªå­—æ¯çš„è‹±æ–‡å­—æ¯è¡¨ï¼ï¼‰\næˆ‘çš„è§£ç­”ï¼š\nchar findMissingLetter(char array[], int arrayLength) { for(int i=0; i\u0026lt;arrayLength; i++){ if(array[i] + 1 != array[i+1]){ return array[i]+1; } } } æœ€ç®€è§£ç­”ï¼š\nchar findMissingLetter(char array[], int arrayLength) { while (++*array == *++array); return --*array; } ","date":"2025-04-02","externalUrl":null,"permalink":"/posts/codewars-e3/","section":"Posts","summary":"","title":"codewars-e3","type":"posts"},{"content":" codewars-e1 # codewars ä¸€ä¸ªé¢å‘å·¥ç¨‹çš„ç¼–ç¨‹ç»ƒä¹ ç½‘ç«™ï¼Œç±»ä¼¼æ‰“æ€ªå‡çº§ï¼Œé¢˜ç›®éš¾åº¦ç”±ä½åˆ°é«˜åˆ†ä¸º8-1\nå·¦ä¾§æ˜¯é—®é¢˜æè¿°ï¼Œå³ä¾§æ˜¯ä»£ç ç¼–è¾‘åŒºä»¥åŠæµ‹è¯•ä»£ç \næµ‹è¯•ä»£ç ä¸­ä¸€èˆ¬ä¼šç»™å‡ºæµ‹è¯•ç”¨ä¾‹ä»¥åŠå¯¹åº”çš„ç­”æ¡ˆï¼Œå¶å°”ä¹Ÿä¼šæœ‰é”™è¯¯æ¡ˆä¾‹è¦æ±‚å¼‚å¸¸å¤„ç†ã€‚\né¢˜ç›®1 # Write a function that takes an array of numbers and returns the sum of the numbers. The numbers can be negative or non-integer. If the array does not contain any numbers then you should return 0.\n#include \u0026lt;stddef.h\u0026gt; int sum_array(const int *values, size_t count){ int sum = 0; while(count--) { sum += *(values++); } return sum; } é¢˜ç›®2 # Usually when you buy something, you\u0026rsquo;re asked whether your credit card number, phone number or answer to your most secret question is still correct. However, since someone could look over your shoulder, you don\u0026rsquo;t want that shown on your screen. Instead, we mask it.\nYour task is to write a functionÂ maskify, which changes all but the last four characters intoÂ '#'.\nExamples (input \u0026ndash;\u0026gt; output): # \u0026#34;4556364607935616\u0026#34; --\u0026gt; \u0026#34;############5616\u0026#34; \u0026#34;64607935616\u0026#34; --\u0026gt; \u0026#34;#######5616\u0026#34; \u0026#34;1\u0026#34; --\u0026gt; \u0026#34;1\u0026#34; \u0026#34;\u0026#34; --\u0026gt; \u0026#34;\u0026#34; // \u0026#34;What was the name of your first pet?\u0026#34; \u0026#34;Skippy\u0026#34; --\u0026gt; \u0026#34;##ippy\u0026#34; \u0026#34;Nananananananananananananananana Batman!\u0026#34; --\u0026gt; \u0026#34;####################################man!\u0026#34; è§£æ³•1ï¼šstrcpy\n#include \u0026lt;string.h\u0026gt; char *maskify (char *masked, const char *str) { int len = strlen(str); strcpy(masked, str); if (len \u0026gt; 4) { for (int i = 0, n = len - 4; i \u0026lt; n; i++) { masked[i] = \u0026#39;#\u0026#39;; } } return masked; } è§£æ³•2ï¼šæŒ‡é’ˆ\n#include \u0026lt;string.h\u0026gt; char *maskify (char *masked, const char *string) { size_t size = strlen(string)+1; int i = 0; while(size--){ if(i++ \u0026lt; 5) { *(masked + size) = *(string + size); } else { *(masked + size) = \u0026#39;#\u0026#39;; } } return masked; } è§£æ³•3ï¼šæœ€ä¼˜è§£æ³• memset\n#include \u0026lt;string.h\u0026gt; char *maskify (char *masked, const char *string) { int n = strlen(strcpy(masked, string)) - 4; if (n \u0026gt; 0) memset(masked, \u0026#39;#\u0026#39;, n); return masked; } ","date":"2025-04-01","externalUrl":null,"permalink":"/posts/codewars-e1/","section":"Posts","summary":"","title":"codewars-e1","type":"posts"},{"content":" Cè¯­è¨€å˜é‡çš„å†…å­˜åˆ†æï¼šå…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å±€éƒ¨å˜é‡ä¸åŠ¨æ€å˜é‡ # æœ¬æ–‡å°†ç³»ç»Ÿè®²è§£Cè¯­è¨€ä¸­å„ç±»å˜é‡çš„å†…å­˜åˆ†é…æ–¹å¼ã€ç”Ÿå‘½å‘¨æœŸã€ä½œç”¨åŸŸåŠä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼Œå¹¶ç»“åˆä¸æ•°ç»„çš„å¯¹æ¯”ï¼Œå…¨é¢ç†è§£å˜é‡çš„å†…å­˜ç®¡ç†ã€‚\nä¸€ã€å˜é‡çš„å†…å­˜åˆ†é…æ–¹å¼ # Cè¯­è¨€ä¸­çš„å˜é‡æ ¹æ®å®šä¹‰ä½ç½®ã€å­˜å‚¨ç±»åˆ«å’Œåˆå§‹åŒ–æ–¹å¼ï¼Œåˆ†ä¸ºä»¥ä¸‹ç±»åˆ«ï¼š\nå˜é‡ç±»å‹ å­˜å‚¨ä½ç½® ç”Ÿå‘½å‘¨æœŸ ä½œç”¨åŸŸ åˆå§‹åŒ–è§„åˆ™ å…¨å±€å˜é‡ æ•°æ®æ®µ ç¨‹åºè¿è¡Œå…¨ç¨‹ å…¨å±€ï¼ˆæˆ–æ–‡ä»¶å†…ï¼‰ é»˜è®¤0ï¼Œå¯æ˜¾å¼åˆå§‹åŒ– é™æ€å…¨å±€å˜é‡ æ•°æ®æ®µ ç¨‹åºè¿è¡Œå…¨ç¨‹ æ–‡ä»¶å†… é»˜è®¤0ï¼Œå¯æ˜¾å¼åˆå§‹åŒ– é™æ€å±€éƒ¨å˜é‡ æ•°æ®æ®µ ç¨‹åºè¿è¡Œå…¨ç¨‹ å‡½æ•°å†… é»˜è®¤0ï¼Œå¯æ˜¾å¼åˆå§‹åŒ– è‡ªåŠ¨å±€éƒ¨å˜é‡ æ ˆ å‡½æ•°è°ƒç”¨æœŸé—´ å‡½æ•°å†…ï¼ˆä»£ç å—ï¼‰ æœªåˆå§‹åŒ–æ—¶å€¼éšæœº åŠ¨æ€åˆ†é…å˜é‡ å † mallocåˆ°free ä¾èµ–æŒ‡é’ˆçš„ä½œç”¨åŸŸ æœªåˆå§‹åŒ–ï¼ˆéœ€æ‰‹åŠ¨åˆå§‹åŒ–ï¼‰ å¯„å­˜å™¨å˜é‡ï¼ˆregisterï¼‰ å¯„å­˜å™¨ï¼ˆå¯èƒ½ï¼‰ å‡½æ•°è°ƒç”¨æœŸé—´ å‡½æ•°å†… åŒè‡ªåŠ¨å˜é‡ æ ¹æ®å˜é‡ä½œç”¨åŸŸã€ç”Ÿå‘½å‘¨æœŸã€é“¾æ¥å±æ€§å’Œå­˜å‚¨ç±»å‹ï¼Œåˆ—è¡¨å¯¹æ¯”å¦‚ä¸‹ï¼ˆã€ŠCå’ŒæŒ‡é’ˆã€‹ï¼‰ï¼š\nå˜é‡ç±»å‹ å£°æ˜çš„ä½ç½® æ˜¯å¦å­˜äºå †æ ˆ ä½œç”¨åŸŸ ç”Ÿå‘½å‘¨æœŸ å¦‚æœå£°æ˜ä¸ºstatic å…¨å±€ æ‰€æœ‰ä»£ç å—ä¹‹å¤– å¦ ä»å£°æ˜å¤„åˆ°æ–‡ä»¶å°¾ æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´ ä¸å…è®¸å…¶ä»–æºæ–‡ä»¶è®¿é—® å±€éƒ¨ ä»£ç å—èµ·å§‹å¤„ æ˜¯ æ•´ä¸ªä»£ç å— åœ¨ä»£ç å—æ´»åŠ¨æœŸé—´ï¼Œä¸€æ—¦ç¨‹åºç¦»å¼€ä»£ç æ®µï¼Œè¯¥å˜é‡çš„å€¼å³æ¶ˆå¤± å˜é‡ä¸å­˜å‚¨äºå †æ ˆä¸­ï¼Œå®ƒçš„å€¼æ•´ä¸ªæŒç¨‹åºæ‰§è¡ŒæœŸé—´ä¸€ç›´ä¿æŒ å½¢å¼å‚æ•° å‡½æ•°å¤´éƒ¨ æ˜¯ æ•´ä¸ªå‡½æ•° ä¸å…è®¸ äºŒã€å„ç±»å˜é‡çš„è¯¦ç»†åˆ†æ # 1. å…¨å±€å˜é‡ï¼ˆGlobal Variablesï¼‰ # å®šä¹‰ï¼šåœ¨å‡½æ•°å¤–éƒ¨å®šä¹‰çš„å˜é‡ã€‚ å†…å­˜ä½ç½®ï¼š å·²åˆå§‹åŒ–ï¼š.dataæ®µã€‚ æœªåˆå§‹åŒ–ï¼š.bssæ®µï¼ˆé»˜è®¤åˆå§‹åŒ–ä¸º0ï¼‰ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šç¨‹åºå¯åŠ¨æ—¶åˆ†é…ï¼Œç»“æŸæ—¶é‡Šæ”¾ã€‚ ä½œç”¨åŸŸï¼š é»˜è®¤ï¼šå…·æœ‰å¤–éƒ¨é“¾æ¥ï¼ˆå…¶ä»–æ–‡ä»¶å¯é€šè¿‡externè®¿é—®ï¼‰ã€‚ staticä¿®é¥°ï¼šå†…éƒ¨é“¾æ¥ï¼ˆä»…å½“å‰æ–‡ä»¶å¯è§ï¼‰ã€‚ ç¤ºä¾‹ï¼š int global_var = 10; // å·²åˆå§‹åŒ–å…¨å±€å˜é‡ï¼ˆ.dataæ®µï¼‰ static int file_var; // é™æ€å…¨å±€å˜é‡ï¼ˆ.bssæ®µï¼Œä»…å½“å‰æ–‡ä»¶å¯è§ï¼‰ void func() { extern int global_var; // å£°æ˜å…¶ä»–æ–‡ä»¶ä¸­å®šä¹‰çš„å…¨å±€å˜é‡ } 2. é™æ€å±€éƒ¨å˜é‡ï¼ˆStatic Local Variablesï¼‰ # å®šä¹‰ï¼šåœ¨å‡½æ•°å†…éƒ¨ç”¨staticä¿®é¥°çš„å˜é‡ã€‚ å†…å­˜ä½ç½®ï¼š.dataæ®µï¼ˆæ˜¾å¼åˆå§‹åŒ–ï¼‰æˆ–.bssæ®µï¼ˆæœªåˆå§‹åŒ–ï¼‰ ç”Ÿå‘½å‘¨æœŸï¼šç¨‹åºè¿è¡Œå…¨ç¨‹ï¼Œä½†ä½œç”¨åŸŸä»…é™äºå‡½æ•°å†…éƒ¨ã€‚ ç‰¹ç‚¹ï¼šä¿ç•™å‡½æ•°è°ƒç”¨ä¹‹é—´çš„å€¼ã€‚ ç¤ºä¾‹ï¼š void counter() { static int count = 0; // é™æ€å±€éƒ¨å˜é‡ï¼ˆ.dataæ®µï¼‰ count++; printf(\u0026#34;Count: %d\\n\u0026#34;, count); } int main() { counter(); // è¾“å‡º Count: 1 counter(); // è¾“å‡º Count: 2 return 0; } 3. è‡ªåŠ¨å±€éƒ¨å˜é‡ï¼ˆAutomatic Local Variablesï¼‰ # å®šä¹‰ï¼šå‡½æ•°å†…å®šä¹‰çš„å˜é‡ï¼ˆæ— staticä¿®é¥°ï¼‰ã€‚ å†…å­˜ä½ç½®ï¼šæ ˆï¼ˆStackï¼‰ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šå‡½æ•°è°ƒç”¨æ—¶åˆ†é…ï¼Œè¿”å›æ—¶è‡ªåŠ¨é‡Šæ”¾ã€‚ åˆå§‹åŒ–ï¼šæœªæ˜¾å¼åˆå§‹åŒ–æ—¶å€¼ä¸ºéšæœºæ•°ã€‚ ç¤ºä¾‹ï¼š void func() { int a = 10; // è‡ªåŠ¨å˜é‡ï¼ˆæ ˆï¼‰ char buffer[100]; // æ ˆä¸Šçš„æ•°ç»„ // å‡½æ•°è¿”å›åï¼Œaå’Œbufferè‡ªåŠ¨é‡Šæ”¾ } 4. åŠ¨æ€åˆ†é…å˜é‡ï¼ˆDynamic Variablesï¼‰ # å®šä¹‰ï¼šé€šè¿‡malloc/callocåœ¨å †ä¸Šåˆ†é…çš„å†…å­˜ï¼Œéœ€æ‰‹åŠ¨ç®¡ç†ã€‚ å†…å­˜ä½ç½®ï¼šå †ï¼ˆHeapï¼‰ã€‚ ç”Ÿå‘½å‘¨æœŸï¼šä»mallocåˆ°freeã€‚ ç‰¹ç‚¹ï¼š éœ€æ‰‹åŠ¨é‡Šæ”¾ï¼Œå¦åˆ™å†…å­˜æ³„æ¼ã€‚ æŒ‡é’ˆçš„ä½œç”¨åŸŸå†³å®šäº†å˜é‡çš„é€»è¾‘è®¿é—®èŒƒå›´ã€‚ ç¤ºä¾‹ï¼š int main() { int *ptr = (int*)malloc(sizeof(int)); // åŠ¨æ€å˜é‡ï¼ˆå †ï¼‰ *ptr = 42; free(ptr); // å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾ ptr = NULL; // é¿å…æ‚¬ç©ºæŒ‡é’ˆ return 0; } 5. å¯„å­˜å™¨å˜é‡ï¼ˆRegister Variablesï¼‰ # å®šä¹‰ï¼šç”¨registerå…³é”®å­—å£°æ˜çš„å˜é‡ï¼ˆç¼–è¯‘å™¨å¯èƒ½å¿½ç•¥æ­¤å»ºè®®ï¼‰ã€‚ å†…å­˜ä½ç½®ï¼šå¯„å­˜å™¨ï¼ˆè‹¥å¯èƒ½ï¼‰æˆ–æ ˆã€‚ ç‰¹ç‚¹ï¼š è®¿é—®é€Ÿåº¦å¿«ï¼Œä½†æ— æ³•è·å–åœ°å€ï¼ˆå¦‚\u0026amp;reg_varä¼šæŠ¥é”™ï¼‰ã€‚ ç°ä»£ç¼–è¯‘å™¨ä¼˜åŒ–èƒ½åŠ›å¼ºï¼Œé€šå¸¸æ— éœ€æ‰‹åŠ¨æŒ‡å®šã€‚ ç¤ºä¾‹ï¼š void calculate() { register int i; // å»ºè®®ç¼–è¯‘å™¨å°†iæ”¾å…¥å¯„å­˜å™¨ for (i = 0; i \u0026lt; 1000; i++) { // å¿«é€Ÿå¾ªç¯æ“ä½œ } } ä¸‰ã€å˜é‡çš„å¯¹æ¯”ä¸é€‰æ‹© # 1. å…¨å±€å˜é‡ vs. é™æ€å±€éƒ¨å˜é‡ # ç‰¹æ€§ å…¨å±€å˜é‡ é™æ€å±€éƒ¨å˜é‡ ä½œç”¨åŸŸ å…¨å±€ï¼ˆæˆ–æ–‡ä»¶å†…ï¼‰ å‡½æ•°å†…éƒ¨ è®¿é—®æ§åˆ¶ å¤–éƒ¨æ–‡ä»¶å¯è®¿é—®ï¼ˆé™¤éstaticï¼‰ ä»…åœ¨å‡½æ•°å†…è®¿é—® å…¸å‹ç”¨é€” è·¨å‡½æ•°å…±äº«æ•°æ® ä¿ç•™å‡½æ•°è°ƒç”¨é—´çš„çŠ¶æ€ 2. è‡ªåŠ¨å±€éƒ¨å˜é‡ vs. åŠ¨æ€å˜é‡ # ç‰¹æ€§ è‡ªåŠ¨å±€éƒ¨å˜é‡ åŠ¨æ€å˜é‡ å†…å­˜ä½ç½® æ ˆ å † ç”Ÿå‘½å‘¨æœŸ å‡½æ•°è°ƒç”¨æœŸé—´ æ‰‹åŠ¨æ§åˆ¶ï¼ˆmallocåˆ°freeï¼‰ çµæ´»æ€§ å¤§å°å›ºå®š å¯åŠ¨æ€è°ƒæ•´å¤§å° å®‰å…¨æ€§ è‡ªåŠ¨é‡Šæ”¾ï¼Œæ— æ³„æ¼é£é™© éœ€æ‰‹åŠ¨ç®¡ç†ï¼Œæ˜“æ³„æ¼ å››ã€å˜é‡çš„åˆå§‹åŒ–è§„åˆ™ # å˜é‡ç±»å‹ åˆå§‹åŒ–è§„åˆ™ å…¨å±€å˜é‡ é»˜è®¤åˆå§‹åŒ–ä¸º0ï¼ˆ.bssæ®µï¼‰ï¼Œå¯æ˜¾å¼åˆå§‹åŒ– é™æ€å˜é‡ï¼ˆå…¨å±€/å±€éƒ¨ï¼‰ åŒä¸Š è‡ªåŠ¨å±€éƒ¨å˜é‡ æœªåˆå§‹åŒ–æ—¶å€¼ä¸ºéšæœºæ•°ï¼ˆç¼–è¯‘å™¨ä¸è‡ªåŠ¨åˆå§‹åŒ–ï¼‰ åŠ¨æ€å˜é‡ mallocä¸åˆå§‹åŒ–ï¼Œcallocåˆå§‹åŒ–ä¸º0 äº”ã€æœ€ä½³å®è·µä¸å¸¸è§é—®é¢˜ # 1. å˜é‡é€‰æ‹©åŸåˆ™ # ä¼˜å…ˆä½¿ç”¨è‡ªåŠ¨å±€éƒ¨å˜é‡ï¼šé€Ÿåº¦å¿«ã€è‡ªåŠ¨ç®¡ç†ï¼Œé¿å…å…¨å±€å˜é‡å¸¦æ¥çš„è€¦åˆã€‚ æ…ç”¨å…¨å±€å˜é‡ï¼šä»…åœ¨éœ€è¦è·¨å‡½æ•°å…±äº«æ•°æ®æ—¶ä½¿ç”¨ï¼Œå¹¶å°½é‡ç”¨staticé™åˆ¶ä½œç”¨åŸŸã€‚ åŠ¨æ€å˜é‡éœ€é…å¯¹ç®¡ç†ï¼šç¡®ä¿æ¯ä¸ªmallocéƒ½æœ‰å¯¹åº”çš„freeã€‚ 2. å¸¸è§é—®é¢˜ä¸è§£å†³ # é—®é¢˜1ï¼šå˜é‡æœªåˆå§‹åŒ–å¯¼è‡´éšæœºå€¼\nint main() { int a; // æœªåˆå§‹åŒ–ï¼Œå€¼ä¸ºéšæœºæ•° printf(\u0026#34;%d\u0026#34;, a); // å¯èƒ½è¾“å‡ºä»»æ„å€¼ return 0; } è§£å†³ï¼šæ˜¾å¼åˆå§‹åŒ–å˜é‡ï¼Œå°¤å…¶æ˜¯å±€éƒ¨å˜é‡ã€‚\né—®é¢˜2ï¼šé™æ€å±€éƒ¨å˜é‡çš„çº¿ç¨‹å®‰å…¨é—®é¢˜\né™æ€å±€éƒ¨å˜é‡åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­å¯èƒ½å¼•å‘ç«æ€æ¡ä»¶ã€‚\nè§£å†³ï¼šä½¿ç”¨çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆ_Thread_localï¼‰æˆ–åŒæ­¥æœºåˆ¶ï¼ˆå¦‚äº’æ–¥é”ï¼‰ã€‚\né—®é¢˜3ï¼šåŠ¨æ€å˜é‡å¿˜è®°é‡Šæ”¾\nvoid leak() { int *ptr = malloc(100); // å†…å­˜æ³„æ¼ï¼ } è§£å†³ï¼šä½¿ç”¨å·¥å…·ï¼ˆå¦‚Valgrindï¼‰æ£€æµ‹ï¼Œæˆ–é‡‡ç”¨RAIIé£æ ¼å°è£…ï¼ˆå¦‚C++çš„æ™ºèƒ½æŒ‡é’ˆï¼Œä½†Cä¸­éœ€æ‰‹åŠ¨å®ç°ï¼‰ã€‚\nå…­ã€ç¤ºä¾‹ # // ç¤ºä¾‹ï¼šåˆç†ä½¿ç”¨å„ç±»å˜é‡ #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; int global_count = 0; // å…¨å±€å˜é‡ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ void process_data() { static int call_count = 0; // é™æ€å±€éƒ¨å˜é‡ï¼ˆä¿ç•™çŠ¶æ€ï¼‰ int buffer[100]; // è‡ªåŠ¨å±€éƒ¨å˜é‡ï¼ˆæ ˆï¼‰ int *dynamic_data = malloc(200); // åŠ¨æ€å˜é‡ï¼ˆå †ï¼‰ if (dynamic_data == NULL) { return; } // ä½¿ç”¨å˜é‡... free(dynamic_data); call_count++; global_count++; } int main() { process_data(); return 0; } æ•°ç»„ # å…¨å±€æ•°ç»„çš„ã€Œä½¿ç”¨æ³¨æ„äº‹é¡¹ã€ # ï¼ˆ1ï¼‰é¿å…é‡å¤å®šä¹‰ # åœ¨å¤šæ–‡ä»¶é¡¹ç›®ä¸­ï¼Œå…¨å±€æ•°ç»„çš„å®šä¹‰åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œå…¶ä»–æ–‡ä»¶éœ€ç”¨Â externÂ å£°æ˜ï¼š // file1.c int global_array[10]; // å®šä¹‰ // file2.c extern int global_array[]; // å£°æ˜ï¼ˆæ— éœ€æŒ‡å®šå¤§å°ï¼‰ 2ï¼‰è°¨æ…ä½¿ç”¨Â static # ä½¿ç”¨Â staticÂ å¯é™åˆ¶å…¨å±€æ•°ç»„çš„ä½œç”¨åŸŸï¼Œé¿å…å‘½åå†²çªï¼š // file1.c static int local_array[10]; // ä»…å½“å‰æ–‡ä»¶å¯è§ ï¼ˆ3ï¼‰å¤§å°å¿…é¡»ä¸ºå¸¸é‡è¡¨è¾¾å¼ # å…¨å±€æ•°ç»„çš„å¤§å°å¿…é¡»åœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼ˆC89/C99å‡è¦æ±‚ï¼‰ï¼š #define SIZE 100 int valid_array[SIZE]; // åˆæ³•ï¼ˆSIZEæ˜¯å®å¸¸é‡ï¼‰ int size = 100; int invalid_array[size]; // é”™è¯¯ï¼å…¨å±€æ•°ç»„ä¸èƒ½ç”¨å˜é‡ä½œä¸ºå¤§å° ï¼ˆ4ï¼‰é¿å…è¿‡åº¦ä½¿ç”¨å…¨å±€æ•°ç»„ # å…¨å±€æ•°ç»„ä¼šå ç”¨é™æ€å†…å­˜ï¼Œå¯èƒ½å¯¼è‡´å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯å¢å¤§ã€‚ è¿‡åº¦ä½¿ç”¨ä¼šå¢åŠ ç¨‹åºçš„è€¦åˆæ€§ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨å±€éƒ¨å˜é‡æˆ–åŠ¨æ€å†…å­˜ã€‚ å…¨å±€æ•°ç»„ vs. å±€éƒ¨æ•°ç»„ # ç‰¹æ€§ å…¨å±€æ•°ç»„ å±€éƒ¨æ•°ç»„ å­˜å‚¨ä½ç½® æ•°æ®æ®µï¼ˆ.data / .bssï¼‰ æ ˆï¼ˆStackï¼‰ ç”Ÿå‘½å‘¨æœŸ ç¨‹åºè¿è¡Œå…¨ç¨‹ å‡½æ•°è°ƒç”¨æœŸé—´ åˆå§‹åŒ– é»˜è®¤åˆå§‹åŒ–ä¸º0ï¼ˆ.bssï¼‰æˆ–æŒ‡å®šå€¼ï¼ˆ.dataï¼‰ æœªåˆå§‹åŒ–æ—¶å€¼ä¸ºéšæœºæ•° ä½œç”¨åŸŸ å…¨å±€ï¼ˆæˆ–æ–‡ä»¶å†… staticï¼‰ å‡½æ•°å†…éƒ¨ å¤§å°ç¡®å®š å¿…é¡»ä¸ºå¸¸é‡è¡¨è¾¾å¼ å¯ä¸ºå˜é‡ï¼ˆC99 å˜é•¿æ•°ç»„ï¼Œä½†éœ€è°¨æ…ï¼‰ ","date":"2025-03-29","externalUrl":null,"permalink":"/posts/learn-c/c%E8%AF%AD%E8%A8%80%E5%8F%98%E9%87%8F%E7%9A%84%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E4%B8%8E%E5%8A%A8%E6%80%81%E5%8F%98%E9%87%8F/","section":"Posts","summary":"","title":"Cè¯­è¨€å˜é‡çš„å†…å­˜åˆ†æï¼šå…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å±€éƒ¨å˜é‡ä¸åŠ¨æ€å˜é‡","type":"posts"},{"content":" åŒºåˆ†ä¸€äº›æ¦‚å¿µ # 1ã€å˜é‡çš„å€¼ï¼ˆå†…å®¹ï¼‰å’Œå˜é‡çš„åœ°å€ # 2ã€å˜é‡åä¸åœ°å€ # å˜é‡åçš„å®è´¨ å˜é‡åå®é™…ä¸Šæ˜¯ä¸€ä¸ªç¬¦å·åœ°å€ï¼Œåœ¨å¯¹ç¨‹åºç¼–è¯‘è¿æ¥æ—¶ç”±ç³»ç»Ÿç»™æ¯ä¸€ä¸ªå˜é‡ååˆ†é…ä¸€ä¸ªå†…å­˜åœ°å€ã€‚åœ¨ç¨‹åºä¸­ä»å˜é‡ä¸­å–å€¼ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡å˜é‡åæ‰¾åˆ°ç›¸åº”çš„å†…å­˜åœ°å€ï¼Œä»å…¶å­˜å‚¨å•å…ƒä¸­è¯»å–æ•°æ®ã€‚\nå˜é‡åï¼ˆVariable Nameï¼‰ï¼š ç¼–è¯‘å™¨çš„ ç¬¦å·è¡¨ï¼ˆSymbol Tableï¼‰ ä¸­çš„ä¸€ä¸ªæ¡ç›®ï¼ŒåŒ…å«åç§°ã€ç±»å‹ã€ä½œç”¨åŸŸã€åœ°å€ç­‰ä¿¡æ¯ã€‚\nå…³é”®ç»†èŠ‚ï¼š åç§°ä¿®é¥°ï¼ˆName Manglingï¼‰ï¼šC++ ä¸­ä¸ºæ”¯æŒé‡è½½ï¼Œç¼–è¯‘å™¨ä¼šä¿®æ”¹å‡½æ•°/å˜é‡åï¼ˆå¦‚Â _Z3fooiï¼‰ã€‚ ä½œç”¨åŸŸè§£æï¼šç¼–è¯‘å™¨é€šè¿‡ç¬¦å·è¡¨åŒºåˆ†å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡ï¼ˆå¦‚Â ::aÂ vsÂ aï¼‰ã€‚ è°ƒè¯•ç¬¦å·ï¼šç¼–è¯‘æ—¶è‹¥ä¿ç•™è°ƒè¯•ä¿¡æ¯ï¼ˆå¦‚Â -gÂ é€‰é¡¹ï¼‰ï¼Œå˜é‡åä¼šè¢«åµŒå…¥äºŒè¿›åˆ¶æ–‡ä»¶ä¾›è°ƒè¯•å™¨ä½¿ç”¨ã€‚ åœ°å€ï¼ˆAddressï¼‰ï¼š ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œé€šå¸¸ä¸ºÂ CPU å­—é•¿ï¼Œ\nå…³é”®ç»†èŠ‚ï¼š è™šæ‹Ÿåœ°å€ï¼šç¨‹åºçœ‹åˆ°çš„æ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„è™šæ‹Ÿåœ°å€ï¼Œç”± MMUï¼ˆå†…å­˜ç®¡ç†å•å…ƒï¼‰è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚ åœ°å€ç©ºé—´å¸ƒå±€éšæœºåŒ–ï¼ˆASLRï¼‰ï¼šç°ä»£ç³»ç»ŸéšæœºåŒ–è¿›ç¨‹åœ°å€ç©ºé—´ä»¥æé«˜å®‰å…¨æ€§ã€‚ ç©ºæŒ‡é’ˆï¼ˆNULLï¼‰ï¼šé€šå¸¸å®šä¹‰ä¸ºÂ (void*)0ï¼Œè®¿é—®å®ƒä¼šå¯¼è‡´æ®µé”™è¯¯ï¼ˆSegmentation Faultï¼‰ã€‚ 3ã€æŒ‡é’ˆ # æŒ‡é’ˆå˜é‡ # æŒ‡é’ˆä¹Ÿæ˜¯å˜é‡ï¼Œå­˜å‚¨çš„æ˜¯åœ°å€ï¼ŒæŒ‡å‘è¯¥åœ°å€\nint a = 112, b = -1; float c = 3.14; int *d = \u0026amp;a; float *e = \u0026amp;c; åœ°å€ 100 104 108 112 116 å˜é‡å a b c d e å€¼ 112 -1 3.14 100 108 é—´æ¥è®¿é—® # é€šè¿‡ä¸€ä¸ªæŒ‡é’ˆè®¿é—®ä»–æ‰€æŒ‡å‘çš„åœ°å€çš„è¿‡ç¨‹ç§°ä¸ºé—´æ¥è®¿é—®æˆ–è§£å¼•ç”¨æŒ‡é’ˆï¼š ä½¿ç”¨å•ç›®æ“ä½œç¬¦ *\nint f = *d; æœªåˆå§‹åŒ–å’Œéæ³•çš„æŒ‡é’ˆ # ä¸€ä¸ªæä¸ºå¸¸è§çš„é”™è¯¯ï¼š\nint *a; ... *a = 12; æ— æ³•é¢„æµ‹ 12 ä¼šå­˜å‚¨åœ¨å“ªä¸ªåœ°æ–¹ï¼Œ å£°æ˜ä¸€ä¸ªæŒ‡å‘æ•´å‹çš„æŒ‡é’ˆä¸ä¼šâ€œåˆ›å»ºâ€ç”¨äºå‚¨å­˜æ•´å‹çš„å†…å­˜ç©ºé—´ã€‚ ä¸€èˆ¬æƒ…å†µï¼Œä¼šæŒ‡å‘ä¸€ä¸ªéæ³•åœ°å€ï¼š åœ¨UNIXä¸Šä¼šå¯¼è‡´â€œå†…å­˜é”™è¯¯â€ï¼ˆmemory faultï¼‰ åœ¨Windowsä¸Šä¼šå¯¼è‡´â€œä¿æŠ¤æ€§å¼‚å¸¸â€ï¼ˆgeneral protection exceptionï¼‰ æœ€ä¸¥é‡çš„æƒ…å†µï¼Œå¯èƒ½æŒ‡å‘äº†ä¸€ä¸ªåˆæ³•çš„åœ°å€ï¼š ä½äºé‚£ä¸ªä½ç½®çš„å€¼è¢«ä¿®æ”¹ï¼Œè¿™ç§é”™è¯¯éš¾ä»¥æ•æ‰ï¼Œå¯¼è‡´ä¸¥é‡åæœã€‚\n","date":"2025-03-29","externalUrl":null,"permalink":"/posts/learn-c/c%E8%AF%AD%E8%A8%80%E4%B8%80%E4%BA%9B%E9%87%8D%E8%A6%81%E7%9A%84%E6%A6%82%E5%BF%B5%E5%8F%98%E9%87%8F%E5%8F%98%E9%87%8F%E5%90%8D%E5%9C%B0%E5%9D%80%E6%8C%87%E9%92%88/","section":"Posts","summary":"","title":"Cè¯­è¨€ä¸€äº›é‡è¦çš„æ¦‚å¿µï¼šå˜é‡ã€å˜é‡åã€åœ°å€ã€æŒ‡é’ˆ","type":"posts"},{"content":"TheFire:åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿ,è‡ªå¸¦å¤šä¸ªæ¨¡å¼ã€‚\næ¨¡å¼1ï¼š æ¨¡å¼2ï¼š æ¨¡å¼3ï¼š æ¨¡å¼4ï¼š ","date":"2025-03-29","externalUrl":null,"permalink":"/posts/hp-calc/thefire/","section":"Posts","summary":"åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿ,è‡ªå¸¦å¤šä¸ªæ¨¡å¼ã€‚","title":"HP39GIIç¨‹åº-ç‰›é¡¿åŠ›å­¦çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿ TheFIre","type":"posts"},{"content":"åƒé¸¡æ¨¡æ‹Ÿå™¨ï¼Œå¸¦ç”»é¢æŠ–åŠ¨æ•ˆæœï¼Œå¸¦ä¸€å¥—ç•Œé¢ï¼Œä¾èµ–BLibã€‚\næºä»£ç ï¼š\nPLACE0.1.txt\nPLACE0.1\n","date":"2025-03-29","externalUrl":null,"permalink":"/posts/hp-calc/peace0.1/","section":"Posts","summary":"åƒé¸¡æ¨¡æ‹Ÿå™¨ï¼Œå¸¦ç”»é¢æŠ–åŠ¨ã€‚","title":"HP39GIIæ¸¸æˆ-åƒé¸¡æ¨¡æ‹Ÿå™¨ PEACE0.1","type":"posts"},{"content":"PPT:ç»å…¸æ¸¸æˆ[æ³¡æ³¡å ‚],å¯åŠ è½½è‡ªå®šä¹‰åœ°å›¾ï¼Œå·²å®Œæˆåœºæ™¯ã€ç‚¸å¼¹ç®¡ç†ã€AIã€çˆ†ç‚¸æ•ˆæœï¼Œä¾èµ–BLibã€‚ PPTAD: æºä»£ç ï¼š PPTä¸ºæ¸¸æˆæœ¬ä½“ï¼ŒPPT_EDITä¸ºåœ°å›¾ç¼–è¾‘å™¨ï¼ŒPPTADä¸ºåŸºç¡€å‡½æ•°ã€‚\nPPT ç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç  PPT_EDIT ç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç  PPTAD ç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç  ","date":"2025-03-29","externalUrl":null,"permalink":"/posts/hp-calc/ppt/","section":"Posts","summary":"ç»å…¸æ¸¸æˆ[æ³¡æ³¡å ‚],å¯åŠ è½½è‡ªå®šä¹‰åœ°å›¾ï¼Œå·²å®Œæˆåœºæ™¯ã€ç‚¸å¼¹ç®¡ç†ã€AIã€çˆ†ç‚¸æ•ˆæœï¼Œä¾èµ–BLibã€‚","title":"HP39GIIæ¸¸æˆ-ç»å…¸æ¸¸æˆæ³¡æ³¡å ‚ PPT","type":"posts"},{"content":"æ¶ˆæ¶ˆæ´›:è¯´æ˜¯æ¶ˆæ¶ˆä¹å…¶å®æ›´åƒæ¶ˆç­æ˜Ÿæ˜Ÿï¼Œæœç´¢ç›¸è¿åŒç±»æ–¹å—è¿ç”¨è¿­ä»£ç®—æ³•ï¼Œå›¾åƒç»˜åˆ¶è°ƒç”¨BLib\nç©æ³•ï¼š\nä¸Šä¸‹å·¦å³ç§»åŠ¨å…‰æ ‡ F1é€‰æ‹©ï¼Œå†æŒ‰æ–¹å‘é”®äº¤æ¢æ–¹å— æ¶ˆé™¤æ‰€æœ‰çš„æ–¹å—è¿‡å…³ æºä»£ç ï¼š\nç‚¹å‡»ä¸‹è½½\næŸ¥çœ‹æºç \n","date":"2025-03-29","externalUrl":null,"permalink":"/posts/hp-calc/xxl/","section":"Posts","summary":"è¯´æ˜¯æ¶ˆæ¶ˆä¹å…¶å®æ›´åƒæ¶ˆç­æ˜Ÿæ˜Ÿï¼Œæœç´¢ç›¸è¿åŒç±»æ–¹å—è¿ç”¨è¿­ä»£ç®—æ³•ï¼Œå›¾åƒç»˜åˆ¶è°ƒç”¨BLib","title":"HP39GIIæ¸¸æˆ-æ¶ˆæ¶ˆæ´›","type":"posts"},{"content":" Cè¯­è¨€å†…å­˜ç®¡ç† # åœ¨è®¡ç®—æœºç³»ç»Ÿï¼Œç‰¹åˆ«æ˜¯åµŒå…¥å¼ç³»ç»Ÿä¸­ï¼Œå†…å­˜èµ„æºæ˜¯éå¸¸æœ‰é™çš„ã€‚å°¤å…¶å¯¹äºç§»åŠ¨ç«¯å¼€å‘è€…æ¥è¯´ï¼Œç¡¬ä»¶èµ„æºçš„é™åˆ¶ä½¿å¾—å…¶åœ¨ç¨‹åºè®¾è®¡ä¸­é¦–è¦è€ƒè™‘çš„é—®é¢˜å°±æ˜¯å¦‚ä½•æœ‰æ•ˆåœ°ç®¡ç†å†…å­˜èµ„æºã€‚æœ¬æ–‡æ˜¯ä½œè€…åœ¨å­¦ä¹ Cè¯­è¨€å†…å­˜ç®¡ç†çš„è¿‡ç¨‹ä¸­åšçš„ä¸€ä¸ªæ€»ç»“ï¼Œå¦‚æœ‰ä¸å¦¥ä¹‹å¤„ï¼Œæœ›è¯»è€…ä¸åæŒ‡æ­£ã€‚\nä¸€ã€å‡ ä¸ªåŸºæœ¬æ¦‚å¿µ # åœ¨Cè¯­è¨€ä¸­ï¼Œå…³äºå†…å­˜ç®¡ç†çš„çŸ¥è¯†ç‚¹æ¯”è¾ƒå¤šï¼Œå¦‚å‡½æ•°ã€å˜é‡ã€ä½œç”¨åŸŸã€æŒ‡é’ˆç­‰ï¼Œåœ¨æ¢ç©¶Cè¯­è¨€å†…å­˜ç®¡ç†æœºåˆ¶æ—¶ï¼Œå…ˆç®€å•å¤ä¹ ä¸‹è¿™å‡ ä¸ªåŸºæœ¬æ¦‚å¿µï¼š\nå˜é‡ï¼š\nå…¨å±€å˜é‡ï¼ˆå¤–éƒ¨å˜é‡ï¼‰ï¼šå‡ºç°åœ¨ä»£ç å—{}ä¹‹å¤–çš„å˜é‡å°±æ˜¯å…¨å±€å˜é‡ã€‚ å±€éƒ¨å˜é‡ï¼ˆè‡ªåŠ¨å˜é‡ï¼‰ï¼šä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä»£ç å—{}å†…éƒ¨å®šä¹‰çš„å˜é‡å°±æ˜¯è‡ªåŠ¨å˜é‡ï¼Œä¹Ÿå¯ä½¿ç”¨autoæ˜¾ç¤ºå®šä¹‰ã€‚ é™æ€å˜é‡ï¼šæ˜¯æŒ‡å†…å­˜ä½ç½®åœ¨ç¨‹åºæ‰§è¡ŒæœŸé—´ä¸€ç›´ä¸æ”¹å˜çš„å˜é‡ï¼Œç”¨å…³é”®å­—staticä¿®é¥°ã€‚ä»£ç å—å†…éƒ¨çš„é™æ€å˜é‡åªèƒ½è¢«è¿™ä¸ªä»£ç å—å†…éƒ¨è®¿é—®ï¼Œä»£ç å—å¤–éƒ¨çš„é™æ€å˜é‡åªèƒ½è¢«å®šä¹‰è¿™ä¸ªå˜é‡çš„æ–‡ä»¶è®¿é—®ã€‚ æ³¨æ„ï¼šexternä¿®é¥°å˜é‡æ—¶ï¼Œæ ¹æ®å…·ä½“æƒ…å†µï¼Œæ—¢å¯ä»¥çœ‹ä½œæ˜¯å®šä¹‰ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯å£°æ˜ï¼›ä½†externä¿®é¥°å‡½æ•°æ—¶åªèƒ½æ˜¯å®šä¹‰ï¼Œæ²¡æœ‰äºŒä¹‰æ€§ã€‚\nä½œç”¨åŸŸï¼šé€šå¸¸æŒ‡çš„æ˜¯å˜é‡çš„ä½œç”¨åŸŸï¼Œå¹¿ä¹‰ä¸Šè®²ï¼Œä¹Ÿæœ‰å‡½æ•°ä½œç”¨åŸŸåŠæ–‡ä»¶ä½œç”¨åŸŸç­‰ã€‚\nå‡½æ•°ï¼š æ³¨æ„ï¼šCè¯­è¨€ä¸­å‡½æ•°é»˜è®¤éƒ½æ˜¯å…¨å±€çš„ï¼Œå¯ä»¥ä½¿ç”¨staticå…³é”®å­—å°†å‡½æ•°å£°æ˜ä¸ºé™æ€å‡½æ•°ï¼ˆåªèƒ½è¢«å®šä¹‰è¿™ä¸ªå‡½æ•°çš„æ–‡ä»¶è®¿é—®çš„å‡½æ•°ï¼‰ã€‚\näºŒã€å†…å­˜æ¨¡å‹ # å†…å­˜æ¨¡å‹ ä»å†…å­˜æ¨¡å‹çš„è§’åº¦å¯¹å†…å­˜åˆ’åˆ†ä¸ºä»¥ä¸‹åŒºæ®µ\né™æ€åŒºåŸŸï¼š\ntext segment(ä»£ç æ®µ):åŒ…æ‹¬åªè¯»å­˜å‚¨åŒºå’Œæ–‡æœ¬åŒºï¼Œå…¶ä¸­åªè¯»å­˜å‚¨åŒºå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ–‡æœ¬åŒºå­˜å‚¨ç¨‹åºçš„æœºå™¨ä»£ç ã€‚ data segment(æ•°æ®æ®µ)ï¼šå­˜å‚¨ç¨‹åºä¸­å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ bss segment(BSSæ®µ)ï¼šå­˜å‚¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆå±€éƒ¨+å…¨å±€ï¼‰ï¼Œä»¥åŠæ‰€æœ‰è¢«åˆå§‹åŒ–ä¸º0çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œå¯¹äºæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼Œç¨‹åºè¿è¡Œmainä¹‹å‰æ—¶ä¼šç»Ÿä¸€æ¸…é›¶ã€‚å³æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡ç¼–è¯‘å™¨ä¼šåˆå§‹åŒ–ä¸º0 åŠ¨æ€åŒºåŸŸï¼š\nheapï¼ˆå †åŒºï¼‰ï¼š å½“è¿›ç¨‹æœªè°ƒç”¨mallocæ—¶æ˜¯æ²¡æœ‰å †æ®µçš„ï¼Œåªæœ‰è°ƒç”¨mallocæ—¶é‡‡ç”¨åˆ†é…ä¸€ä¸ªå †ï¼Œå¹¶ä¸”åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥åŠ¨æ€å¢åŠ å †å¤§å°(ç§»åŠ¨breakæŒ‡é’ˆ)ï¼Œä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿ã€‚åˆ†é…å°å†…å­˜æ—¶ä½¿ç”¨è¯¥åŒºåŸŸã€‚ å †çš„èµ·å§‹åœ°å€ç”±mm_struct ç»“æ„ä½“ä¸­çš„start_brkæ ‡è¯†ï¼Œç»“æŸåœ°å€ç”±brkæ ‡è¯†ã€‚ memory mapping segment(æ˜ å°„åŒº):å­˜å‚¨åŠ¨æ€é“¾æ¥åº“ç­‰æ–‡ä»¶æ˜ å°„ã€ç”³è¯·å¤§å†…å­˜ï¼ˆmallocæ—¶è°ƒç”¨mmapå‡½æ•°ï¼‰ stackï¼ˆæ ˆåŒºï¼‰ï¼šä½¿ç”¨æ ˆç©ºé—´å­˜å‚¨å‡½æ•°çš„è¿”å›åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ï¼Œä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€‚åœ¨åˆ›å»ºè¿›ç¨‹æ—¶ä¼šæœ‰ä¸€ä¸ªæœ€å¤§æ ˆå¤§å°ï¼ŒLinuxå¯ä»¥é€šè¿‡ulimitå‘½ä»¤æŒ‡å®šã€‚ ä¸‰ã€å†…å­˜äº”åŒº # å†…å­˜äº”åŒº ä»ç¨‹åºçš„è§’åº¦ï¼Œå¯¹å†…å­˜åˆ’åˆ†ä¸ºäº”åŒº ç¨‹åºå’Œç¨‹åºä¹‹é—´çš„å†…å­˜æ˜¯ç‹¬ç«‹çš„ï¼Œä¸èƒ½äº’ç›¸è®¿é—®ï¼Œæ¯ä¸ªç¨‹åºçš„å†…å­˜ä¹Ÿæ˜¯åˆ†åŒºç®¡ç†çš„ï¼Œåˆ†ä¸ºäº”ä¸ªåŒºï¼š ä»£ç åŒºã€å…¨å±€/é™æ€åŒºã€å¸¸é‡åŒºã€æ ˆåŒºã€å †åŒºï¼Œæ¥ä¸‹æ¥ä¼šè¯¦ç»†è¯´æ˜è¿™äº”ä¸ªåŒºåŸŸ\nä¸€ä¸ªç”±C/C++ç¼–è¯‘çš„ç¨‹åºå ç”¨çš„å†…å­˜åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\næ ˆåŒº(stack)ï¼šå°±æ˜¯é‚£äº›ç”±ç¼–è¯‘å™¨åœ¨éœ€è¦çš„æ—¶å€™åˆ†é…ï¼Œåœ¨ä¸éœ€è¦çš„æ—¶å€™è‡ªåŠ¨æ¸…é™¤çš„å˜é‡çš„å­˜å‚¨åŒºã€‚é‡Œé¢çš„å˜é‡é€šå¸¸æ˜¯å‡½æ•°çš„è¿”å›åœ°å€ã€å‚æ•°ã€å±€éƒ¨å˜é‡ã€è¿”å›å€¼ç­‰ï¼Œä»é«˜åœ°å€å‘ä½åœ°å€å¢é•¿ã€‚åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œä½äºç”¨æˆ·è™šæ‹Ÿåœ°å€ç©ºé—´é¡¶éƒ¨çš„æ˜¯ç”¨æˆ·æ ˆï¼Œç¼–è¯‘å™¨ç”¨å®ƒæ¥å®ç°å‡½æ•°çš„è°ƒç”¨ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚\nå †åŒº(heap)ï¼š ä¸€èˆ¬ç”±ç¨‹åºå‘˜åˆ†é…é‡Šæ”¾ï¼Œ è‹¥ç¨‹åºå‘˜ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ ã€‚æ³¨æ„å®ƒä¸æ•°æ®ç»“æ„ä¸­çš„å †æ˜¯ä¸¤å›äº‹ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­å¯ä»¥åŠ¨æ€å¢åŠ å †å¤§å°(ç§»åŠ¨breakæŒ‡é’ˆ)ï¼Œä»ä½åœ°å€å‘é«˜åœ°å€å¢é•¿ã€‚\nâ€‹Â å †ï¼šæ˜¯æ“ä½œç³»ç»Ÿæ‰€ç»´æŠ¤çš„ä¸€å—ç‰¹æ®Šå†…å­˜ï¼Œå®ƒæä¾›äº†åŠ¨æ€åˆ†é…çš„åŠŸèƒ½ï¼Œå½“è¿è¡Œç¨‹åºè°ƒç”¨malloc()æ—¶å°±ä¼šä»ä¸­åˆ†é…ï¼Œç¨åè°ƒç”¨free()å¯æŠŠå†…å­˜äº¤è¿˜ã€‚\nâ€‹Â è‡ªç”±å­˜å‚¨åŒºï¼šè‡ªç”±å­˜å‚¨æ˜¯C++ä¸­é€šè¿‡newå’ŒdeleteåŠ¨æ€åˆ†é…å’Œé‡Šæ”¾å¯¹è±¡çš„æŠ½è±¡æ¦‚å¿µï¼Œé€šè¿‡newæ¥ç”³è¯·çš„å†…å­˜åŒºåŸŸå¯ç§°ä¸ºè‡ªç”±å­˜å‚¨åŒºã€‚åŸºæœ¬ä¸Šï¼Œæ‰€æœ‰çš„C++ç¼–è¯‘å™¨é»˜è®¤ä½¿ç”¨å †æ¥å®ç°è‡ªç”±å­˜å‚¨ï¼Œä¹Ÿå³æ˜¯ç¼ºçœçš„å…¨å±€è¿ç®—ç¬¦newå’Œdeleteä¹Ÿè®¸ä¼šæŒ‰ç…§mallocå’Œfreeçš„æ–¹å¼æ¥è¢«å®ç°ï¼Œè¿™æ—¶è—‰ç”±newè¿ç®—ç¬¦åˆ†é…çš„å¯¹è±¡ï¼Œè¯´å®ƒåœ¨å †ä¸Šä¹Ÿå¯¹ï¼Œè¯´å®ƒåœ¨è‡ªç”±å­˜å‚¨åŒºä¸Šä¹Ÿæ­£ç¡®ã€‚ä½†ç¨‹åºå‘˜ä¹Ÿå¯ä»¥é€šè¿‡é‡è½½æ“ä½œç¬¦ï¼Œæ”¹ç”¨å…¶ä»–å†…å­˜æ¥å®ç°è‡ªç”±å­˜å‚¨ï¼Œä¾‹å¦‚å…¨å±€å˜é‡åšçš„å¯¹è±¡æ± ï¼Œè¿™æ—¶è‡ªç”±å­˜å‚¨åŒºå’Œå †åŒºå°±æœ‰åŒºåˆ«äº†ã€‚\nå¸¸é‡å­˜å‚¨åŒº: è¿™æ˜¯ä¸€å—æ¯”è¾ƒç‰¹æ®Šçš„å­˜å‚¨åŒºï¼Œä»–ä»¬é‡Œé¢å­˜æ”¾çš„æ˜¯å¸¸é‡ï¼Œä¸å…è®¸ä¿®æ”¹ã€‚\næ•°æ®åŒºï¼šä¸»è¦åŒ…æ‹¬é™æ€å…¨å±€åŒºå’Œé™æ€åŒºï¼Œå¦‚æœè¦ç«™åœ¨æ±‡ç¼–è§’åº¦ç»†åˆ†çš„è¯è¿˜å¯ä»¥åˆ†ä¸ºå¾ˆå¤šå°çš„åŒºã€‚\nâ€‹Â å…¨å±€åŒº\u0026amp;é™æ€åŒºï¼šå…¨å±€å˜é‡å’Œé™æ€å˜é‡è¢«åˆ†é…åˆ°åŒä¸€å—å†…å­˜ä¸­ï¼Œåœ¨ä»¥å‰çš„ C è¯­è¨€ä¸­ï¼Œå…¨å±€å˜é‡å’Œé™æ€å˜é‡åˆåˆ†ä¸º å…¨å±€åˆå§‹åŒ–åŒº(DATAæ®µ) ï¼šå­˜å‚¨ç¨‹åºä¸­å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ æœªåˆå§‹åŒ–æ®µ(BSSæ®µ) ï¼šå­˜å‚¨æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆå±€éƒ¨+å…¨å±€ï¼‰ã€‚BSSæ®µåœ¨DATAæ®µçš„ç›¸é‚»çš„ å¦ä¸€å—åŒºåŸŸã€‚BBSæ®µç‰¹ç‚¹ï¼šåœ¨ç¨‹åºæ‰§è¡Œå‰BBSæ®µè‡ªåŠ¨æ¸…é›¶ï¼Œæ‰€ä»¥æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ç¨‹åºæ‰§è¡Œå‰å·²ç»æˆä¸º0ã€‚\nåœ¨ C++ é‡Œé¢æ²¡æœ‰è¿™ä¸ªåŒºåˆ†äº†ï¼Œå®ƒä»¬å…±åŒå ç”¨åŒä¸€å—å†…å­˜åŒºã€‚\nä»£ç åŒºï¼šåŒ…æ‹¬åªè¯»å­˜å‚¨åŒºå’Œæ–‡æœ¬åŒºï¼Œå…¶ä¸­åªè¯»å­˜å‚¨åŒºå­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œå°±æ˜¯å¸¸é‡åŒºï¼Œæ–‡æœ¬åŒºå­˜å‚¨ç¨‹åºçš„æœºå™¨ä»£ç ã€‚\nå››ã€cè¯­è¨€å†…å­˜çš„åˆ†é… # 1. é™æ€å†…å­˜åˆ†é… # å®šä¹‰ï¼šåœ¨ç¼–è¯‘æ—¶ç¡®å®šå¤§å°å’Œä½ç½®ï¼Œç”Ÿå‘½å‘¨æœŸä¸ç¨‹åºä¸€è‡´ã€‚ ç‰¹ç‚¹ï¼š å­˜æ”¾å…¨å±€å˜é‡ã€é™æ€å˜é‡ã€å¸¸é‡ã€‚ æ— éœ€æ‰‹åŠ¨ç®¡ç†ï¼Œç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…å’Œé‡Šæ”¾ã€‚ å†…å­˜åŒºåŸŸï¼š æ•°æ®æ®µï¼ˆData Segmentï¼‰ï¼šå­˜æ”¾å·²åˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ã€‚ BSSæ®µï¼ˆBlock Started by Symbolï¼‰ï¼šå­˜æ”¾æœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡ï¼ˆé»˜è®¤åˆå§‹åŒ–ä¸º0ï¼‰ã€‚ ä»£ç æ®µï¼ˆText Segmentï¼‰ï¼šå­˜æ”¾ç¨‹åºä»£ç å’Œå¸¸é‡ï¼ˆå¦‚å­—ç¬¦ä¸²å¸¸é‡ï¼‰ã€‚ int global_var = 10; // æ•°æ®æ®µï¼ˆ.dataï¼‰ static int static_var = 20; // æ•°æ®æ®µï¼ˆ.dataï¼‰ int initialized_array[3] = {1, 2, 3}; // æ•°æ®æ®µï¼ˆ.dataï¼‰ int uninitialized_array[5]; // .bss æ®µï¼ˆåˆå§‹åŒ–ä¸º0ï¼‰ char *str = \u0026#34;Hello\u0026#34;; // ä»£ç æ®µï¼ˆ.rodataï¼Œåªè¯»ï¼‰ void func() { static int local_static; // BSSæ®µï¼ˆ.bssï¼‰ } 2. æ ˆå†…å­˜åˆ†é… # å®šä¹‰ï¼šç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œå­˜æ”¾å‡½æ•°å†…çš„å±€éƒ¨å˜é‡å’Œå‚æ•°ã€‚ ç‰¹ç‚¹ï¼š å†…å­˜åˆ†é…å’Œé‡Šæ”¾è‡ªåŠ¨å®Œæˆï¼ˆå‡½æ•°è°ƒç”¨æ—¶åˆ†é…ï¼Œè¿”å›æ—¶é‡Šæ”¾ï¼‰ã€‚ å¤§å°å›ºå®šä¸”æœ‰é™ï¼ˆé»˜è®¤1-8MBï¼Œè¶…å‡ºå¯¼è‡´æ ˆæº¢å‡ºï¼‰ã€‚ void func() { int a = 10; // æ ˆå†…å­˜åˆ†é… char buffer[100]; // æ ˆå†…å­˜åˆ†é…ï¼ˆæ³¨æ„é¿å…è¿‡å¤§ï¼‰ } 3. å †å†…å­˜åˆ†é… # å®šä¹‰ï¼šç”±ç¨‹åºå‘˜æ‰‹åŠ¨ç®¡ç†çš„å†…å­˜åŒºåŸŸï¼Œç”¨äºåŠ¨æ€åˆ†é…ã€‚ ç‰¹ç‚¹ï¼š å†…å­˜å¤§å°å¯åœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´ã€‚ éœ€æ˜¾å¼åˆ†é…ï¼ˆmalloc/callocï¼‰å’Œé‡Šæ”¾ï¼ˆfreeï¼‰ã€‚ å†…å­˜æ³„æ¼é£é™©é«˜ï¼Œéœ€è°¨æ…ç®¡ç†ã€‚ ç¤ºä¾‹ï¼š int *arr = (int*)malloc(10 * sizeof(int)); // å †å†…å­˜åˆ†é… free(arr); // å¿…é¡»æ‰‹åŠ¨é‡Šæ”¾ arr = NULL; // é¿å…æ‚¬ç©ºæŒ‡é’ˆ callocã€mallocã€reallocå‡½æ•°çš„åŒºåˆ«åŠç”¨æ³• malloc(Memory Allocation)ã€‚å…¶åŸå‹void *malloc(unsigned int num_bytes)ï¼›num_byteä¸ºè¦ç”³è¯·çš„ç©ºé—´å¤§å°ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨çš„å»è®¡ç®—ï¼Œå¦‚int *p = (int *)malloc(20*sizeof(int)),å¦‚æœç¼–è¯‘å™¨é»˜è®¤intä¸º4å­—èŠ‚å­˜å‚¨çš„è¯ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœæ˜¯80Byteï¼Œä¸€æ¬¡ç”³è¯·ä¸€ä¸ª80Byteçš„è¿ç»­ç©ºé—´ï¼Œå¹¶å°†ç©ºé—´åŸºåœ°å€å¼ºåˆ¶è½¬æ¢ä¸ºintç±»å‹ï¼Œèµ‹å€¼ç»™æŒ‡é’ˆp,æ­¤æ—¶ç”³è¯·çš„å†…å­˜å€¼æ˜¯ä¸ç¡®å®šçš„ã€‚ calloc(Contiguous Allocation)ï¼Œå…¶åŸå‹void *calloc(size_t n, size_t size)ï¼›å…¶æ¯”mallocå‡½æ•°å¤šä¸€ä¸ªå‚æ•°ï¼Œå¹¶ä¸éœ€è¦äººä¸ºçš„è®¡ç®—ç©ºé—´çš„å¤§å°ï¼Œæ¯”å¦‚è¦ç”³è¯·20ä¸ªintç±»å‹ç©ºé—´ï¼Œå¯ä»¥int *p = (int *)calloc(20, sizeof(int)ï¼‰,è¿™æ ·å°±çœå»äº†äººä¸ºç©ºé—´è®¡ç®—çš„éº»çƒ¦ã€‚ä½†è¿™å¹¶ä¸æ˜¯ä»–ä»¬ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«ï¼Œmallocç”³è¯·åç©ºé—´çš„å€¼æ˜¯éšæœºçš„ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œè€Œcallocå´åœ¨ç”³è¯·åï¼Œå¯¹ç©ºé—´é€ä¸€è¿›è¡Œåˆå§‹åŒ–ï¼Œå¹¶è®¾ç½®å€¼ä¸º0; callocÂ çš„ \u0026ldquo;c\u0026rdquo; å…¼é¡¾Â Contiguousï¼ˆè¿ç»­åˆ†é…ï¼‰å’ŒÂ Clearedï¼ˆæ¸…é›¶ï¼‰çš„åŒé‡å«ä¹‰ï¼Œä½†å…¨ç§°ä»¥Â Contiguous AllocationÂ ä¸ºä¸»æµè§£é‡Šã€‚ realloc(Re-allocation),ä¸ä¸Šé¢ä¸¤ä¸ªæœ‰æœ¬è´¨çš„åŒºåˆ«ï¼Œå…¶åŸå‹void realloc(void *ptr, size_t new_Size)ç”¨äºå¯¹åŠ¨æ€å†…å­˜è¿›è¡Œæ‰©å®¹(åŠå·²ç”³è¯·çš„åŠ¨æ€ç©ºé—´ä¸å¤Ÿä½¿ç”¨ï¼Œéœ€è¦è¿›è¡Œç©ºé—´æ‰©å®¹æ“ä½œ)ï¼Œpträ¸ºæŒ‡å‘åŸæ¥ç©ºé—´åŸºå€çš„æŒ‡é’ˆï¼Œ new_sizeä¸ºæ¥ä¸‹æ¥éœ€è¦æ‰©å……å®¹é‡çš„å¤§å°ã€‚ äº”ã€å †ä¸æ ˆçš„åŒºåˆ« # æ ˆæ˜¯ç”±ç¼–è¯‘å™¨åœ¨éœ€è¦æ—¶åˆ†é…çš„ï¼Œä¸éœ€è¦æ—¶è‡ªåŠ¨æ¸…é™¤çš„å˜é‡å­˜å‚¨åŒºã€‚é‡Œé¢çš„å˜é‡é€šå¸¸æ˜¯å±€éƒ¨å˜é‡ã€å‡½æ•°å‚æ•°ç­‰ã€‚å †æ˜¯ç”±malloc()å‡½æ•°ï¼ˆC++è¯­è¨€ä¸ºnewè¿ç®—ç¬¦ï¼‰åˆ†é…çš„å†…å­˜å—ï¼Œå†…å­˜é‡Šæ”¾ç”±ç¨‹åºå‘˜æ‰‹åŠ¨æ§åˆ¶ï¼Œåœ¨Cè¯­è¨€ä¸ºfreeå‡½æ•°å®Œæˆï¼ˆC++ä¸­ä¸ºdeleteï¼‰ã€‚æ ˆå’Œå †çš„ä¸»è¦åŒºåˆ«æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š\nç®¡ç†æ–¹å¼ä¸åŒ æ ˆç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œæ— éœ€ç¨‹åºå‘˜æ‰‹å·¥æ§åˆ¶ï¼›è€Œå †ç©ºé—´çš„ç”³è¯·é‡Šæ”¾å·¥ä½œç”±ç¨‹åºå‘˜æ§åˆ¶ï¼Œå®¹æ˜“äº§ç”Ÿå†…å­˜æ³„æ¼ã€‚\nç©ºé—´å¤§å°ä¸åŒ æ ˆæ˜¯å‘ä½åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€å—è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚è¿™å¥è¯çš„æ„æ€æ˜¯æ ˆé¡¶çš„åœ°å€å’Œæ ˆçš„æœ€å¤§å®¹é‡æ˜¯ç³»ç»Ÿé¢„å…ˆè§„å®šå¥½çš„ï¼Œå½“ç”³è¯·çš„ç©ºé—´è¶…è¿‡æ ˆçš„å‰©ä½™ç©ºé—´æ—¶ï¼Œå°†æç¤ºæº¢å‡ºã€‚å› æ­¤ï¼Œç”¨æˆ·èƒ½ä»æ ˆè·å¾—çš„ç©ºé—´è¾ƒå°ã€‚\nå †æ˜¯å‘é«˜åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚å› ä¸ºç³»ç»Ÿæ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨ç©ºé—²å†…å­˜åœ°å€çš„ï¼Œä¸”é“¾è¡¨çš„éå†æ–¹å‘æ˜¯ç”±ä½åœ°å€å‘é«˜åœ°å€ã€‚ç”±æ­¤å¯è§ï¼Œå †è·å¾—çš„ç©ºé—´è¾ƒçµæ´»ï¼Œä¹Ÿè¾ƒå¤§ã€‚æ ˆä¸­å…ƒç´ éƒ½æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œä¸ä¼šå­˜åœ¨ä¸€ä¸ªå†…å­˜å—ä»æ ˆä¸­é—´å¼¹å‡ºçš„æƒ…å†µã€‚\næ˜¯å¦äº§ç”Ÿç¢ç‰‡ å¯¹äºå †æ¥è®²ï¼Œé¢‘ç¹çš„malloc/freeï¼ˆnew/deleteï¼‰åŠ¿å¿…ä¼šé€ æˆå†…å­˜ç©ºé—´çš„ä¸è¿ç»­ï¼Œä»è€Œé€ æˆå¤§é‡çš„ç¢ç‰‡ï¼Œä½¿ç¨‹åºæ•ˆç‡é™ä½ï¼ˆè™½ç„¶ç¨‹åºåœ¨é€€å‡ºåæ“ä½œç³»ç»Ÿä¼šå¯¹å†…å­˜è¿›è¡Œå›æ”¶ç®¡ç†ï¼‰ã€‚å¯¹äºæ ˆæ¥è®²ï¼Œåˆ™ä¸ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚\nå¢é•¿æ–¹å‘ä¸åŒ å †çš„å¢é•¿æ–¹å‘æ˜¯å‘ä¸Šçš„ï¼Œå³å‘ç€å†…å­˜åœ°å€å¢åŠ çš„æ–¹å‘ï¼›æ ˆçš„å¢é•¿æ–¹å‘æ˜¯å‘ä¸‹çš„ï¼Œå³å‘ç€å†…å­˜åœ°å€å‡å°çš„æ–¹å‘ã€‚\nåˆ†é…æ–¹å¼ä¸åŒ å †éƒ½æ˜¯ç¨‹åºä¸­ç”±malloc()å‡½æ•°åŠ¨æ€ç”³è¯·åˆ†é…å¹¶ç”±free()å‡½æ•°é‡Šæ”¾çš„ï¼›æ ˆçš„åˆ†é…å’Œé‡Šæ”¾æ˜¯ç”±ç¼–è¯‘å™¨å®Œæˆçš„ï¼Œæ ˆçš„åŠ¨æ€åˆ†é…ç”±alloca()å‡½æ•°å®Œæˆï¼Œä½†æ˜¯æ ˆçš„åŠ¨æ€åˆ†é…å’Œå †æ˜¯ä¸åŒçš„ï¼Œä»–çš„åŠ¨æ€åˆ†é…æ˜¯ç”±ç¼–è¯‘å™¨è¿›è¡Œç”³è¯·å’Œé‡Šæ”¾çš„ï¼Œæ— éœ€æ‰‹å·¥å®ç°ã€‚\nåˆ†é…æ•ˆç‡ä¸åŒ æ ˆæ˜¯æœºå™¨ç³»ç»Ÿæä¾›çš„æ•°æ®ç»“æ„ï¼Œè®¡ç®—æœºä¼šåœ¨åº•å±‚å¯¹æ ˆæä¾›æ”¯æŒï¼šåˆ†é…ä¸“é—¨çš„å¯„å­˜å™¨å­˜æ”¾æ ˆçš„åœ°å€ï¼Œå‹æ ˆå‡ºæ ˆéƒ½æœ‰ä¸“é—¨çš„æŒ‡ä»¤æ‰§è¡Œã€‚å †åˆ™æ˜¯Cå‡½æ•°åº“æä¾›çš„ï¼Œå®ƒçš„æœºåˆ¶å¾ˆå¤æ‚ï¼Œä¾‹å¦‚ä¸ºäº†åˆ†é…ä¸€å—å†…å­˜ï¼Œåº“å‡½æ•°ä¼šæŒ‰ç…§ä¸€å®šçš„ç®—æ³•ï¼ˆå…·ä½“çš„ç®—æ³•å¯ä»¥å‚è€ƒæ•°æ®ç»“æ„/æ“ä½œç³»ç»Ÿï¼‰åœ¨å †å†…å­˜ä¸­æœç´¢å¯ç”¨çš„è¶³å¤Ÿå¤§çš„ç©ºé—´ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿå¤§çš„ç©ºé—´ï¼ˆå¯èƒ½æ˜¯ç”±äºå†…å­˜ç¢ç‰‡å¤ªå¤šï¼‰ï¼Œå°±æœ‰éœ€è¦æ“ä½œç³»ç»Ÿæ¥é‡æ–°æ•´ç†å†…å­˜ç©ºé—´ï¼Œè¿™æ ·å°±æœ‰æœºä¼šåˆ†åˆ°è¶³å¤Ÿå¤§å°çš„å†…å­˜ï¼Œç„¶åè¿”å›ã€‚æ˜¾ç„¶ï¼Œå †çš„æ•ˆç‡æ¯”æ ˆè¦ä½å¾—å¤šã€‚\n","date":"2025-03-28","externalUrl":null,"permalink":"/posts/learn-c/c%E8%AF%AD%E8%A8%80%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E4%BB%A3%E7%A0%81%E5%8C%BA%E9%9D%99%E6%80%81%E5%8C%BA%E6%A0%88%E5%8C%BA%E5%A0%86%E5%8C%BA/","section":"Posts","summary":"","title":"Cè¯­è¨€å†…å­˜ç®¡ç†ï¼šä»£ç åŒºã€é™æ€åŒºã€æ ˆåŒºã€å †åŒº","type":"posts"},{"content":"MyWï¼šç®€å•çš„å¤šæ’æ˜Ÿå•ä½“æ¨¡æ‹Ÿï¼Œå¯ç”Ÿæˆé€Ÿåº¦å˜åŒ–ä¿¡æ¯ï¼Œå ç”¨L1ï¼Œä½¿ç”¨GG(X)å‡½æ•°æŸ¥çœ‹ã€‚ ä½¿ç”¨å‡½æ•°GG(X)ç»˜åˆ¶é€Ÿåº¦å˜åŒ–ä¿¡æ¯ æºæ–‡ä»¶ï¼š\nEXPORT GG(X) BEGIN RETURN (L1(INT(X*16))+L1(INT(X*16+1)))/2; END; EXPORT MyW() BEGIN LOCAL Starsl:={{âˆ’50,0,200},{50,0,100},{0,50,200}},Starl,N1,N2; LOCAL X,Y:=âˆ’32,Vx:=âˆš(25/8),Vy:=1,Fx,Fy,Ml; LOCAL Mx,My; LOCAL Dt:=0.05; RECT(); BLOAD(G0,128-16,64-16,L5); 0â–ºT; WHILE 1 DO T:=1+T;IF T MOD 16==0 THEN âˆš(VxÂ²+VyÂ²)â–ºL1(T/16+1)END; 0â–ºMx;0â–ºMy; FOR N1 FROM 1 TO SIZE(Starsl) DO Starsl(N1)â–ºStarl; Ml:=Starl(3)*((Starl(1)-X)Â²+(Starl(2)-Y)Â²)^âˆ’1.5; Mx:=Mx+(Starl(1)-X)*Ml; My:=My+(Starl(2)-Y)*Ml; END; Vx:=Vx+(Mx+Fx)*Dt;Vy:=Vy+(My+Fy)*Dt; X:=X+Vx*Dt;Y:=Y+Vy*Dt; PIXON_P(X+128,Y+64); END; END; END; ","date":"2025-03-28","externalUrl":null,"permalink":"/posts/hp-calc/myw/","section":"Posts","summary":"ç®€å•çš„å¤šæ’æ˜Ÿå•ä½“æ¨¡æ‹Ÿï¼Œå¯ç”Ÿæˆé€Ÿåº¦å˜åŒ–ä¿¡æ¯ï¼Œå ç”¨L1ï¼Œä½¿ç”¨GG(X)å‡½æ•°æŸ¥çœ‹","title":"HP39GIIç¨‹åº-ç®€å•çš„å¤šæ’æ˜Ÿå•ä½“æ¨¡æ‹Ÿ MyW","type":"posts"},{"content":"FIRE2:[The Fire] çš„å‡çº§ç‰ˆã€‚åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦å’ŒåŠ¨é‡å®ˆæ’çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿï¼Œå¯æ¨¡æ‹Ÿåœ†å½¢è½¨é“æ›²çº¿è¿åŠ¨ï¼Œå¯è‡ªå®šä¹‰åœ°å›¾ã€‚\næºä»£ç ï¼š ç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç \n","date":"2025-03-28","externalUrl":null,"permalink":"/posts/hp-calc/fire2/","section":"Posts","summary":"[The Fire] çš„å‡çº§ç‰ˆã€‚åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦å’ŒåŠ¨é‡å®ˆæ’çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿï¼Œå¯æ¨¡æ‹Ÿåœ†å½¢è½¨é“æ›²çº¿è¿åŠ¨ï¼Œå¯è‡ªå®šä¹‰åœ°å›¾","title":"HP39GIIç¨‹åº-ç‰›é¡¿åŠ›å­¦å•è´¨ç‚¹äº¤äº’æ¨¡æ‹Ÿ FIRE2","type":"posts"},{"content":"hcBoy:ç«æŸ´äººå§¿åŠ¿æ¨¡æ‹Ÿï¼Œé€’å½’å®ç°ï¼Œä¸Šä¸€éƒ¨ä½å§¿åŠ¿çš„ä¼ é€’å’Œä¸€å®šèŒƒå›´å†…çš„éšæœºã€‚\nHcLine(X,Y,L,d1,d2,d0) BEGIN LOCAL d:=RANDOM(d1,d2)*Ï€+d0; LINE_P(X,Y,X+L*COS(d),Y+L*SIN(d)); RETURN {X+L*COS(d),Y+L*SIN(d),d}; END; EXPORT HcBoy() BEGIN LOCAL Hcl,Hcl2,K:=1,N; WHILE 1 DO WAIT(0.1); IF ISKEYDOWN(0)==1 THEN N:=N+RANDOM; RANDSEED(N); 1â–ºK; END; IF K==1 THEN RECT; HcLine(128,64,15,.5,1.5,0)â–ºHcl;//å·¦æ‰‹ HcLine(Hcl(1),Hcl(2),16,âˆ’.5,.5,Hcl(3)); HcLine(128,64,15,âˆ’.5,.5,0)â–ºHcl;//å³æ‰‹ HcLine(Hcl(1),Hcl(2),16,âˆ’.5,.5,Hcl(3)); HcLine(128,64,21,âˆ’0.5,1.5,0)â–ºHcl;//è…° HcLine(128,64,10,âˆ’.3,0.3,Hcl(3)-Ï€)â–ºHcl2;//å¤´ ARC_P(Hcl2(1),Hcl2(2),5); HcLine(Hcl(1),Hcl(2),25,âˆ’.2,.3,Hcl(3))â–ºHcl2;//å·¦è…¿1 HcLine(Hcl2(1),Hcl2(2),27,âˆ’.5,.5,Hcl2(3));//å·¦è…¿2 HcLine(Hcl(1),Hcl(2),25,âˆ’.3,.2,Hcl(3))â–ºHcl2;//å³è…¿1 HcLine(Hcl2(1),Hcl2(2),27,âˆ’.5,.5,Hcl2(3));//å³è…¿2 0â–ºK; END; END; END; æºä»£ç ï¼š ç‚¹å‡»ä¸‹è½½ æŸ¥çœ‹æºç \n","date":"2025-03-27","externalUrl":null,"permalink":"/posts/hp-calc/hcboy/","section":"Posts","summary":"ç«æŸ´äººå§¿åŠ¿æ¨¡æ‹Ÿï¼Œé€’å½’å®ç°ï¼Œä¸Šä¸€éƒ¨ä½å§¿åŠ¿çš„ä¼ é€’å’Œä¸€å®šèŒƒå›´å†…çš„éšæœºã€‚","title":"HP39GIIç¨‹åº-é€’å½’å®ç°ç«æŸ´äººæ¨¡æ‹Ÿ HCBoy","type":"posts"},{"content":"BPointï¼šä¸€ä¸ªç®€å•çš„ç»˜å›¾ç¨‹åºï¼Œè°ƒç”¨BLibä¿å­˜è¯»å–å›¾åƒåˆ°L5ï¼Œå¯ä»¥ç»˜åˆ¶å¤šç§ç°åº¦ï¼Œæ”¯æŒç»˜åˆ¶åœ†ã€çº¿ã€çŸ©å½¢ã€‚\nä½¿ç”¨BLibè‡ªå¸¦çš„æ¡ˆä¾‹å¦‚ä¸‹ï¼š\n{32,32,\u0026#34;Ó‡Ò²Ï²Ò±Ò°Ï¶Ò¯Ò¯Ï²Æ½Æ»Ò¬Ò­Ä˜Ä˜Ğ¬Ò­Æ¸Ä‡Ò¬Å„ÆŸÒ³Æ‰Ä‡Ç‡Å„Ò¸Ã‰Ä‡Ç‡Å„Ò·Ã‰Ç„Ä‡Æ§Ò·Ã‰Æ¸Æ—Æ¿Ò·Ã‰ÆˆÆ—Æ¿Ò¸ÃÄ¸Æ»Æ§Ò¹Ã‰ÃˆÆ»Ä§Å‡Ò¬Ç…Æ‹Ã‰ÃˆÆ»Ã§Ã¥Å…Ä¥ÆÏ¯Æ»Ã§Å…Æ‹Ò¬Ç„Ï®Æ»Ä§Ä‡Ã”Æ¸Æ»Ã‹ÃˆÆ›Å‡Æ—Ò­ÆˆÃ‹Ï­Ä‹Ò­Ç„Ò¯Ï±Ã‹Ç…Ä‡Ò²Ï°Ã‹Æ¼Ä‡Ò±Ï±Ã‹Ä˜ÇÃ¸Ò­Ï±Ã‹Ï¬Ç…Ã£Ò¬Ï±Ã—Ï¬Ç…Ã¾Ç‡ÆˆÏ­Ã‹Ã—Ï­Å…Ã¼Ã”Ã”Ï¬Ã‹Ä‡Ï®Ã‘Æ¼ÃŒÏ®Ã—Ç‡Ï¯Ã‰Å…Ï­Ã‹Ã—Ç‡Ï´ÃÃˆÃ‹Ä‡Ò¬Ï´Ã‰Ã¸Æ¸Ã—Ò­Ï²Ã™Ã”Æ¸Ä‡Ò¯Ï°Ã‹Ã‹Ò®Ò°Ï°Ã‹Æ¸Ò­Ò²Ï²Ò±\u0026#34;} æºæ–‡ä»¶ï¼š\nBPoint.txt\nBPoint\n","date":"2025-03-27","externalUrl":null,"permalink":"/posts/hp-calc/bpoint/","section":"Posts","summary":"ç®€å•çš„ç»˜å›¾ç¨‹åºï¼Œè‡ªå®šä¹‰å®½é«˜ï¼Œç®€æ˜“guiï¼Œè°ƒç”¨BLibä¿å­˜è¯»å–å›¾åƒ","title":"HP39GIIç¨‹åº-ç»˜å›¾ BPoint","type":"posts"},{"content":"","date":"2024-10-09","externalUrl":null,"permalink":"/tags/vim/","section":"Tags","summary":"","title":"Vim","type":"tags"},{"content":" ç¬¬ä¸€æ­¥ï¼šåœ¨ä»»æ„æ–‡ä»¶å¤¹ä¸‹æ‰§è¡Œ # git clone https://github.com/vim/vim.git\nç¬¬äºŒæ­¥ï¼šè¿›å…¥ vim é¡¹ç›®æ–‡ä»¶å¤¹ # cd ./vim\nç¬¬å››æ­¥ï¼šconfigure vim # ./configure --with-features=huge \\ --enable-multibyte \\ --enable-rubyinterp=yes \\ --enable-python3interp=yes \\ --with-python-config-dir=/usr/lib/python3.11/config-3.11-x86_64-linux-gnu \\ --enable-perlinterp=yes \\ --enable-luainterp=yes \\ --enable-gui=gtk2 \\ --enable-cscope \\ --prefix=/usr/local å¼€å¯ rubyã€python3ã€perlã€lua\nç¬¬äº”æ­¥ï¼šmake # make VIMRUNTIMEDIR=/usr/local/share/vim/vim81\nç¬¬å…­æ­¥ï¼šå®‰è£…åˆ°ç³»ç»Ÿä¸­ # sudo make install\nç¬¬å…­æ­¥ï¼šæŸ¥çœ‹ç‰¹æ€§æ˜¯å¦å·²ç»å¼€å¯ # vim --version\n","date":"2024-10-09","externalUrl":null,"permalink":"/posts/vim%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E6%8F%92%E4%BB%B6/","section":"Posts","summary":"","title":"vimè‡ªåŠ¨è¡¥å…¨æ’ä»¶","type":"posts"},{"content":" Vim C/C++å¼€å‘é…ç½® # 1.åŸºç¡€å‡†å¤‡ # å®‰è£…g++ gcc git cmake\nsudo apt-get install g++ gcc cmake git 1 å®‰è£…vim\nsudo apt-get install vim 1 2.å®‰è£…Vimæ’ä»¶ç®¡ç†å·¥å…·Vundle # Vundleè®©ä½ å¯ä»¥éå¸¸è½»æ¾åœ°å®‰è£…ã€æ›´æ–°ã€æœç´¢å’Œæ¸…ç†æ’ä»¶\næŒ‰ctrl + alt + Tæ‰“å¼€ Terminal\nè¿›å…¥åˆ°~/.vimæ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»º\n~$ cd ~/.vim/ #å¦‚æœæ— æ–‡ä»¶å¤¹ #mkdir .vim 123 åœ¨~/.vimç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªbundleç›®å½•,ä¸‹è½½Vundle.vimåˆ°~/.vim/bundleç›®å½•ä¸‹\n~/.vim$ mkdir bundle ~/.vim$ git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim 12 å¦‚æœæ— æ³•ä¸‹è½½ï¼Œå¯ä»¥ç›´æ¥ç‚¹å‡»é“¾æ¥ä¸‹è½½åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ã€‚\n3.é…ç½®~/.vimrc # åœ¨~ä¸‹åˆ›å»ºæ–‡ä»¶.vimrc\n~/$ vim .vimrc 1 å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ° .vimrcä¸­\nfiletype off syntax on set rtp+=~/.vim/bundle/Vundle.vim call vundle#begin() Plugin \u0026#39;VundleVim/Vundle.vim\u0026#39; Plugin \u0026#39;scrooloose/nerdtree\u0026#39; \u0026#34; æ–‡ä»¶æ ‘ Plugin \u0026#39;Valloric/YouCompleteMe\u0026#39;\t\u0026#34; ä»£ç æç¤ºè¡¥å…¨æ’ä»¶\tPlugin \u0026#39;sickill/vim-monokai\u0026#39; \u0026#34; monokaiä¸»é¢˜ Plugin \u0026#39;vim-airline/vim-airline\u0026#39; \u0026#34; ç¾åŒ–çŠ¶æ€æ  Plugin \u0026#39;vim-airline/vim-airline-themes\u0026#39; \u0026#34; è®¾ç½®ailine Plugin \u0026#39;plasticboy/vim-markdown\u0026#39; \u0026#34; markdowné«˜äº® Plugin \u0026#39;octol/vim-cpp-enhanced-highlight\u0026#39; \u0026#34; C++ä»£ç é«˜äº® Plugin \u0026#39;mhinz/vim-signify\u0026#39; Plugin \u0026#39;dense-analysis/ale\u0026#39; Plugin \u0026#39;morhetz/gruvbox\u0026#39;\t\u0026#34; ä¸»é¢˜\tPlugin \u0026#39;luochen1990/rainbow\u0026#39;\t\u0026#34;rainbow parenthesis call vundle#end() \u0026#34;------------------------------------ \u0026#34;-------------keyboard map----------- \u0026#34;----------------------------------- inoremap jj \u0026lt;esc\u0026gt; \u0026#34;----------------------------------- \u0026#34;è®©vimrcé…ç½®å˜æ›´ç«‹å³ç”Ÿæ•ˆ\u0026#39; autocmd BufWritePost $MYVIMRC source $MYVIMRC colorscheme gruvbox set background=dark filetype on set signcolumn=yes \u0026#34;å¼ºåˆ¶æ˜¾ç¤ºä¾§è¾¹æ ï¼Œé˜²æ­¢æ—¶æœ‰æ—¶æ—  syntax on set shiftwidth=4 set tabstop=4 let g:ycm_clangd_binary_path=\u0026#39;clangd\u0026#39; set number \u0026#34;æœç´¢å¿½ç•¥å¤§å°å†™ set ignorecase \u0026#34;æœç´¢é€å­—ç¬¦é«˜äº® set hlsearch set incsearch \u0026#34; ä¸ºCç¨‹åºæä¾›è‡ªåŠ¨ç¼©è¿› set smartindent set cursorline \u0026#34; çªå‡ºæ˜¾ç¤ºå½“å‰è¡Œ \u0026#34;å…‰æ ‡é‡åˆ°åœ†æ‹¬å·ã€æ–¹æ‹¬å·ã€å¤§æ‹¬å·æ—¶ï¼Œè‡ªåŠ¨é«˜äº®å¯¹åº”çš„å¦ä¸€ä¸ªåœ†æ‹¬å·ã€æ–¹æ‹¬å·å’Œå¤§æ‹¬å·\u0026#34; set showmatch \u0026#34;æ‹¬å·è‡ªåŠ¨åŒ¹é…è¡¥å…¨\u0026#34; inoremap ( ()\u0026lt;Esc\u0026gt;i inoremap [ []\u0026lt;Esc\u0026gt;i inoremap { {}\u0026lt;Esc\u0026gt;i inoremap { {\u0026lt;CR\u0026gt;}\u0026lt;Esc\u0026gt;O \u0026#34; C++çš„ç¼–è¯‘å’Œè¿è¡Œ map \u0026lt;F5\u0026gt; :call CompileRunGpp()\u0026lt;CR\u0026gt; func! CompileRunGpp() exec \u0026#34;w\u0026#34; exec \u0026#34;!g++ % -o %\u0026lt;\u0026#34; exec \u0026#34;! ./%\u0026lt;\u0026#34; endfunc \u0026#34;rainbow parenthesis let g:rainbow_active = 1 \u0026#34; æ–‡ä»¶æ ‘çš„è®¾ç½® nmap \u0026lt;Leader\u0026gt;\u0026lt;Leader\u0026gt; :NERDTreeToggle\u0026lt;CR\u0026gt; let NERDTreeWinSize=32 \u0026#34; è®¾ç½®NERDTreeå­çª—å£å®½åº¦ let NERDTreeWinPos=\u0026#34;left\u0026#34; \u0026#34; è®¾ç½®NERDTreeå­çª—å£ä½ç½® let NERDTreeShowHidden=1 \u0026#34; æ˜¾ç¤ºéšè—æ–‡ä»¶ let NERDTreeMinimalUI=1 \u0026#34; NERDTree å­çª—å£ä¸­ä¸æ˜¾ç¤ºå†—ä½™å¸®åŠ©ä¿¡æ¯ let g:rainbow_conf = { \\ \u0026#39;guifgs\u0026#39;: [\u0026#39;royalblue3\u0026#39;, \u0026#39;darkorange3\u0026#39;, \u0026#39;seagreen3\u0026#39;, \u0026#39;firebrick\u0026#39;], \\ \u0026#39;ctermfgs\u0026#39;: [\u0026#39;lightblue\u0026#39;, \u0026#39;lightyellow\u0026#39;, \u0026#39;lightcyan\u0026#39;, \u0026#39;lightmagenta\u0026#39;], \\ \u0026#39;operators\u0026#39;: \u0026#39;_,\\|+\\|-_\u0026#39;, \\ \u0026#39;parentheses\u0026#39;: [\u0026#39;start=/(/ end=/)/ fold\u0026#39;, \u0026#39;start=/\\[/ end=/\\]/ fold\u0026#39;, \u0026#39;start=/{/ end=/}/ fold\u0026#39;], \\ \u0026#39;separately\u0026#39;: { \\ \u0026#39;*\u0026#39;: {}, \\ \u0026#39;tex\u0026#39;: { \\ \u0026#39;parentheses\u0026#39;: [\u0026#39;start=/(/ end=/)/\u0026#39;, \u0026#39;start=/\\[/ end=/\\]/\u0026#39;], \\ }, \\ \u0026#39;css\u0026#39;: 0, \\ } \\} \u0026#34; ç»‘å®šF2åˆ°NERDTreeToggle map \u0026lt;F2\u0026gt; :NERDTreeToggle\u0026lt;CR\u0026gt; \u0026#34; YouCompleteMe set runtimepath+=~/.vim/bundle/YouCompleteMe let g:ycm_collect_identifiers_from_tags_files = 1 \u0026#34; å¼€å¯ YCM åŸºäºæ ‡ç­¾å¼•æ“ let g:ycm_collect_identifiers_from_comments_and_strings = 1 \u0026#34; æ³¨é‡Šä¸å­—ç¬¦ä¸²ä¸­çš„å†…å®¹ä¹Ÿç”¨äºè¡¥å…¨ let g:syntastic_ignore_files=[\u0026#34;.*\\.py$\u0026#34;] let g:ycm_seed_identifiers_with_syntax = 1 \u0026#34; è¯­æ³•å…³é”®å­—è¡¥å…¨ let g:ycm_complete_in_comments = 1 let g:ycm_confirm_extra_conf = 0 let g:ycm_key_list_select_completion = [\u0026#39;\u0026lt;c-n\u0026gt;\u0026#39;, \u0026#39;\u0026lt;Down\u0026gt;\u0026#39;] \u0026#34; æ˜ å°„æŒ‰é”®, æ²¡æœ‰è¿™ä¸ªä¼šæ‹¦æˆªæ‰tab, å¯¼è‡´å…¶ä»–æ’ä»¶çš„tabä¸èƒ½ç”¨. let g:ycm_key_list_previous_completion = [\u0026#39;\u0026lt;c-p\u0026gt;\u0026#39;, \u0026#39;\u0026lt;Up\u0026gt;\u0026#39;] let g:ycm_complete_in_comments = 1 \u0026#34; åœ¨æ³¨é‡Šè¾“å…¥ä¸­ä¹Ÿèƒ½è¡¥å…¨ let g:ycm_complete_in_strings = 1 \u0026#34; åœ¨å­—ç¬¦ä¸²è¾“å…¥ä¸­ä¹Ÿèƒ½è¡¥å…¨ let g:ycm_collect_identifiers_from_comments_and_strings = 1 \u0026#34; æ³¨é‡Šå’Œå­—ç¬¦ä¸²ä¸­çš„æ–‡å­—ä¹Ÿä¼šè¢«æ”¶å…¥è¡¥å…¨ let g:ycm_global_ycm_extra_conf=\u0026#39;~/.vim/bundle/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\u0026#39; let g:ycm_show_diagnostics_ui = 0 \u0026#34; ç¦ç”¨è¯­æ³•æ£€æŸ¥ inoremap \u0026lt;expr\u0026gt; \u0026lt;CR\u0026gt; pumvisible() ? \u0026#34;\\\u0026lt;C-y\u0026gt;\u0026#34; : \u0026#34;\\\u0026lt;CR\u0026gt;\u0026#34; | \u0026#34; å›è½¦å³é€‰ä¸­å½“å‰é¡¹ nnoremap \u0026lt;c-j\u0026gt; :YcmCompleter GoToDefinitionElseDeclaration\u0026lt;CR\u0026gt;| \u0026#34; è·³è½¬åˆ°å®šä¹‰å¤„ \u0026#34;let g:ycm_min_num_of_chars_for_completion=2 \u0026#34; ä»ç¬¬2ä¸ªé”®å…¥å­—ç¬¦å°±å¼€å§‹ç½—åˆ—åŒ¹é…é¡¹ let g:ycm_global_ycm_extra_conf = \u0026#34;~/.vim/plugged/YouCompleteMe/third_party/ycmd/cpp/ycm/.ycm_extra_conf.py\u0026#34; \u0026#34;\u0026#34; airline let laststatus = 2 let g:airline_powerline_fonts = 1 let g:airline_theme = \u0026#34;dark\u0026#34; let g:airline#extensions#tabline#enabled = 1 \u0026#34;\u0026#34; vim-monokai \u0026#34; colorscheme monokai \u0026#34;\u0026#34; vim-markdown \u0026#34; Githubé£æ ¼markdownè¯­æ³• let g:vim_markdown_no_extensions_in_markdown = 1 \u0026#34;\u0026#34; vim-cpp-enhanced-highlight let g:cpp_class_scope_highlight = 1 let g:cpp_member_variable_highlight = 1 let g:cpp_class_decl_highlight = 1 let g:cpp_experimental_template_highlight = 1 \u0026#34; è‡ªå®šä¹‰errorå’Œwarningå›¾æ ‡ let g:ale_sign_error = \u0026#39;âœ—\u0026#39; let g:ale_sign_warning = \u0026#39;âš¡\u0026#39; \u0026#34; æ˜¾ç¤ºLinteråç§°,å‡ºé”™æˆ–è­¦å‘Šç­‰ç›¸å…³ä¿¡æ¯ let g:ale_echo_msg_error_str = \u0026#39;E\u0026#39; let g:ale_echo_msg_warning_str = \u0026#39;W\u0026#39; let g:ale_echo_msg_format = \u0026#39;[%linter%] %s [%severity%]\u0026#39; \u0026#34;è®¾ç½®çŠ¶æ€æ æ˜¾ç¤ºçš„å†…å®¹,è¿™é‡Œå¿…é¡»æ·»åŠ %{ALEGetStatusLine()åˆ°çŠ¶æ€æ é‡Œ \u0026#34;è®¾ç½®aleæ˜¾ç¤ºå†…å®¹ let g:ale_statusline_format = [\u0026#39;âœ— %d\u0026#39;, \u0026#39;âš¡ %d\u0026#39;, \u0026#39;âœ” OK\u0026#39;] \u0026#34; å¯¹verilogã€c++ã€cã€pythonå•ç‹¬è®¾ç½®linter let g:ale_linters = { \u0026#39;verilog\u0026#39;: [\u0026#39;vlog\u0026#39;], \\ \u0026#39;c++\u0026#39;: [\u0026#39;clangd\u0026#39;], \\ \u0026#39;c\u0026#39;: [\u0026#39;gcc\u0026#39;], \\ \u0026#39;python\u0026#39;: [\u0026#39;pylint\u0026#39;], \\} let g:ale_lint_on_text_changed = 1 let g:ale_set_loclist = 0 let g:ale_set_quickfix = 1 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147 ### 4.å®‰è£…æ’ä»¶ 1. `terminal`ä¸­è¾“å…¥`vim`å‘½ä»¤ ```shell ~$ vim 1 ``` 2. è¿›å…¥åˆ°`vim`ä¸­åè¾“å…¥ `:PluginInstall`å‘½ä»¤å®‰è£…æ’ä»¶ ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°|896x380](https://i-blog.csdnimg.cn/blog_migrate/202ddbf2db6df5e70f6c61e8a6f460d5.png#pic_center) å®‰è£…å®Œæˆï¼Œå¦‚ä¸‹å¦‚å›¾æ‰€ç¤º![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°|896x565](https://i-blog.csdnimg.cn/blog_migrate/46f0869ad5ca4dea443ca02ea332ad23.png) ### 5.è‡ªåŠ¨è¡¥å…¨æ’ä»¶`YouCompleteMe`çš„é…ç½® è¿›è¡Œåˆ°è¿™ä¸€æ­¥ï¼Œ`vim`åŸºæœ¬å·²ç»é…ç½®å·®ä¸å¤šå•¦ï¼Œæœ€åæ¥è¿›è¡Œè‡ªåŠ¨è¡¥å…¨çš„é…ç½®ã€‚ æ­¤æ—¶æ‰“å¼€`vim`åº•éƒ¨ä¼šå‡ºç°`YCM`çš„æŠ¥é”™ï¼Œç°åœ¨æ¥è§£å†³ã€‚ 1. å®‰è£…`python3`ã€`python3-dev` ```shell ~$ sudo apt install python3 python3-dev 1 ``` 2. æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤(ä½¿ç”¨ç»å¯¹**è·¯å¾„**) ```shell ~$ /usr/bin/python3 ~/.vim/bundle/YouCompleteMe/install.py --all --verbose 1 ``` ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°|941x467](https://i-blog.csdnimg.cn/blog_migrate/c8be7d097bcb6146355e49d50bf4eb1c.png) 3. å‡ºç°å¦‚ä¸‹ç•Œé¢è¡¨ç¤ºæˆåŠŸ ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://i-blog.csdnimg.cn/blog_migrate/2da9fc504429d48438de34df1a0d87f1.png) NoExtraConfDetected: No .ycm_extra_conf.py file detected, so no compile flags are available. Thus no semantic support for C/C++/ObjC... ","date":"2024-10-09","externalUrl":null,"permalink":"/posts/%E9%85%8D%E7%BD%AEvim%E4%B8%8B%E7%9A%84c_c++%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/","section":"Posts","summary":"","title":"é…ç½®vimä¸‹çš„c_c++å¼€å‘ç¯å¢ƒ","type":"posts"},{"content":"","date":"2024-09-27","externalUrl":null,"permalink":"/tags/debian/","section":"Tags","summary":"","title":"Debian","type":"tags"},{"content":"","date":"2024-09-27","externalUrl":null,"permalink":"/tags/win/","section":"Tags","summary":"","title":"Win","type":"tags"},{"content":" ç¯å¢ƒï¼š\nå¼€å¯Hyper-V æ§åˆ¶é¢æ¿-\u0026gt;ç¨‹åº-\u0026gt;æ·»åŠ æˆ–å…³é—­åŠŸèƒ½ è®¾ç½®wslç‰ˆæœ¬ wsl --set-default-version 2 ç¡®ä¿WSL2æ ¸å¿ƒå®‰è£… WSL2æ ¸å¿ƒå‡çº§åŒ… æ¢æºï¼š\næ¢æºè„šæœ¬ bash \u0026lt;(curl -sSL https://linuxmirrors.cn/main.sh)\nsudo vi /etc/apt/sources.list æŒ‰escé”®ï¼Œè¿›å…¥æ™®é€šæ¨¡å¼ æŒ‰ggé”®ï¼Œå…‰æ ‡ç§»åˆ°é¦–è¡Œ æŒ‰væˆ–Vé”®ï¼Œè¿›å…¥å¯è§†æ¨¡å¼ æŒ‰Gé”®ï¼Œå…‰æ ‡ç§»åˆ°æœ€åä¸€è¡Œï¼Œé€‰ä¸­æ•´ä¸ªæ–‡ä»¶å†…å®¹ æŒ‰dé”®ï¼Œåˆ é™¤é€‰ä¸­çš„å†…å®¹ sudo apt update -y sudo apt install apt-transport-https ca-certificates sudo apt update -y \u0026amp;\u0026amp; sudo apt upgrade -y è®¾ç½®ä¸­æ–‡\nå®‰è£…è¯­è¨€åŒ… sudo apt-get -y install locales xfonts-intl-chinese fonts-wqy-microhei è¯­è¨€ç¯å¢ƒè®¾ç½® sudo dpkg-reconfigure locales é™„åŠ è„šæœ¬ # win11å®¶åº­ç‰ˆ å¼€å¯Hyper-VåŠŸèƒ½ ä»¥ä¸‹è„šæœ¬ä¿å­˜ä¸ºbatæ–‡ä»¶ï¼Œç®¡ç†å‘˜èº«ä»½è¿è¡Œ pushd \u0026#34;%~dp0\u0026#34; dir /b %SystemRoot%\\servicing\\Packages\\*Hyper-V*.mum \u0026gt;hyper-v.txt for /f %%i in (\u0026#39;findstr /i . hyper-v.txt 2^\u0026gt;nul\u0026#39;) do dism /online /norestart /add-package:\u0026#34;%SystemRoot%\\servicing\\Packages\\%%i\u0026#34; del hyper-v.txt Dism /online /enable-feature /featurename:Microsoft-Hyper-V -All /LimitAccess /ALL pause å¤–éƒ¨é“¾æ¥ # å¯å‚è€ƒ Windowsç³»ç»Ÿé€šè¿‡WSL2å®‰è£…Ubuntu22.04ç³»ç»ŸåŠå›¾å½¢åŒ–ç•Œé¢_wsl2 ubuntu å›¾å½¢ç•Œé¢-CSDNåšå®¢ ","date":"2024-09-27","externalUrl":null,"permalink":"/posts/%E8%AE%B0win11%E5%AE%89%E8%A3%85wsl2%E5%8F%8Adebian%E7%9A%84%E9%85%8D%E7%BD%AE/","section":"Posts","summary":"","title":"è®°ï¼šwin11å®‰è£…WSL2åŠDebiançš„é…ç½®","type":"posts"},{"content":" 2019-2022 HP39Giiç¨‹åºæ—¥å¿— # NAME DATE INFO Link BLib 2022.1.19 å¸¦ç®€å•å‹ç¼©æœºåˆ¶çš„å›¾åƒä¿å­˜è¯»å–ç¨‹åºï¼Œæ•ˆç‡ä¸å›¾åƒå¤æ‚æ€§æˆæ­£æ¯”ã€‚ HP39GIIç¨‹åº-å›¾åƒå¤„ç†åº“ BLib BPoint 2022.1.19 ç®€å•çš„ç»˜å›¾ç¨‹åºï¼Œè‡ªå®šä¹‰å®½é«˜ï¼Œç®€æ˜“guiï¼Œè°ƒç”¨BLibä¿å­˜è¯»å–å›¾åƒã€‚ HP39GIIç¨‹åº-ç»˜å›¾ BPoint HcBoy 2022.1.1 ç«æŸ´äººå§¿åŠ¿æ¨¡æ‹Ÿï¼Œä¸Šä¸€éƒ¨ä½å§¿åŠ¿çš„ä¼ é€’å’Œä¸€å®šèŒƒå›´å†…çš„éšæœºã€‚ HP39GIIç¨‹åº-é€’å½’å®ç°ç«æŸ´äººæ¨¡æ‹Ÿ HCBoy MyW 2022.1.1 ç®€å•çš„å¤šæ’æ˜Ÿå•ä½“æ¨¡æ‹Ÿï¼Œå¯ç”Ÿæˆé€Ÿåº¦å˜åŒ–ä¿¡æ¯ï¼Œå ç”¨L1ï¼Œä½¿ç”¨GG(X)å‡½æ•°æŸ¥çœ‹ã€‚ HP39GIIç¨‹åº-ç®€å•çš„å¤šæ’æ˜Ÿå•ä½“æ¨¡æ‹Ÿ MyW æ¶ˆæ¶ˆæ´› 2022.1.1 è¯´æ˜¯æ¶ˆæ¶ˆä¹å…¶å®æ›´åƒæ¶ˆç­æ˜Ÿæ˜Ÿï¼Œæœç´¢ç›¸è¿åŒç±»æ–¹å—è¿ç”¨è¿­ä»£ç®—æ³•ï¼Œå›¾åƒç»˜åˆ¶è°ƒç”¨BLibã€‚ HP39GIIæ¸¸æˆ-æ¶ˆæ¶ˆæ´› FIRE2 2022.1.1 [The Fire] çš„å‡çº§ç‰ˆã€‚åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦å’ŒåŠ¨é‡å®ˆæ’çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿï¼Œå¯æ¨¡æ‹Ÿåœ†å½¢è½¨é“æ›²çº¿è¿åŠ¨ï¼Œå¯è‡ªå®šä¹‰åœ°å›¾ã€‚ HP39GIIç¨‹åº-ç‰›é¡¿åŠ›å­¦å•è´¨ç‚¹äº¤äº’æ¨¡æ‹Ÿ FIRE2 è‡ªåŠ¨æœº 2022.1.1 æ ¹æ®å¯†åº¦æ§åˆ¶é€Ÿåº¦çš„ç®€å•çƒŸé›¾æ¨¡æ‹Ÿã€‚ è‡ªåŠ¨æœº2å· 2022.1.1 æ ¹æ®å¯†åº¦(0-8)è‡ªå®šä¹‰æ–¹å‘è§„åˆ™((3 * 3)^9) çš„è‡ªåŠ¨æœºã€‚ å‹‡è€…ä¹‹è·¯ 2022.1.1 æ¨ªç‰ˆè·‘é…·ç±»æ¸¸æˆã€‚ æ˜¯ç”·äººå°±åšæŒ100ç§’ 2022.1.1 çºµå‘è·‘é…·æ¸¸æˆï¼Œå ç”¨L3ã€‚ å¼‚æ¬¡å…ƒæ€é˜µ 2022.1.1 æ–‡å­—æ¸¸æˆï¼Œç”µå½±[å¿ƒæ…Œæ–¹]ã€‚ æ˜Ÿé™…è¿·èˆª 2022.1.1 æ–‡å­—æ¸¸æˆï¼ŒèƒŒæ™¯è‡ªè®¾ã€‚ è´ªåƒè›‡ 2022.1.1 åˆ©ç”¨getpix()è¯­æ³•çš„ç®€å•çš„è´ªåƒè›‡ã€‚ The Fire 2022.1.1 åŸºäºç»å…¸ç‰›é¡¿åŠ›å­¦çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿ,è‡ªå¸¦å¤šä¸ªæ¨¡å¼ã€‚ HP39GIIç¨‹åº-ç‰›é¡¿åŠ›å­¦çš„è´¨ç‚¹è¿åŠ¨æ¨¡æ‹Ÿ TheFIre The 1896 2022.1.1 ç®€å•çš„æ‰“é£æœºæ¸¸æˆã€‚ SSB 2022.1.1 ç®€å•çš„è¯­æ³•åˆæˆå™¨ï¼Œæ”¯æŒä¸»è°“å®¾å®šã€‚ small3D 2022.1.1 ç®€å•çš„3Då¼•æ“ï¼Œæ”¯æŒç§»åŠ¨å’Œè§†è§’è½¬æ¢ã€‚ PPT 2022.1.1 ç»å…¸æ¸¸æˆ[æ³¡æ³¡å ‚],å¯åŠ è½½è‡ªå®šä¹‰åœ°å›¾ï¼Œå·²å®Œæˆåœºæ™¯ã€ç‚¸å¼¹ç®¡ç†ã€AIã€çˆ†ç‚¸æ•ˆæœï¼Œä¾èµ–BLibã€‚ HP39GIIæ¸¸æˆ-ç»å…¸æ¸¸æˆæ³¡æ³¡å ‚ PPT PPTAD 2022.1.1 PPTçš„åŸºç¡€å‡½æ•°ã€‚ PPT_EDIT 2022.1.1 PPTçš„åœ°å›¾ç¼–è¾‘å™¨ï¼Œä¾èµ–BLibã€‚ PEACE0.1 2022.1.1 åƒé¸¡æ¨¡æ‹Ÿå™¨ï¼Œè´´å›¾ç•Œé¢å®Œç¾ï¼Œä¾èµ–BLibã€‚ HP39GIIæ¸¸æˆ-åƒé¸¡æ¨¡æ‹Ÿå™¨ PEACE0.1 Live_Game_1D 2022.1.1 ä¸€ç»´ç”Ÿå‘½æ¸¸æˆã€‚ ELS2021 2022.1.1 ä¿„ç½—æ–¯æ–¹å—ï¼Œæ·»åŠ ç‚¸å¼¹ã€‚ HP39GIIæ¸¸æˆ-ä¿„ç½—æ–¯æ–¹å— ELS2021 ELS_Addons 2022.1.1 [ELS2021] çš„åŸºç¡€å‡½æ•°ã€‚ DNATEST\\DNATEST2 2022.1.1 è‡ªå®šä¹‰è§„åˆ™(DNA 2*256=512)çš„äºŒç»´ç»†èƒè‡ªåŠ¨æœºã€‚ JG 2022.1.19 è§’è°·çŒœæƒ³ï¼Œè¾“å…¥åˆå§‹å€¼ï¼Œè¾“å‡ºè¿­ä»£æ¬¡æ•°ã€‚ FuckT 2022.1.19 å«æ˜Ÿå‘¨æœŸæ¨¡æ‹Ÿã€‚ æ‰“å­—ç»ƒä¹  2022.1.19 æ•…åæ€æ„ã€‚ TYT 2022.1.19 è·³ä¸€è·³ï¼Œæ˜¼å¤œåˆ‡æ¢ã€‚ TScor 2022.1.19 èµ‹åˆ†ç³»ç»Ÿã€‚ MyLinux 2022.1.19 ç®€å•çš„ç»ˆç«¯æ¨¡æ‹Ÿï¼Œæœ‰ç”¨æˆ·æƒé™ç³»ç»Ÿã€‚ HP39GIIç¨‹åº-ç®€å•çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ My_Linux é€ƒç¦»è‹±æ‰ 2022.1.19 æ–‡å­—æ¸¸æˆï¼Œå’Œè‚¥è‚ è€è´¹å›½ç‚³çš„æ­£é¢å¯¹åˆšã€‚ SSW 2022.2.3 é£Ÿç‰©ç½‘æ¨¡æ‹Ÿï¼Œæœ‰è¿›åŒ–æœºåˆ¶å¯»æ‰¾æœ€ä¼˜è§£ã€‚ -2022 2022.2.3 å‡ æ¶æˆ˜æ–—æœºã€‚ ALIVE 2022.2.3 æ­£å®—ç”Ÿå‘½æ¸¸æˆã€‚ BtWorld 2022.6.1 ä¸Šå¸è§†è§’å‰§æƒ…å‘æ¢ç´¢ç”Ÿå­˜æ¸¸æˆå˜é’›ä¸–ç•Œï¼Œéšæœºç§å­ç”Ÿæˆä¸–ç•Œï¼Œæœ‰å°åœ°å›¾ï¼Œæœ‰ç›¸æœºç”»é¢æ»šåŠ¨æ•ˆæœã€‚è°ƒç”¨BtAddã€BLibã€BTextã€‚ HP39GIIæ¸¸æˆ-ä¸Šå¸è§†è§’å‰§æƒ…å‘æ¢ç´¢ç”Ÿå­˜æ¸¸æˆå˜é’›ä¸–ç•Œ BtWorld BtAdd 2022.6.1 [BtWorld] çš„åŸºç¡€å‡½æ•°ã€‚ BText 2022.6.1 è‡ªåŠ¨æ¢è¡Œçš„æ–‡æœ¬æ˜¾ç¤ºã€‚ SCO 2022.6.1 å¸¦æŒ‡é’ˆè¡¨ç›˜çš„ä»¿çœŸè®¡æ—¶å™¨ã€‚ Small3D2 2022.7.15 [Small3D] çš„å‡çº§ç‰ˆæœ¬ï¼ŒåŸºäºé¡¶ç‚¹å…±äº«çš„æ•°æ®ç»“æ„ï¼Œä½¿ç”¨å†…éƒ¨å˜é‡l1(é¡¶ç‚¹åºåˆ—) l2(çº¿æ®µ) l0(ä¸´æ—¶é¡¶ç‚¹åºåˆ—)ã€‚ B3DModel2 2022.7.5 ç”¨äº[Small3D2] çš„æ¨¡å‹åˆ›å»ºã€‚ å†™åœ¨æœ€å è°¨ä»¥æ­¤è¡¨çºªå¿µé«˜ä¸­ä¸‰å¹´ä¸Hp39giiåº¦è¿‡çš„æ—¶å…‰\n","date":"2024-09-19","externalUrl":null,"permalink":"/posts/hp-calc/hp39gii-2019-2022/","section":"Posts","summary":"2019-2022å¹´æœŸé—´ä¸ªäººç¼–å†™çš„HP39GIIç¨‹åºæ—¥å¿—","title":"2019-2022 HP39Giiç¨‹åºæ—¥å¿—","type":"posts"},{"content":" æ ç›®æ€»è¯´æ˜ # HP-39GS # HP-39GSï¼ˆä»£å·ï¼šF2223Aï¼‰æ˜¯HP-39G+çš„è¿›ä¸€æ­¥æ”¹è¿›ç‰ˆæœ¬ï¼Œäº2006å¹´6æœˆå‘å¸ƒã€‚\nç¡¬ä»¶ä¿¡æ¯ # CPUï¼šä¸‰æ˜ŸS3C2410Xï¼Œ75MHzï¼ŒARMæ¶æ„ è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡é‡‡ç”¨äº†ARMæ¶æ„çš„å¤„ç†å™¨ï¼Œç„¶è€ŒHP-39GSçš„æ“ä½œç³»ç»Ÿå’Œç¨‹åºä»ç„¶æ˜¯Saturnæ¶æ„çš„\u0026mdash;è¿™å—ARMå¤„ç†å™¨å®é™…ä¸Šæ˜¯åœ¨è¿è¡Œä¸€ä¸ªSaturnæ¨¡æ‹Ÿå™¨ã€‚è¿™ç§æ–¹å¼æå¤§åœ°æµªè´¹äº†ç¡¬ä»¶æ€§èƒ½ï¼Œå¯¼è‡´è®¡ç®—å™¨è¿è¡Œç¼“æ…¢\u0026mdash;å³ä¾¿æ˜¯åƒå¯¹æ•´æ•°å¼€å¹³æ–¹æ ¹è¿™ç§ç®€å•è¿ç®—ä¹Ÿå¾€å¾€éœ€è¦è¶…è¿‡0.3ç§’æ‰èƒ½å®Œæˆã€‚\nRAMï¼š256KB\nå±å¹•ï¼š131 * 64åˆ†è¾¨ç‡ï¼Œé»‘ç™½æ¶²æ™¶å±å¹•\né€šè®¯ï¼šUSBæ¥å£ï¼Œå¹¶é‡æ–°å¯ç”¨çº¢å¤–é€šè®¯å’ŒRS232ä¸²å£é€šè®¯åŠŸèƒ½\nä¾›ç”µï¼š4èŠ‚AAAç”µæ± ä½œä¸ºä¸»ç”µæ± ï¼Œä¸€æšCR2032ç”µæ± ä½œä¸ºè®°å¿†ä¿æŠ¤ç”µæ± \nç‰¹è‰²åŠŸèƒ½ï¼šèœ‚é¸£å™¨å’Œç®€å•çš„ä»£æ•°è¿ç®—åŠŸèƒ½ è¯¥æœºé‡‡ç”¨äº†å¯åˆ·å†™çš„ROMï¼Œç”¨æˆ·å¯ä»¥å¯¹è®¡ç®—å™¨çš„æ“ä½œç³»ç»Ÿè¿›è¡Œå‡çº§ã€‚\nHP-39GSé™„èµ ä¿æŠ¤ç›–ã€‚\nHP-39GII # HP-39GIIï¼ˆä»£å·ï¼šNW249AAï¼‰æ˜¯HP-39GSçš„å¤§å¹…åº¦æ”¹è¿›ç‰ˆæœ¬ï¼ˆ\u0026lsquo;\u0026lsquo;\u0026lsquo;ç„¶è€Œï¼Œè®¡ç®—åŠŸèƒ½ä¸Šå¹¶æ²¡æœ‰å®è´¨ä¸Šçš„æ”¹è¿›\u0026rsquo;\u0026rsquo;\u0026rsquo;)ï¼Œäº2011å¹´10æœˆå‘å¸ƒã€‚\nHP-39GIIå…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š\né‡‡ç”¨äº†80MHzçš„é£æ€å¡å°”å¤„ç†å™¨ï¼ˆARMæ¶æ„ï¼‰ï¼Œå¹¶é‡‡ç”¨äº†ä¸ºé€‚åº”ARMæ¶æ„è€Œå…¨æ–°è®¾è®¡çš„æ“ä½œç³»ç»Ÿï¼Œä¸å†ä»¥Saturnæ¨¡æ‹Ÿå™¨æ–¹å¼è¿è¡Œï¼Œæå¤§åœ°æé«˜äº†è¿ç®—é€Ÿåº¦ï¼› ROMå®¹é‡å¤§å¹…å¢åŠ è‡³128MBï¼ˆå…¶ä¸­ç”¨æˆ·å¯ç”¨ç©ºé—´ä¸º80-105MBï¼‰ï¼› é‡‡ç”¨ç°é˜¶æ¶²æ™¶æ˜¾ç¤ºå±ï¼Œåˆ†è¾¨ç‡å¢åŠ åˆ°256 * 127åƒç´ ï¼› æ“ä½œç³»ç»Ÿå¸¦æœ‰å…¨ä¸­æ–‡ç•Œé¢ã€‚ ç¡¬ä»¶ä¿¡æ¯ # CPUï¼šé£æ€å¡å°”å¤„ç†å™¨ï¼Œ80MHzï¼ŒARMæ¶æ„ è¯¥æœºå·²ä¸å†é‡‡ç”¨Saturnæ¨¡æ‹Ÿå™¨ï¼Œå› æ­¤è¿è¡Œæ•ˆç‡è¿œé«˜äºå‰å‡ ä»£HP-39ç³»åˆ—äº§å“ã€‚\nRAMï¼š256KB ROMï¼š128MBï¼ˆå…¶ä¸­ç”¨æˆ·å¯ç”¨ç©ºé—´ä¸º80-105MBï¼‰ å±å¹•ï¼š256 * 127åˆ†è¾¨ç‡ï¼Œç°é˜¶æ¶²æ™¶å±å¹• é€šè®¯ï¼šMini-USBæ¥å£-ï¼ï¼çº¢å¤–é€šè®¯å’Œä¸²å£é€šè®¯åŠŸèƒ½è¢«å»æ‰ è¯¥æœºé‡‡ç”¨äº†å¯åˆ·å†™çš„ROMï¼Œç”¨æˆ·å¯ä»¥å¯¹è®¡ç®—å™¨çš„æ“ä½œç³»ç»Ÿè¿›è¡Œå‡çº§ï¼Œå¹¶å¯åœ¨ROMå†…å­˜å‚¨ç”¨æˆ·æ•°æ®ã€‚ ä¸æ­¤åŒæ—¶ï¼ŒHP-39GIIæ— èœ‚é¸£å™¨ã€‚\nåˆ†äº«ä¸€ç‚¹ç‚¹è‡ªå·±å†™çš„ä»£ç  # ::: Blibï¼šä¸€ä¸ªå¸¦ç®€å•å‹ç¼©ç®—æ³•çš„å›¾åƒä¿å­˜å’ŒåŠ è½½åº“ï¼Œå¯ä»¥å°†2bitè‰²æ·±çš„ç°åº¦å›¾åƒä¿å­˜ä¸ºå­—ç¬¦ç¼–ç ã€‚ :::info æŠ€æœ¯ç»†èŠ‚ ä½¿ç”¨ä¸¤æ®µæ–‡æœ¬åŒºåŸŸåˆ†åˆ«ä¿å­˜å¯å‹ç¼©å›¾åƒå’Œä¸å¯å‹ç¼©å›¾åƒï¼Œå¯å‹ç¼©å›¾åƒå¯¹åº”å­—ç¬¦åŒºåŸŸåç§»é‡1000ï¼Œä¸å¯å‹ç¼©å›¾åƒå¯¹åº”å­—ç¬¦åŒºåŸŸåç§»é‡200ï¼› å›¾åƒä¿å­˜é¡ºåºä¸ºæ°´å¹³æ‰«æï¼Œæ¯4åƒç´ ä¸ºä¸€ç»„ï¼Œä¸å¤Ÿ4åƒç´ ç©ºä½æ›¿ä»£ï¼Œæ¯ç»„éœ€è¦2^4=16bitï¼Œæ­£å¥½æ˜¯hp39giiçš„æ–‡æœ¬ç¼–ç (Unicode 16)å­˜å‚¨ä¸€ä¸ªå­—ç¬¦æ‰€éœ€çš„ä½å¤§å°ã€‚ æ‰«æè¿‡ç¨‹ä¸­å¯¹äºè¶…è¿‡4åƒç´ çš„è¿ç»­ä¸ºä¸€ä¸ªé¢œè‰²çš„åƒç´ æ¡(è¿ç»­çš„ä¸€åˆ—åƒç´ )ï¼Œå°†ä¿å­˜ä¸ºå‹ç¼©æ ¼å¼ï¼Œé•¿åº¦æœ€é•¿ä¸º64ã€‚ åœ¨è¯»å–æ—¶ï¼Œå¯¹äºä¸å¯å‹ç¼©å›¾åƒé‡‡ç”¨PIXON_På‡½æ•°é€åƒç´ ç‚¹ç»˜åˆ¶ï¼Œå¯¹äºå¯å‹ç¼©å›¾åƒé‡‡ç”¨LINE_På‡½æ•°ä¸€æ¬¡æ€§ç»˜åˆ¶ã€‚\nå®æµ‹è¯»å–å›¾åƒå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šé€Ÿåº¦è¾ƒå¿«ï¼ˆç›¸æ¯”LsLibï¼‰\nBlibä»£ç  # EXPORT BLOAD(G,X,Y,d) BEGIN LOCAL D,Dl:=dim(d(3)),N,I,Px:=X,Py:=Y,c,ch; //2021.12.10 BLOAD(Grob,StartX,StartY,Data) //d:={Width,Hight,Data} FOR D FROM 1 TO Dl DO TRACE(asc(mid(d(3),D,1)))â–ºch; IF châ‰¥1000 THEN ch:=ch-1000;N:=ch MOD 64;c:=(ch-N)*.015625; LINE_P(G,Px,Py,Px+N,Py,c); ELSE ch:=ch-200; IF Px+3â‰¥X+d(1) THEN X+d(1)-Px-1â–ºN; ELSE 3â–ºN; END; FOR I FROM 0 TO N DO ch MOD4â–ºc;.25*(ch-c)â–ºch;PIXON_P(G,Px+I,Py,c); END; END; Px+N+1â–ºPx; IF Pxâ‰¥X+d(1) THEN Py+1â–ºPy;Xâ–ºPx;END; END; END; EXPORT BSAVE(G,X,Y,W,H) BEGIN //2021.12.8 //LINE 1000Start 64Pix //PIX 4Pix 4Color LOCAL N,I,Px,Py,c,ch:=\u0026#34;\u0026#34;; FOR Py FROM Y TO Y+H-1 DO Xâ–ºPx; WHILE Px+1â‰¤X+W DO GETPIX_P(G,Px,Py)â–ºc; FOR N FROM 1 TO 64 DO IF GETPIX_P(G,Px+N,Py)â‰ c OR Px+Nâ‰¥X+W OR N=64 THEN IF Nâ‰¤4 THEN IF Px+N\u0026lt;X+W THEN 4â–ºN;END; FOR I FROM 1 TO N-1 DO c:=c+4^I*GETPIX_P(G,Px+I,Py); END; ch:=ch+char(200+c); ELSE ch:=ch+char(1000+64*c+N-1); END; Px:=Px+N;BREAK; END;//IF END;//N END;//Px END;//Py RETURN {W,H,ch}; END; //{32,32,\u0026#34;Ó‡Ò²Ï²Ò±Ò°Ï¶Ò¯Ò¯Ï²Æ½Æ»Ò¬Ò­Ä˜Ä˜Ğ¬Ò­Æ¸Ä‡Ò¬Å„ÆŸÒ³Æ‰Ä‡Ç‡Å„Ò¸Ã‰Ä‡Ç‡Å„Ò·Ã‰Ç„Ä‡Æ§Ò·Ã‰Æ¸Æ—Æ¿Ò·Ã‰ÆˆÆ—Æ¿Ò¸ÃÄ¸Æ»Æ§Ò¹Ã‰ÃˆÆ»Ä§Å‡Ò¬Ç…Æ‹Ã‰ÃˆÆ»Ã§Ã¥Å…Ä¥ÆÏ¯Æ»Ã§Å…Æ‹Ò¬Ç„Ï®Æ»Ä§Ä‡Ã”Æ¸Æ»Ã‹ÃˆÆ›Å‡Æ—Ò­ÆˆÃ‹Ï­Ä‹Ò­Ç„Ò¯Ï±Ã‹Ç…Ä‡Ò²Ï°Ã‹Æ¼Ä‡Ò±Ï±Ã‹Ä˜ÇÃ¸Ò­Ï±Ã‹Ï¬Ç…Ã£Ò¬Ï±Ã—Ï¬Ç…Ã¾Ç‡ÆˆÏ­Ã‹Ã—Ï­Å…Ã¼Ã”Ã”Ï¬Ã‹Ä‡Ï®Ã‘Æ¼ÃŒÏ®Ã—Ç‡Ï¯Ã‰Å…Ï­Ã‹Ã—Ç‡Ï´ÃÃˆÃ‹Ä‡Ò¬Ï´Ã‰Ã¸Æ¸Ã—Ò­Ï²Ã™Ã”Æ¸Ä‡Ò¯Ï°Ã‹Ã‹Ò®Ò°Ï°Ã‹Æ¸Ò­Ò²Ï²Ò±\u0026#34;} ","date":"2024-09-19","externalUrl":null,"permalink":"/posts/hp-calc/hp_calc_info/","section":"Posts","summary":"","title":"hp_calc æ ç›®æ€»è¯´æ˜","type":"posts"},{"content":"Blibï¼šä¸€ä¸ªå¸¦ç®€å•å‹ç¼©ç®—æ³•çš„å›¾åƒä¿å­˜å’ŒåŠ è½½åº“ï¼Œå¯ä»¥å°†2bitè‰²æ·±çš„ç°åº¦å›¾åƒä¿å­˜ä¸ºå­—ç¬¦ç¼–ç ã€‚\n:::info æŠ€æœ¯ç»†èŠ‚\nä½¿ç”¨ä¸¤æ®µæ–‡æœ¬åŒºåŸŸåˆ†åˆ«ä¿å­˜å¯å‹ç¼©å›¾åƒå’Œä¸å¯å‹ç¼©å›¾åƒï¼Œå¯å‹ç¼©å›¾åƒå¯¹åº”å­—ç¬¦åŒºåŸŸåç§»é‡1000ï¼Œä¸å¯å‹ç¼©å›¾åƒå¯¹åº”å­—ç¬¦åŒºåŸŸåç§»é‡200ï¼› å›¾åƒä¿å­˜é¡ºåºä¸ºæ°´å¹³æ‰«æï¼Œæ¯4åƒç´ ä¸ºä¸€ç»„ï¼Œä¸å¤Ÿ4åƒç´ ç©ºä½æ›¿ä»£ï¼Œæ¯ç»„éœ€è¦2^4=16bitï¼Œæ­£å¥½æ˜¯hp39giiçš„æ–‡æœ¬ç¼–ç (Unicode 16)å­˜å‚¨ä¸€ä¸ªå­—ç¬¦æ‰€éœ€çš„ä½å¤§å°ã€‚ æ‰«æè¿‡ç¨‹ä¸­å¯¹äºè¶…è¿‡4åƒç´ çš„è¿ç»­ä¸ºä¸€ä¸ªé¢œè‰²çš„åƒç´ æ¡(è¿ç»­çš„ä¸€åˆ—åƒç´ )ï¼Œå°†ä¿å­˜ä¸ºå‹ç¼©æ ¼å¼ï¼Œé•¿åº¦æœ€é•¿ä¸º64ã€‚ åœ¨è¯»å–æ—¶ï¼Œå¯¹äºä¸å¯å‹ç¼©å›¾åƒé‡‡ç”¨PIXON_På‡½æ•°é€åƒç´ ç‚¹ç»˜åˆ¶ï¼Œå¯¹äºå¯å‹ç¼©å›¾åƒé‡‡ç”¨LINE_På‡½æ•°ä¸€æ¬¡æ€§ç»˜åˆ¶ã€‚\nå®æµ‹è¯»å–å›¾åƒå¹¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šé€Ÿåº¦è¾ƒå¿«ï¼ˆç›¸æ¯”LsLibï¼‰ ::: EXPORT BLOAD(G,X,Y,d) BEGIN LOCAL D,Dl:=dim(d(3)),N,I,Px:=X,Py:=Y,c,ch; //2021.12.10 BLOAD(Grob,StartX,StartY,Data) //d:={Width,Hight,Data} FOR D FROM 1 TO Dl DO TRACE(asc(mid(d(3),D,1)))â–ºch; IF châ‰¥1000 THEN ch:=ch-1000;N:=ch MOD 64;c:=(ch-N)*.015625; LINE_P(G,Px,Py,Px+N,Py,c); ELSE ch:=ch-200; IF Px+3â‰¥X+d(1) THEN X+d(1)-Px-1â–ºN;ELSE 3â–ºN;END; FOR I FROM 0 TO N DO ch MOD4â–ºc;.25*(ch-c)â–ºch;PIXON_P(G,Px+I,Py,c); END; END; Px+N+1â–ºPx; IF Pxâ‰¥X+d(1) THEN Py+1â–ºPy;Xâ–ºPx;END; END; END; EXPORT BSAVE(G,X,Y,W,H) BEGIN //2021.12.8 //LINE 1000Start 64Pix //PIX 4Pix 4Color LOCAL N,I,Px,Py,c,ch:=\u0026#34;\u0026#34;; FOR Py FROM Y TO Y+H-1 DO Xâ–ºPx; WHILE Px+1â‰¤X+W DO GETPIX_P(G,Px,Py)â–ºc; FOR N FROM 1 TO 64 DO IF GETPIX_P(G,Px+N,Py)â‰ c OR Px+Nâ‰¥X+W OR N=64 THEN IF Nâ‰¤4 THEN IF Px+N\u0026lt;X+W THEN 4â–ºN;END; FOR I FROM 1 TO N-1 DO c:=c+4^I*GETPIX_P(G,Px+I,Py);END; ch:=ch+char(200+c); ELSE ch:=ch+char(1000+64*c+N-1);END; Px:=Px+N;BREAK; END;//IF END;//N END;//Px END;//Py RETURN {W,H,ch}; END; //{32,32,\u0026#34;Ó‡Ò²Ï²Ò±Ò°Ï¶Ò¯Ò¯Ï²Æ½Æ»Ò¬Ò­Ä˜Ä˜Ğ¬Ò­Æ¸Ä‡Ò¬Å„ÆŸÒ³Æ‰Ä‡Ç‡Å„Ò¸Ã‰Ä‡Ç‡Å„Ò·Ã‰Ç„Ä‡Æ§Ò·Ã‰Æ¸Æ—Æ¿Ò·Ã‰ÆˆÆ—Æ¿Ò¸ÃÄ¸Æ»Æ§Ò¹Ã‰ÃˆÆ»Ä§Å‡Ò¬Ç…Æ‹Ã‰ÃˆÆ»Ã§Ã¥Å…Ä¥ÆÏ¯Æ»Ã§Å…Æ‹Ò¬Ç„Ï®Æ»Ä§Ä‡Ã”Æ¸Æ»Ã‹ÃˆÆ›Å‡Æ—Ò­ÆˆÃ‹Ï­Ä‹Ò­Ç„Ò¯Ï±Ã‹Ç…Ä‡Ò²Ï°Ã‹Æ¼Ä‡Ò±Ï±Ã‹Ä˜ÇÃ¸Ò­Ï±Ã‹Ï¬Ç…Ã£Ò¬Ï±Ã—Ï¬Ç…Ã¾Ç‡ÆˆÏ­Ã‹Ã—Ï­Å…Ã¼Ã”Ã”Ï¬Ã‹Ä‡Ï®Ã‘Æ¼ÃŒÏ®Ã—Ç‡Ï¯Ã‰Å…Ï­Ã‹Ã—Ç‡Ï´ÃÃˆÃ‹Ä‡Ò¬Ï´Ã‰Ã¸Æ¸Ã—Ò­Ï²Ã™Ã”Æ¸Ä‡Ò¯Ï°Ã‹Ã‹Ò®Ò°Ï°Ã‹Æ¸Ò­Ò²Ï²Ò±\u0026#34;} ç‚¹å‡»ä¸‹è½½\n","date":"2024-09-19","externalUrl":null,"permalink":"/posts/hp-calc/blib/","section":"Posts","summary":"ä¸€ä¸ªå¸¦ç®€å•å‹ç¼©ç®—æ³•çš„å›¾åƒä¿å­˜å’ŒåŠ è½½åº“","title":"HP39GIIç¨‹åº-å›¾åƒå¤„ç†åº“ BLib","type":"posts"},{"content":"","date":"2024-09-19","externalUrl":null,"permalink":"/category/%E4%B8%BB%E9%A2%98/","section":"Category","summary":"","title":"ä¸»é¢˜","type":"category"},{"content":" è®¾å¤‡ æ—¶é—´ å¤„ç†å™¨ ä¸»é¢‘ GAMEBOY 1989.4 Z-80 4.19Mhz GAMEBOY COLOR 1998.10 Z-80 4/8Mhz GAMEBOY ADVANCE 2001.3 ARM-7 17.78Mhz HP39GS 2006 ä¸‰æ˜ŸS3C2410X 75MHz On Saturn Emulator HP39GII 2011.10 é£æ€å¡å°” STMP3770 80Mhz Ti Nspire TouchPad 2010.3 Arma5tej 120Mhz TI82 1993 Z80 6Mhz ","date":"2024-03-31","externalUrl":null,"permalink":"/posts/cpu%E5%A4%A7%E6%9D%82%E7%83%A9/","section":"Posts","summary":"","title":"CPUå¤§æ‚çƒ©","type":"posts"},{"content":"","date":"2024-03-31","externalUrl":null,"permalink":"/tags/note/","section":"Tags","summary":"","title":"Note","type":"tags"},{"content":"","externalUrl":null,"permalink":"/posts/archives/","section":"Posts","summary":"","title":"archives","type":"posts"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"}]